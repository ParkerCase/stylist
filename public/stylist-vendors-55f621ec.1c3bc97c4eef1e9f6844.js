"use strict";(self.webpackChunkStylistWidget=self.webpackChunkStylistWidget||[]).push([[7060],{8697:function(t,n,e){e.d(n,{N:function(){return r}});var o=e(18765),i=e(92394),s=e(28560);class r{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=s.tT.DOWNLOAD;const n=(0,o.B)();this.outputShape=t,this.userCode=`\n      ${i.G2}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${n.output} = encode_float(x);\n      }\n    `}}},24187:function(t,n,e){e.d(n,{C:function(){return a}});var o=e(18765),i=e(22792),s=e(92394);const r={R:0,G:1,B:2,A:3};class a{constructor(t,n=!1,e="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const a=(0,o.B)();this.outputShape=t,this.enableShapeUniforms=(0,i.ik)(this.outputShape.length);let u="result";n&&(u="floor(result * 255. + 0.5)");let c="";for(let o=0;o<e.length;o++){const t=e[o];c+=`\n          if(offset == ${o}) {\n            result = values[${r[t]}];\n          }`}this.userCode=`\n      ${this.enableShapeUniforms?s.Od():s.fM(t)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${e.length});\n\n        flatIndex = idiv(flatIndex, ${e.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${a.texture2D}(A, uv);\n          ${c}\n        }\n        ${a.output} = vec4(${u}, 0., 0., 0.);\n      }\n    `}}},32068:function(t,n,e){e.d(n,{e:function(){return o}});class o{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}},34673:function(t,n,e){e.d(n,{x:function(){return o}});class o{constructor(t,n,e){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=e,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${n};\n      int offset_h = imod(h, ${n});\n      int in_w = w / ${n};\n      int offset_w = imod(w, ${n});\n      int offset_d = (offset_h * ${n} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}},35368:function(t,n,e){e.d(n,{$:function(){return r}});var o=e(18765),i=e(92394),s=e(28560);class r{constructor(t){this.variableNames=["A"],this.outTexUsage=s.tT.DOWNLOAD;const n=(0,o.B)();this.outputShape=t,this.userCode=`\n      ${i.G2}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${n.output} = encode_float(x);\n      }\n    `}}},52939:function(t,n,e){e.d(n,{A:function(){return r}});var o=e(18765),i=e(22792),s=e(92394);class r{constructor(t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const e=(0,o.B)();this.outputShape=t,this.enableShapeUniforms=(0,i.ik)(this.outputShape.length);let r="",a="result";n&&(a="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let n=0;n<=1;n++){const i=2*o+n;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${n} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {\n          localCoords[2] += ${n};\n          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {\n            localCoords[1] += ${o};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${e.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${i}] = values[0];\n            } else if (offset == 1) {\n              result[${i}] = values[1];\n            } else if (offset == 2) {\n              result[${i}] = values[2];\n            } else {\n              result[${i}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?s.Od():s.fM(t)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${e.output} = ${a};\n        }\n    `}}},54499:function(t,n,e){e.d(n,{K:function(){return a}});var o=e(18765),i=e(22792),s=e(92394),r=e(28560);class a{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=r.BB.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=(0,o.B)();this.outputShape=t,this.enableShapeUniforms=(0,i.ik)(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?s.WA(["r","c","d"],t):s.UG(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${n.output} = result;\n      }\n    `}}},78576:function(t,n,e){e.d(n,{S:function(){return a}});var o=e(18765),i=e(22792),s=e(92394),r=e(28560);class a{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=r.BB.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=(0,o.B)();this.outputShape=t,this.enableShapeUniforms=(0,i.ik)(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?s.WA(["r","c","d"],t):s.UG(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${n.output} = result;\n      }\n    `}}},79229:function(t,n,e){e.d(n,{x:function(){return o}});class o{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:n,inWidth:e,padInfo:o,strideHeight:i,strideWidth:s,filterHeight:r,filterWidth:a,dilationHeight:u,dilationWidth:c}=t,{top:h,left:d}=o;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${s});\n      const ivec2 pads = ivec2(${h}, ${d});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${r}; h++) {\n          int hIn = hBeg + h * ${u};\n\n          if (hIn >= 0 && hIn < ${n}) {\n            for (int w = 0; w < ${a}; w++) {\n              int wIn = wBeg + w * ${c};\n\n              if (wIn >= 0 && wIn < ${e}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}}}]);
//# sourceMappingURL=stylist-vendors-55f621ec.1c3bc97c4eef1e9f6844.js.map
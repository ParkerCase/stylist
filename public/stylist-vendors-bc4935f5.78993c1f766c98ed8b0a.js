"use strict";(self.webpackChunkStylistWidget=self.webpackChunkStylistWidget||[]).push([[9542],{2171:function(n,t,e){e.d(t,{V:function(){return o}});var s=e(75694),i=e(27575);class o{constructor(n,t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,e)=>t[0]+n[e]+t[1]));const o=n.length,u=(0,i.bf)(o),a=t.map((n=>n[0])).join(","),r=t.map(((t,e)=>t[0]+n[e])).join(","),c=(0,s.Jp)("rc",o),l=(0,s.Jp)("source",o),d=`${c[o-1]} < ${this.outputShape[o-1]}`,$=1===o?"source":`vec2(${l.slice(-2).join()})`,h="reflect"===e?0:1;let p="";if(1===o){const n=`\n        ${u} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${h};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${h};\n        }\n        source -= start;\n      `;p=`\n        ${u} rc = outputLoc;\n        ${n}\n        result[0] = getChannel(getX(${l.join()}), ${$});\n        ${c[o-1]} += 1;\n        if(${d}) {\n          ${n}\n          result[1] = getChannel(getX(${l.join()}), ${$});\n        }\n      `}else{const n=`\n        ${u} source = rc;\n        ${u} lt = ${u}(lessThan(source, start));\n        ${u} gte = ${u}(greaterThanEqual(source, end));\n        ${u} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${h}) +\n                gte * ((end - 1) * 2 - source + ${h});\n        source -= start;\n      `;p=`\n        ${u} rc = outputLoc;\n        ${n}\n        result[0] = getChannel(getX(${l.join()}), ${$});\n        ${c[o-1]} += 1;\n        if(${d}) {\n          ${n}\n          result[1] = getChannel(getX(${l.join()}), ${$});\n        }\n        rc = outputLoc;\n        ${c[o-2]} += 1;\n        if(${c[o-2]} < ${this.outputShape[o-2]}) {\n          ${n}\n          result[2] = getChannel(getX(${l.join()}), ${$});\n          ${c[o-1]} += 1;\n          if(${d}) {\n            ${n}\n            result[3] = getChannel(getX(${l.join()}), ${$});\n          }\n        }\n      `}this.userCode=`\n      const ${u} start = ${u}(${a});\n      const ${u} end = ${u}(${r});\n\n      void main() {\n        ${u} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}},26608:function(n,t,e){e.d(t,{O:function(){return s}});class s{constructor(n,t,e){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[n,e],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}},51554:function(n,t,e){e.d(t,{X:function(){return i}});var s=e(27575);class i{constructor(n,t,e){this.variableNames=["x"],this.outputShape=t.map(((t,e)=>t[0]+n[e]+t[1]));const i=n.length,o=(0,s.bf)(i),u=t.map((n=>n[0])).join(","),a=t.map(((t,e)=>t[0]+n[e])).join(","),r=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c="reflect"===e?0:1;this.userCode=1!==i?`\n      ${o} start = ${o}(${u});\n      ${o} end = ${o}(${a});\n\n      void main() {\n        ${o} outC = getOutputCoords();\n        for (int i = 0; i < ${i}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${c};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};\n          }\n        }\n        ${o} coords = outC - start;\n        setOutput(getX(${r}));\n      }\n    `:`\n        int start = ${u};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${c};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${c};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}},63288:function(n,t,e){e.d(t,{P:function(){return i}});var s=e(22792);class i{constructor(n,t,e,i=!1,o=!1,u=!1,a=null,r=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=(0,s.ik)(this.outputShape.length);const l=i?n[1]:n[2],d=Math.ceil(l/2),$=i?"i * 2, rc.y":"rc.y, i * 2",h=o?"rc.z, i * 2":"i * 2, rc.z",p=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",g="";a&&(v=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${a}\n        }`:c?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${a}\n        }`:`vec4 activation(vec4 x) {\n          ${a}\n        }`,g="result = activation(result);");const b=u?"result += getBiasAtOutCoords();":"";u&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let x="rc.x",C="rc.x";n[0]<t[0]?x=`imod(rc.x, ${n[0]})`:t[0]<n[0]&&(C=`imod(rc.x, ${t[0]})`),this.userCode=`\n      ${v}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${d}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${x};\n        int batchB = ${C};\n        for (int i = 0; i < ${d}; i++) {\n          vec4 a = getMatrixA(batchA, ${$});\n          vec4 b = getMatrixB(batchB, ${h});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${p[0]} * ${f[0]});\n          result += (${p[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${b}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}}},89486:function(n,t,e){e.d(t,{C:function(){return i}});var s=e(9495);class i{constructor(n,t){this.variableNames=["x"];const{windowSize:e,batchSize:i,inSize:o,outSize:u}=n;this.outputShape=[i,u];const a=4*Math.floor(e/4),r=e%4;let c="sumValue += dot(values, ones);";if(null!=t){const n=1/t;c=`sumValue += dot(values * ${s.util.isInt(n)?n.toPrecision(2):n}, ones);`}let l="";o%e>0&&(l=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${l}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${e};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${c}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===r}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${c}\n        } else if (${2===r}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${c}\n        } else if (${3===r}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${c}\n        }\n        setOutput(sumValue);\n      }\n    `}}},94804:function(n,t,e){e.d(t,{M:function(){return s}});class s{constructor(n,t,e,s){this.variableNames=["indices"],this.outputShape=[n,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${s}), float(${e}),\n                      float(index == coords.y)));\n      }\n    `}}}}]);
//# sourceMappingURL=stylist-vendors-bc4935f5.78993c1f766c98ed8b0a.js.map
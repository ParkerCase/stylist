"use strict";(self.webpackChunkStylistWidget=self.webpackChunkStylistWidget||[]).push([[9723],{18520:function(t,e,n){n.d(e,{$2:function(){return _},$A:function(){return C},L:function(){return I},MZ:function(){return L},Ph:function(){return F},Yu:function(){return S},aO:function(){return A},bo:function(){return v},k1:function(){return x},kP:function(){return M},zJ:function(){return U}});var a=n(9495),r=n(92737),u=n(23470),s=n(6439),o=n(49050),c=n(76411),i=n(56841),p=n(42998),l=n(50139),f=n(29593),d=n(58308),m=n(77684),h=n(83177),g=n(69437),y=n(83235),N=n(34418),b=n(66845),D=n(74749),j=n(9929),k=n(21374),T=n(67546),w=n(39647),E=n(38095),V=n(48287).hp;class v{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[].concat(...[o,c,i,p,l,f,d,m,h,g,y,N,b,D,j,k,T,w,E].map((t=>t.json)));this.opMappers=t.reduce(((t,e)=>(t[e.tfOpName]=e,t)),{})}transformGraph(t,e={}){const n=t.node,a=[],r=[],u=[],o=n.reduce(((t,e)=>(t[e.name]=this.mapNode(e),e.op.startsWith("Placeholder")?a.push(t[e.name]):"Const"===e.op?r.push(t[e.name]):null!=e.input&&0!==e.input.length||u.push(t[e.name]),t)),{});let c=[];const i=[];let p={},l={};null!=e&&(p=this.mapSignatureEntries(e.inputs),l=this.mapSignatureEntries(e.outputs));const f=Object.keys(o);f.forEach((t=>{const e=o[t];e.inputNames.forEach(((t,n)=>{const[a,,r]=(0,s.lz)(t),u=o[a];if(null!=u.outputs){const t=u.outputs.indexOf(r);if(-1!==t){const r=`${a}:${t}`;e.inputNames[n]=r}}e.inputs.push(u),u.children.push(e)}))})),0===Object.keys(l).length?f.forEach((t=>{const e=o[t];0===e.children.length&&i.push(e)})):Object.keys(l).forEach((t=>{const[e]=(0,s.lz)(t),n=o[e];null!=n&&(n.signatureKey=l[t],i.push(n))})),Object.keys(p).length>0?Object.keys(p).forEach((t=>{const[e]=(0,s.lz)(t),n=o[e];n&&(n.signatureKey=p[t],c.push(n))})):c=a;let d={};null!=t.library&&null!=t.library.function&&(d=t.library.function.reduce(((t,e)=>(t[e.signature.name]=this.mapFunction(e),t)),{}));const m={nodes:o,inputs:c,outputs:i,weights:r,placeholders:a,signature:e,functions:d};return u.length>0&&(m.initNodes=u),m}mapSignatureEntries(t){return Object.keys(t||{}).reduce(((e,n)=>(e[t[n].name]=n,e)),{})}mapNode(t){const e=(0,u._e)(t.op)||this.opMappers[t.op]||{};null==t.attr&&(t.attr={});const n={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map((t=>t.startsWith("^")?t.slice(1):t)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:e.outputs};return null!=e.inputs&&(n.inputParams=e.inputs.reduce(((t,e)=>(t[e.name]={type:e.type,inputIndexStart:e.start,inputIndexEnd:e.end},t)),{})),null!=e.attrs&&(n.attrParams=e.attrs.reduce(((e,n)=>{const a=n.type;let r;switch(n.type){case"string":r=_(t.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=_(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":r=M(t.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=M(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":r=I(t.attr,n.tfName,n.defaultValue||0),void 0===r&&n.tfDeprecatedName&&(r=I(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":r=L(t.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=L(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":r=A(t.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=A(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":r=U(t.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=U(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":r=x(t.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=x(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":r=F(t.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=F(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":r=S(t.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=S(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":r=C(t.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=C(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":r=z(t.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=z(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${t.op}`)}return e[n.name]={value:r,type:a},e}),{})),n}mapFunction(t){const e=t.nodeDef,n=[];let a={};null!=e&&(a=e.reduce(((t,e)=>(t[e.name]=this.mapNode(e),"Const"===e.op&&n.push(t[e.name]),t)),{}));const r=[],u=[];t.signature.inputArg.forEach((t=>{const[e]=(0,s.lz)(t.name),n={name:e,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:P(t.type),type:"dtype"}},children:[]};n.signatureKey=t.name,r.push(n),a[e]=n}));Object.keys(a).forEach((t=>{const e=a[t];e.inputNames.forEach(((t,n)=>{const[r,,u]=(0,s.lz)(t),o=a[r];if(null!=o.outputs){const t=o.outputs.indexOf(u);if(-1!==t){const a=`${r}:${t}`;e.inputNames[n]=a}}e.inputs.push(o),o.children.push(e)}))}));const o=t.ret;t.signature.outputArg.forEach((t=>{const[e,n]=(0,s.lz)(o[t.name]),r=a[e];null!=r&&(r.defaultOutput=n,u.push(r))}));const c=this.mapArgsToSignature(t);return{nodes:a,inputs:r,outputs:u,weights:n,placeholders:[],signature:c}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce(((t,e)=>(t[e.name]=this.mapArgToTensorInfo(e),t)),{}),outputs:t.signature.outputArg.reduce(((e,n)=>(e[n.name]=this.mapArgToTensorInfo(n,t.ret),e)),{})}}mapArgToTensorInfo(t,e){let n=t.name;return null!=e&&(n=e[n]),{name:n,dtype:t.type}}}function O(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):function(t){const e=(0,a.env)().global;if("undefined"!==typeof e.atob)return e.atob(t);if("undefined"!==typeof V)return new V(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return e?n:n.toLowerCase()}function _(t,e,n,a=!1){const r=t[e];return null!=r?O(r.s,a):n}function A(t,e,n){const a=t[e];return a?a.b:n}function I(t,e,n){const a=t[e]||{},r=null!=a.i?a.i:null!=a.f?a.f:n;return"number"===typeof r?r:parseInt(r,10)}function P(t){switch("string"===typeof t&&(t=r.p[t]),t){case r.p.DT_FLOAT:case r.p.DT_HALF:return"float32";case r.p.DT_INT32:case r.p.DT_INT64:case r.p.DT_INT8:case r.p.DT_UINT8:return"int32";case r.p.DT_BOOL:return"bool";case r.p.DT_DOUBLE:return"float32";case r.p.DT_STRING:return"string";case r.p.DT_COMPLEX64:case r.p.DT_COMPLEX128:return"complex64";default:return null}}function z(t,e,n){const a=t[e];return a&&a.func?a.func.name:n}function S(t,e,n){const a=t[e];return a&&a.type?P(a.type):n}function C(t,e,n){const a=t[e];return a&&a.list&&a.list.type?a.list.type.map((t=>P(t))):n}function $(t){if(!t.unknownRank)return null!=t.dim?t.dim.map((t=>"number"===typeof t.size?t.size:parseInt(t.size,10))):[]}function x(t,e,n){const a=t[e];return a&&a.shape?$(a.shape):n}function L(t,e,n){const a=t[e];return a?((a.list.f&&a.list.f.length?a.list.f:a.list.i)||[]).map((t=>"number"===typeof t?t:parseInt(t,10))):n}function M(t,e,n,a=!1){const r=t[e];return r&&r.list&&r.list.s?r.list.s.map((t=>O(t,a))):n}function F(t,e,n){const a=t[e];return a&&a.list&&a.list.shape?a.list.shape.map((t=>$(t))):n}function U(t,e,n){const a=t[e];return a&&a.list&&a.list.b?a.list.b:n}},79856:function(t,e,n){n.d(e,{j:function(){return V}});var a=n(9495),r=n(19162),u=n(23470),s=n(82682),o=n(40833),c=n(1523),i=n(85438),p=n(36065),l=n(16343),f=n(18828),d=n(80052),m=n(4967),h=n(61447),g=n(39849),y=n(13358),N=n(10051),b=n(26512),D=n(12315),j=n(55659),k=n(7714),T=n(5070),w=n(41557),E=n(74477);function V(t,e,n,V,v=a.tidy){const O=((t,e,n)=>{switch(t.category){case"arithmetic":return v((()=>s.j(t,e,n)));case"basic_math":return v((()=>o.j(t,e,n)));case"control":return c.j(t,e,n);case"convolution":return v((()=>i.j(t,e,n)));case"creation":return v((()=>p.j(t,e,n)));case"dynamic":return l.j(t,e,n);case"evaluation":return v((()=>f.j(t,e,n)));case"image":return v((()=>h.j(t,e,n)));case"graph":return v((()=>d.j(t,e,n)));case"logical":return v((()=>g.j(t,e,n)));case"matrices":return v((()=>y.j(t,e,n)));case"normalization":return v((()=>N.j(t,e,n)));case"ragged":return v((()=>b.j(t,e,n)));case"reduction":return v((()=>D.j(t,e,n)));case"slice_join":return v((()=>j.j(t,e,n)));case"sparse":return v((()=>k.j(t,e,n)));case"spectral":return v((()=>T.j(t,e,n)));case"string":return v((()=>w.j(t,e,n)));case"transformation":return v((()=>E.j(t,e,n)));case"hash_table":return m.j(t,e,n,V);case"custom":const a=(0,u._e)(t.op);if(a&&a.customExecutor)return a.customExecutor(new r.I(t,e,n));throw TypeError(`Custom op ${t.op} is not registered.`);default:throw TypeError(`Unknown op '${t.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return a.util.isPromise(O)?O.then((t=>[].concat(t))):[].concat(O)}},96820:function(t,e,n){n.d(e,{r:function(){return a}});const a="4.22.0"}}]);
//# sourceMappingURL=stylist-vendors-ef10862d.0d4b5e583cf2c8f50c2a.js.map
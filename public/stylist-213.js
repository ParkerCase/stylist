"use strict";(self.webpackChunkStylistWidget=self.webpackChunkStylistWidget||[]).push([[213],{721:function(e,t,s){s.d(t,{j:function(){return u}});var i=s(1621),n=s(7134),d=s(5730),a=s(8463);const r={preferredBackgroundRemovalMethod:d._n.TENSORFLOW,removeBackgroundAutomatically:!0,showGuidelines:!0,highQualityRendering:!0,defaultGarmentScale:{[d.Nu.TOP]:.8,[d.Nu.BOTTOM]:.7,[d.Nu.DRESS]:.9,[d.Nu.OUTERWEAR]:.85,[d.Nu.SHOES]:.5,[d.Nu.ACCESSORY]:.4},defaultGarmentOffset:{[d.Nu.TOP]:{x:0,y:-50},[d.Nu.BOTTOM]:{x:0,y:100},[d.Nu.DRESS]:{x:0,y:0},[d.Nu.OUTERWEAR]:{x:0,y:-30},[d.Nu.SHOES]:{x:0,y:200},[d.Nu.ACCESSORY]:{x:0,y:-150}}},u=(0,i.vt)()((0,n.lt)((0,n.Zr)(((e,t)=>({currentOutfit:null,userImage:null,isLoading:!1,error:null,settings:r,savedResults:[],canvasWidth:600,canvasHeight:800,isTryOnModalOpen:!1,isUploadModalOpen:!1,setCurrentOutfit:t=>{e({currentOutfit:t})},addGarmentToOutfit:s=>{const{currentOutfit:i}=t();if(i){const t=i.garments.filter((e=>!(e.type===s.type&&e.bodyPosition===s.bodyPosition)));e({currentOutfit:Object.assign(Object.assign({},i),{garments:[...t,s]})})}else{const t={id:`outfit_${Date.now()}`,garments:[s],createdAt:new Date};e({currentOutfit:t})}},removeGarmentFromOutfit:s=>{const{currentOutfit:i}=t();if(i){const t=i.garments.filter((e=>e.id!==s));e({currentOutfit:Object.assign(Object.assign({},i),{garments:t})})}},updateGarment:(s,i)=>{const{currentOutfit:n}=t();if(n){const t=n.garments.map((e=>e.id===s?Object.assign(Object.assign({},e),i):e));e({currentOutfit:Object.assign(Object.assign({},n),{garments:t})})}},setUserImage:s=>{e({userImage:s});const{currentOutfit:i}=t();if(i){const t=s;e({currentOutfit:Object.assign(Object.assign({},i),{userImage:t})})}},updateUserImage:s=>{const{userImage:i}=t();if(i){const n=Object.assign(Object.assign({},i),s);e({userImage:n});const{currentOutfit:d}=t();d&&e({currentOutfit:Object.assign(Object.assign({},d),{userImage:n})})}},clearUserImage:()=>{e({userImage:null});const{currentOutfit:s}=t();if(s){const t=Object.assign(Object.assign({},s),{userImage:void 0});e({currentOutfit:t})}},updateOutfit:s=>{const{currentOutfit:i}=t();i&&e({currentOutfit:Object.assign(Object.assign({},i),s)})},setSettings:s=>{e({settings:Object.assign(Object.assign({},t().settings),s)})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},saveResult:s=>{const i=[...t().savedResults],n=i.findIndex((e=>e.id===s.id));n>=0?i[n]=s:i.push(s),e({savedResults:i})},deleteSavedResult:s=>{const i=t().savedResults.filter((e=>e.id!==s));e({savedResults:i})},setCanvasDimensions:(t,s)=>{e({canvasWidth:t,canvasHeight:s})},openTryOnModal:()=>{e({isTryOnModalOpen:!0})},closeTryOnModal:()=>{e({isTryOnModalOpen:!1})},openUploadModal:()=>{e({isUploadModalOpen:!0})},closeUploadModal:()=>{e({isUploadModalOpen:!1})},reset:()=>{e({currentOutfit:null,userImage:null,isLoading:!1,error:null})},startNewTryOn:(s,i)=>{const{settings:n}=t(),d=t().currentOutfit||{id:crypto.randomUUID(),garments:[],createdAt:new Date},r={id:crypto.randomUUID(),type:i,url:"string"==typeof s?s:URL.createObjectURL(s),bodyPosition:(0,a.f8)(i),zIndex:d.garments.length+1,layerIndex:d.garments.length,scale:n.defaultGarmentScale[i]||1,offset:n.defaultGarmentOffset[i]||{x:0,y:0},rotation:0,withoutBackground:!0},u=[...d.garments||[],r];e({currentOutfit:Object.assign(Object.assign({},d),{garments:u})})},tryOnOutfit:t=>{e({currentOutfit:t})}})),{name:"stylist-try-on-storage",partialize:e=>({settings:e.settings,savedResults:e.savedResults})}),{name:"try-on-store"}))},800:function(e,t,s){s.d(t,{F6:function(){return i}});const i=()=>{if(!(()=>{const e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}})())return`anonymous_${Date.now()}`;let e=localStorage.getItem("stylist_user_id");return e||(e=`user_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,localStorage.setItem("stylist_user_id",e)),e}},2026:function(e,t,s){s.d(t,{k:function(){return u}});var i=s(1621),n=s(7134),d=s(800);const a=e=>Array.from(e),r=e=>new Set(e),u=(0,i.vt)()((0,n.Zr)(((e,t)=>({likedItems:new Set,dislikedItems:new Set,likedOutfits:new Set,dislikedOutfits:new Set,thumbsUpMessages:new Set,feedbackHistory:[],pendingSync:[],isSyncing:!1,lastSyncedAt:null,addItemFeedback:(t,s)=>{const i=(0,d.F6)(),n=new Date,a={id:`item_${s}_${t}_${n.getTime()}`,type:s,timestamp:n,entityType:"item",metadata:{itemId:t,userId:i}};e("like"===s?e=>({likedItems:new Set(e.likedItems).add(t),dislikedItems:new Set(e.dislikedItems).delete(t)?new Set(e.dislikedItems):e.dislikedItems,feedbackHistory:[...e.feedbackHistory,a],pendingSync:[...e.pendingSync,a]}):e=>({dislikedItems:new Set(e.dislikedItems).add(t),likedItems:new Set(e.likedItems).delete(t)?new Set(e.likedItems):e.likedItems,feedbackHistory:[...e.feedbackHistory,a],pendingSync:[...e.pendingSync,a]}))},addOutfitFeedback:(t,s)=>{const i=(0,d.F6)(),n=new Date,a={id:`outfit_${s}_${t}_${n.getTime()}`,type:s,timestamp:n,entityType:"outfit",metadata:{outfitId:t,userId:i}};e("like"===s?e=>({likedOutfits:new Set(e.likedOutfits).add(t),dislikedOutfits:new Set(e.dislikedOutfits).delete(t)?new Set(e.dislikedOutfits):e.dislikedOutfits,feedbackHistory:[...e.feedbackHistory,a],pendingSync:[...e.pendingSync,a]}):e=>({dislikedOutfits:new Set(e.dislikedOutfits).add(t),likedOutfits:new Set(e.likedOutfits).delete(t)?new Set(e.likedOutfits):e.likedOutfits,feedbackHistory:[...e.feedbackHistory,a],pendingSync:[...e.pendingSync,a]}))},addMessageThumbsUp:t=>{const s=(0,d.F6)(),i=new Date,n={id:`message_thumbsUp_${t}_${i.getTime()}`,type:"thumbsUp",timestamp:i,entityType:"recommendation",metadata:{messageId:t,userId:s}};e((e=>({thumbsUpMessages:new Set(e.thumbsUpMessages).add(t),feedbackHistory:[...e.feedbackHistory,n],pendingSync:[...e.pendingSync,n]})))},removeItemFeedback:t=>{e((e=>({likedItems:new Set(e.likedItems).delete(t)?new Set(e.likedItems):e.likedItems,dislikedItems:new Set(e.dislikedItems).delete(t)?new Set(e.dislikedItems):e.dislikedItems})))},removeOutfitFeedback:t=>{e((e=>({likedOutfits:new Set(e.likedOutfits).delete(t)?new Set(e.likedOutfits):e.likedOutfits,dislikedOutfits:new Set(e.dislikedOutfits).delete(t)?new Set(e.dislikedOutfits):e.dislikedOutfits})))},removeMessageThumbsUp:t=>{e((e=>({thumbsUpMessages:new Set(e.thumbsUpMessages).delete(t)?new Set(e.thumbsUpMessages):e.thumbsUpMessages})))},markAsSynced:t=>{e((e=>({pendingSync:e.pendingSync.filter((e=>!t.includes(e.id))),lastSyncedAt:new Date})))},setIsSyncing:t=>{e({isSyncing:t})},getItemFeedbackStatus:e=>{const s=t();return{liked:s.likedItems.has(e),disliked:s.dislikedItems.has(e)}},getOutfitFeedbackStatus:e=>{const s=t();return{liked:s.likedOutfits.has(e),disliked:s.dislikedOutfits.has(e)}},isMessageThumbedUp:e=>t().thumbsUpMessages.has(e),getPendingSyncItems:()=>t().pendingSync,clearSyncedItems:()=>{e({pendingSync:[],lastSyncedAt:new Date})}})),{name:"stylist-feedback-storage",partialize:e=>({likedItems:a(e.likedItems),dislikedItems:a(e.dislikedItems),likedOutfits:a(e.likedOutfits),dislikedOutfits:a(e.dislikedOutfits),thumbsUpMessages:a(e.thumbsUpMessages),feedbackHistory:e.feedbackHistory,pendingSync:e.pendingSync,lastSyncedAt:e.lastSyncedAt}),onRehydrateStorage:()=>e=>{e&&(e.likedItems=r(e.likedItems),e.dislikedItems=r(e.dislikedItems),e.likedOutfits=r(e.likedOutfits),e.dislikedOutfits=r(e.dislikedOutfits),e.thumbsUpMessages=r(e.thumbsUpMessages))}}))},4823:function(e,t,s){var i,n;s.d(t,{D$:function(){return n},Go:function(){return i}}),function(e){e.TEXT="text",e.RECOMMENDATION="recommendation",e.OUTFIT="outfit",e.QUIZ="quiz",e.LOADING="loading",e.ERROR="error"}(i||(i={})),function(e){e.USER="user",e.ASSISTANT="assistant",e.SYSTEM="system"}(n||(n={}))},5213:function(e,t,s){s.d(t,{Lo:function(){return a},W0:function(){return u.A},kH:function(){return r.k}});var i=s(1621),n=s(5279),d=s(4823);const a=(0,i.vt)(((e,t)=>({messages:[],isOpen:!0,isMinimized:!1,isLoading:!1,error:null,currentView:"chat",addMessage:t=>{const s=(0,n.A)(),i=new Date,d=Object.assign(Object.assign({},t),{id:s,timestamp:i});return e((e=>({messages:[...e.messages,d]}))),s},addTextMessage:(e,s)=>{const i=s,n={type:d.Go.TEXT,sender:i,text:e};return t().addMessage(n)},updateMessage:(t,s)=>{e((e=>({messages:e.messages.map((e=>e.id===t?Object.assign(Object.assign({},e),s):e))})))},removeMessage:t=>{e((e=>({messages:e.messages.filter((e=>e.id!==t))})))},clearMessages:()=>{e({messages:[]})},toggleOpen:()=>{const s=t().isOpen;e({isOpen:!s,isMinimized:!1})},toggleMinimize:()=>{const s=t().isMinimized;e({isMinimized:!s})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},setCurrentView:t=>{e({currentView:t})},setIsOpen:t=>{e({isOpen:t})}})));var r=s(6890),u=(s(721),s(8054));s(2026)},5730:function(e,t,s){var i,n,d,a;s.d(t,{GS:function(){return d},GT:function(){return n},Nu:function(){return i},_n:function(){return a}}),function(e){e.TOP="top",e.BOTTOM="bottom",e.DRESS="dress",e.OUTERWEAR="outerwear",e.SHOES="shoes",e.ACCESSORY="accessory"}(i||(i={})),function(e){e.UPPER_BODY="upper_body",e.LOWER_BODY="lower_body",e.FULL_BODY="full_body",e.HEAD="head",e.FEET="feet",e.HANDS="hands",e.NECK="neck",e.WAIST="waist"}(n||(n={})),function(e){e.IDLE="idle",e.UPLOADING="uploading",e.PROCESSING="processing",e.REMOVING_BACKGROUND="removing_background",e.COMPLETED="completed",e.FAILED="failed"}(d||(d={})),function(e){e.REMOVE_BG_API="remove_bg_api",e.TENSORFLOW="tensorflow",e.MANUAL="manual"}(a||(a={}))},6890:function(e,t,s){s.d(t,{k:function(){return d}});var i=s(1621),n=s(7134);const d=(0,i.vt)()((0,n.Zr)(((e,t)=>({user:null,styleQuizResult:null,isLoading:!1,error:null,setUser:t=>{e({user:t})},updateUser:s=>{const i=t().user;i&&e({user:Object.assign(Object.assign({},i),s)})},setStyleQuizResult:t=>{e({styleQuizResult:t})},addToCloset:s=>{const i=t().user;i&&e({user:Object.assign(Object.assign({},i),{closet:[...i.closet,s]})})},removeFromCloset:s=>{const i=t().user;i&&e({user:Object.assign(Object.assign({},i),{closet:i.closet.filter((e=>e.id!==s))})})},toggleItemFavorite:(s,i)=>{const n=t().user;n&&e({user:Object.assign(Object.assign({},n),{closet:n.closet.map((e=>e.id===s?Object.assign(Object.assign({},e),{favorite:i}):e))})})},addLikedItem:s=>{const i=t().user;i&&(i.feedback.likedItems.includes(s)||e({user:Object.assign(Object.assign({},i),{feedback:Object.assign(Object.assign({},i.feedback),{likedItems:[...i.feedback.likedItems,s],dislikedItems:i.feedback.dislikedItems.filter((e=>e!==s)),lastInteraction:new Date})})}))},addDislikedItem:s=>{const i=t().user;i&&(i.feedback.dislikedItems.includes(s)||e({user:Object.assign(Object.assign({},i),{feedback:Object.assign(Object.assign({},i.feedback),{dislikedItems:[...i.feedback.dislikedItems,s],likedItems:i.feedback.likedItems.filter((e=>e!==s)),lastInteraction:new Date})})}))},removeLikedItem:s=>{const i=t().user;i&&e({user:Object.assign(Object.assign({},i),{feedback:Object.assign(Object.assign({},i.feedback),{likedItems:i.feedback.likedItems.filter((e=>e!==s)),lastInteraction:new Date})})})},removeDislikedItem:s=>{const i=t().user;i&&e({user:Object.assign(Object.assign({},i),{feedback:Object.assign(Object.assign({},i.feedback),{dislikedItems:i.feedback.dislikedItems.filter((e=>e!==s)),lastInteraction:new Date})})})},addViewedItem:s=>{const i=t().user;i&&(i.feedback.viewedItems.includes(s)||e({user:Object.assign(Object.assign({},i),{feedback:Object.assign(Object.assign({},i.feedback),{viewedItems:[...i.feedback.viewedItems,s],lastInteraction:new Date})})}))},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},logout:()=>{e({user:null,styleQuizResult:null})}})),{name:"stylist-user-storage",partialize:e=>({user:e.user,styleQuizResult:e.styleQuizResult})}))},8054:function(e,t,s){s.d(t,{W:function(){return i}});const i=(0,s(1621).vt)(((e,t)=>({recommendedItems:[],recommendedOutfits:[],savedOutfits:[],wishlistItems:[],cartItems:[],viewedItems:[],context:null,loading:!1,error:null,setRecommendedItems:t=>{e({recommendedItems:t})},setRecommendedOutfits:t=>{e({recommendedOutfits:t})},setSavedOutfits:t=>{e({savedOutfits:t})},addRecommendedItem:t=>{e((e=>({recommendedItems:[...e.recommendedItems,t]})))},addRecommendedOutfit:t=>{e((e=>({recommendedOutfits:[...e.recommendedOutfits,t]})))},addToWishlist:s=>{t().wishlistItems.some((e=>e.itemId===s.itemId))||e((e=>({wishlistItems:[...e.wishlistItems,s]})))},removeFromWishlist:t=>{e((e=>({wishlistItems:e.wishlistItems.filter((e=>e.itemId!==t))})))},addToCart:s=>{const i=t().cartItems.findIndex((e=>e.itemId===s.itemId));e(i>=0?e=>{const t=[...e.cartItems];return t[i].quantity+=s.quantity,{cartItems:t}}:e=>({cartItems:[...e.cartItems,s]}))},removeFromCart:t=>{e((e=>({cartItems:e.cartItems.filter((e=>e.itemId!==t))})))},updateCartItemQuantity:(t,s)=>{e((e=>({cartItems:e.cartItems.map((e=>e.itemId===t?Object.assign(Object.assign({},e),{quantity:s}):e))})))},addViewedItem:s=>{t().viewedItems.includes(s)||e((e=>({viewedItems:[...e.viewedItems,s]})))},saveOutfit:s=>{t().savedOutfits.some((e=>e.outfitId===s.outfitId))||e((e=>({savedOutfits:[...e.savedOutfits,s]})))},removeSavedOutfit:t=>{e((e=>({savedOutfits:e.savedOutfits.filter((e=>e.outfitId!==t))})))},setContext:t=>{e({context:t})},clearRecommendations:()=>{e({recommendedItems:[],recommendedOutfits:[],context:null})},setLoading:t=>{e({loading:t})},setError:t=>{e({error:t})},getItemsByCategory:e=>t().recommendedItems.filter((t=>t.category===e)),getItemsSortedByMatchScore:()=>[...t().recommendedItems].sort(((e,t)=>t.matchScore-e.matchScore)),getOutfitById:e=>t().recommendedOutfits.find((t=>t.id===e)),getItemById:e=>t().recommendedItems.find((t=>t.id===e)),updateItem:(t,s)=>{e((e=>({recommendedItems:e.recommendedItems.map((e=>e.id===t?Object.assign(Object.assign({},e),s):e))})))}})));t.A=i},8463:function(e,t,s){s.d(t,{IM:function(){return d},f8:function(){return n}});var i=s(5730);const n=e=>{switch(e){case i.Nu.TOP:return i.GT.UPPER_BODY;case i.Nu.BOTTOM:return i.GT.LOWER_BODY;case i.Nu.DRESS:return i.GT.FULL_BODY;case i.Nu.OUTERWEAR:return i.GT.UPPER_BODY;case i.Nu.SHOES:return i.GT.FEET;case i.Nu.ACCESSORY:return i.GT.HEAD;default:return i.GT.FULL_BODY}},d=e=>{switch(e){case i.Nu.TOP:return 10;case i.Nu.BOTTOM:return 5;case i.Nu.DRESS:return 10;case i.Nu.OUTERWEAR:return 15;case i.Nu.SHOES:return 5;case i.Nu.ACCESSORY:return 20;default:return 10}}}}]);
//# sourceMappingURL=stylist-213.js.map
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.StylistWidget=t():e.StylistWidget=t()}(self,(function(){return(self.webpackChunkStylistWidget=self.webpackChunkStylistWidget||[]).push([[792],{104:function(e,t,s){"use strict";s.d(t,{zA:function(){return _}});var n=s(5104),o=s(5778),i=s(2505),a=s.n(i),r=function(e,t,s,n){return new(s||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))};const l={items:[{id:"mock1",name:"Classic White T-Shirt",brand:"Essentials",category:"Tops",price:24.99,retailerId:"demo_retailer",colors:["white"],sizes:["S","M","L","XL"],imageUrls:["https://via.placeholder.com/300?text=White+T-Shirt"],url:"#",matchScore:.95,matchReasons:["Versatile staple","Matches your style profile"],inStock:!0},{id:"mock2",name:"Slim Fit Jeans",brand:"DenimCo",category:"Bottoms",price:59.99,retailerId:"demo_retailer",colors:["blue"],sizes:["28","30","32","34"],imageUrls:["https://via.placeholder.com/300?text=Slim+Jeans"],url:"#",matchScore:.92,matchReasons:["Versatile staple","Complements your wardrobe"],inStock:!0},{id:"mock3",name:"Casual Sneakers",brand:"UrbanStep",category:"Shoes",price:79.99,retailerId:"demo_retailer",colors:["white","black"],sizes:["8","9","10","11"],imageUrls:["https://via.placeholder.com/300?text=Sneakers"],url:"#",matchScore:.89,matchReasons:["Comfortable","Versatile footwear"],inStock:!0},{id:"mock4",name:"Oversized Hoodie",brand:"Comfort+",category:"Tops",price:49.99,retailerId:"demo_retailer",colors:["gray","black","blue"],sizes:["S","M","L","XL"],imageUrls:["https://via.placeholder.com/300?text=Hoodie"],url:"#",matchScore:.87,matchReasons:["Casual comfort","Trending style"],inStock:!0}],outfits:[{id:"outfit1",name:"Casual Weekend Look",occasion:"Casual",matchScore:.93,matchReasons:["Perfect for weekends","Easy to style"],items:[{id:"mock1",name:"Classic White T-Shirt",brand:"Essentials",category:"Tops",price:24.99,retailerId:"demo_retailer",colors:["white"],sizes:["S","M","L","XL"],imageUrls:["https://via.placeholder.com/300?text=White+T-Shirt"],url:"#",matchScore:.95,matchReasons:["Versatile staple"],inStock:!0},{id:"mock2",name:"Slim Fit Jeans",brand:"DenimCo",category:"Bottoms",price:59.99,retailerId:"demo_retailer",colors:["blue"],sizes:["28","30","32","34"],imageUrls:["https://via.placeholder.com/300?text=Slim+Jeans"],url:"#",matchScore:.92,matchReasons:["Versatile staple"],inStock:!0},{id:"mock3",name:"Casual Sneakers",brand:"UrbanStep",category:"Shoes",price:79.99,retailerId:"demo_retailer",colors:["white","black"],sizes:["8","9","10","11"],imageUrls:["https://via.placeholder.com/300?text=Sneakers"],url:"#",matchScore:.89,matchReasons:["Comfortable"],inStock:!0}]}]},c=Object.assign(Object.assign({},l),{userId:"mock_user",timestamp:new Date,items:l.items||[],outfits:l.outfits||[]});class d{constructor(e){this.apiClient=e}getRecommendations(e){return r(this,void 0,void 0,(function*(){try{const t=yield this.apiClient.post("/api/v1/recommendations",{userId:e.userId,context:e.context,filterByRetailers:e.filterByRetailers,category:e.category});if(t&&Array.isArray(t.items))return t;const s=t;if(s&&Array.isArray(s.recommended_items))return{userId:e.userId,timestamp:new Date,items:s.recommended_items.map((e=>({id:e.item_id,name:e.name||"",brand:e.brand||"",category:e.category||"",price:e.price||0,retailerId:e.retailer_id?e.retailer_id.split("_")[0]:"",colors:e.colors||[],sizes:e.sizes||[],imageUrls:e.image_urls||[],url:e.url||"#",matchScore:e.score||0,matchReasons:e.match_reasons||[],inStock:!1!==e.in_stock}))),outfits:(s.recommended_outfits||[]).map((e=>({id:e.outfit_id,name:e.name||`Outfit for ${e.occasion||"any occasion"}`,occasion:e.occasion||"",matchScore:e.score||0,matchReasons:e.match_reasons||[],items:e.items.map((e=>{var t;const n=null===(t=s.recommended_items)||void 0===t?void 0:t.find((t=>t.item_id===e));return n?{id:n.item_id,name:n.name||"",brand:n.brand||"",category:n.category||"",price:n.price||0,retailerId:n.retailer_id?n.retailer_id.split("_")[0]:"",colors:n.colors||[],sizes:n.sizes||[],imageUrls:n.image_urls||[],url:n.url||"#",matchScore:n.score||0,matchReasons:n.match_reasons||[],inStock:!1!==n.in_stock}:{id:e,name:"",brand:"",category:"",price:0,imageUrls:[""],retailerId:"",colors:[],sizes:[],url:"",matchScore:0,matchReasons:[],inStock:!0}}))})))};throw new Error("Invalid response format from API")}catch(e){return console.warn("Failed to fetch recommendations from API, using mock data:",e),a().isAxiosError(e)&&e.response&&console.error(`Recommendation API error: ${e.response.status} - ${e.response.statusText}`),c}}))}getOutfitRecommendations(e,t,s){return r(this,void 0,void 0,(function*(){try{const n={};return t&&(n.occasion=t),s&&(n.limit=s.toString()),yield this.apiClient.get(`/api/v1/users/${e}/outfits/recommendations`,{params:n})}catch(e){return console.warn("Failed to fetch outfit recommendations, using mock data:",e),c.outfits}}))}addItemFeedback(e){return r(this,void 0,void 0,(function*(){try{return yield this.apiClient.post(`/api/v1/users/${e.userId}/feedback/items/${e.itemId}`,{liked:e.liked,context:e.context})}catch(e){console.warn("Failed to add item feedback, ignoring:",e)}}))}addOutfitFeedback(e){return r(this,void 0,void 0,(function*(){try{return yield this.apiClient.post(`/api/v1/users/${e.userId}/feedback/outfits/${e.outfitId}`,{liked:e.liked,context:e.context})}catch(e){console.warn("Failed to add outfit feedback, ignoring:",e)}}))}saveOutfit(e){return r(this,void 0,void 0,(function*(){return this.apiClient.post(`/api/v1/users/${e.userId}/outfits`,{outfitId:e.outfitId,items:e.items,name:e.name,notes:e.notes})}))}getSavedOutfits(e){return r(this,void 0,void 0,(function*(){return this.apiClient.get(`/api/v1/users/${e}/outfits`)}))}deleteSavedOutfit(e,t){return r(this,void 0,void 0,(function*(){return this.apiClient.delete(`/api/v1/users/${e}/outfits/${t}`)}))}getSimilarItems(e){return r(this,void 0,void 0,(function*(){return this.apiClient.post("/api/v1/similar-items",e)}))}completeOutfit(e){return r(this,void 0,void 0,(function*(){return this.apiClient.post("/api/v1/complete-outfit",e)}))}logItemView(e,t){return r(this,void 0,void 0,(function*(){return this.apiClient.post(`/api/v1/users/${e}/view-item/${t}`,{})}))}}class u{constructor(e){this.apiClient=e}syncFeedback(e){return t=this,s=void 0,o=function*(){try{return yield this.apiClient.post(`/api/v1/users/${e.userId}/feedback/sync`,{feedbackItems:e.feedbackItems})}catch(e){return console.warn("Failed to sync feedback, will retry later:",e),{syncedItemIds:[],success:!1,message:e instanceof Error?e.message:"Unknown error"}}},new((n=void 0)||(n=Promise))((function(e,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function r(e){try{l(o.throw(e))}catch(e){i(e)}}function l(t){var s;t.done?e(t.value):(s=t.value,s instanceof n?s:new n((function(e){e(s)}))).then(a,r)}l((o=o.apply(t,s||[])).next())}));var t,s,n,o}}var m=s(9283);const p=m.H$,g=m.dL,_=e=>{const t=(0,n.y)({baseURL:e.apiUrl||p,apiKey:e.apiKey,timeout:e.timeout||g,headers:{"X-Retailer-ID":e.retailerId}});return{user:new o.i(t),recommendation:new d(t),feedback:new u(t)}}},109:function(e,t,s){"use strict";s.d(t,{A:function(){return l}});var n=s(4848),o=s(6540),i=s(5819),a=s(6639),r=s(5730),l=({item:e,onFeedback:t,onAddToWishlist:s,onAddToCart:l,onTryOn:c,onFavorite:d,onRemove:u,showDetails:m=!1,primaryColor:p,onClick:g,isClosetItem:_=!1,isFavorite:h=!1})=>{const y=e.id,b=e.name,f=e.brand,E=e.price,C="salePrice"in e?e.salePrice:void 0,v="matchScore"in e?e.matchScore:void 0,I="matchReasons"in e?e.matchReasons:[],S="category"in e?e.category:void 0,[O,w]=(0,o.useState)(null),[T,k]=(0,o.useState)(!1),[x,L]=(0,o.useState)(h),A=_?"image"in e?e.image:"":"imageUrls"in e&&e.imageUrls&&e.imageUrls.length>0?e.imageUrls[0]:"",N=()=>{g?g(e):!_&&"url"in e&&window.open(e.url,"_blank")},j=e=>{t&&(t(y,e),w(e?"Added to your liked items":"Noted - not your style"),k(!0),setTimeout((()=>{k(!1),setTimeout((()=>{w(null)}),300)}),1500))},R=t=>{t.stopPropagation(),c&&c(e)},D=C&&E>0?Math.round((E-C)/E*100):null,P=!!S&&["top","bottom","dress","outerwear","shoes","accessory"].includes(S.toLowerCase());return S?(e=>{const t=e.toLowerCase();t.includes("shirt")||t.includes("top")||t.includes("tee")||t.includes("blouse")?r.Nu.TOP:t.includes("pant")||t.includes("jean")||t.includes("bottom")||t.includes("skirt")||t.includes("short")?r.Nu.BOTTOM:t.includes("dress")?r.Nu.DRESS:t.includes("jacket")||t.includes("coat")||t.includes("sweater")||t.includes("cardigan")||t.includes("hoodie")?r.Nu.OUTERWEAR:t.includes("shoe")||t.includes("sneaker")||t.includes("boot")||t.includes("sandal")?r.Nu.SHOES:t.includes("accessory")||t.includes("hat")||t.includes("bag")||t.includes("jewelry")||t.includes("watch")||t.includes("scarf")?r.Nu.ACCESSORY:r.Nu.TOP})(S):r.Nu.TOP,(0,n.jsxs)("div",Object.assign({className:"stylist-item-card "+(T?"stylist-item-card--animate":"")},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-item-card__image-container",onClick:N},{children:[A?(0,n.jsx)("img",{src:A,alt:b,className:"stylist-item-card__image",loading:"lazy"}):(0,n.jsx)("div",Object.assign({className:"stylist-item-card__image-placeholder"},{children:"No Image"})),D&&(0,n.jsxs)("div",Object.assign({className:"stylist-item-card__discount"},{children:[D,"% OFF"]})),O&&(0,n.jsx)("div",Object.assign({className:"stylist-item-card__feedback-text",style:{backgroundColor:`${p}ee`}},{children:O})),P&&A&&c&&(0,n.jsx)("div",Object.assign({className:"stylist-item-card__try-on-overlay"},{children:(0,n.jsxs)("button",Object.assign({className:"stylist-item-card__try-on-button",onClick:R,style:{backgroundColor:p}},{children:[(0,n.jsx)("span",Object.assign({className:"stylist-item-card__try-on-icon"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}))})),(0,n.jsx)("span",Object.assign({className:"stylist-item-card__try-on-text"},{children:"Try On"}))]}))}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-item-card__content",onClick:N},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-item-card__brand"},{children:f})),(0,n.jsx)("div",Object.assign({className:"stylist-item-card__name"},{children:b})),(0,n.jsx)("div",Object.assign({className:"stylist-item-card__price"},{children:C?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",Object.assign({className:"stylist-item-card__price--sale"},{children:(0,i.$g)(C)})),(0,n.jsx)("span",Object.assign({className:"stylist-item-card__price--original"},{children:(0,i.$g)(E)}))]}):(0,n.jsx)("span",{children:(0,i.$g)(E)})}))]})),m&&I&&I.length>0&&(0,n.jsxs)("div",Object.assign({className:"stylist-item-card__match-reasons"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-item-card__match-score",style:{color:p}},{children:"number"==typeof v?`${Math.round(100*v)}% Match`:"Good Match"})),(0,n.jsx)("ul",Object.assign({className:"stylist-item-card__reason-list"},{children:I.map(((e,t)=>(0,n.jsx)("li",Object.assign({className:"stylist-item-card__reason-item"},{children:e}),t)))}))]})),(0,n.jsx)("div",Object.assign({className:"stylist-item-card__actions"},{children:_?(0,n.jsxs)(n.Fragment,{children:[d&&(0,n.jsx)("button",Object.assign({className:"stylist-item-card__favorite-btn "+(x?"stylist-item-card__favorite-btn--active":""),onClick:e=>{e.stopPropagation();const t=!x;L(t),d(t)},"aria-label":x?"Remove from favorites":"Add to favorites"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}))})),u&&(0,n.jsx)("button",Object.assign({className:"stylist-item-card__remove-btn",onClick:e=>{e.stopPropagation(),u()},"aria-label":"Remove from closet"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}))}))]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Ay,{itemId:y,onLike:()=>j(!0),onDislike:()=>j(!1),primaryColor:p}),P&&A&&c&&(0,n.jsxs)("button",Object.assign({className:"stylist-item-card__try-on-btn",onClick:R,"aria-label":"Try on this item",style:{backgroundColor:p}},{children:[(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})})),"Try On"]})),s&&(0,n.jsx)("button",Object.assign({className:"stylist-item-card__wishlist-btn",onClick:e=>{e.stopPropagation(),s&&(s(y),w("Added to wishlist"),setTimeout((()=>{w(null)}),1800))},"aria-label":"Add to wishlist"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}))})),l&&(0,n.jsx)("button",Object.assign({className:"stylist-item-card__cart-btn",onClick:e=>{e.stopPropagation(),l&&(l(y),w("Added to cart"),setTimeout((()=>{w(null)}),1800))},"aria-label":"Add to cart"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-9.83-3.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25z"})}))}))]})}))]}))}},139:function(e,t,s){"use strict";s.d(t,{Dp:function(){return r},Im:function(){return l},K7:function(){return c},OT:function(){return d},ap:function(){return u}});var n=s(4848),o=s(6540),i=s.n(o),a=s(8748);const r=e=>{const t=(0,o.useRef)(!1),s=(0,o.useRef)(0),n=(0,o.useRef)(performance.now());t.current||(n.current=performance.now(),(0,a.uy)(e,"mount",`${e} initial render starting`)),s.current+=1,1===s.current||(0,a.uy)(e,"update",`${e} re-render #${s.current-1}`,{renderCount:s.current}),(0,o.useEffect)((()=>{if(!t.current){const o=performance.now()-n.current;t.current=!0,(0,a.uy)(e,"mount",`${e} mounted`,{renderCount:s.current,mountDuration:`${o.toFixed(2)}ms`})}return()=>{(0,a.uy)(e,"unmount",`${e} unmounted`,{totalRenderCount:s.current})}}),[e])},l=(e,t,s,n)=>{const i=(0,o.useRef)(0);(0,o.useEffect)((()=>{i.current+=1;const o=i.current;(0,a.at)(e,t,"update",`${t} effect triggered in ${e}`,{runCount:o,dependencies:s?`Dependencies array length: ${s.length}`:"No dependencies"});const r=performance.now(),l=n(),c=performance.now()-r;return(0,a.at)(e,t,"update",`${t} effect completed in ${e}`,{runCount:o,duration:`${c.toFixed(2)}ms`,hasCleanup:!!l}),()=>{l&&((0,a.at)(e,t,"cleanup",`${t} effect cleanup in ${e}`,{runCount:o}),l())}}),s)};function c(e,t){return i().lazy((()=>{(0,a.Dk)(t,"start",`${t} lazy loading started`);const s=performance.now();return e().then((e=>{const n=performance.now()-s;return(0,a.Dk)(t,"complete",`${t} lazy loading completed`,{loadTime:`${n.toFixed(2)}ms`}),e})).catch((e=>{throw(0,a.Dk)(t,"error",`${t} lazy loading error: ${e.message}`,{error:e.message,stack:e.stack}),e}))}))}const d=({children:e,fallback:t,componentName:s="unknown"})=>{const i=(0,o.useRef)(!1),r=(0,o.useRef)(!1),l=(0,o.useRef)(`Suspense[${s}]`);return(0,n.jsx)(o.Suspense,Object.assign({fallback:(0,n.jsx)((({children:e})=>((0,o.useEffect)((()=>(i.current||(i.current=!0,(0,a.HJ)(l.current,"fallback",`Suspense fallback shown for ${s}`)),()=>{r.current||(r.current=!0,(0,a.HJ)(l.current,"resolved",`Suspense resolved for ${s}`))})),[]),(0,n.jsx)(n.Fragment,{children:e}))),{children:t})},{children:e}))};class u extends i().Component{constructor(){super(...arguments),this.state={hasError:!1,error:null},this.resetError=()=>{this.setState({hasError:!1,error:null})}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){const{componentName:s="unknown",onError:n}=this.props;(0,a.Pk)(s,e,t),n&&n(e,t)}render(){const{hasError:e,error:t}=this.state,{children:s,fallback:n,componentName:o="unknown"}=this.props;return e&&t?"function"==typeof n?n(t,this.resetError):n:s}}},259:function(e,t,s){"use strict";s.d(t,{oy:function(){return p}});var n=s(6540),o=s(6890),i=s(8054),a=s(5778),r=s(5104),l=s(9283),c=function(e,t,s,n){return new(s||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))};const d="stylist_last_sync",u="stylist_sync_queue";var m;!function(e){e.ADD_CLOSET_ITEM="ADD_CLOSET_ITEM",e.REMOVE_CLOSET_ITEM="REMOVE_CLOSET_ITEM",e.UPDATE_CLOSET_ITEM="UPDATE_CLOSET_ITEM",e.TOGGLE_FAVORITE="TOGGLE_FAVORITE",e.UPDATE_PREFERENCES="UPDATE_PREFERENCES",e.SUBMIT_QUIZ="SUBMIT_QUIZ",e.ADD_LIKED_ITEM="ADD_LIKED_ITEM",e.ADD_DISLIKED_ITEM="ADD_DISLIKED_ITEM",e.REMOVE_LIKED_ITEM="REMOVE_LIKED_ITEM",e.REMOVE_DISLIKED_ITEM="REMOVE_DISLIKED_ITEM",e.SAVE_OUTFIT="SAVE_OUTFIT",e.REMOVE_OUTFIT="REMOVE_OUTFIT"}(m||(m={}));const p=()=>{const[e,t]=(0,n.useState)({isOnline:navigator.onLine,isSyncing:!1,lastSyncTimestamp:Number(localStorage.getItem(d))||null,pendingOperations:0,syncQueue:[]}),s=(0,o.k)(),p=((0,i.A)(),(0,n.useRef)(null)),g=(0,n.useRef)((()=>{const e=new r.O({baseURL:l.H$,timeout:l.dL,maxRetries:l.NX,getAuthHeader:()=>{const e=localStorage.getItem("stylist_auth_token");return e?{Authorization:`Bearer ${e}`}:{Authorization:""}}});return new a.i(e)})()),_=(0,n.useCallback)((()=>{const e=localStorage.getItem(u);if(!e)return[];try{return JSON.parse(e)}catch(e){return console.error("Failed to parse sync queue:",e),[]}}),[]),h=(0,n.useCallback)((e=>{try{localStorage.setItem(u,JSON.stringify(e))}catch(e){console.error("Failed to save sync queue:",e)}}),[]);(0,n.useEffect)((()=>{const e=_();t((t=>Object.assign(Object.assign({},t),{syncQueue:e,pendingOperations:e.filter((e=>!e.resolved)).length})))}),[_]),(0,n.useEffect)((()=>{const e=()=>{t((e=>Object.assign(Object.assign({},e),{isOnline:!0}))),C()},s=()=>{t((e=>Object.assign(Object.assign({},e),{isOnline:!1})))};return window.addEventListener("online",e),window.addEventListener("offline",s),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}}),[]);const y=(0,n.useCallback)(((e,s,n)=>{const o={id:`sync_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,timestamp:Date.now(),userId:n,operation:e,data:s,retryCount:0,resolved:!1};t((e=>{const t=[...e.syncQueue,o];return h(t),Object.assign(Object.assign({},e),{syncQueue:t,pendingOperations:t.filter((e=>!e.resolved)).length})})),navigator.onLine&&C()}),[h]),b=(0,n.useCallback)((e=>c(void 0,void 0,void 0,(function*(){const{operation:t,data:s,userId:n}=e;try{switch(t){case m.ADD_CLOSET_ITEM:yield g.current.addClosetItem(n,s);break;case m.REMOVE_CLOSET_ITEM:yield g.current.removeClosetItem(n,s.itemId);break;case m.UPDATE_CLOSET_ITEM:yield g.current.updateClosetItem(n,s.itemId,s.updates);break;case m.TOGGLE_FAVORITE:yield g.current.toggleFavoriteItem(n,s.itemId,s.favorite);break;case m.UPDATE_PREFERENCES:yield g.current.updatePreferences(n,s);break;case m.SUBMIT_QUIZ:yield g.current.submitStyleQuiz(n,s);break;case m.SAVE_OUTFIT:console.log("Saving outfit to server:",s);break;case m.REMOVE_OUTFIT:console.log("Removing outfit from server:",s);break;case m.ADD_LIKED_ITEM:case m.ADD_DISLIKED_ITEM:case m.REMOVE_LIKED_ITEM:case m.REMOVE_DISLIKED_ITEM:console.log("Preference feedback will be synced with full profile");break;default:return console.warn("Unknown operation type:",t),!1}return!0}catch(e){return console.error(`Error executing operation ${t}:`,e),!1}}))),[]),f=(0,n.useCallback)(((e,t)=>{if(!e||!t)return t||e;const s=new Date(e.lastActive).getTime();let n=new Date(t.lastActive).getTime()>s?Object.assign({},t):Object.assign({},e);const o=new Map;t.closet.forEach((e=>{o.set(e.id,e)})),e.closet.forEach((e=>{const t=o.get(e.id);t?new Date(e.dateAdded).getTime()>new Date(t.dateAdded).getTime()&&o.set(e.id,e):o.set(e.id,e)})),n.closet=Array.from(o.values());const i=new Set([...t.feedback.likedItems,...e.feedback.likedItems]),a=new Set([...t.feedback.dislikedItems,...e.feedback.dislikedItems]),r=new Set([...t.feedback.viewedItems,...e.feedback.viewedItems]),l=[...t.feedback.savedOutfits];return e.feedback.savedOutfits.forEach((e=>{l.some((t=>t.length===e.length&&t.every((t=>e.includes(t)))))||l.push(e)})),n.feedback=Object.assign(Object.assign({},n.feedback),{likedItems:Array.from(i),dislikedItems:Array.from(a),viewedItems:Array.from(r),savedOutfits:l,lastInteraction:new Date(Math.max(new Date(e.feedback.lastInteraction).getTime(),new Date(t.feedback.lastInteraction).getTime()))}),n}),[]),E=(0,n.useCallback)((e=>c(void 0,void 0,void 0,(function*(){if(e)try{const n=yield g.current.getUserProfile(e),o=s.user;if(n&&o){const e=f(o,n);s.setUser(e)}else n?s.setUser(n):o&&console.log("Server user not found, will upload local data on next sync");const i=Date.now();localStorage.setItem(d,i.toString()),t((e=>Object.assign(Object.assign({},e),{lastSyncTimestamp:i})))}catch(e){console.error("Error syncing with server:",e)}}))),[s,f]),C=(0,n.useCallback)((()=>c(void 0,void 0,void 0,(function*(){var n;if(!e.isSyncing&&navigator.onLine&&s.user){t((e=>Object.assign(Object.assign({},e),{isSyncing:!0})));try{const e=_(),o=e.filter((e=>!e.resolved));if(o.length>0){const s=[...e];for(const e of o)if(!e.resolved)if(yield b(e)){const t=s.findIndex((t=>t.id===e.id));-1!==t&&(s[t]=Object.assign(Object.assign({},s[t]),{resolved:!0}))}else{const t=s.findIndex((t=>t.id===e.id));if(-1!==t){const e=s[t].retryCount+1,n=e>=5;s[t]=Object.assign(Object.assign({},s[t]),{retryCount:e,resolved:n})}}h(s),t((e=>Object.assign(Object.assign({},e),{syncQueue:s,pendingOperations:s.filter((e=>!e.resolved)).length})))}yield E((null===(n=s.user)||void 0===n?void 0:n.userId)||"")}catch(e){console.error("Error during sync:",e)}finally{t((e=>Object.assign(Object.assign({},e),{isSyncing:!1})))}}}))),[e.isSyncing,s.user,_,b,h,E]);return(0,n.useEffect)((()=>(p.current&&window.clearInterval(p.current),p.current=window.setInterval((()=>{navigator.onLine&&s.user&&C()}),3e4),()=>{p.current&&window.clearInterval(p.current)})),[C,s.user]),{state:e,syncNow:C,addClosetItem:(e,t)=>{y(m.ADD_CLOSET_ITEM,e,t)},removeClosetItem:(e,t)=>{y(m.REMOVE_CLOSET_ITEM,{itemId:e},t)},updateClosetItem:(e,t,s)=>{y(m.UPDATE_CLOSET_ITEM,{itemId:e,updates:t},s)},toggleFavorite:(e,t,s)=>{y(m.TOGGLE_FAVORITE,{itemId:e,favorite:t},s)},updatePreferences:(e,t)=>{y(m.UPDATE_PREFERENCES,e,t)},submitQuiz:(e,t)=>{y(m.SUBMIT_QUIZ,e,t)},saveOutfit:(e,t)=>{y(m.SAVE_OUTFIT,e,t)},removeOutfit:(e,t)=>{y(m.REMOVE_OUTFIT,{outfitId:e},t)}}}},551:function(){},1234:function(){},1527:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return z}});var n=s(4848),o=s(6540),i=s.n(o),a=s(5730),r=s(721);const l=e=>new Promise(((t,s)=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>{t(n)},n.onerror=e=>{s(new Error(`Failed to load image: ${e}`))},n.src=e})),c=e=>{return t=void 0,s=void 0,o=function*(){const t=yield l(e);return{width:t.width,height:t.height}},new((n=void 0)||(n=Promise))((function(e,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function r(e){try{l(o.throw(e))}catch(e){i(e)}}function l(t){var s;t.done?e(t.value):(s=t.value,s instanceof n?s:new n((function(e){e(s)}))).then(a,r)}l((o=o.apply(t,s||[])).next())}));var t,s,n,o},d=e=>e<1024?`${e} bytes`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`;const u=(e,t,s,n=0,o=!1,i=!1)=>{e.save();const a=s.x+s.width/2,r=s.y+s.height/2;e.translate(a,r),0!==n&&e.rotate(n*Math.PI/180);const l=o?-1:1,c=i?-1:1;e.scale(l,c),e.drawImage(t,-s.width/2,-s.height/2,s.width,s.height),e.restore()};var m=s(8463),p=({width:e,height:t,activePosition:s})=>(0,n.jsxs)("div",Object.assign({className:"stylist-body-guide",style:{width:e,height:t}},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--head "+(s===a.GT.HEAD?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Head"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--neck "+(s===a.GT.NECK?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Neck"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--upper-body "+(s===a.GT.UPPER_BODY?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Upper Body"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--waist "+(s===a.GT.WAIST?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Waist"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--lower-body "+(s===a.GT.LOWER_BODY?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Lower Body"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--feet "+(s===a.GT.FEET?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Feet"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--full-body "+(s===a.GT.FULL_BODY?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Full Body"}))}))]})),g=function(e,t,s,n){return new(s||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},_=({outfit:e,userImage:t,setCanvasRef:s,onGarmentSelect:i,showBodyGuide:c=!1})=>{var d;const _=(0,o.useRef)(null),[h,y]=(0,o.useState)(null),[b,f]=(0,o.useState)(!1),[E,C]=(0,o.useState)(null),v=(0,r.j)((e=>e.canvasWidth)),I=(0,r.j)((e=>e.canvasHeight)),S=(0,r.j)((e=>e.settings.showGuidelines)),O=(0,r.j)((e=>e.updateGarment));return(0,o.useEffect)((()=>{_.current&&s(_.current)}),[s]),(0,o.useEffect)((()=>{g(void 0,void 0,void 0,(function*(){const s=_.current;if(!s)return;const n=s.getContext("2d");if(n)if(n.clearRect(0,0,s.width,s.height),!S||t){if(t)try{const o=yield l(t.url);n.drawImage(o,0,0,s.width,s.height),(null==e?void 0:e.garments.length)&&(yield((e,t,s,n)=>{return o=void 0,i=void 0,r=function*(){const o=e.getContext("2d");if(!o)return;o.clearRect(0,0,e.width,e.height),o.drawImage(t,0,0,e.width,e.height);const i=[...s].sort(((e,t)=>e.zIndex-t.zIndex));for(const t of i)try{const s=yield n(t.url),i=t.dimensions||{width:s.width,height:s.height},a=t.scale||1,r={width:i.width*a,height:i.height*a},l=t.offset||{x:0,y:0},c={x:(e.width-r.width)/2+l.x,y:(e.height-r.height)/2+l.y,width:r.width,height:r.height};u(o,s,c,t.rotation||0,t.flipHorizontal||!1,t.flipVertical||!1)}catch(e){console.error(`Failed to load or draw garment ${t.id}:`,e)}},new((a=void 0)||(a=Promise))((function(e,t){function s(e){try{l(r.next(e))}catch(e){t(e)}}function n(e){try{l(r.throw(e))}catch(e){t(e)}}function l(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(s,n)}l((r=r.apply(o,i||[])).next())}));var o,i,a,r})(s,o,e.garments,l))}catch(e){console.error("Error rendering canvas:",e)}}else((e,t="rgba(0, 0, 255, 0.2)",s=1)=>{const n=e.getContext("2d");if(n){n.save(),n.strokeStyle=t,n.lineWidth=s;for(let t=1;t<3;t++){const s=e.height/3*t;n.beginPath(),n.moveTo(0,s),n.lineTo(e.width,s),n.stroke()}for(let t=1;t<3;t++){const s=e.width/3*t;n.beginPath(),n.moveTo(s,0),n.lineTo(s,e.height),n.stroke()}n.beginPath(),n.moveTo(e.width/2,0),n.lineTo(e.width/2,e.height),n.moveTo(0,e.height/2),n.lineTo(e.width,e.height/2),n.stroke(),n.restore()}})(s)}))}),[e,t,v,I,S,h,c]),(0,o.useEffect)((()=>{const e=()=>{f(!1),C(null)};return document.addEventListener("mouseup",e),()=>{document.removeEventListener("mouseup",e)}}),[]),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-canvas"},{children:[(0,n.jsx)("canvas",{ref:_,width:v,height:I,className:"stylist-try-on-canvas__canvas "+(b?"stylist-try-on-canvas__canvas--dragging":""),onClick:t=>g(void 0,void 0,void 0,(function*(){if(!i||!e||!e.garments.length)return;const s=_.current;if(!s)return;const n=s.getBoundingClientRect(),o=t.clientX-n.left,a=t.clientY-n.top,r=[...e.garments].sort(((e,t)=>t.zIndex-e.zIndex));for(const e of r)try{const{dimensions:t,offset:n,scale:r}=e;if(!t||!n)continue;const l=s.width/2+n.x,c=s.height/2+n.y,d=t.width*(r||1),u=t.height*(r||1),m=l-d/2,p=c-u/2;if(o>=m&&o<=m+d&&a>=p&&a<=p+u)return i(e.id),void y(e.id)}catch(e){console.error("Error checking garment click:",e)}i(null),y(null)})),onMouseDown:e=>{if(!h)return;const t=_.current;if(!t)return;const s=t.getBoundingClientRect(),n=e.clientX-s.left,o=e.clientY-s.top;f(!0),C({x:n,y:o})},onMouseMove:t=>{if(!(b&&E&&h&&e))return;const s=_.current;if(!s)return;const n=s.getBoundingClientRect(),o=t.clientX-n.left,i=t.clientY-n.top,a=o-E.x,r=i-E.y;C({x:o,y:i});const l=e.garments.find((e=>e.id===h));if(!l||!l.offset)return;const c={x:l.offset.x+a,y:l.offset.y+r};O(h,{offset:c})},onMouseUp:()=>{f(!1),C(null)}}),c&&!t&&(0,n.jsx)(p,{width:v,height:I,activePosition:h?(0,m.f8)((null===(d=null==e?void 0:e.garments.find((e=>e.id===h)))||void 0===d?void 0:d.type)||a.Nu.TOP):void 0}),!t&&(0,n.jsx)("div",Object.assign({className:"stylist-try-on-canvas__placeholder"},{children:(0,n.jsx)("div",Object.assign({className:"stylist-try-on-canvas__placeholder-text"},{children:"Upload a photo to start the virtual try-on"}))}))]}))},h=({outfit:e,activeGarmentId:t,onGarmentSelect:s,onGarmentRemove:i,onGarmentUpdate:r,onGarmentAdd:l,onChangePhoto:c,disabled:d=!1})=>{var u,m,p,g;const[_,h]=(0,o.useState)(!0),[y,b]=(0,o.useState)(!0),[f,E]=(0,o.useState)(!1),C=(0,o.useRef)(null),[v,I]=(0,o.useState)(null),S=null==e?void 0:e.garments.find((e=>e.id===t)),O=e=>{I(e),C.current&&C.current.click()},w=(e,s)=>{if(t&&(null==S?void 0:S.offset)){const n=Object.assign({},S.offset);n[e]=s,r(t,{offset:n})}};return(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__section"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__section-header",onClick:()=>h(!_)},{children:[(0,n.jsx)("h3",Object.assign({className:"stylist-try-on-controls__section-title"},{children:"Garments"})),(0,n.jsx)("span",Object.assign({className:"stylist-try-on-controls__section-toggle"},{children:_?"âˆ’":"+"}))]})),_&&(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__section-content"},{children:[(null==e?void 0:e.garments)&&0!==e.garments.length?(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__garment-list"},{children:e.garments.map((e=>(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__garment-thumbnail "+(t===e.id?"stylist-try-on-controls__garment-thumbnail--active":""),onClick:()=>s(e.id)},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__garment-image"},{children:(0,n.jsx)("img",{src:e.url,alt:e.type})})),(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__garment-type"},{children:e.type})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__garment-remove",onClick:t=>{t.stopPropagation(),i(e.id)},"aria-label":"Remove garment"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})}))}))]}),e.id)))})):(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__empty"},{children:"No garments added yet. Add a garment below."})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__add-garment"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__button stylist-try-on-controls__button--full-width",onClick:()=>E(!f),disabled:d},{children:f?"Cancel":"+ Add Garment"})),f&&(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__garment-types",style:{marginTop:"8px"}},{children:[(0,n.jsx)("span",Object.assign({className:"stylist-try-on-controls__label"},{children:"Select garment type:"})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__button-group"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__button",onClick:()=>O(a.Nu.TOP),disabled:d},{children:"Top"})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__button",onClick:()=>O(a.Nu.BOTTOM),disabled:d},{children:"Bottom"})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__button",onClick:()=>O(a.Nu.DRESS),disabled:d},{children:"Dress"})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__button",onClick:()=>O(a.Nu.OUTERWEAR),disabled:d},{children:"Outerwear"})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__button",onClick:()=>O(a.Nu.SHOES),disabled:d},{children:"Shoes"})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__button",onClick:()=>O(a.Nu.ACCESSORY),disabled:d},{children:"Accessory"}))]})),(0,n.jsx)("input",{ref:C,type:"file",accept:"image/*",className:"stylist-try-on-controls__input",style:{display:"none"},onChange:e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&v&&(l(s,v),I(null),E(!1),C.current&&(C.current.value=""))},disabled:d})]}))]}))]}))]})),S&&(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__section"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__section-header",onClick:()=>b(!y)},{children:[(0,n.jsx)("h3",Object.assign({className:"stylist-try-on-controls__section-title"},{children:"Adjustments"})),(0,n.jsx)("span",Object.assign({className:"stylist-try-on-controls__section-toggle"},{children:y?"âˆ’":"+"}))]})),y&&(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__section-content"},{children:(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__garment-controls"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__control-group"},{children:[(0,n.jsxs)("label",Object.assign({className:"stylist-try-on-controls__label"},{children:["Size",(0,n.jsxs)("span",Object.assign({className:"stylist-try-on-controls__value"},{children:[Math.round(100*(S.scale||1)),"%"]}))]})),(0,n.jsx)("input",{type:"range",min:"0.1",max:"2",step:"0.05",value:S.scale||1,onChange:e=>{if(t){const s=parseFloat(e.target.value);r(t,{scale:s})}},className:"stylist-try-on-controls__slider",disabled:d})]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__control-group"},{children:[(0,n.jsxs)("label",Object.assign({className:"stylist-try-on-controls__label"},{children:["Position X",(0,n.jsxs)("span",Object.assign({className:"stylist-try-on-controls__value"},{children:[(null===(u=S.offset)||void 0===u?void 0:u.x)||0,"px"]}))]})),(0,n.jsx)("input",{type:"range",min:"-200",max:"200",step:"1",value:(null===(m=S.offset)||void 0===m?void 0:m.x)||0,onChange:e=>w("x",parseInt(e.target.value)),className:"stylist-try-on-controls__slider",disabled:d})]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__control-group"},{children:[(0,n.jsxs)("label",Object.assign({className:"stylist-try-on-controls__label"},{children:["Position Y",(0,n.jsxs)("span",Object.assign({className:"stylist-try-on-controls__value"},{children:[(null===(p=S.offset)||void 0===p?void 0:p.y)||0,"px"]}))]})),(0,n.jsx)("input",{type:"range",min:"-200",max:"200",step:"1",value:(null===(g=S.offset)||void 0===g?void 0:g.y)||0,onChange:e=>w("y",parseInt(e.target.value)),className:"stylist-try-on-controls__slider",disabled:d})]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__control-group"},{children:[(0,n.jsxs)("label",Object.assign({className:"stylist-try-on-controls__label"},{children:["Rotation",(0,n.jsxs)("span",Object.assign({className:"stylist-try-on-controls__value"},{children:[S.rotation||0,"Â°"]}))]})),(0,n.jsx)("input",{type:"range",min:"-180",max:"180",step:"1",value:S.rotation||0,onChange:e=>{if(t){const s=parseFloat(e.target.value);r(t,{rotation:s})}},className:"stylist-try-on-controls__slider",disabled:d})]})),(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__control-group"},{children:(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__button "+(S.flipHorizontal?"stylist-try-on-controls__button--active":""),onClick:()=>{t&&r(t,{flipHorizontal:!(null==S?void 0:S.flipHorizontal)})},disabled:d},{children:"Flip Horizontal"}))}))]}))}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__section"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__section-header"},{children:(0,n.jsx)("h3",Object.assign({className:"stylist-try-on-controls__section-title"},{children:"Photo"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__section-content"},{children:(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__button stylist-try-on-controls__button--full-width",onClick:c,disabled:d},{children:"Change Photo"}))}))]}))]}))},y=s(5213),b=({garmentId:e,onLike:t,onDislike:s,onAddToWishlist:i,onAddToCart:a,onSaveNote:r,item:l,primaryColor:c})=>{const[d,u]=(0,o.useState)(!1),[m,p]=(0,o.useState)(!1),[g,_]=(0,o.useState)(""),[h,b]=(0,o.useState)(!1),[f,E]=(0,o.useState)(!1),[C,v]=(0,o.useState)(!1),[I,S]=(0,o.useState)(!1),{addToWishlist:O,addToCart:w}=(0,y.W0)(),T=c?{backgroundColor:c}:void 0;return f?(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__success"},{children:[(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Added to Wishlist"},{children:"â¤ï¸"}))," Added to Wishlist!"]})):C?(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__success"},{children:[(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Added to Cart"},{children:"ðŸ›’"}))," Added to Cart!"]})):I?(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__success"},{children:[(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Note Saved"},{children:"ðŸ“"}))," Note Saved!"]})):(0,n.jsx)("div",Object.assign({className:"stylist-try-on-feedback"},{children:d?m?(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__options"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-try-on-feedback__option-button",onClick:()=>{var t;const s={itemId:e,retailerId:(null==l?void 0:l.retailerId)||"demo_retailer",addedAt:new Date,name:(null==l?void 0:l.name)||`Item ${e.slice(0,6)}`,brand:(null==l?void 0:l.brand)||"Unknown brand",price:(null==l?void 0:l.price)||0,imageUrl:(null===(t=null==l?void 0:l.imageUrls)||void 0===t?void 0:t[0])||""};O(s),i(e),E(!0),p(!1),setTimeout((()=>{E(!1)}),2e3)},style:T},{children:"Add to Wishlist"})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-feedback__option-button",onClick:()=>{var t,s,n;const o={itemId:e,retailerId:(null==l?void 0:l.retailerId)||"demo_retailer",quantity:1,size:(null===(t=null==l?void 0:l.sizes)||void 0===t?void 0:t[0])||"M",color:(null===(s=null==l?void 0:l.colors)||void 0===s?void 0:s[0])||"default",addedAt:new Date,name:(null==l?void 0:l.name)||`Item ${e.slice(0,6)}`,brand:(null==l?void 0:l.brand)||"Unknown brand",price:(null==l?void 0:l.price)||0,imageUrl:(null===(n=null==l?void 0:l.imageUrls)||void 0===n?void 0:n[0])||""};w(o),a(e),v(!0),p(!1),setTimeout((()=>{v(!1)}),2e3)},style:T},{children:"Add to Cart"})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-feedback__option-button",onClick:()=>b(!0),style:T},{children:"Just Save a Note"}))]})):h?(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__note-input"},{children:[(0,n.jsx)("input",{type:"text",placeholder:"What do you like about this item?",value:g,onChange:e=>_(e.target.value),autoFocus:!0}),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-feedback__note-save",onClick:()=>{g.trim()&&(r(e,g),S(!0),b(!1),p(!1),setTimeout((()=>{S(!1),_("")}),2e3))},style:T},{children:"Save"}))]})):(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__liked"},{children:[(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Liked"},{children:"ðŸ’–"}))," Liked!"]})):(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__buttons"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-try-on-feedback__button stylist-try-on-feedback__button--like",onClick:()=>{u(!0),t(e),p(!0)},style:T},{children:(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Like"},{children:"ðŸ‘"}))})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-feedback__button stylist-try-on-feedback__button--dislike",onClick:()=>{s(e)}},{children:(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Dislike"},{children:"ðŸ‘Ž"}))}))]}))}))},f=({onUpload:e,maxSize:t=10485760,acceptedTypes:s=["image/jpeg","image/png","image/webp"],title:i="Upload your photo",description:a="Take a photo or upload one to try on clothes"})=>{const[r,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(null),[m,p]=(0,o.useState)(null),[g,_]=(0,o.useState)(null),[h,y]=(0,o.useState)(!1),[b,f]=(0,o.useState)(!0),E=(0,o.useRef)(null),C=(0,o.useRef)(null),v=(0,o.useRef)(null);(0,o.useEffect)((()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||f(!1)}),[]);const I=(0,o.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),l(!0)}),[]),S=(0,o.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),l(!1)}),[]),O=(0,o.useCallback)((e=>{if(u(null),!e)return p(null),void _(null);if(!(e=>e.type.startsWith("image/"))(e)||!s.includes(e.type))return void u(`Invalid file type. Accepted types: ${s.join(", ")}`);if(e.size>t)return void u(`File size exceeds maximum allowed size of ${d(t)}`);p(e);const n=new FileReader;n.onload=()=>{_(n.result)},n.readAsDataURL(e)}),[s,t]),w=(0,o.useCallback)((e=>{var t;e.preventDefault(),e.stopPropagation(),l(!1);const s=(null===(t=e.dataTransfer.files)||void 0===t?void 0:t[0])||null;O(s)}),[O]),T=(0,o.useCallback)((e=>{var t;const s=(null===(t=e.target.files)||void 0===t?void 0:t[0])||null;O(s)}),[O]),k=(0,o.useCallback)((()=>{E.current&&E.current.click()}),[]),x=(0,o.useCallback)((()=>{m&&e(m)}),[m,e]),L=(0,o.useCallback)((()=>{return e=void 0,t=void 0,n=function*(){u(null),y(!0);try{const e=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});C.current&&(C.current.srcObject=e)}catch(e){console.error("Error accessing webcam:",e),u("Could not access webcam. Please check permissions and try again."),y(!1)}},new((s=void 0)||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}));var e,t,s,n}),[]),A=(0,o.useCallback)((()=>{C.current&&C.current.srcObject&&(C.current.srcObject.getTracks().forEach((e=>e.stop())),C.current.srcObject=null),y(!1)}),[]),N=(0,o.useCallback)((()=>{if(C.current&&v.current){const e=C.current,t=v.current;t.width=e.videoWidth,t.height=e.videoHeight;const s=t.getContext("2d");s&&(s.drawImage(e,0,0,t.width,t.height),t.toBlob((e=>{if(e){const s=new File([e],`webcam-photo-${Date.now()}.jpg`,{type:"image/jpeg"});p(s),_(t.toDataURL("image/jpeg")),A()}}),"image/jpeg",.95))}}),[A]);return(0,o.useEffect)((()=>()=>{h&&A()}),[h,A]),(0,n.jsxs)("div",Object.assign({className:"stylist-image-uploader"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-image-uploader__header"},{children:[(0,n.jsx)("h3",Object.assign({className:"stylist-image-uploader__title"},{children:i})),(0,n.jsx)("p",Object.assign({className:"stylist-image-uploader__description"},{children:a}))]})),h?(0,n.jsxs)("div",Object.assign({className:"stylist-image-uploader__webcam"},{children:[(0,n.jsx)("video",{ref:C,autoPlay:!0,playsInline:!0,className:"stylist-image-uploader__video"}),(0,n.jsx)("canvas",{ref:v,style:{display:"none"}}),(0,n.jsxs)("div",Object.assign({className:"stylist-image-uploader__webcam-controls"},{children:[(0,n.jsx)("button",Object.assign({type:"button",className:"stylist-image-uploader__capture-btn",onClick:N},{children:"Take Photo"})),(0,n.jsx)("button",Object.assign({type:"button",className:"stylist-image-uploader__cancel-btn",onClick:A},{children:"Cancel"}))]}))]})):(0,n.jsxs)("div",Object.assign({className:`stylist-image-uploader__dropzone ${r?"stylist-image-uploader__dropzone--active":""} ${g?"stylist-image-uploader__dropzone--has-preview":""}`,onDragOver:I,onDragLeave:S,onDrop:w,onClick:g?void 0:k},{children:[g?(0,n.jsx)("div",Object.assign({className:"stylist-image-uploader__preview"},{children:(0,n.jsx)("img",{src:g,alt:"Upload preview"})})):(0,n.jsxs)("div",Object.assign({className:"stylist-image-uploader__placeholder"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-image-uploader__icon"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"48",height:"48"},{children:(0,n.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"})}))})),(0,n.jsxs)("p",Object.assign({className:"stylist-image-uploader__message"},{children:["Drag & drop your photo here or"," ",(0,n.jsx)("span",Object.assign({className:"stylist-image-uploader__browse"},{children:"browse"}))]})),(0,n.jsxs)("p",Object.assign({className:"stylist-image-uploader__info"},{children:["Accepted formats: ",s.map((e=>e.replace("image/","."))).join(", "),(0,n.jsx)("br",{}),"Max size: ",d(t)]}))]})),(0,n.jsx)("input",{ref:E,type:"file",className:"stylist-image-uploader__input",accept:s.join(","),onChange:T})]})),c&&(0,n.jsx)("div",Object.assign({className:"stylist-image-uploader__error"},{children:c})),(0,n.jsx)("div",Object.assign({className:"stylist-image-uploader__actions"},{children:!h&&(0,n.jsxs)(n.Fragment,{children:[g?(0,n.jsx)("button",Object.assign({className:"stylist-image-uploader__change-btn",onClick:k},{children:"Change Photo"})):b&&(0,n.jsx)("button",Object.assign({className:"stylist-image-uploader__webcam-btn",onClick:L},{children:"Use Webcam"})),(0,n.jsx)("button",Object.assign({className:"stylist-image-uploader__upload-btn",onClick:x,disabled:!m},{children:m?"Continue":"Upload a Photo"}))]})}))]}))},E=s(9283),C=function(e,t,s,n){return new(s||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},v=s(6856),I=(s(8536),s(2865),function(e,t,s,n){return new(s||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))});let S=null;function O(){return I(this,void 0,void 0,(function*(){try{if(!S){console.log("Loading BodyPix model...");try{const e=s(2733);if(e){yield e.ready();const t=e.getBackend();if("webgl"!==t){console.log(`TensorFlow backend is ${t}, attempting to set webgl backend`);try{yield e.setBackend("webgl")}catch(e){console.warn("Failed to set WebGL backend:",e)}}console.log(`TensorFlow using ${e.getBackend()} backend`)}}catch(e){console.warn("Error setting up TensorFlow backend:",e)}S=yield v.Hh({architecture:"MobileNetV1",outputStride:16,multiplier:.75,quantBytes:2}),console.log("BodyPix model loaded successfully")}}catch(e){throw console.error("Error preloading BodyPix model:",e),S=null,e}}))}function w(e,t={}){return I(this,void 0,void 0,(function*(){try{if(!S)try{yield O()}catch(t){return console.warn("BodyPix model failed to load, falling back to original image:",t),"string"==typeof e?e:URL.createObjectURL(e)}if(!S)throw new Error("Failed to load BodyPix model");const s=yield function(e){return I(this,void 0,void 0,(function*(){return new Promise(((t,s)=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>t(n),n.onerror=e=>s(e),n.src="string"==typeof e?e:URL.createObjectURL(e)}))}))}(e);let n;try{n=yield S.segmentPerson(s,Object.assign({flipHorizontal:!1,internalResolution:"high",segmentationThreshold:t.threshold||.7},t.bodyPixOptions||{}))}catch(e){console.warn("High resolution segmentation failed, trying medium resolution:",e);try{n=yield S.segmentPerson(s,Object.assign({flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:t.threshold||.7},t.bodyPixOptions||{}))}catch(e){console.warn("Medium resolution segmentation failed, trying low resolution:",e);try{n=yield S.segmentPerson(s,Object.assign({flipHorizontal:!1,internalResolution:"low",segmentationThreshold:t.threshold||.7},t.bodyPixOptions||{}))}catch(e){throw console.error("All segmentation attempts failed:",e),e}}}return function(e,t,s,n){const o=document.createElement("canvas");o.width=e.width,o.height=e.height;const i=o.getContext("2d");if(!i)throw new Error("Could not get canvas context");i.drawImage(e,0,0);const a=i.getImageData(0,0,o.width,o.height),{data:r}=a;for(let e=0;e<r.length;e+=4){const i=e/4;if(o.width,Math.floor(i/o.width),t.data[i]){if(n){const t=T(n);r[e]=Math.round((r[e]+t.r)/2),r[e+1]=Math.round((r[e+1]+t.g)/2),r[e+2]=Math.round((r[e+2]+t.b)/2)}}else if("transparent"===s)r[e+3]=0;else{const t=T(s);r[e]=t.r,r[e+1]=t.g,r[e+2]=t.b,r[e+3]=255}}return i.putImageData(a,0,0),o.toDataURL("image/png")}(s,n,t.backgroundColor||"transparent",t.foregroundColor)}catch(t){console.error("Error in TF background removal:",t);const s=String(t).toLowerCase();return(s.includes("webgl")||s.includes("shader")||s.includes("compilation"))&&console.warn("WebGL/shader error detected. WebGL may not be fully supported on this device."),"string"==typeof e?e:URL.createObjectURL(e)}}))}function T(e){if(!e||"transparent"===e)return{r:0,g:0,b:0};3===(e=e.replace(/^#/,"")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}}const k=(e,t)=>{return s=void 0,n=void 0,i=function*(){let s;try{const n=t.apiKey||E.c6;switch(t.method){case a._n.REMOVE_BG_API:if(!n)throw new Error("API key is required for Remove.bg API");const o=yield function(){return C(this,void 0,void 0,(function*(){const e=E.c6;if(!e)return!1;try{return(yield fetch("https://api.remove.bg/v1.0/account",{method:"GET",headers:{"X-Api-Key":e,Accept:"application/json"}})).ok}catch(e){return console.error("Error checking remove.bg API availability:",e),!1}}))}();if(!o)throw new Error("Remove.bg API is not available or key is invalid");const i="string"==typeof e?yield A(e,"image.png"):e;try{const e=yield function(e,t={}){var s,n;return C(this,void 0,void 0,(function*(){const o=t.apiKey||E.c6;if(!o)throw new Error("No API key provided for remove.bg");const i=new FormData;i.append("image_file",e),t.size&&i.append("size",t.size),i.append("crop",t.crop?"true":"false"),t.scale&&i.append("scale",t.scale),t.format&&i.append("format",t.format);const a=yield fetch("https://api.remove.bg/v1.0/removebg",{method:"POST",headers:{"X-Api-Key":o},body:i});if(!a.ok){let e=`Remove.bg API error (${a.status})`;try{const t=yield a.json();e=`${e}: ${(null===(n=null===(s=t.errors)||void 0===s?void 0:s[0])||void 0===n?void 0:n.title)||"Unknown error"}`}catch(t){e=`${e}: ${a.statusText}`}throw new Error(e)}const r=yield a.blob();return new Promise(((e,t)=>{const s=new FileReader;s.onloadend=()=>e(s.result),s.onerror=t,s.readAsDataURL(r)}))}))}(i,{apiKey:n,size:x(t.quality)});s={success:!0,imageUrl:e,method:a._n.REMOVE_BG_API}}catch(e){throw console.error("Remove.bg API error:",e),e}break;case a._n.TENSORFLOW:if("string"==typeof e)s={success:!0,imageUrl:yield w(e,{threshold:.7}),method:a._n.TENSORFLOW};else{const t=yield L(e);s={success:!0,imageUrl:yield w(t,{threshold:.7}),method:a._n.TENSORFLOW}}break;case a._n.MANUAL:s={success:!1,error:"Manual background removal not implemented",method:a._n.MANUAL};break;default:s={success:!1,error:`Unknown removal method: ${t.method}`,method:t.method}}if(!(null==s?void 0:s.success)&&t.fallbackToTensorflow&&t.method!==a._n.TENSORFLOW){console.log(`Falling back to TensorFlow.js background removal after ${t.method} failed`);try{if(!(yield N()))throw new Error("TensorFlow.js not supported in this browser");if("string"==typeof e)s={success:!0,imageUrl:yield w(e,{threshold:.7}),method:a._n.TENSORFLOW};else{const t=yield L(e);s={success:!0,imageUrl:yield w(t,{threshold:.7}),method:a._n.TENSORFLOW}}}catch(e){console.error("TensorFlow fallback error:",e)}}if(t.extractBodyMeasurements&&(null==s?void 0:s.success)&&s.imageUrl)try{s.bodyMeasurements={approximateSize:"M",bodyShape:"rectangle"}}catch(e){console.error("Error extracting body measurements:",e)}return s||{success:!1,error:"Background removal failed with all methods",method:t.method}}catch(e){return console.error("Background removal error:",e),{success:!1,error:e instanceof Error?e.message:String(e),method:t.method}}},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{l(i.next(e))}catch(e){t(e)}}function r(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var s;t.done?e(t.value):(s=t.value,s instanceof o?s:new o((function(e){e(s)}))).then(a,r)}l((i=i.apply(s,n||[])).next())}));var s,n,o,i},x=e=>{switch(e){case"preview":return"preview";case"high":return"hd";case"full":return"medium";default:return"auto"}},L=e=>new Promise(((t,s)=>{const n=new FileReader;n.onload=e=>{var n;(null===(n=e.target)||void 0===n?void 0:n.result)?t(e.target.result):s(new Error("Failed to convert file to data URL"))},n.onerror=e=>s(e),n.readAsDataURL(e)})),A=(e,t)=>fetch(e).then((e=>e.blob())).then((s=>{const n=e.split(",")[0].split(":")[1].split(";")[0];return new File([s],t,{type:n})})),N=function(){return I(this,void 0,void 0,(function*(){try{const e=document.createElement("canvas"),t=e.getContext("webgl",{failIfMajorPerformanceCaveat:!1})||e.getContext("experimental-webgl",{failIfMajorPerformanceCaveat:!1});if(!t)return console.warn("WebGL context not available"),!1;const s=t;try{const e=s.getExtension("WEBGL_debug_renderer_info");if(e){const t=s.getParameter(e.UNMASKED_VENDOR_WEBGL),n=s.getParameter(e.UNMASKED_RENDERER_WEBGL);console.log(`WebGL vendor: ${t}, renderer: ${n}`)}}catch(e){console.warn("Unable to get WebGL vendor information",e)}try{const e=t,s=e.createShader(e.VERTEX_SHADER);if(!s)return console.warn("Failed to create vertex shader"),!1;if(e.shaderSource(s,"\n        attribute vec2 a_position;\n        void main() {\n          gl_Position = vec4(a_position, 0, 1);\n        }\n      "),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(s);return console.warn("Could not compile WebGL shader:",t),!1}e.deleteShader(s)}catch(e){return console.warn("WebGL shader test failed:",e),!1}try{return yield O(),!!S}catch(e){return console.warn("Failed to load TensorFlow model:",e),!1}}catch(e){return console.error("TensorFlow support check failed:",e),!1}}))},j=O;var R=function(e,t,s,n){return new(s||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))};const D=e=>{const[t,s]=(0,o.useState)(!1),[n,i]=(0,o.useState)(0),[l,d]=(0,o.useState)(null),u=(0,r.j)((e=>e.settings)),m=(0,r.j)((e=>e.setUserImage)),p=(0,r.j)((e=>e.updateUserImage)),{removeImageBackground:g}=(e=>{const[t,s]=(0,o.useState)(!1),[n,i]=(0,o.useState)(0),[l,c]=(0,o.useState)(null),d=(0,r.j)((e=>e.settings)),u=(0,r.j)((e=>e.updateUserImage)),[m,p]=(0,o.useState)(null);(0,o.useEffect)((()=>{R(void 0,void 0,void 0,(function*(){try{const e=yield N();p(e),e&&j()}catch(e){console.warn("Error checking TensorFlow support:",e),p(!1)}}))}),[]);const g=(0,o.useCallback)((t=>R(void 0,void 0,void 0,(function*(){try{s(!0),i(10),c(null),u({processingStatus:a.GS.REMOVING_BACKGROUND});let n=d.preferredBackgroundRemovalMethod;n===a._n.TENSORFLOW&&!1===m&&(console.log("TensorFlow.js not supported, falling back to Remove.bg API"),n=a._n.REMOVE_BG_API),i(25),Date.now();const o=1e4,r=k(t.url,{method:n,apiKey:d.apiKey,fallbackToTensorflow:n===a._n.REMOVE_BG_API&&!0===m}),l=new Promise(((e,t)=>{setTimeout((()=>{t(new Error("Background removal timed out"))}),o)})),p=yield Promise.race([r,l]);if(i(90),!p||!p.success||!p.imageUrl){if(p&&p.imageUrl){const e=Object.assign(Object.assign({},t),{url:p.imageUrl,backgroundRemoved:!0,processingStatus:a.GS.COMPLETED,processingWarning:p.error||"Background removal partially succeeded"});return u(e),i(100),e}throw new Error((null==p?void 0:p.error)||"Failed to remove background")}const g=Object.assign(Object.assign({},t),{url:p.imageUrl,backgroundRemoved:!0,processingStatus:a.GS.COMPLETED,bodyMeasurements:p.bodyMeasurements});return u(g),i(100),(null==e?void 0:e.onSuccess)&&e.onSuccess(g),g}catch(s){console.error("Background removal error:",s);const n=s instanceof Error?s.message:String(s);c(n);const o=n.toLowerCase().includes("webgl")||n.toLowerCase().includes("shader")||n.toLowerCase().includes("compilation"),i=o?"Your browser may not fully support 3D graphics required for background removal. Using original image instead.":n;if(o){const e=Object.assign(Object.assign({},t),{processingStatus:a.GS.COMPLETED,backgroundRemoved:!1,processingWarning:"WebGL not fully supported. Using original image."});return u(e),e}return u({processingStatus:a.GS.FAILED,processingError:i}),(null==e?void 0:e.onError)&&e.onError(i),Object.assign(Object.assign({},t),{processingStatus:a.GS.FAILED,processingError:i})}finally{s(!1)}}))),[d,m,u,e]);return{removeImageBackground:g,isProcessing:t,progress:n,error:l,tensorflowSupported:m,reset:()=>{c(null),i(0)}}})({onError:e=>d(e)}),_=(0,o.useCallback)((t=>{return n=void 0,o=void 0,l=function*(){try{if(s(!0),i(0),d(null),!t.type.startsWith("image/"))throw new Error("File is not an image");const n={id:`img_${Date.now()}`,url:"",file:t,processingStatus:a.GS.UPLOADING};m(n),i(10);const o=yield(e=>new Promise(((t,s)=>{const n=new FileReader;n.onload=e=>{var n;(null===(n=e.target)||void 0===n?void 0:n.result)?t(e.target.result):s(new Error("Failed to convert file to data URL"))},n.onerror=e=>{s(e)},n.readAsDataURL(e)})))(t);i(20);const r=yield c(o),l=o;let _=r;const h=(null==e?void 0:e.maxWidth)||1200,y=(null==e?void 0:e.maxHeight)||1600;(r.width>h||r.height>y)&&(i(30),_=((e,t,s,n,o,i)=>{let a=e,r=t;return o&&a>o&&(r=r*o/a,a=o),i&&r>i&&(a=a*i/r,r=i),{width:Math.round(a),height:Math.round(r)}})(r.width,r.height,0,0,h,y));const b=Object.assign(Object.assign({},n),{url:l,dimensions:_,originalDimensions:r,processingStatus:a.GS.PROCESSING});m(b),i(40);const f=void 0!==(null==e?void 0:e.autoRemoveBackground)?e.autoRemoveBackground:u.removeBackgroundAutomatically;let E=b;return f?(p({processingStatus:a.GS.REMOVING_BACKGROUND}),E=yield g(b)):(E=Object.assign(Object.assign({},b),{processingStatus:a.GS.COMPLETED}),p(E)),i(100),(null==e?void 0:e.onProcessingComplete)&&e.onProcessingComplete(E),E}catch(e){console.error("Image processing error:",e);const t=e instanceof Error?e.message:String(e);return d(t),p({processingStatus:a.GS.FAILED,processingError:t}),null}finally{s(!1)}},new((r=void 0)||(r=Promise))((function(e,t){function s(e){try{a(l.next(e))}catch(e){t(e)}}function i(e){try{a(l.throw(e))}catch(e){t(e)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,i)}a((l=l.apply(n,o||[])).next())}));var n,o,r,l}),[e,u.removeBackgroundAutomatically,m,p,g]);return{processImage:_,isProcessing:t,progress:n,error:l,reset:()=>{d(null),i(0)}}};var P=function(e,t,s,n){return new(s||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))};var M=s(8054),F=function(e,t,s,n){return new(s||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},U=({onClose:e,onSave:t,onAddToLookbook:s,primaryColor:l="#3f51b5"})=>{var d;const{currentOutfit:u,userImage:p,isLoading:g,error:y,canvasRef:E,setCanvasRef:C,uploadUserImage:v,addGarment:I,removeGarment:S,updateGarmentProperties:O,clearUserImage:w,saveTryOnResult:T,closeTryOnModal:k}=(()=>{const{currentOutfit:e,userImage:t,settings:s,isLoading:n,error:i,canvasWidth:a,canvasHeight:l,setCurrentOutfit:d,addGarmentToOutfit:u,removeGarmentFromOutfit:p,updateGarment:g,clearUserImage:_,setLoading:h,setError:y,saveResult:b,openTryOnModal:f,closeTryOnModal:E}=(0,r.j)(),{processImage:C}=D(),[v,I]=(0,o.useState)(null);(0,o.useEffect)((()=>{e||d({id:`outfit_${Date.now()}`,garments:[],createdAt:new Date})}),[e,d]);const S=(0,o.useCallback)((e=>P(void 0,void 0,void 0,(function*(){h(!0),y(null);try{yield C(e)}catch(e){console.error("Error uploading user image:",e),y(e instanceof Error?e.message:String(e))}finally{h(!1)}}))),[C,h,y]),O=(0,o.useCallback)(((t,n)=>P(void 0,void 0,void 0,(function*(){h(!0);try{let o,i;if("string"==typeof t)o=t,i=yield c(o);else{const e=new FileReader;o=yield new Promise(((s,n)=>{e.onload=()=>s(e.result),e.onerror=n,e.readAsDataURL(t)})),i=yield c(o)}const a={id:`garment_${Date.now()}_${Math.floor(1e3*Math.random())}`,url:o,type:n,bodyPosition:(0,m.f8)(n),zIndex:(0,m.IM)(n),layerIndex:(null==e?void 0:e.garments.length)||0,dimensions:i,originalDimensions:i,scale:s.defaultGarmentScale[n],offset:s.defaultGarmentOffset[n]};u(a)}catch(e){console.error("Error adding garment:",e),y(e instanceof Error?e.message:String(e))}finally{h(!1)}}))),[null==e?void 0:e.garments.length,s.defaultGarmentScale,s.defaultGarmentOffset,u,h,y]),w=(0,o.useCallback)((e=>{p(e)}),[p]),T=(0,o.useCallback)(((e,t)=>{g(e,t)}),[g]),k=(0,o.useCallback)((()=>P(void 0,void 0,void 0,(function*(){var s;if(v&&e&&t)try{h(!0);const n=yield(s=v,new Promise(((e,t)=>{try{e(s.toDataURL("image/png"))}catch(e){t(e)}}))),o={id:`result_${Date.now()}`,outfitId:e.id,userId:"current_user",userImageUrl:t.url,resultImageUrl:n,garmentIds:e.garments.map((e=>e.id)),createdAt:new Date};return b(o),o}catch(e){return console.error("Error saving try-on result:",e),y(e instanceof Error?e.message:String(e)),null}finally{h(!1)}}))),[v,e,t,h,y,b]),x=(0,o.useCallback)(((e,t)=>{const s={id:`outfit_${Date.now()}`,garments:[],createdAt:new Date};d(s),e&&t&&O(e,t),f()}),[d,O,f]),L=(0,o.useCallback)((e=>{d(e),f()}),[d,f]);return{currentOutfit:e,userImage:t,isLoading:n,error:i,canvasWidth:a,canvasHeight:l,showGuidelines:s.showGuidelines,canvasRef:v,setCanvasRef:I,uploadUserImage:S,addGarment:O,removeGarment:w,updateGarmentProperties:T,clearUserImage:_,saveTryOnResult:k,startNewTryOn:x,tryOnOutfit:L,closeTryOnModal:E}})(),{addToWishlist:x,addToCart:L}=(0,M.W)(),[A,N]=(0,o.useState)(null),[R,U]=(0,o.useState)(!p),[z,G]=(0,o.useState)(!1),[B,W]=(0,o.useState)(!1),[Y,V]=(0,o.useState)(!1),H=i().useRef(!1),[q,$]=(0,o.useState)(null);(0,o.useEffect)((()=>{(()=>{try{const e=document.createElement("canvas");return e.getContext("webgl")||e.getContext("experimental-webgl")?($(!0),!0):(console.warn("WebGL not supported"),$(!1),!1)}catch(e){return console.warn("Error checking WebGL support:",e),$(!1),!1}})()}),[]),(0,o.useEffect)((()=>{p&&(V(!0),Y&&!H.current&&!1!==q&&(H.current=!0,j().catch((e=>{console.warn("Error preloading BodyPix model:",e)}))))}),[p,Y,q]),(0,o.useEffect)((()=>{if(A&&u&&u.garments.find((e=>e.id===A))){const e=document.getElementById(`garment-${A}`);e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})}}),[A,u]),(0,o.useEffect)((()=>{p||U(!0)}),[p]);const K=()=>{e?e():k()},X=()=>{w(),U(!0),N(null),W(!1)};return(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__header",style:{backgroundColor:l}},{children:[(0,n.jsx)("h2",Object.assign({className:"stylist-virtual-try-on__title"},{children:"Virtual Try-On"})),(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__close-btn",onClick:K,"aria-label":"Close"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},{children:(0,n.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})}))}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__content"},{children:[R?(0,n.jsx)(f,{onUpload:e=>F(void 0,void 0,void 0,(function*(){yield v(e),U(!1)})),title:"Upload or Take a Photo",description:"Upload a photo or use your webcam to try on clothes"}):(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__canvas-container"},{children:[(0,n.jsx)(_,{outfit:u,userImage:p,setCanvasRef:C,onGarmentSelect:N,showBodyGuide:!p}),(null==p?void 0:p.processingStatus)===a.GS.REMOVING_BACKGROUND&&(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__processing"},{children:[(0,n.jsx)("div",{className:"stylist-virtual-try-on__spinner"}),(0,n.jsx)("p",{children:"Removing background..."})]})),!1===q&&p&&(0,n.jsx)("div",Object.assign({className:"stylist-virtual-try-on__warning"},{children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Note:"})," 3D graphics acceleration (WebGL) may not be fully supported in your browser. Background removal might use the original image."]})})),y&&(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__error"},{children:[(0,n.jsx)("p",{children:y}),(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__retry-btn",onClick:X},{children:"Try Again"}))]})),(null==p?void 0:p.processingStatus)===a.GS.COMPLETED&&(null==u?void 0:u.garments)&&u.garments.length>0&&A&&(0,n.jsx)(b,{garmentId:A,onLike:e=>{var t;(null===(t=null==u?void 0:u.garments)||void 0===t?void 0:t.find((t=>t.id===e)))&&(console.log("Liked garment:",e),alert("Thanks for your feedback!"))},onDislike:e=>{var t;(null===(t=null==u?void 0:u.garments)||void 0===t?void 0:t.find((t=>t.id===e)))&&(S(e),console.log("Disliked garment:",e),alert("Item removed. We'll note your preference."))},onAddToWishlist:e=>{if(!u||!u.garments)return;const t=u.garments.find((t=>t.id===e));if(!t)return;const s={itemId:t.id,retailerId:"default_retailer_id",name:t.type||"Garment",addedAt:new Date,imageUrl:t.url||"",price:0};x(s),alert("Item added to wishlist!")},onAddToCart:e=>{if(!u||!u.garments)return;const t=u.garments.find((t=>t.id===e));if(!t)return;const s={itemId:t.id,retailerId:"default_retailer_id",name:t.type||"Garment",price:0,quantity:1,imageUrl:t.url||"",addedAt:new Date};L(s),alert("Item added to cart!")},onSaveNote:(e,t)=>{console.log("Save note for garment:",e,t),alert("Note saved! We'll use this feedback to improve recommendations.")},primaryColor:l})]})),!R&&p&&(0,n.jsx)(h,{outfit:u,activeGarmentId:A,onGarmentSelect:N,onGarmentRemove:S,onGarmentUpdate:O,onGarmentAdd:(e,t)=>F(void 0,void 0,void 0,(function*(){yield I(e,t)})),onChangePhoto:X,disabled:g})]})),B&&(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__success"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-virtual-try-on__success-icon"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},{children:(0,n.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}))})),(0,n.jsx)("p",Object.assign({className:"stylist-virtual-try-on__success-message"},{children:"Saved to your Lookbook!"}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__footer"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__secondary-btn",onClick:K},{children:"Close"})),(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__primary-btn",onClick:()=>F(void 0,void 0,void 0,(function*(){var n;if(E&&u)try{G(!0);const o=yield T();if(o){if(t&&t(o.resultImageUrl),s){const e={userId:"current_user",outfitId:o.id,id:o.id,name:`Try-On Result ${(new Date).toLocaleDateString()}`,items:(null===(n=null==u?void 0:u.garments)||void 0===n?void 0:n.map((e=>e.id)))||[],savedAt:new Date,imageUrl:o.resultImageUrl||"",createdAt:new Date};s(e)}W(!0),setTimeout((()=>{e?e():k()}),1500)}}catch(e){console.error("Error saving to lookbook:",e)}finally{G(!1)}})),disabled:g||!p||p.processingStatus!==a.GS.COMPLETED||!(null===(d=null==u?void 0:u.garments)||void 0===d?void 0:d.length)||z||B,style:{backgroundColor:l}},{children:z?"Saving...":B?"Saved!":"Save to Lookbook"}))]}))]}))},z=({onClose:e,onSave:t})=>{const s=(0,r.j)((e=>e.isTryOnModalOpen)),a=(0,r.j)((e=>e.closeTryOnModal)),l=i().useCallback((()=>{e?e():a()}),[e,a]);return(0,o.useEffect)((()=>{const e=e=>{"Escape"===e.key&&s&&l()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[s,l]),(0,o.useEffect)((()=>(document.body.style.overflow=s?"hidden":"",()=>{document.body.style.overflow=""})),[s]),s?(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-modal"},{children:[(0,n.jsx)("div",{className:"stylist-try-on-modal__overlay",onClick:l}),(0,n.jsx)("div",Object.assign({className:"stylist-try-on-modal__container"},{children:(0,n.jsx)(U,{onClose:l,onSave:t})}))]})):null}},2143:function(e,t,s){"use strict";s.r(t),s.d(t,{USE_LAZY_LOADING:function(){return T},USE_PARALLEL_INIT:function(){return k},default:function(){return N}});var n=s(4848),o=s(6540),i=s.n(o),a=s(5338),r=({position:e,onClick:t,primaryColor:s,isOpen:i=!1})=>{const[a,r]=(0,o.useState)("animate-in"),l=s?{backgroundColor:s}:void 0;return(0,o.useEffect)((()=>{r(i?"animate-out":"animate-in")}),[i]),i?null:(0,n.jsx)("div",Object.assign({className:`stylist-floating-button ${{"bottom-right":"stylist-floating-button--bottom-right","bottom-left":"stylist-floating-button--bottom-left","top-right":"stylist-floating-button--top-right","top-left":"stylist-floating-button--top-left"}[e]} ${a}`,onClick:t,style:l,"data-testid":"stylist-floating-button","aria-label":"Open chat assistant"},{children:(0,n.jsx)("div",Object.assign({className:"stylist-floating-button__icon"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12zM7 9h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2z"})}))}))}))},l=s(259),c=()=>{const[e,t]=(0,o.useState)({isOnline:navigator.onLine,isSlowConnection:!1,effectiveType:null,lastChecked:Date.now()}),s=(0,o.useCallback)((()=>{if("connection"in navigator){const e=navigator.connection;t((t=>Object.assign(Object.assign({},t),{isSlowConnection:"slow-2g"===e.effectiveType||"2g"===e.effectiveType||!0===e.saveData,effectiveType:e.effectiveType,lastChecked:Date.now()})))}}),[]),n=(0,o.useCallback)((()=>{t((e=>Object.assign(Object.assign({},e),{isOnline:!0,lastChecked:Date.now()}))),s()}),[s]),i=(0,o.useCallback)((()=>{t((e=>Object.assign(Object.assign({},e),{isOnline:!1,lastChecked:Date.now()})))}),[]),a=(0,o.useCallback)((()=>{s()}),[s]);(0,o.useEffect)((()=>(s(),window.addEventListener("online",n),window.addEventListener("offline",i),"connection"in navigator&&navigator.connection.addEventListener("change",a),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",i),"connection"in navigator&&navigator.connection.removeEventListener("change",a)})),[n,i,a,s]);const r=(0,o.useCallback)((()=>{return e=void 0,s=void 0,o=function*(){try{const e=new AbortController,s=setTimeout((()=>e.abort()),5e3),n=yield fetch("/api/ping",{method:"HEAD",signal:e.signal});clearTimeout(s);const o=n.ok;return t((e=>Object.assign(Object.assign({},e),{isOnline:o,lastChecked:Date.now()}))),o}catch(e){return t((e=>Object.assign(Object.assign({},e),{isOnline:!1,lastChecked:Date.now()}))),!1}},new((n=void 0)||(n=Promise))((function(t,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function r(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var s;e.done?t(e.value):(s=e.value,s instanceof n?s:new n((function(e){e(s)}))).then(a,r)}l((o=o.apply(e,s||[])).next())}));var e,s,n,o}),[]);return Object.assign(Object.assign({},e),{checkConnection:r})},d=s(6890);console.log("[LIFECYCLE:SyncProvider] Module load started");const u=(0,o.createContext)(void 0),m=({children:e})=>{console.log("[LIFECYCLE:SyncProvider] Provider component rendering");const t=(0,l.oy)(),s=c(),i=(0,d.k)(),[a,r]=(0,o.useState)(!1),m=(0,o.useRef)(!1),p=(0,o.useRef)(!1),g=(0,o.useRef)(null);console.log("[LIFECYCLE:SyncProvider] Initial state:",{isMounted:a,isOnline:s.isOnline,hasUser:!!i.user,syncState:t.state}),(0,o.useEffect)((()=>{if(console.log("[LIFECYCLE:SyncProvider] Initial sync effect running",{isMounted:a,isOnline:s.isOnline,hasUser:!!i.user}),!a)return console.log("[LIFECYCLE:SyncProvider] First mount detected, setting isMounted true"),void r(!0);m.current||(m.current=!0,console.log("[TASK:START] Background initialization tasks starting"),g.current=setTimeout((()=>{p.current||(console.warn("[LIFECYCLE:SyncProvider] Maximum timeout reached, forcing background tasks completion"),p.current=!0,console.log("[TASK:COMPLETE] Background initialization tasks completed (forced by timeout)"),window&&"undefined"!=typeof window&&(window.__STYLIST_BACKGROUND_INIT_COMPLETE=!0))}),15e3)),console.log("[LIFECYCLE:SyncProvider] Setting initial sync timeout (2000ms)");const e=setTimeout((()=>{console.log("[LIFECYCLE:SyncProvider] Initial sync timeout fired, checking conditions"),i.user&&s.isOnline?(console.log("[LIFECYCLE:SyncProvider] Conditions met, triggering initial sync"),t.syncNow()):console.log("[LIFECYCLE:SyncProvider] Initial sync skipped - offline or no user",{isOnline:s.isOnline,hasUser:!!i.user}),p.current||setTimeout((()=>{p.current||(console.log("[LIFECYCLE:SyncProvider] Marking background tasks as complete after sync attempt"),p.current=!0,console.log("[TASK:COMPLETE] Background initialization tasks completed after sync"),window&&"undefined"!=typeof window&&(window.__STYLIST_BACKGROUND_INIT_COMPLETE=!0))}),5e3)}),2e3);return()=>{console.log("[LIFECYCLE:SyncProvider] Cleaning up initial sync timer"),clearTimeout(e),g.current&&clearTimeout(g.current)}}),[a,i.user,s.isOnline,t]),(0,o.useEffect)((()=>{if(console.log("[LIFECYCLE:SyncProvider] Network status change effect",{isOnline:s.isOnline,hasUser:!!i.user}),s.isOnline&&i.user){console.log("[LIFECYCLE:SyncProvider] Online detected, setting sync timeout (2000ms)");const e=setTimeout((()=>{console.log("[LIFECYCLE:SyncProvider] Online sync timeout fired, triggering sync"),t.syncNow()}),2e3);return()=>{console.log("[LIFECYCLE:SyncProvider] Cleaning up online sync timer"),clearTimeout(e)}}}),[s.isOnline,i.user,t]),(0,o.useEffect)((()=>{console.log("[LIFECYCLE:SyncProvider] Setting up visibility change listener");const e=()=>{console.log("[LIFECYCLE:SyncProvider] Visibility changed",{visibilityState:document.visibilityState,isOnline:s.isOnline,hasUser:!!i.user}),"visible"===document.visibilityState&&s.isOnline&&i.user&&(console.log("[LIFECYCLE:SyncProvider] Tab became visible while online, triggering sync"),t.syncNow())};return document.addEventListener("visibilitychange",e),()=>{console.log("[LIFECYCLE:SyncProvider] Removing visibility change listener"),document.removeEventListener("visibilitychange",e)}}),[s.isOnline,i.user,t]);const _={syncState:t.state,syncNow:t.syncNow,isOnline:s.isOnline,isSlowConnection:s.isSlowConnection};return console.log("[LIFECYCLE:SyncProvider] Rendering provider with sync state:",{isSyncing:t.state.isSyncing,pendingOperations:t.state.pendingOperations,isOnline:s.isOnline,lastSyncTimestamp:t.state.lastSyncTimestamp?new Date(t.state.lastSyncTimestamp).toISOString():null}),(0,o.useEffect)((()=>{const e=setTimeout((()=>{console.log("[LIFECYCLE:SyncProvider] Setting widget render complete flag"),window&&"undefined"!=typeof window&&(window.__STYLIST_WIDGET_RENDER_COMPLETE=!0,console.log("[RENDER:COMPLETE] Widget rendering completed"))}),5e3);return()=>{clearTimeout(e)}}),[]),(0,n.jsxs)(u.Provider,Object.assign({value:_},{children:[(console.log("[LIFECYCLE:SyncProvider] Before rendering children"),null),e,(console.log("[LIFECYCLE:SyncProvider] After rendering children"),null)]}))};var p=()=>{const{syncState:e,isOnline:t,isSlowConnection:s}=(()=>{const e=(0,o.useContext)(u);if(void 0===e)throw new Error("useSyncContext must be used within a SyncProvider");return e})();if(0===e.pendingOperations&&!e.isSyncing)return null;let i="syncing",a="Syncing...";return t?e.isSyncing?(i="syncing",a="Syncing..."):e.pendingOperations>0&&(i="pending",a=`${e.pendingOperations} change${1!==e.pendingOperations?"s":""} pending`):(i="offline",a=`${e.pendingOperations} change${1!==e.pendingOperations?"s":""} pending`),(0,n.jsxs)("div",Object.assign({className:`sync-status-indicator sync-status-${i}`},{children:[(0,n.jsxs)("div",Object.assign({className:"sync-status-icon"},{children:["syncing"===i&&(0,n.jsx)("svg",Object.assign({className:"sync-spinner",viewBox:"0 0 24 24"},{children:(0,n.jsx)("circle",{className:"sync-spinner-path",cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"4"})})),"pending"===i&&(0,n.jsx)("span",{children:"â±ï¸"}),"offline"===i&&(0,n.jsx)("span",{children:"ðŸ“´"})]})),(0,n.jsx)("span",Object.assign({className:"sync-status-message"},{children:a}))]}))},g=s(5213),_=s(104),h=s(2026),y=s(800),b=s(3874);console.log("[LIFECYCLE:FeedbackSync] Module load started");const f=new class{constructor(){this.syncIntervalId=null,this.syncInterval=6e4,this.isInitialized=!1,this.apiConfig=null}initialize(e){console.log("[LIFECYCLE:FeedbackSync] Initialize called",{isAlreadyInitialized:this.isInitialized,apiKeyProvided:!!(null==e?void 0:e.apiKey),retailerIdProvided:!!(null==e?void 0:e.retailerId)}),this.isInitialized?console.log("[LIFECYCLE:FeedbackSync] Already initialized, skipping"):(console.log("[LIFECYCLE:FeedbackSync] Setting up service with config"),this.apiConfig=e,this.isInitialized=!0,console.log("[LIFECYCLE:FeedbackSync] Adding online/offline event listeners"),window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),console.log("[LIFECYCLE:FeedbackSync] Setting initialization delay timeout (3000ms)"),setTimeout((()=>{console.log("[LIFECYCLE:FeedbackSync] Initialization delay completed, checking online status"),navigator.onLine?(console.log("[LIFECYCLE:FeedbackSync] Device is online, starting sync interval"),this.startSyncInterval()):console.log("[LIFECYCLE:FeedbackSync] Device is offline, deferring sync")}),3e3))}startSyncInterval(){console.log("[LIFECYCLE:FeedbackSync] startSyncInterval called",{hasExistingInterval:null!==this.syncIntervalId}),null===this.syncIntervalId?(console.log("[LIFECYCLE:FeedbackSync] Performing initial feedback sync"),this.syncFeedback(),console.log(`[LIFECYCLE:FeedbackSync] Setting up recurring sync every ${this.syncInterval}ms`),this.syncIntervalId=window.setInterval((()=>{console.log("[LIFECYCLE:FeedbackSync] Recurring sync interval triggered"),this.syncFeedback()}),this.syncInterval)):console.log("[LIFECYCLE:FeedbackSync] Sync interval already active, skipping")}stopSyncInterval(){console.log("[LIFECYCLE:FeedbackSync] stopSyncInterval called",{hasActiveInterval:null!==this.syncIntervalId}),null!==this.syncIntervalId?(console.log("[LIFECYCLE:FeedbackSync] Clearing sync interval"),window.clearInterval(this.syncIntervalId),this.syncIntervalId=null,console.log("[LIFECYCLE:FeedbackSync] Sync interval stopped")):console.log("[LIFECYCLE:FeedbackSync] No active sync interval to stop")}handleOnline(){console.log("[LIFECYCLE:FeedbackSync] Online event detected"),this.startSyncInterval()}handleOffline(){console.log("[LIFECYCLE:FeedbackSync] Offline event detected"),this.stopSyncInterval()}syncFeedback(){var e,t,s,n,o;return t=this,s=void 0,o=function*(){if(console.log("[LIFECYCLE:FeedbackSync] syncFeedback called",{isInitialized:this.isInitialized,hasApiConfig:!!this.apiConfig}),!this.isInitialized||!this.apiConfig)return void console.log("[LIFECYCLE:FeedbackSync] Cannot sync - not initialized or missing config");const t=h.k.getState(),s=t.getPendingSyncItems();if(console.log("[LIFECYCLE:FeedbackSync] Pending feedback items:",s.length),0!==s.length)if(t.isSyncing)console.log("[LIFECYCLE:FeedbackSync] Already syncing, skipping");else try{console.log("[LIFECYCLE:FeedbackSync] Starting sync process"),t.setIsSyncing(!0);const n=(0,y.F6)();console.log("[LIFECYCLE:FeedbackSync] Creating API client for sync");const o=(0,_.zA)(this.apiConfig);console.log("[LIFECYCLE:FeedbackSync] Sending sync request to API",{userId:n,itemCount:s.length});const i=yield o.feedback.syncFeedback({userId:n,feedbackItems:s});console.log("[LIFECYCLE:FeedbackSync] Sync response received",{success:i.success,syncedCount:(null===(e=i.syncedItemIds)||void 0===e?void 0:e.length)||0}),i.success&&i.syncedItemIds.length>0&&(console.log("[LIFECYCLE:FeedbackSync] Marking items as synced"),t.markAsSynced(i.syncedItemIds),console.log("[LIFECYCLE:FeedbackSync] Tracking sync event"),(0,b.s)(b.X.FEEDBACK_SYNCED,n,{count:i.syncedItemIds.length}))}catch(e){console.error("[LIFECYCLE:FeedbackSync] Error syncing feedback:",e)}finally{console.log("[LIFECYCLE:FeedbackSync] Completing sync process"),t.setIsSyncing(!1)}else console.log("[LIFECYCLE:FeedbackSync] No pending items to sync")},new((n=void 0)||(n=Promise))((function(e,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function r(e){try{l(o.throw(e))}catch(e){i(e)}}function l(t){var s;t.done?e(t.value):(s=t.value,s instanceof n?s:new n((function(e){e(s)}))).then(a,r)}l((o=o.apply(t,s||[])).next())}))}cleanup(){console.log("[LIFECYCLE:FeedbackSync] Cleanup called"),this.stopSyncInterval(),console.log("[LIFECYCLE:FeedbackSync] Removing event listeners"),window.removeEventListener("online",this.handleOnline.bind(this)),window.removeEventListener("offline",this.handleOffline.bind(this)),this.isInitialized=!1,console.log("[LIFECYCLE:FeedbackSync] Service marked as uninitialized")}};var E=s(4245),C=s(8748),v=s(139),I=s(7160);console.log("[LIFECYCLE:StylistWidget] Module load started"),(0,C.uy)("StylistWidget","render","Module load started"),"undefined"!=typeof window&&(window.__STYLIST_WIDGET_INITIALIZED=window.__STYLIST_WIDGET_INITIALIZED||!1);const S=(0,v.K7)((()=>(console.log("[LIFECYCLE:StylistWidget] ChatWidgetLazy import starting"),Promise.resolve().then(s.bind(s,7160)).then((e=>(console.log("[LIFECYCLE:StylistWidget] ChatWidgetLazy successfully loaded"),e))).catch((e=>(console.error("[LIFECYCLE:StylistWidget] Failed to load ChatWidget component:",e),{default:I.default}))))),"ChatWidget");var O=e=>{var t,s;(0,v.Dp)("StylistWidget");const[i,a]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),d=(0,g.Lo)();(0,C.uy)("StylistWidget","render","StylistWidget rendering with store status: "+(d?"available":"unavailable"),{storesReady:i,initAttempted:l});const u=null!==(t=null==d?void 0:d.isOpen)&&void 0!==t&&t,_=null!==(s=null==d?void 0:d.toggleOpen)&&void 0!==s?s:()=>console.warn("Chat store not initialized"),h=(0,o.useRef)(!1);(0,v.Im)("StylistWidget","storeInitialization",[d,l],(()=>{if(console.log("[LIFECYCLE:StylistWidget] Store initialization effect running",{initAttempted:l,chatStoreExists:!!d}),!l){if(c(!0),console.log("[LIFECYCLE:StylistWidget] First initialization attempt marked"),(0,C.K0)("STYLIST_INIT_ATTEMPTED",!0,"First initialization attempt marked"),d)return console.log("[LIFECYCLE:StylistWidget] Store ready immediately"),(0,C.K0)("STYLIST_STORES_READY",!0,"Store ready immediately"),void a(!0);console.log("[LIFECYCLE:StylistWidget] Setting store safety timeout (2s)");const e=setTimeout((()=>{console.warn("[LIFECYCLE:StylistWidget] Store initialization timeout - forcing ready state"),(0,C.K0)("STYLIST_STORES_READY",!0,"Store initialization timeout - forcing ready state",{timedOut:!0}),a(!0)}),2e3);return()=>{console.log("[LIFECYCLE:StylistWidget] Clearing store safety timeout"),clearTimeout(e)}}})),(0,v.Im)("StylistWidget","secondaryStoreCheck",[d,i],(()=>{console.log("[LIFECYCLE:StylistWidget] Secondary store check effect running",{storesReady:i,chatStoreExists:!!d}),!i&&d&&(console.log("[LIFECYCLE:StylistWidget] Store now available, marking as ready"),(0,C.K0)("STYLIST_STORES_READY",!0,"Store now available, marking as ready"),a(!0))})),(0,v.Im)("StylistWidget","mainInitialization",[],(()=>(console.log("[LIFECYCLE:StylistWidget] Main initialization effect running",{alreadyInitialized:window.__STYLIST_WIDGET_INITIALIZED,locallyInitialized:h.current,parallelInit:k}),window.__STYLIST_WIDGET_INITIALIZED?(console.log("[LIFECYCLE:StylistWidget] Already mounted, skipping initialization"),void(0,C.K0)("__STYLIST_WIDGET_INITIALIZED",!0,"Widget already initialized, skipping")):(h.current=!0,window.__STYLIST_WIDGET_INITIALIZED=!0,(0,C.K0)("__STYLIST_WIDGET_INITIALIZED",!0,"Widget marked as initialized"),console.log("[LIFECYCLE:StylistWidget] Initializing widget instance"),k?(console.log("[LIFECYCLE:StylistWidget] Using parallel initialization strategy"),(0,C.K0)("USE_PARALLEL_INIT",!0,"Using parallel initialization strategy"),console.log("[LIFECYCLE:StylistWidget] Initializing feedbackSyncService immediately"),f.initialize({apiKey:e.apiKey,retailerId:e.retailerId,apiUrl:e.apiUrl})):(console.log("[LIFECYCLE:StylistWidget] Deferring feedback sync service initialization until first paint"),(0,C.K0)("USE_PARALLEL_INIT",!1,"Using optimized initialization with delayed services"),window.__STYLIST_PENDING_INITIALIZATIONS=Object.assign(Object.assign({},window.__STYLIST_PENDING_INITIALIZATIONS||{}),{feedbackSync:{apiKey:e.apiKey,retailerId:e.retailerId,apiUrl:e.apiUrl}}),(0,C.K0)("__STYLIST_PENDING_INITIALIZATIONS",!0,"Pending initializations registered",{services:["feedbackSync"]})),()=>{console.log("[LIFECYCLE:StylistWidget] Cleaning up feedbackSyncService"),f.cleanup()})))),(0,v.Im)("StylistWidget","themeColors",[e.primaryColor],(()=>{console.log("[LIFECYCLE:StylistWidget] Theme color effect running",{primaryColor:e.primaryColor}),e.primaryColor&&(console.log("[LIFECYCLE:StylistWidget] Setting theme CSS variables"),document.documentElement.style.setProperty("--stylist-primary-color",e.primaryColor),document.documentElement.style.setProperty("--stylist-primary-color-light",y(e.primaryColor,.2)),document.documentElement.style.setProperty("--stylist-primary-color-dark",b(e.primaryColor,.2)))}));const y=(e,t)=>{try{e=e.replace("#","");const s=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),i=Math.min(255,Math.floor(s+(255-s)*t)),a=Math.min(255,Math.floor(n+(255-n)*t)),r=Math.min(255,Math.floor(o+(255-o)*t));return`#${i.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`}catch(t){return e}},b=(e,t)=>{try{e=e.replace("#","");const s=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),i=Math.max(0,Math.floor(s*(1-t))),a=Math.max(0,Math.floor(n*(1-t))),r=Math.max(0,Math.floor(o*(1-t)));return`#${i.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`}catch(t){return e}},O=T?S:I.default,w=(0,n.jsx)(v.ap,Object.assign({componentName:"StylistWidget",fallback:(0,n.jsxs)("div",Object.assign({className:"stylist-error-container",style:{padding:"1rem",textAlign:"center",color:"#721c24",backgroundColor:"#f8d7da",borderRadius:"4px",margin:"1rem"}},{children:[(0,n.jsx)("h3",{children:"Widget Error"}),(0,n.jsx)("p",{children:"The widget encountered an error during loading."}),(0,n.jsx)("button",Object.assign({onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"var(--stylist-primary-color, #4361ee)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},{children:"Reload"}))]}))},{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.OT,Object.assign({componentName:"StylistWidget",fallback:(0,n.jsxs)("div",Object.assign({className:"stylist-loading-container",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",height:"100%"}},{children:[(0,n.jsx)("div",{className:"stylist-loading-spinner"}),(0,n.jsx)("p",Object.assign({style:{marginTop:"1rem"}},{children:"Loading Stylist Widget..."}))]}))},{children:(0,n.jsxs)(E.A,Object.assign({loadingMessage:"Loading Stylist Widget...",onLoadStart:()=>console.log("[LIFECYCLE:StylistWidget] AsyncComponentLoader started loading ChatWidget"),onLoadComplete:()=>console.log("[LIFECYCLE:StylistWidget] AsyncComponentLoader finished loading ChatWidget")},{children:[(console.log("[LIFECYCLE:StylistWidget] Before ChatWidget render"),null),(0,o.createElement)(O,Object.assign({},e,{key:"stylist-chat-widget-singleton",onFirstPaint:()=>{console.log("[LIFECYCLE:StylistWidget] First paint callback triggered from ChatWidget"),!k&&window.__STYLIST_PENDING_INITIALIZATIONS&&(console.log("[LIFECYCLE:StylistWidget] Scheduling background initialization tasks with 1s delay"),setTimeout((()=>{var e;if(console.log("[LIFECYCLE:StylistWidget] Background initialization tasks starting now"),null===(e=window.__STYLIST_PENDING_INITIALIZATIONS)||void 0===e?void 0:e.feedbackSync){console.log("[LIFECYCLE:StylistWidget] Initializing feedback sync service in background");try{f.initialize(window.__STYLIST_PENDING_INITIALIZATIONS.feedbackSync),console.log("[LIFECYCLE:StylistWidget] Feedback sync service initialized successfully")}catch(e){console.error("[LIFECYCLE:StylistWidget] Error initializing feedback sync service:",e)}}window.__STYLIST_BACKGROUND_INIT_COMPLETE=!0,console.log("[LIFECYCLE:StylistWidget] Background initialization marked as complete")}),1e3))}})),(console.log("[LIFECYCLE:StylistWidget] After ChatWidget render"),null)]}))})),i&&(0,n.jsx)(r,{position:e.position||"bottom-right",onClick:()=>{d&&"function"==typeof d.toggleOpen?_():console.warn("Cannot toggle widget - chat store not initialized")},primaryColor:e.primaryColor,isOpen:u}),(0,n.jsx)(p,{})]})}));return k?(0,n.jsx)(m,{children:w}):w};function w(e,t){return(0,C.MC)(e,"init",`Monitoring existing ${e} store`),t&&"function"==typeof t.subscribe&&t.subscribe((t=>{(0,C.MC)(e,"update",`${e} updated`,{newState:t})})),t}const T=!0,k=!0,x=(e,t,s)=>{var n;try{return e&&"function"==typeof e.getState&&(null!==(n=t(e.getState()))&&void 0!==n)?n:s}catch(e){return console.warn("Error accessing store:",e),s}},L=()=>{try{if(window.__STYLIST_STORES_INITIALIZING)return console.log("Store initialization already in progress, skipping"),(0,C.MC)("global","init","Store initialization already in progress, skipping"),!1;const e=performance.now();(0,C.Ng)("storeInitialization:start",0,{phase:"start"}),window.__STYLIST_STORES_INITIALIZING=!0,(0,C.K0)("__STYLIST_STORES_INITIALIZING",!0,"Setting store initialization flag");try{const e=g.Lo.getState();console.log("Chat store initialized"),w("chatStore",g.Lo),(0,C.MC)("chatStore","init","Chat store successfully initialized",{isOpen:e.isOpen,hasMessages:e.messages.length>0,currentView:e.currentView})}catch(e){console.error("Failed to initialize chat store:",e),(0,C.MC)("chatStore","init","Failed to initialize chat store",{error:e instanceof Error?e.message:String(e)})}try{const e=g.kH.getState();console.log("User store initialized"),w("userStore",g.kH),(0,C.MC)("userStore","init","User store successfully initialized",{hasUser:!!e.user})}catch(e){console.error("Failed to initialize user store:",e),(0,C.MC)("userStore","init","Failed to initialize user store",{error:e instanceof Error?e.message:String(e)})}try{const e=g.W0.getState();console.log("Recommendation store initialized"),w("recommendationStore",g.W0),(0,C.MC)("recommendationStore","init","Recommendation store successfully initialized",{itemCount:e.recommendedItems.length,outfitCount:e.recommendedOutfits.length})}catch(e){console.error("Failed to initialize recommendation store:",e),(0,C.MC)("recommendationStore","init","Failed to initialize recommendation store",{error:e instanceof Error?e.message:String(e)})}const t=performance.now()-e;return(0,C.Ng)("storeInitialization:complete",t,{phase:"complete",duration:`${t.toFixed(2)}ms`}),console.log("Store initialization completed"),(0,C.MC)("global","init","All stores initialized successfully",{initDuration:`${t.toFixed(2)}ms`}),window.__STYLIST_STORES_INITIALIZED=!0,window.__STYLIST_STORES_INITIALIZING=!1,(0,C.K0)("__STYLIST_STORES_INITIALIZED",!0,"Stores successfully initialized"),(0,C.K0)("__STYLIST_STORES_INITIALIZING",!1,"Cleared store initialization flag"),!0}catch(e){return console.error("Critical error during store initialization:",e),(0,C.MC)("global","init","Critical error during store initialization",{error:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0}),window.__STYLIST_STORES_INITIALIZING=!1,(0,C.K0)("__STYLIST_STORES_INITIALIZING",!1,"Cleared store initialization flag after error"),!1}};function A(){const e=document.createElement("div");return e.id="stylist-widget-container",document.body.appendChild(e),e}setTimeout((()=>{window.__STYLIST_STORES_INITIALIZED||(console.warn("Store initialization taking too long, forcing completion"),(0,C.MC)("global","init","Store initialization timeout - forcing completion",{timeoutDuration:"5000ms"}),window.__STYLIST_STORES_INITIALIZED=!0,window.__STYLIST_STORES_INITIALIZING=!1,(0,C.K0)("__STYLIST_STORES_INITIALIZED",!0,"Forced store initialization to complete due to timeout"),(0,C.K0)("__STYLIST_STORES_INITIALIZING",!1,"Cleared store initialization flag after timeout"))}),5e3),(0,C.uy)("index","mount","Main entry point initialized"),L(),function(){const e=performance.now();if((0,C.Ng)("widgetMount:start",0,{phase:"start"}),!0===window.__STYLIST_WIDGET_DOM_MOUNTED)return console.log("Widget DOM already mounted, skipping render"),void(0,C.uy)("index","render","Widget DOM already mounted, skipping render");let t=document.getElementById("stylist-widget-container");t?(console.log("Using existing widget container"),(0,C.uy)("index","render","Using existing widget container")):(console.log("Creating widget container as it does not exist"),(0,C.uy)("index","render","Creating widget container"),t=A()),window.__STYLIST_WIDGET_DOM_MOUNTED=!0,(0,C.K0)("__STYLIST_WIDGET_DOM_MOUNTED",!0,"Setting widget DOM mounted flag");const s=setTimeout((()=>{window.__STYLIST_WIDGET_RENDER_COMPLETE||(console.warn("Stylist Widget render did not complete within the timeout period, resetting initialization flags"),(0,C.K0)("__STYLIST_WIDGET_DOM_MOUNTED",!1,"Resetting DOM mounted flag after render timeout",{timeoutDuration:"10000ms",elapsedTime:`${((performance.now()-e)/1e3).toFixed(1)}s`}),window.__STYLIST_WIDGET_DOM_MOUNTED=!1)}),1e4);try{const o=(0,a.H)(t);(0,C.uy)("index","render","Created React root for rendering");const r=window.__StylistWidgetConfig||{apiKey:"demo_key",retailerId:"demo_retailer"};(0,C.uy)("index","render","Using widget configuration",{hasConfig:!!window.__StylistWidgetConfig,apiKey:"demo_key"===r.apiKey?"demo_key":"custom_key",retailerId:"demo_retailer"===r.retailerId?"demo_retailer":"custom_retailer"}),o.render((0,n.jsx)(i().StrictMode,{children:(0,n.jsx)(O,Object.assign({},r))})),window.__STYLIST_WIDGET_RENDER_COMPLETE=!0,clearTimeout(s),console.log("Widget root rendered successfully");const l=performance.now()-e;(0,C.K0)("__STYLIST_WIDGET_RENDER_COMPLETE",!0,"Widget render completed successfully"),(0,C.Ng)("widgetMount:complete",l,{phase:"complete",duration:`${l.toFixed(2)}ms`})}catch(e){console.error("Error mounting Stylist Widget:",e),(0,C.uy)("index","error","Error mounting Stylist Widget",{error:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0}),window.__STYLIST_WIDGET_RENDER_COMPLETE=!1,clearTimeout(s),(0,C.K0)("__STYLIST_WIDGET_RENDER_COMPLETE",!1,"Widget render failed",{error:e instanceof Error?e.message:String(e)})}}();var N=O;const j={init:e=>{(0,C.uy)("API","init","StylistWidget API initialization",{hasApiKey:!!(null==e?void 0:e.apiKey),hasRetailerId:!!(null==e?void 0:e.retailerId)}),window.__StylistWidgetConfig=Object.assign(Object.assign({},window.__StylistWidgetConfig),e),(0,C.K0)("__StylistWidgetConfig",!0,"Widget configuration set via API",{hasApiKey:!!(null==e?void 0:e.apiKey),hasRetailerId:!!(null==e?void 0:e.retailerId)}),document.getElementById("stylist-widget-container")||((0,C.uy)("API","init","Creating widget container via API"),A()),(0,C.uy)("API","init","Initializing stores via API");const t=L();return(0,C.uy)("API","init","Store initialization result",{success:t}),{success:!0,message:"Stylist Widget initialized successfully"}},open:()=>{if((0,C.uy)("API","action","Open widget requested via API"),x(g.Lo,(e=>e.isOpen),!1))return(0,C.uy)("API","action","Widget already open, no action needed"),!0;{const e=g.Lo.getState();return e&&"function"==typeof e.toggleOpen?((0,C.uy)("API","action","Opening widget via store action"),e.toggleOpen(),!0):((0,C.uy)("API","error","Failed to open widget - store not available",{error:"Chat store not available or toggleOpen not a function"}),!1)}},close:()=>{if((0,C.uy)("API","action","Close widget requested via API"),x(g.Lo,(e=>e.isOpen),!1)){const e=g.Lo.getState();return e&&"function"==typeof e.toggleOpen?((0,C.uy)("API","action","Closing widget via store action"),e.toggleOpen(),!0):((0,C.uy)("API","error","Failed to close widget - store not available",{error:"Chat store not available or toggleOpen not a function"}),!1)}return(0,C.uy)("API","action","Widget already closed, no action needed"),!0},minimize:()=>{(0,C.uy)("API","action","Minimize widget requested via API");const e=g.Lo.getState();return e&&"function"==typeof e.toggleMinimize?((0,C.uy)("API","action","Minimizing widget via store action"),e.toggleMinimize(),!0):((0,C.uy)("API","error","Failed to minimize widget - store not available",{error:"Chat store not available or toggleMinimize not a function"}),!1)},switchView:e=>{(0,C.uy)("API","action","Switch view requested via API",{view:e});const t=g.Lo.getState();return t&&"function"==typeof t.setCurrentView?((0,C.uy)("API","action",`Switching to ${e} view via store action`),t.setCurrentView(e),!0):((0,C.uy)("API","error","Failed to switch view - store not available",{error:"Chat store not available or setCurrentView not a function",requestedView:e}),!1)},openStyleQuiz:()=>{(0,C.uy)("API","action","Open style quiz requested via API"),window.__StylistShowStyleQuiz=!0,(0,C.K0)("__StylistShowStyleQuiz",!0,"Style quiz flag set via API");const e=g.Lo.getState();return e&&"function"==typeof e.setIsOpen?((0,C.uy)("API","action","Opening widget for style quiz"),e.setIsOpen(!0),!0):((0,C.uy)("API","warning","Style quiz flag set but widget could not be opened",{error:"Chat store not available or setIsOpen not a function"}),!1)},openVirtualTryOn:()=>{(0,C.uy)("API","action","Open virtual try-on requested via API"),window.__StylistShowVirtualTryOn=!0,(0,C.K0)("__StylistShowVirtualTryOn",!0,"Virtual try-on flag set via API");const e=g.Lo.getState();return e&&"function"==typeof e.setIsOpen?((0,C.uy)("API","action","Opening widget for virtual try-on"),e.setIsOpen(!0),!0):((0,C.uy)("API","warning","Virtual try-on flag set but widget could not be opened",{error:"Chat store not available or setIsOpen not a function"}),!1)},__debug:{addMockItems:()=>{(0,C.uy)("API","debug","Adding mock items via debug API");try{const e=g.W0.getState();if(!e||"function"!=typeof e.setRecommendedItems)return console.warn("Recommendation store not initialized"),(0,C.uy)("API","error","Failed to add mock items - store not initialized"),{success:!1,message:"Recommendation store not initialized"};const t=[{id:"mock1",name:"Stylish Jeans",brand:"DenimCo",category:"Pants",price:79.99,retailerId:"demo",imageUrls:["https://via.placeholder.com/150"],colors:[],sizes:[],url:"#",matchScore:.95,matchReasons:["Based on your style profile"],inStock:!0},{id:"mock2",name:"Casual T-Shirt",brand:"Basics",category:"Tops",price:24.99,retailerId:"demo",imageUrls:["https://via.placeholder.com/150"],colors:[],sizes:[],url:"#",matchScore:.92,matchReasons:["Matches your preferences"],inStock:!0},{id:"mock3",name:"Leather Boots",brand:"Footwear",category:"Shoes",price:129.99,retailerId:"demo",imageUrls:["https://via.placeholder.com/150"],colors:[],sizes:[],url:"#",matchScore:.88,matchReasons:["Complements your style"],inStock:!0}],s={id:"outfit1",name:"Casual Weekend Look",occasion:"Casual",items:t,matchScore:.93,matchReasons:["Perfect for weekends"]};return(0,C.uy)("API","debug","Setting mock items in recommendation store"),e.setRecommendedItems(t),"function"==typeof e.setRecommendedOutfits&&((0,C.uy)("API","debug","Setting mock outfits in recommendation store"),e.setRecommendedOutfits([s])),{success:!0,message:"Mock items and outfit added successfully",data:{itemCount:t.length,outfitCount:1}}}catch(e){return console.error("Error adding mock items:",e),(0,C.uy)("API","error","Error adding mock items",{error:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0}),{success:!1,message:"Error adding mock items",error:e instanceof Error?e.message:String(e)}}},getDiagnostics:()=>"undefined"!=typeof window&&window.__STYLIST_DIAGNOSTICS?((0,C.uy)("API","debug","Getting diagnostics via debug API"),{logs:window.__STYLIST_DIAGNOSTICS.logs||[],flags:{initialized:!!window.__STYLIST_WIDGET_INITIALIZED,mounted:!!window.__STYLIST_WIDGET_DOM_MOUNTED,renderComplete:!!window.__STYLIST_WIDGET_RENDER_COMPLETE,storesInitialized:!!window.__STYLIST_STORES_INITIALIZED,backgroundInitComplete:!!window.__STYLIST_BACKGROUND_INIT_COMPLETE}}):{logs:[],flags:{initialized:!1,mounted:!1,renderComplete:!1,storesInitialized:!1,backgroundInitComplete:!1}},clearDiagnostics:()=>{if((0,C.uy)("API","debug","Clearing diagnostics via debug API"),"undefined"!=typeof window&&window.__STYLIST_DIAGNOSTICS){window.__STYLIST_DIAGNOSTICS.logs=[];try{localStorage.removeItem("__STYLIST_DIAGNOSTICS_LOGS")}catch(e){}return{success:!0,message:"Diagnostics cleared successfully"}}return{success:!1,message:"Diagnostics module not initialized"}}}};window.StylistWidget=j},3686:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var n=s(4848),o=s(6540),i=s.n(o),a=s(109),r=s(4833),l=s(5213),c=s(1527),d=s(5730),u=s(721),m=s(104),p=s(6890),g=s(6682),_=({apiKey:e,retailerId:t,apiUrl:s,onItemFeedback:r,onAddToWishlist:l,onAddToCart:c,onItemClick:d,primaryColor:u})=>{const[_,h]=(0,o.useState)([]),[y,b]=(0,o.useState)(!0),[f,E]=(0,o.useState)(null),[C,v]=(0,o.useState)("all"),{user:I}=(0,p.k)();(0,o.useEffect)((()=>{I&&S()}),[null==I?void 0:I.userId]);const S=()=>{return n=void 0,o=void 0,a=function*(){var n,o,i,a,r,l;if(I){b(!0),E(null);try{const c=(0,m.zA)({apiKey:e,retailerId:t,apiUrl:s}),d=yield c.recommendation.getRecommendations({userId:I.userId,limit:100,filters:{trending:!0,size:null===(i=null===(o=null===(n=I.preferences)||void 0===n?void 0:n.sizePreferences)||void 0===o?void 0:o[0])||void 0===i?void 0:i.size,style:null===(l=null===(r=null===(a=I.preferences)||void 0===a?void 0:a.stylePreferences)||void 0===r?void 0:r[0])||void 0===l?void 0:l.style}});if(!d||!d.items||0===d.items.length)return d.message?E(d.message):E("No trending items found. Please check back later."),void h([]);const u=[...d.items].sort(((e,t)=>e.trending&&!t.trending?-1:!e.trending&&t.trending?1:(t.matchScore||0)-(e.matchScore||0))).map((e=>({id:e.id,retailerId:e.retailerId||t,name:e.name||"Unnamed Item",brand:e.brand||"",category:e.category||"",price:e.price||0,salePrice:e.salePrice,colors:e.colors||[],sizes:e.sizes||[],imageUrls:Array.isArray(e.imageUrls)?e.imageUrls:e.imageUrl?[e.imageUrl]:[],url:e.url||"#",matchScore:e.matchScore||0,matchReasons:e.matchReasons||[],inStock:!1!==e.inStock,trending:!0})));h(u),console.log(`Loaded ${u.length} trending items from API`)}catch(e){console.error("Error fetching trending items:",e),E("Failed to fetch trending items. Please try again later.")}finally{b(!1)}}},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{l(a.next(e))}catch(e){t(e)}}function r(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(s,r)}l((a=a.apply(n,o||[])).next())}));var n,o,i,a},O=()=>"all"===C?_:_.filter((e=>e.category===C)),w=i().useMemo((()=>{const e=new Set(_.map((e=>e.category)));return["all",...Array.from(e)]}),[_]);return(0,n.jsxs)("div",Object.assign({className:"stylist-trending-items"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-trending-items__header"},{children:[(0,n.jsx)("h2",Object.assign({className:"stylist-trending-items__title"},{children:"Trending Items"})),(0,n.jsx)("div",Object.assign({className:"stylist-trending-items__filter"},{children:(0,n.jsxs)("select",Object.assign({value:C,onChange:e=>v(e.target.value),className:"stylist-trending-items__filter-select"},{children:[(0,n.jsx)("option",Object.assign({value:"all"},{children:"All Categories"})),w.filter((e=>"all"!==e)).map((e=>(0,n.jsx)("option",Object.assign({value:e},{children:e.charAt(0).toUpperCase()+e.slice(1)}),e)))]}))}))]})),y?(0,n.jsxs)("div",Object.assign({className:"stylist-trending-items__loading"},{children:[(0,n.jsx)(g.A,{}),(0,n.jsx)("p",{children:"Loading trending items..."})]})):f?(0,n.jsxs)("div",Object.assign({className:"stylist-trending-items__error"},{children:[(0,n.jsx)("p",{children:f}),(0,n.jsx)("button",Object.assign({className:"stylist-trending-items__retry-btn",onClick:S},{children:"Retry"}))]})):0===O().length?(0,n.jsx)("div",Object.assign({className:"stylist-trending-items__empty"},{children:(0,n.jsx)("p",{children:"No trending items found. Check back later!"})})):(0,n.jsx)("div",Object.assign({className:"stylist-trending-items__grid"},{children:O().map((e=>(0,n.jsxs)("div",Object.assign({className:"stylist-trending-items__item"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-trending-items__trending-badge"},{children:"ðŸ”¥ Trending"})),(0,n.jsx)(a.A,{item:{id:e.id,name:e.name,brand:e.brand,price:e.price,salePrice:e.salePrice,image:e.imageUrls[0]||""},onFavorite:t=>((e,t)=>{r&&r(e,t)})(e.id,t),onAddToWishlist:()=>(e=>{l&&l(e)})(e),onAddToCart:()=>(e=>{c&&c(e)})(e),onClick:()=>(e=>{d&&d(e)})(e),primaryColor:u})]}),e.id)))}))]}))},h=({isOpen:e,onClose:t,outfitData:s,apiKey:i,retailerId:r,apiUrl:l,onItemFeedback:c,onAddToWishlist:d,onAddToCart:u,primaryColor:p})=>{const[_,h]=(0,o.useState)([]),[y,b]=(0,o.useState)(!0),[f,E]=(0,o.useState)(null);(0,o.useEffect)((()=>{e&&C()}),[e,null==s?void 0:s.id]);const C=()=>{return e=void 0,t=void 0,o=function*(){b(!0),E(null);try{(0,m.zA)({apiKey:i,retailerId:r,apiUrl:l}),yield new Promise((e=>setTimeout(e,1e3)));const e=Array.from({length:6},((e,t)=>({id:`similar-${s.id}-${t}`,retailerId:r,name:`Similar Item ${t+1}`,brand:["Fashion Brand","Luxury Designer","Style Co."][t%3],category:["tops","bottoms","dresses","shoes","accessories"][t%5],price:59.99+20*t,salePrice:t%3==0?59.99+20*t*.8:void 0,colors:["black","white","blue"],sizes:["S","M","L","XL"],imageUrls:[`https://via.placeholder.com/300x400?text=Similar+Item+${t+1}`],url:"#",matchScore:90-5*t,matchReasons:["Similar style","Matches color palette","As seen on celebrity"],inStock:!0})));h(e)}catch(e){console.error("Error fetching matching items:",e),E("Failed to load matching items. Please try again.")}finally{b(!1)}},new((n=void 0)||(n=Promise))((function(s,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function r(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}));var e,t,n,o};return(0,o.useEffect)((()=>{const s=s=>{"Escape"===s.key&&e&&t()};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}}),[e,t]),(0,o.useEffect)((()=>(document.body.style.overflow=e?"hidden":"",()=>{document.body.style.overflow=""})),[e]),e?(0,n.jsx)("div",Object.assign({className:"stylist-social-proof-modal",onClick:e=>{e.target===e.currentTarget&&t()}},{children:(0,n.jsxs)("div",Object.assign({className:"stylist-social-proof-modal__content"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-social-proof-modal__close",onClick:t,"aria-label":"Close"},{children:"Ã—"})),(0,n.jsx)("div",Object.assign({className:"stylist-social-proof-modal__header"},{children:(0,n.jsxs)("h2",Object.assign({className:"stylist-social-proof-modal__title"},{children:["Get the Look: ",s.celebrityName]}))})),(0,n.jsxs)("div",Object.assign({className:"stylist-social-proof-modal__celebrity-outfit"},{children:[(0,n.jsx)("img",{src:s.imageUrl,alt:`${s.celebrityName} outfit`,className:"stylist-social-proof-modal__celebrity-image"}),(0,n.jsx)("p",Object.assign({className:"stylist-social-proof-modal__description"},{children:s.description}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-social-proof-modal__similar-items-section"},{children:[(0,n.jsx)("h3",{children:"Shop Similar Items"}),y?(0,n.jsxs)("div",Object.assign({className:"stylist-social-proof-modal__loading"},{children:[(0,n.jsx)(g.A,{}),(0,n.jsx)("p",{children:"Finding similar items..."})]})):f?(0,n.jsxs)("div",Object.assign({className:"stylist-social-proof-modal__error"},{children:[(0,n.jsx)("p",{children:f}),(0,n.jsx)("button",Object.assign({className:"stylist-social-proof-modal__retry-btn",onClick:C,style:{backgroundColor:p}},{children:"Retry"}))]})):(0,n.jsx)("div",Object.assign({className:"stylist-social-proof-modal__similar-items"},{children:_.map((e=>(0,n.jsxs)("div",Object.assign({className:"stylist-social-proof-modal__item"},{children:[(0,n.jsx)(a.A,{item:{id:e.id,name:e.name,brand:e.brand,price:e.price,salePrice:e.salePrice,image:e.imageUrls[0]||""},onFavorite:t=>c&&c(e.id,t),onAddToWishlist:()=>d&&d(e),onAddToCart:()=>u&&u(e),primaryColor:p}),(0,n.jsxs)("div",Object.assign({className:"stylist-social-proof-modal__match-score"},{children:[e.matchScore,"% match"]}))]}),e.id)))}))]}))]}))})):null},y=({onAddToCart:e,onRemoveFromWishlist:t,onMoveToCloset:s,onItemClick:i,primaryColor:r})=>{const{wishlistItems:c}=(0,l.W0)(),{user:d}=(0,l.kH)(),[u,m]=(0,o.useState)([]),[p,_]=(0,o.useState)(!0);(0,o.useEffect)((()=>{var e,t,s,n;e=void 0,t=void 0,n=function*(){_(!0);try{const e=c.map((e=>({id:e.itemId,retailerId:e.retailerId,name:e.name||`Product ${e.itemId.substring(0,6)}`,brand:e.brand||"Brand Name",category:e.category||"Clothing",price:e.price||99.99,salePrice:e.salePrice,colors:[],sizes:[],imageUrls:[e.imageUrl||""],url:e.url||"#",matchScore:0,matchReasons:[],inStock:!0,addedToWishlistAt:e.addedAt})));m(e)}catch(e){console.error("Error fetching wishlist details:",e)}finally{_(!1)}},new((s=void 0)||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))}),[c]);const h=e=>{t&&t(e)};return(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-tab"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-tab__header"},{children:(0,n.jsx)("h2",Object.assign({className:"stylist-wishlist-tab__title"},{children:"My Wishlist"}))})),p?(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-tab__loading"},{children:[(0,n.jsx)(g.A,{}),(0,n.jsx)("p",{children:"Loading your wishlist..."})]})):0===u.length?(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-tab__empty"},{children:[(0,n.jsx)("p",{children:"Your wishlist is empty."}),(0,n.jsx)("p",{children:"Items you like will be saved here for later."})]})):(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-tab__grid"},{children:u.map((t=>(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-tab__item"},{children:[(0,n.jsx)(a.A,{item:{id:t.id,name:t.name||"",brand:t.brand||"",price:t.price||0,salePrice:t.salePrice,image:t.imageUrls[0]||""},onFavorite:()=>{},isFavorite:!0,onRemove:()=>h(t.id),onClick:()=>(e=>{i&&i(e)})(t),primaryColor:r}),(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-tab__item-actions"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-wishlist-tab__action-btn stylist-wishlist-tab__action-btn--cart",onClick:()=>(t=>{e&&e(t)})(t)},{children:"Add to Cart"})),(0,n.jsx)("button",Object.assign({className:"stylist-wishlist-tab__action-btn stylist-wishlist-tab__action-btn--closet",onClick:()=>(e=>{s&&(s(e),h(e.id))})(t)},{children:"Move to Closet"}))]}))]}),t.id)))}))]}))},b=({items:e,outfits:t,savedOutfits:s,tryOnResults:i=[],onItemFeedback:m,onOutfitFeedback:p,onAddToWishlist:g,onAddToCart:b,onSaveOutfit:f,onSaveTryOnResult:E,primaryColor:C})=>{const{addTextMessage:v}=(0,l.Lo)(),[I,S]=(0,o.useState)("items"),[O,w]=(0,o.useState)(!1),[T,k]=(0,o.useState)(null),[x,L]=(0,o.useState)(!1),[A,N]=(0,o.useState)(null),j=[...s],R=i||[],D=[{id:"celeb-1",celebrityName:"Celebrity Name 1",imageUrl:"https://via.placeholder.com/400x600?text=Celebrity+Outfit+1",description:"Spotted on the red carpet wearing a stunning ensemble that combines elegance with modern trends."},{id:"celeb-2",celebrityName:"Celebrity Name 2",imageUrl:"https://via.placeholder.com/400x600?text=Celebrity+Outfit+2",description:"A casual yet stylish look perfect for everyday wear, showing how to combine comfort with fashion."}],P=e=>{if(f){const s=t.find((t=>t.id===e));s&&(f(s),v("I've saved this outfit to your lookbook! You can access it anytime.","assistant"))}};return(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__header"},{children:[(0,n.jsx)("h3",Object.assign({className:"stylist-lookbook__title"},{children:"Your Lookbook"})),(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__tabs"},{children:[(0,n.jsxs)("button",Object.assign({className:"stylist-lookbook__tab "+("items"===I?"stylist-lookbook__tab--active":""),onClick:()=>S("items"),style:"items"===I&&C?{borderBottomColor:C}:void 0},{children:["Items (",e.length,")"]})),(0,n.jsxs)("button",Object.assign({className:"stylist-lookbook__tab "+("outfits"===I?"stylist-lookbook__tab--active":""),onClick:()=>S("outfits"),style:"outfits"===I&&C?{borderBottomColor:C}:void 0},{children:["Outfits (",t.length,")"]})),(0,n.jsxs)("button",Object.assign({className:"stylist-lookbook__tab "+("trending"===I?"stylist-lookbook__tab--active":""),onClick:()=>S("trending"),style:"trending"===I&&C?{borderBottomColor:C}:void 0},{children:[(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Fire"},{children:"ðŸ”¥"}))," Trending"]})),(0,n.jsxs)("button",Object.assign({className:"stylist-lookbook__tab "+("wishlist"===I?"stylist-lookbook__tab--active":""),onClick:()=>S("wishlist"),style:"wishlist"===I&&C?{borderBottomColor:C}:void 0},{children:[(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Heart"},{children:"ðŸ’–"}))," Wishlist"]})),(0,n.jsxs)("button",Object.assign({className:"stylist-lookbook__tab "+("saved"===I?"stylist-lookbook__tab--active":""),onClick:()=>S("saved"),style:"saved"===I&&C?{borderBottomColor:C}:void 0},{children:["Saved (",j.length,")"]})),(0,n.jsxs)("button",Object.assign({className:"stylist-lookbook__tab "+("try-on"===I?"stylist-lookbook__tab--active":""),onClick:()=>S("try-on"),style:"try-on"===I&&C?{borderBottomColor:C}:void 0},{children:["Try-On (",R.length,")"]}))]}))]})),(0,n.jsx)("div",Object.assign({className:"stylist-lookbook__content"},{children:(()=>{switch(I){case"items":return(0,n.jsx)("div",Object.assign({className:"stylist-lookbook__items"},{children:e.length>0?e.map((e=>(0,n.jsx)(a.A,{item:e,onFeedback:m,onAddToWishlist:()=>g&&g(e),onAddToCart:()=>b&&b(e),showDetails:!0,primaryColor:C,onClick:()=>(e=>{v(`${e.name} by ${e.brand} is a great choice! Would you like to know more about this item or see similar styles?`,"assistant")})(e),onTryOn:()=>(e=>{var t;k(e);let s=d.Nu.TOP;if(e.category){const t=e.category.toLowerCase();t.includes("dress")?s=d.Nu.DRESS:t.includes("bottom")||t.includes("pant")||t.includes("short")||t.includes("skirt")?s=d.Nu.BOTTOM:t.includes("jacket")||t.includes("coat")?s=d.Nu.OUTERWEAR:t.includes("shoes")?s=d.Nu.SHOES:t.includes("accessory")&&(s=d.Nu.ACCESSORY)}const n=(null===(t=e.imageUrls)||void 0===t?void 0:t[0])||"";n&&(((e,t)=>{const{startNewTryOn:s}=u.j.getState();s(e,t)})(n,s),(()=>{const{openTryOnModal:e}=u.j.getState();e()})())})(e)},e.id))):(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__empty"},{children:[(0,n.jsx)("p",{children:"No recommended items yet."}),(0,n.jsx)("p",{children:"Ask me for recommendations to see items here!"})]}))}));case"outfits":return(0,n.jsx)("div",Object.assign({className:"stylist-lookbook__outfits"},{children:t.length>0?t.map((e=>{const t={id:e.id,name:e.name||"",occasion:e.occasion,matchScore:e.matchScore,matchReasons:e.matchReasons,items:e.items.map((e=>{var t;return{id:e.id,name:e.name,brand:e.brand,category:e.category||"",price:e.price,salePrice:e.salePrice,imageUrl:(null===(t=e.imageUrls)||void 0===t?void 0:t[0])||"",url:e.url||"",matchScore:e.matchScore||0,matchReasons:e.matchReasons||[]}}))};return(0,n.jsx)(r.A,{outfit:t,onFeedback:p,onSaveOutfit:P,primaryColor:C},e.id)})):(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__empty"},{children:[(0,n.jsx)("p",{children:"No outfit recommendations yet."}),(0,n.jsx)("p",{children:"Ask me to create outfits for you!"})]}))}));case"saved":return(0,n.jsx)("div",Object.assign({className:"stylist-lookbook__saved"},{children:j.length>0?(0,n.jsx)("div",Object.assign({className:"stylist-lookbook__saved-items"},{children:j.map((e=>(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__saved-item"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-lookbook__saved-image"},{children:(0,n.jsx)("img",{src:e.imageUrl,alt:e.name})})),(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__saved-details"},{children:[(0,n.jsx)("h4",{children:e.name}),(0,n.jsx)("p",{children:e.createdAt?new Date(e.createdAt).toLocaleDateString():new Date(e.savedAt).toLocaleDateString()})]}))]}),e.id)))})):(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__empty"},{children:[(0,n.jsx)("p",{children:"No saved outfits yet."}),(0,n.jsx)("p",{children:"Save outfits you like to access them later!"})]}))}));case"try-on":return(0,n.jsx)("div",Object.assign({className:"stylist-lookbook__try-on"},{children:R.length>0?(0,n.jsx)("div",Object.assign({className:"stylist-lookbook__try-on-items"},{children:R.map((e=>(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__try-on-item"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-lookbook__try-on-image"},{children:(0,n.jsx)("img",{src:e.imageUrl,alt:e.name})})),(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__try-on-details"},{children:[(0,n.jsx)("h4",{children:e.name}),(0,n.jsx)("p",{children:e.createdAt?new Date(e.createdAt).toLocaleDateString():new Date(e.savedAt).toLocaleDateString()})]}))]}),e.id)))})):(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__empty"},{children:[(0,n.jsx)("p",{children:"No try-on results yet."}),(0,n.jsx)("p",{children:"Use the try-on feature on items to see them here!"})]}))}));case"trending":return(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__trending"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__celebrity-section"},{children:[(0,n.jsx)("h3",Object.assign({className:"stylist-lookbook__section-title"},{children:"Celebrity Inspiration"})),(0,n.jsx)("div",Object.assign({className:"stylist-lookbook__celebrity-outfits"},{children:D.map((e=>(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__celebrity-outfit",onClick:()=>(N(e),void L(!0))},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-lookbook__celebrity-image"},{children:(0,n.jsx)("img",{src:e.imageUrl,alt:e.celebrityName})})),(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__celebrity-details"},{children:[(0,n.jsx)("h4",{children:e.celebrityName}),(0,n.jsx)("p",Object.assign({className:"stylist-lookbook__celebrity-description"},{children:e.description})),(0,n.jsx)("button",Object.assign({className:"stylist-lookbook__get-the-look-btn",style:{backgroundColor:C}},{children:"Get the Look"}))]}))]}),e.id)))}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-lookbook__trending-section"},{children:[(0,n.jsx)("h3",Object.assign({className:"stylist-lookbook__section-title"},{children:"Trending Now"})),(0,n.jsx)(_,{apiKey:{NVM_RC_VERSION:"",TERM_PROGRAM:"vscode",CLAUDE_CODE_ENTRYPOINT:"CLI",NODE:"/opt/homebrew/Cellar/node/23.5.0/bin/node",INIT_CWD:"/Users/parkercase/stylist",NVM_CD_FLAGS:"",TERM:"xterm-256color",SHELL:"/bin/bash",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/",npm_config_global_prefix:"/opt/homebrew",CONDA_SHLVL:"1",TERM_PROGRAM_VERSION:"1.86.2",CONDA_PROMPT_MODIFIER:"(base) ",GSETTINGS_SCHEMA_DIR_CONDA_BACKUP:"",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/parkercase/stylist",GIT_EDITOR:"true",NVM_DIR:"/Users/parkercase/.nvm",USER:"parkercase",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/opt/homebrew/etc/npmrc",CONDA_EXE:"/opt/anaconda3/bin/conda",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.JcIuSn6aOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/opt/homebrew/lib/node_modules/npm/bin/npm-cli.js",_CE_CONDA:"",PATH:"/Users/parkercase/stylist/node_modules/.bin:/Users/parkercase/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/opt/homebrew/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/opt/postgresql@14/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/opt/postgresql@14/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin",GSETTINGS_SCHEMA_DIR:"/opt/anaconda3/share/glib-2.0/schemas",npm_package_json:"/Users/parkercase/stylist/package.json",_:"/Users/parkercase/stylist/node_modules/.bin/webpack",npm_config_userconfig:"/Users/parkercase/.npmrc",npm_config_init_module:"/Users/parkercase/.npm-init.js",CONDA_PREFIX:"/opt/anaconda3",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/parkercase/stylist",npm_lifecycle_event:"build",EDITOR:"vi",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"delta",npm_package_name:"stylist-widget",LANG:"en_US.UTF-8",npm_config_npm_version:"11.2.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/opt/homebrew/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",_CE_M:"",XPC_SERVICE_NAME:"0",SHLVL:"4",HOME:"/Users/parkercase",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/parkercase/.npm",CONDA_PYTHON_EXE:"/opt/anaconda3/bin/python",LOGNAME:"parkercase",npm_lifecycle_script:"webpack --mode production",VSCODE_GIT_IPC_HANDLE:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/vscode-git-21a8511f03.sock",COREPACK_ENABLE_AUTO_PIN:"0",CONDA_DEFAULT_ENV:"base",npm_config_user_agent:"npm/11.2.0 node/v23.5.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",CLAUDECODE:"1",npm_node_execpath:"/opt/homebrew/Cellar/node/23.5.0/bin/node",npm_config_prefix:"/opt/homebrew",COLORTERM:"truecolor"}.REACT_APP_API_KEY||"",retailerId:{NVM_RC_VERSION:"",TERM_PROGRAM:"vscode",CLAUDE_CODE_ENTRYPOINT:"CLI",NODE:"/opt/homebrew/Cellar/node/23.5.0/bin/node",INIT_CWD:"/Users/parkercase/stylist",NVM_CD_FLAGS:"",TERM:"xterm-256color",SHELL:"/bin/bash",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/",npm_config_global_prefix:"/opt/homebrew",CONDA_SHLVL:"1",TERM_PROGRAM_VERSION:"1.86.2",CONDA_PROMPT_MODIFIER:"(base) ",GSETTINGS_SCHEMA_DIR_CONDA_BACKUP:"",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/parkercase/stylist",GIT_EDITOR:"true",NVM_DIR:"/Users/parkercase/.nvm",USER:"parkercase",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/opt/homebrew/etc/npmrc",CONDA_EXE:"/opt/anaconda3/bin/conda",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.JcIuSn6aOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/opt/homebrew/lib/node_modules/npm/bin/npm-cli.js",_CE_CONDA:"",PATH:"/Users/parkercase/stylist/node_modules/.bin:/Users/parkercase/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/opt/homebrew/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/opt/postgresql@14/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/opt/postgresql@14/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin",GSETTINGS_SCHEMA_DIR:"/opt/anaconda3/share/glib-2.0/schemas",npm_package_json:"/Users/parkercase/stylist/package.json",_:"/Users/parkercase/stylist/node_modules/.bin/webpack",npm_config_userconfig:"/Users/parkercase/.npmrc",npm_config_init_module:"/Users/parkercase/.npm-init.js",CONDA_PREFIX:"/opt/anaconda3",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/parkercase/stylist",npm_lifecycle_event:"build",EDITOR:"vi",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"delta",npm_package_name:"stylist-widget",LANG:"en_US.UTF-8",npm_config_npm_version:"11.2.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/opt/homebrew/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",_CE_M:"",XPC_SERVICE_NAME:"0",SHLVL:"4",HOME:"/Users/parkercase",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/parkercase/.npm",CONDA_PYTHON_EXE:"/opt/anaconda3/bin/python",LOGNAME:"parkercase",npm_lifecycle_script:"webpack --mode production",VSCODE_GIT_IPC_HANDLE:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/vscode-git-21a8511f03.sock",COREPACK_ENABLE_AUTO_PIN:"0",CONDA_DEFAULT_ENV:"base",npm_config_user_agent:"npm/11.2.0 node/v23.5.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",CLAUDECODE:"1",npm_node_execpath:"/opt/homebrew/Cellar/node/23.5.0/bin/node",npm_config_prefix:"/opt/homebrew",COLORTERM:"truecolor"}.REACT_APP_RETAILER_ID||"",apiUrl:{NVM_RC_VERSION:"",TERM_PROGRAM:"vscode",CLAUDE_CODE_ENTRYPOINT:"CLI",NODE:"/opt/homebrew/Cellar/node/23.5.0/bin/node",INIT_CWD:"/Users/parkercase/stylist",NVM_CD_FLAGS:"",TERM:"xterm-256color",SHELL:"/bin/bash",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/",npm_config_global_prefix:"/opt/homebrew",CONDA_SHLVL:"1",TERM_PROGRAM_VERSION:"1.86.2",CONDA_PROMPT_MODIFIER:"(base) ",GSETTINGS_SCHEMA_DIR_CONDA_BACKUP:"",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/parkercase/stylist",GIT_EDITOR:"true",NVM_DIR:"/Users/parkercase/.nvm",USER:"parkercase",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/opt/homebrew/etc/npmrc",CONDA_EXE:"/opt/anaconda3/bin/conda",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.JcIuSn6aOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/opt/homebrew/lib/node_modules/npm/bin/npm-cli.js",_CE_CONDA:"",PATH:"/Users/parkercase/stylist/node_modules/.bin:/Users/parkercase/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/opt/homebrew/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/opt/postgresql@14/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/opt/postgresql@14/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin",GSETTINGS_SCHEMA_DIR:"/opt/anaconda3/share/glib-2.0/schemas",npm_package_json:"/Users/parkercase/stylist/package.json",_:"/Users/parkercase/stylist/node_modules/.bin/webpack",npm_config_userconfig:"/Users/parkercase/.npmrc",npm_config_init_module:"/Users/parkercase/.npm-init.js",CONDA_PREFIX:"/opt/anaconda3",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/parkercase/stylist",npm_lifecycle_event:"build",EDITOR:"vi",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"delta",npm_package_name:"stylist-widget",LANG:"en_US.UTF-8",npm_config_npm_version:"11.2.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/opt/homebrew/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",_CE_M:"",XPC_SERVICE_NAME:"0",SHLVL:"4",HOME:"/Users/parkercase",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/parkercase/.npm",CONDA_PYTHON_EXE:"/opt/anaconda3/bin/python",LOGNAME:"parkercase",npm_lifecycle_script:"webpack --mode production",VSCODE_GIT_IPC_HANDLE:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/vscode-git-21a8511f03.sock",COREPACK_ENABLE_AUTO_PIN:"0",CONDA_DEFAULT_ENV:"base",npm_config_user_agent:"npm/11.2.0 node/v23.5.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",CLAUDECODE:"1",npm_node_execpath:"/opt/homebrew/Cellar/node/23.5.0/bin/node",npm_config_prefix:"/opt/homebrew",COLORTERM:"truecolor"}.REACT_APP_API_URL||"",onItemFeedback:m,onAddToWishlist:g,onAddToCart:b,primaryColor:C})]}))]}));case"wishlist":return(0,n.jsx)("div",Object.assign({className:"stylist-lookbook__wishlist"},{children:(0,n.jsx)(y,{onAddToCart:b,onRemoveFromWishlist:e=>{console.log("Remove from wishlist:",e)},onMoveToCloset:e=>{console.log("Move to closet:",e)},primaryColor:C})}));default:return null}})()})),(0,n.jsx)(c.default,{onSave:e=>{if(E&&T){const t={id:`tryon-${Date.now()}`,imageUrl:e,name:`Try-on: ${T.name}`};E(t),S("try-on"),k(null)}}}),x&&A&&(0,n.jsx)(h,{isOpen:x,onClose:()=>L(!1),outfitData:A,apiKey:{NVM_RC_VERSION:"",TERM_PROGRAM:"vscode",CLAUDE_CODE_ENTRYPOINT:"CLI",NODE:"/opt/homebrew/Cellar/node/23.5.0/bin/node",INIT_CWD:"/Users/parkercase/stylist",NVM_CD_FLAGS:"",TERM:"xterm-256color",SHELL:"/bin/bash",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/",npm_config_global_prefix:"/opt/homebrew",CONDA_SHLVL:"1",TERM_PROGRAM_VERSION:"1.86.2",CONDA_PROMPT_MODIFIER:"(base) ",GSETTINGS_SCHEMA_DIR_CONDA_BACKUP:"",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/parkercase/stylist",GIT_EDITOR:"true",NVM_DIR:"/Users/parkercase/.nvm",USER:"parkercase",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/opt/homebrew/etc/npmrc",CONDA_EXE:"/opt/anaconda3/bin/conda",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.JcIuSn6aOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/opt/homebrew/lib/node_modules/npm/bin/npm-cli.js",_CE_CONDA:"",PATH:"/Users/parkercase/stylist/node_modules/.bin:/Users/parkercase/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/opt/homebrew/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/opt/postgresql@14/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/opt/postgresql@14/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin",GSETTINGS_SCHEMA_DIR:"/opt/anaconda3/share/glib-2.0/schemas",npm_package_json:"/Users/parkercase/stylist/package.json",_:"/Users/parkercase/stylist/node_modules/.bin/webpack",npm_config_userconfig:"/Users/parkercase/.npmrc",npm_config_init_module:"/Users/parkercase/.npm-init.js",CONDA_PREFIX:"/opt/anaconda3",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/parkercase/stylist",npm_lifecycle_event:"build",EDITOR:"vi",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"delta",npm_package_name:"stylist-widget",LANG:"en_US.UTF-8",npm_config_npm_version:"11.2.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/opt/homebrew/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",_CE_M:"",XPC_SERVICE_NAME:"0",SHLVL:"4",HOME:"/Users/parkercase",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/parkercase/.npm",CONDA_PYTHON_EXE:"/opt/anaconda3/bin/python",LOGNAME:"parkercase",npm_lifecycle_script:"webpack --mode production",VSCODE_GIT_IPC_HANDLE:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/vscode-git-21a8511f03.sock",COREPACK_ENABLE_AUTO_PIN:"0",CONDA_DEFAULT_ENV:"base",npm_config_user_agent:"npm/11.2.0 node/v23.5.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",CLAUDECODE:"1",npm_node_execpath:"/opt/homebrew/Cellar/node/23.5.0/bin/node",npm_config_prefix:"/opt/homebrew",COLORTERM:"truecolor"}.REACT_APP_API_KEY||"",retailerId:{NVM_RC_VERSION:"",TERM_PROGRAM:"vscode",CLAUDE_CODE_ENTRYPOINT:"CLI",NODE:"/opt/homebrew/Cellar/node/23.5.0/bin/node",INIT_CWD:"/Users/parkercase/stylist",NVM_CD_FLAGS:"",TERM:"xterm-256color",SHELL:"/bin/bash",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/",npm_config_global_prefix:"/opt/homebrew",CONDA_SHLVL:"1",TERM_PROGRAM_VERSION:"1.86.2",CONDA_PROMPT_MODIFIER:"(base) ",GSETTINGS_SCHEMA_DIR_CONDA_BACKUP:"",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/parkercase/stylist",GIT_EDITOR:"true",NVM_DIR:"/Users/parkercase/.nvm",USER:"parkercase",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/opt/homebrew/etc/npmrc",CONDA_EXE:"/opt/anaconda3/bin/conda",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.JcIuSn6aOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/opt/homebrew/lib/node_modules/npm/bin/npm-cli.js",_CE_CONDA:"",PATH:"/Users/parkercase/stylist/node_modules/.bin:/Users/parkercase/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/opt/homebrew/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/opt/postgresql@14/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/opt/postgresql@14/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin",GSETTINGS_SCHEMA_DIR:"/opt/anaconda3/share/glib-2.0/schemas",npm_package_json:"/Users/parkercase/stylist/package.json",_:"/Users/parkercase/stylist/node_modules/.bin/webpack",npm_config_userconfig:"/Users/parkercase/.npmrc",npm_config_init_module:"/Users/parkercase/.npm-init.js",CONDA_PREFIX:"/opt/anaconda3",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/parkercase/stylist",npm_lifecycle_event:"build",EDITOR:"vi",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"delta",npm_package_name:"stylist-widget",LANG:"en_US.UTF-8",npm_config_npm_version:"11.2.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/opt/homebrew/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",_CE_M:"",XPC_SERVICE_NAME:"0",SHLVL:"4",HOME:"/Users/parkercase",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/parkercase/.npm",CONDA_PYTHON_EXE:"/opt/anaconda3/bin/python",LOGNAME:"parkercase",npm_lifecycle_script:"webpack --mode production",VSCODE_GIT_IPC_HANDLE:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/vscode-git-21a8511f03.sock",COREPACK_ENABLE_AUTO_PIN:"0",CONDA_DEFAULT_ENV:"base",npm_config_user_agent:"npm/11.2.0 node/v23.5.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",CLAUDECODE:"1",npm_node_execpath:"/opt/homebrew/Cellar/node/23.5.0/bin/node",npm_config_prefix:"/opt/homebrew",COLORTERM:"truecolor"}.REACT_APP_RETAILER_ID||"",apiUrl:{NVM_RC_VERSION:"",TERM_PROGRAM:"vscode",CLAUDE_CODE_ENTRYPOINT:"CLI",NODE:"/opt/homebrew/Cellar/node/23.5.0/bin/node",INIT_CWD:"/Users/parkercase/stylist",NVM_CD_FLAGS:"",TERM:"xterm-256color",SHELL:"/bin/bash",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/",npm_config_global_prefix:"/opt/homebrew",CONDA_SHLVL:"1",TERM_PROGRAM_VERSION:"1.86.2",CONDA_PROMPT_MODIFIER:"(base) ",GSETTINGS_SCHEMA_DIR_CONDA_BACKUP:"",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/parkercase/stylist",GIT_EDITOR:"true",NVM_DIR:"/Users/parkercase/.nvm",USER:"parkercase",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/opt/homebrew/etc/npmrc",CONDA_EXE:"/opt/anaconda3/bin/conda",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.JcIuSn6aOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/opt/homebrew/lib/node_modules/npm/bin/npm-cli.js",_CE_CONDA:"",PATH:"/Users/parkercase/stylist/node_modules/.bin:/Users/parkercase/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/opt/homebrew/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/opt/postgresql@14/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/opt/postgresql@14/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin",GSETTINGS_SCHEMA_DIR:"/opt/anaconda3/share/glib-2.0/schemas",npm_package_json:"/Users/parkercase/stylist/package.json",_:"/Users/parkercase/stylist/node_modules/.bin/webpack",npm_config_userconfig:"/Users/parkercase/.npmrc",npm_config_init_module:"/Users/parkercase/.npm-init.js",CONDA_PREFIX:"/opt/anaconda3",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/parkercase/stylist",npm_lifecycle_event:"build",EDITOR:"vi",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"delta",npm_package_name:"stylist-widget",LANG:"en_US.UTF-8",npm_config_npm_version:"11.2.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/opt/homebrew/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",_CE_M:"",XPC_SERVICE_NAME:"0",SHLVL:"4",HOME:"/Users/parkercase",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/parkercase/.npm",CONDA_PYTHON_EXE:"/opt/anaconda3/bin/python",LOGNAME:"parkercase",npm_lifecycle_script:"webpack --mode production",VSCODE_GIT_IPC_HANDLE:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/vscode-git-21a8511f03.sock",COREPACK_ENABLE_AUTO_PIN:"0",CONDA_DEFAULT_ENV:"base",npm_config_user_agent:"npm/11.2.0 node/v23.5.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",CLAUDECODE:"1",npm_node_execpath:"/opt/homebrew/Cellar/node/23.5.0/bin/node",npm_config_prefix:"/opt/homebrew",COLORTERM:"truecolor"}.REACT_APP_API_URL||"",onItemFeedback:m,onAddToWishlist:g,onAddToCart:b,primaryColor:C})]}))}},3874:function(e,t,s){"use strict";s.d(t,{X:function(){return n},s:function(){return i}});var n;!function(e){e.WIDGET_OPEN="widget_open",e.WIDGET_CLOSE="widget_close",e.WIDGET_MINIMIZE="widget_minimize",e.MESSAGE_SENT="message_sent",e.ITEM_VIEW="item_view",e.ITEM_LIKE="item_like",e.ITEM_DISLIKE="item_dislike",e.OUTFIT_VIEW="outfit_view",e.OUTFIT_LIKE="outfit_like",e.OUTFIT_DISLIKE="outfit_dislike",e.OUTFIT_SAVE="outfit_save",e.ADD_TO_WISHLIST="add_to_wishlist",e.ADD_TO_CART="add_to_cart",e.STYLE_QUIZ_START="style_quiz_start",e.STYLE_QUIZ_COMPLETE="style_quiz_complete",e.STYLE_QUIZ_PARTIAL="style_quiz_partial",e.STYLE_QUIZ_ABANDON="style_quiz_abandon",e.TRY_ON_START="try_on_start",e.TRY_ON_COMPLETE="try_on_complete",e.TRY_ON_SAVED="try_on_saved",e.VIEW_LOOKBOOK="view_lookbook",e.ERROR="error",e.MESSAGE_THUMBS_UP="message_thumbs_up",e.RECOMMENDATION_THUMBS_UP="recommendation_thumbs_up",e.FEEDBACK_SYNCED="feedback_synced"}(n||(n={}));const o=()=>{let e=sessionStorage.getItem("stylist_session_id");return e||(e=`session_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,sessionStorage.setItem("stylist_session_id",e)),e},i=(e,t,s)=>{const n={type:e,timestamp:new Date,userId:t,sessionId:o(),data:s};console.log("[Analytics Event]:",n),l(n)};let a=[],r=!1;const l=e=>{a.push(e),r||c()},c=()=>{return e=void 0,t=void 0,n=function*(){if(0===a.length)return void(r=!1);r=!0;const e=a.slice(0,10);try{(yield fetch("https://api.thestylist.ai/api/v1/analytics/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:e})})).ok?a=a.slice(e.length):yield new Promise((e=>setTimeout(e,5e3)))}catch(e){console.error("Failed to send analytics events:",e),yield new Promise((e=>setTimeout(e,5e3)))}c()},new((s=void 0)||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}));var e,t,s,n}},4245:function(e,t,s){"use strict";var n=s(4848),o=s(6540),i=s(6682),a=s(2143),r=s(8748),l=s(139);const c=({fallback:e,componentId:t})=>{const s=(0,o.useRef)(performance.now());return(0,o.useEffect)((()=>{const e=performance.now()-s.current;return console.log(`[LIFECYCLE:AsyncLoader:${t}] Suspense fallback rendering`),(0,r.HJ)(`AsyncLoader:${t}`,"fallback",`Suspense fallback rendering for ${t}`,{renderDuration:`${e.toFixed(2)}ms`}),(0,r.Ng)(`SuspenseFallback:${t}`,e,{component:t}),()=>{const e=performance.now()-s.current;(0,r.HJ)(`AsyncLoader:${t}`,"resolved",`Suspense resolved for ${t}`,{totalDuration:`${e.toFixed(2)}ms`,component:t})}}),[t]),(0,n.jsx)(n.Fragment,{children:e})};t.A=({children:e,loadingMessage:t="Loading...",fallback:s,onLoadStart:d,onLoadComplete:u,onLoadError:m})=>{(0,l.Dp)("AsyncComponentLoader");const[p,g]=(0,o.useState)(!1),[_,h]=(0,o.useState)(!1),y=(0,o.useRef)(null),b=(0,o.useRef)(null),[f,E]=(0,o.useState)(0),C=(0,o.useRef)(!0),v=(0,o.useRef)(`async-${Math.random().toString(36).substring(2,9)}`).current,I=(0,o.useRef)(performance.now());console.log(`[LIFECYCLE:AsyncLoader:${v}] Component initialized`),(0,r.uy)("AsyncComponentLoader","mount",`AsyncLoader:${v} initialized`,{componentId:v}),(0,l.Im)("AsyncComponentLoader","loadStart",[d],(()=>{d&&a.USE_LAZY_LOADING&&(console.log(`[LIFECYCLE:AsyncLoader:${v}] Calling onLoadStart callback`),(0,r.at)("AsyncComponentLoader","onLoadStart","init",`Calling onLoadStart callback for ${v}`),d())}));const S=e=>{C.current&&(console.warn(`[LIFECYCLE:AsyncLoader:${v}] Error loading component:`,e.message),(0,r.Pk)("AsyncComponentLoader",e,{componentStack:`AsyncLoader:${v}`}),m&&(console.log(`[LIFECYCLE:AsyncLoader:${v}] Calling onLoadError callback`),m(e)),g(!0),setTimeout((()=>{C.current&&(console.log(`[LIFECYCLE:AsyncLoader:${v}] Forcing remount after error`),(0,r.uy)("AsyncComponentLoader","render",`Forcing remount after error for ${v}`,{error:e.message}),E((e=>e+1)))}),100))};if((0,l.Im)("AsyncComponentLoader","suspenseTimeouts",[p,a.USE_LAZY_LOADING,v],(()=>{if(a.USE_LAZY_LOADING)return console.log(`[LIFECYCLE:AsyncLoader:${v}] Setting up suspense timeouts`),(0,r.at)("AsyncComponentLoader","suspenseTimeouts","init",`Setting up suspense timeouts for ${v}`,{isLoaded:p}),C.current=!0,p||(y.current=setTimeout((()=>{!p&&C.current&&(console.warn(`[LIFECYCLE:AsyncLoader:${v}] Component load timed out after 2s, forcing render`),(0,r.at)("AsyncComponentLoader","suspenseTimeouts","update",`Component load timed out after 2s, forcing render for ${v}`,{timeoutLevel:"primary",timeoutDuration:"2s"}),h(!0),g(!0))}),2e3),b.current=setTimeout((()=>{!p&&C.current&&(console.warn(`[LIFECYCLE:AsyncLoader:${v}] Final timeout reached after 3s, forcing component remount`),(0,r.at)("AsyncComponentLoader","suspenseTimeouts","update",`Final timeout reached after 3s, forcing component remount for ${v}`,{timeoutLevel:"final",timeoutDuration:"3s",loadDuration:`${((performance.now()-I.current)/1e3).toFixed(1)}s`}),h(!0),g(!0),E((e=>e+1)),(0,r.HJ)(`AsyncLoader:${v}`,"resolved",`Suspense forcibly resolved for ${v} after timeout`,{totalDuration:`${((performance.now()-I.current)/1e3).toFixed(1)}s`,component:v,forcedResolution:!0}))}),3e3)),()=>{console.log(`[LIFECYCLE:AsyncLoader:${v}] Cleaning up suspense timeouts`),(0,r.at)("AsyncComponentLoader","suspenseTimeouts","cleanup",`Cleaning up suspense timeouts for ${v}`),C.current=!1,y.current&&clearTimeout(y.current),b.current&&clearTimeout(b.current)}})),(0,l.Im)("AsyncComponentLoader","postRenderLoad",[p,a.USE_LAZY_LOADING,u,v],(()=>{if(a.USE_LAZY_LOADING&&!p&&C.current){console.log(`[LIFECYCLE:AsyncLoader:${v}] Setting up post-render timer to mark as loaded`),(0,r.at)("AsyncComponentLoader","postRenderLoad","init",`Setting up post-render timer for ${v}`);const e=setTimeout((()=>{C.current&&(console.log(`[LIFECYCLE:AsyncLoader:${v}] Post-render timer fired, marking as loaded`),(0,r.at)("AsyncComponentLoader","postRenderLoad","update",`Post-render timer fired for ${v}`,{loadTime:`${(performance.now()-I.current).toFixed(2)}ms`}),g(!0),u&&(console.log(`[LIFECYCLE:AsyncLoader:${v}] Calling onLoadComplete callback`),u()),(0,r.Ng)("AsyncComponentLoader:complete",performance.now()-I.current,{componentId:v,hasTimeout:_}))}),30);return()=>clearTimeout(e)}})),(0,l.Im)("AsyncComponentLoader","childrenRendering",[_,f,a.USE_LAZY_LOADING,v],(()=>{a.USE_LAZY_LOADING&&(console.log(`[LIFECYCLE:AsyncLoader:${v}] Children rendering ${_?"(timeout mode)":"(suspense mode)"}`),(0,r.uy)("AsyncComponentLoader","render",`Children rendering for ${v}`,{mode:_?"timeout":"suspense",componentKey:f}))})),!a.USE_LAZY_LOADING)return(0,n.jsx)(n.Fragment,{children:e});const O=(0,n.jsxs)("div",Object.assign({className:"stylist-loading-container",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",height:"100%"}},{children:[(0,n.jsx)(i.A,{}),(0,n.jsx)("p",Object.assign({style:{marginTop:"1rem"}},{children:t}))]})),w=(0,n.jsxs)("div",Object.assign({className:"stylist-error-container",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",height:"100%"}},{children:[(0,n.jsx)("p",Object.assign({style:{marginTop:"1rem"}},{children:"Unable to load component"})),(0,n.jsx)("button",Object.assign({onClick:()=>C.current&&E((e=>e+1)),style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"var(--stylist-primary-color, #4361ee)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},{children:"Try Again"}))]}));if(_)return console.log(`[LIFECYCLE:AsyncLoader:${v}] Rendering with timeout fallback`),(0,r.uy)("AsyncComponentLoader","render",`Rendering with timeout fallback for ${v}`,{mode:"timeout",timeElapsed:`${(performance.now()-I.current).toFixed(2)}ms`}),(0,n.jsx)(l.ap,Object.assign({componentName:`AsyncLoader:${v}`,onError:S,fallback:w},{children:e}),`timeout-fallback-${f}`);console.log(`[LIFECYCLE:AsyncLoader:${v}] Rendering with suspense`),(0,r.uy)("AsyncComponentLoader","render",`Rendering with suspense for ${v}`,{mode:"suspense",timeElapsed:`${(performance.now()-I.current).toFixed(2)}ms`});const T=s||O;return(0,n.jsx)(l.ap,Object.assign({componentName:`AsyncLoader:${v}`,onError:S,fallback:w},{children:(0,n.jsx)(l.OT,Object.assign({componentName:`AsyncLoader:${v}`,fallback:(0,n.jsx)(c,{fallback:T,componentId:v})},{children:e}))}),`error-boundary-${f}`)}},4530:function(){},4833:function(e,t,s){"use strict";s.d(t,{A:function(){return a}});var n=s(4848),o=s(6639),i=({onClick:e,isSaved:t=!1,label:s="Save",primaryColor:o})=>{const i=o?{backgroundColor:o}:void 0;return(0,n.jsxs)("button",Object.assign({className:"stylist-wishlist-button "+(t?"stylist-wishlist-button--saved":""),onClick:e,style:t?void 0:i},{children:[(0,n.jsx)("span",Object.assign({className:"stylist-wishlist-button__icon"},{children:t?(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})):(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"})}))})),(0,n.jsx)("span",Object.assign({className:"stylist-wishlist-button__label"},{children:t?"Saved":s}))]}))},a=({outfit:e,onFeedback:t,onSaveOutfit:s,onItemClick:a,primaryColor:r})=>{const{id:l,items:c,occasion:d,matchScore:u,matchReasons:m}=e,p=e=>{t&&t(l,e)};return(0,n.jsxs)("div",Object.assign({className:"stylist-outfit-display"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-outfit-display__header"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-outfit-display__title"},{children:["Complete Outfit for ",d]})),(0,n.jsxs)("div",Object.assign({className:"stylist-outfit-display__score",style:{color:r}},{children:[Math.round(100*u),"% Match"]}))]})),(0,n.jsx)("div",Object.assign({className:"stylist-outfit-display__items"},{children:c.map((e=>(0,n.jsxs)("div",Object.assign({className:"stylist-outfit-display__item",onClick:()=>{return t=e.id,void(a&&a(t));var t}},{children:[e.imageUrl?(0,n.jsx)("img",{src:e.imageUrl,alt:e.name,className:"stylist-outfit-display__item-image"}):(0,n.jsx)("div",Object.assign({className:"stylist-outfit-display__item-placeholder"},{children:e.category})),(0,n.jsxs)("div",Object.assign({className:"stylist-outfit-display__item-info"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-outfit-display__item-brand"},{children:e.brand})),(0,n.jsx)("div",Object.assign({className:"stylist-outfit-display__item-name"},{children:e.name}))]}))]}),e.id)))})),m.length>0&&(0,n.jsxs)("div",Object.assign({className:"stylist-outfit-display__reasons"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-outfit-display__reasons-title"},{children:"Why this outfit works:"})),(0,n.jsx)("ul",Object.assign({className:"stylist-outfit-display__reasons-list"},{children:m.map(((e,t)=>(0,n.jsx)("li",Object.assign({className:"stylist-outfit-display__reason-item"},{children:e}),t)))}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-outfit-display__actions"},{children:[(0,n.jsx)(o.Ay,{onLike:()=>p(!0),onDislike:()=>p(!1),primaryColor:r}),(0,n.jsx)(i,{onClick:()=>{s&&s(l)},primaryColor:r,label:"Save Outfit"})]}))]}))}},5104:function(e,t,s){"use strict";s.d(t,{O:function(){return a},y:function(){return r}});var n=s(2505),o=s.n(n),i=function(e,t,s,n){return new(s||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))};class a{constructor(e){this.maxRetries=e.maxRetries||3,this.getAuthHeader=e.getAuthHeader;const t={baseURL:e.baseURL,timeout:e.timeout||15e3},s={"Content-Type":"application/json",Accept:"application/json"};e.apiKey&&(s["X-API-Key"]=e.apiKey),e.headers&&Object.assign(s,e.headers),this.client=o().create(Object.assign(Object.assign({},t),{headers:s})),this.client.interceptors.request.use((e=>{const t=Object.assign({},e);return t.headers&&"X-API-Key"in t.headers&&(t.headers=Object.assign(Object.assign({},t.headers),{"X-API-Key":"[REDACTED]"})),console.debug("API Request:",t),e}),(e=>(console.error("API Request Error:",e),Promise.reject(e)))),this.client.interceptors.response.use((e=>(console.debug("API Response:",{status:e.status,statusText:e.statusText,data:e.data}),e)),(e=>(console.error("API Response Error:",{message:e.message,response:e.response?{status:e.response.status,statusText:e.response.statusText,data:e.response.data}:null}),Promise.reject(e))))}get(e,t){return i(this,void 0,void 0,(function*(){return this.requestWithRetry("get",e,void 0,t)}))}post(e,t,s){return i(this,void 0,void 0,(function*(){return this.requestWithRetry("post",e,t,s)}))}put(e,t,s){return i(this,void 0,void 0,(function*(){return this.requestWithRetry("put",e,t,s)}))}delete(e,t){return i(this,void 0,void 0,(function*(){return this.requestWithRetry("delete",e,void 0,t)}))}requestWithRetry(e,t,s,n){return i(this,void 0,void 0,(function*(){let o=0,i=null,a=Object.assign({},n);for(this.getAuthHeader&&(a.headers=Object.assign(Object.assign({},a.headers),this.getAuthHeader()));o<=this.maxRetries;)try{let n;switch(e){case"get":n=yield this.client.get(t,a);break;case"post":n=yield this.client.post(t,s,a);break;case"put":n=yield this.client.put(t,s,a);break;case"delete":n=yield this.client.delete(t,a)}return n.data}catch(e){if(i=e,!(this.isRetryableError(e)&&o<this.maxRetries))break;{o++;const e=1e3*Math.pow(2,o);console.log(`Retrying request (${o}/${this.maxRetries}) after ${e}ms`),yield new Promise((t=>setTimeout(t,e)))}}throw this.handleError(i),i}))}isRetryableError(e){return!e.response||e.response&&e.response.status>=500}handleError(e){if(e.response){const t=e.response.status;if(401===t)throw new Error("Unauthorized: Please check your API key or log in again");if(403===t)throw new Error("Forbidden: You do not have permission to access this resource");if(404===t)throw new Error("Resource not found");if(t>=500)throw new Error("Server error, please try again later");{const t=e.response.data||{};throw new Error(`API Error: ${t.message||e.message}`)}}throw e.request?new Error("No response received from server. Please check your connection"):new Error(`Request setup error: ${e.message}`)}}const r=e=>new a(e)},5778:function(e,t,s){"use strict";s.d(t,{i:function(){return o}});var n=function(e,t,s,n){return new(s||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))};class o{constructor(e){this.client=e}getUserProfile(e){return n(this,void 0,void 0,(function*(){return this.client.get(`/api/v1/users/${e}`)}))}createUser(e){return n(this,void 0,void 0,(function*(){return this.client.post("/api/v1/users",{email:e})}))}updatePreferences(e,t){return n(this,void 0,void 0,(function*(){return this.client.put(`/api/v1/users/${e}/preferences`,t)}))}getStyleQuiz(){return n(this,void 0,void 0,(function*(){return this.client.get("/api/v1/style-quiz")}))}submitStyleQuiz(e,t){return n(this,void 0,void 0,(function*(){return this.client.post(`/api/v1/users/${e}/style-quiz`,{answers:t})}))}addClosetItem(e,t){return n(this,void 0,void 0,(function*(){return this.client.post(`/api/v1/users/${e}/closet`,t)}))}removeClosetItem(e,t){return n(this,void 0,void 0,(function*(){return this.client.delete(`/api/v1/users/${e}/closet/${t}`)}))}updateClosetItem(e,t,s){return n(this,void 0,void 0,(function*(){return this.client.put(`/api/v1/users/${e}/closet/${t}`,s)}))}toggleFavoriteItem(e,t,s){return n(this,void 0,void 0,(function*(){return this.client.put(`/api/v1/users/${e}/closet/${t}/favorite`,{favorite:s})}))}}},5817:function(){},5819:function(e,t,s){"use strict";s.d(t,{$g:function(){return o},Yq:function(){return i}});var n=s(6445);const o=(e,t="USD",s="en-US")=>new Intl.NumberFormat(s,{style:"currency",currency:t}).format(e),i=(e,t="MMM d, yyyy")=>{const s="string"==typeof e?new Date(e):e;return(0,n.A)(s,t)}},6639:function(e,t,s){"use strict";s.d(t,{Vc:function(){return a},Ay:function(){return r}});var n=s(4848),o=s(6540),i=s(2026),a=({messageId:e,onThumbsUp:t,primaryColor:s})=>{const[a,r]=(0,o.useState)(!1),{addMessageThumbsUp:l,isMessageThumbedUp:c}=(0,i.k)();(0,o.useEffect)((()=>{r(c(e))}),[e,c]);const d=a&&s?{color:s,borderColor:s}:void 0;return(0,n.jsx)("div",Object.assign({className:"stylist-feedback-controls stylist-feedback-controls--thumbs-up"},{children:(0,n.jsxs)("button",Object.assign({className:"stylist-feedback-controls__button "+(a?"stylist-feedback-controls__button--active":""),onClick:()=>{r(!0),t(),l(e)},style:d,"aria-label":"This was helpful",disabled:a},{children:[(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z"})})),(0,n.jsx)("span",Object.assign({className:"stylist-feedback-controls__button-text"},{children:a?"Thanks for your feedback!":"Was this helpful?"}))]}))}))},r=({onLike:e,onDislike:t,itemId:s,outfitId:a,liked:r=!1,disliked:l=!1,primaryColor:c})=>{const[d,u]=(0,o.useState)(r),[m,p]=(0,o.useState)(l),g=(0,i.k)(),_=g.addItemFeedback,h=g.addOutfitFeedback,y=g.getItemFeedbackStatus,b=g.getOutfitFeedbackStatus;(0,o.useEffect)((()=>{if(s){const e=y(s);u(e.liked),p(e.disliked)}else if(a){const e=b(a);u(e.liked),p(e.disliked)}else u(r),p(l)}),[s,a,r,l,y,b]);const f=d&&c?{color:c,borderColor:c}:void 0,E=m&&c?{color:c,borderColor:c}:void 0;return(0,n.jsxs)("div",Object.assign({className:"stylist-feedback-controls"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-feedback-controls__button "+(d?"stylist-feedback-controls__button--active":""),onClick:()=>{u(!0),p(!1),e(),s?_(s,"like"):a&&h(a,"like")},style:f,"aria-label":"Like"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z"})}))})),(0,n.jsx)("button",Object.assign({className:"stylist-feedback-controls__button "+(m?"stylist-feedback-controls__button--active":""),onClick:()=>{u(!1),p(!0),t(),s?_(s,"dislike"):a&&h(a,"dislike")},style:E,"aria-label":"Dislike"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01L1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"})}))}))]}))}},6682:function(e,t,s){"use strict";var n=s(4848);t.A=({size:e="medium",text:t,primaryColor:s})=>{const o=`stylist-loading-indicator--${e}`,i=s?{borderTopColor:s}:void 0;return(0,n.jsxs)("div",Object.assign({className:`stylist-loading-indicator ${o}`},{children:[(0,n.jsx)("div",{className:"stylist-loading-indicator__spinner",style:i}),t&&(0,n.jsx)("div",Object.assign({className:"stylist-loading-indicator__text"},{children:t}))]}))}},7160:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var n=s(4848),o=s(6540),i=s.n(o),a=s(5213),r=({onClickNotification:e})=>{const{wishlistItems:t}=(0,a.W0)(),[s,i]=(0,o.useState)([]),[r,l]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1);(0,o.useEffect)((()=>{const e=setTimeout((()=>{if(t.length>0){const e=t[Math.floor(Math.random()*t.length)];if(e){const t={id:`notification_${Date.now()}`,itemId:e.itemId,itemName:e.name||`Product ${e.itemId.slice(0,6)}`,type:Math.random()>.5?"sale":"low_stock",date:new Date,read:!1};i((e=>[...e,t])),d(!0)}}}),5e3);return()=>clearTimeout(e)}),[t]);const u=()=>{e&&e(),l(!1)};return 0===s.length?null:(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-notification"},{children:[(0,n.jsxs)("button",Object.assign({className:"stylist-wishlist-notification__bell "+(c?"has-unread":""),onClick:()=>{l(!r),r||(i((e=>e.map((e=>Object.assign(Object.assign({},e),{read:!0}))))),d(!1))},"aria-label":"Notifications"},{children:[(0,n.jsx)("span",Object.assign({className:"stylist-wishlist-notification__icon"},{children:"ðŸ””"})),c&&(0,n.jsx)("span",{className:"stylist-wishlist-notification__badge"})]})),r&&(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-notification__panel"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-notification__header"},{children:[(0,n.jsx)("h3",Object.assign({className:"stylist-wishlist-notification__title"},{children:"Notifications"})),(0,n.jsx)("button",Object.assign({className:"stylist-wishlist-notification__close",onClick:()=>l(!1),"aria-label":"Close notifications"},{children:"Ã—"}))]})),(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-notification__list"},{children:0===s.length?(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-notification__empty"},{children:"No notifications"})):s.map((e=>(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-notification__item "+(e.read?"read":"unread"),onClick:u},{children:(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-notification__content"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-notification__item-icon"},{children:"sale"===e.type?"ðŸ’°":"âš ï¸"})),(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-notification__item-text"},{children:[(0,n.jsx)("p",Object.assign({className:"stylist-wishlist-notification__item-message"},{children:"sale"===e.type?`${e.itemName} is now on sale!`:`${e.itemName} is running low in stock!`})),(0,n.jsx)("span",Object.assign({className:"stylist-wishlist-notification__item-time"},{children:new Date(e.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}))]}))]}))}),e.id)))})),s.length>0&&(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-notification__footer"},{children:(0,n.jsx)("button",Object.assign({className:"stylist-wishlist-notification__clear",onClick:()=>{i([]),d(!1),l(!1)}},{children:"Clear all"}))}))]}))]}))},l=({title:e="The Stylist",logo:t,primaryColor:s,currentView:o="chat",onSwitchView:i})=>{const{toggleMinimize:l,toggleOpen:c,isMinimized:d}=(0,a.Lo)();return(0,n.jsxs)("div",Object.assign({className:"stylist-chat-header",style:{backgroundColor:s}},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-chat-header__logo"},{children:t?(0,n.jsx)("img",{src:t,alt:e,className:"stylist-chat-header__logo-img"}):(0,n.jsx)("div",Object.assign({className:"stylist-chat-header__logo-placeholder"},{children:"chat"===o?(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M12 1a9 9 0 019 9c0 4.56-3.37 8.33-7.76 8.95l-.19-.47a7.99 7.99 0 002.93-10.57A8.02 8.02 0 004.06 13.1A9 9 0 0112 1zm7.12 13.93l.37.37-.36.36.01-.73zm1.36-1.55a2.83 2.83 0 00-.5-.31l.36-.74c.28.12.54.29.78.48l-.64.57zm-14.81.19l.36.73c-.29.16-.57.35-.8.57l-.57-.64c.31-.3.65-.54 1.01-.66zM6.66 22l1.93-3.1c-.47-.55-.85-1.16-1.14-1.8L2.8 19.13V22h3.86zm10.46-2.91L19 21.99v-2.86l-1.14-.93c.12-.39.19-.8.19-1.22l.08-.04A8.96 8.96 0 0022 10 10 10 0 002 10a9 9 0 003.34 7.03L1.94 20.5A1 1 0 002.86 22h16.28a1 1 0 00.92-1.5l-2.94-3.41z"})})):(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-3 2v5l-1-.75L15 9V4h2zm3 12H8V4h5v9l3-2.25L19 13V4h1v12z"})}))}))})),(0,n.jsx)("div",Object.assign({className:"stylist-chat-header__title"},{children:e})),(0,n.jsxs)("div",Object.assign({className:"stylist-chat-header__controls"},{children:[!d&&(0,n.jsx)(r,{onClickNotification:()=>{i&&("lookbook"!==o&&i("lookbook"),console.log("Switch to wishlist tab"))}}),i&&!d&&(0,n.jsx)("button",Object.assign({className:"stylist-chat-header__button stylist-chat-header__button--switch",onClick:()=>{i&&i("chat"===o?"lookbook":"chat")},"aria-label":"chat"===o?"View Lookbook":"Return to Chat"},{children:"chat"===o?(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-3 2v5l-1-.75L15 9V4h2zm3 12H8V4h5v9l3-2.25L19 13V4h1v12z"})})):(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})}))})),(0,n.jsx)("button",Object.assign({className:"stylist-chat-header__button stylist-chat-header__button--minimize",onClick:()=>{l()},"aria-label":d?"Maximize":"Minimize"},{children:d?(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})):(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M19 13H5v-2h14v2z"})}))})),(0,n.jsx)("button",Object.assign({className:"stylist-chat-header__button stylist-chat-header__button--close",onClick:()=>{c()},"aria-label":"Close"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})}))}))]}))]}))},c=s(6942),d=s.n(c),u=s(4823),m=s(5819),p=s(6639),g=s(3874),_=s(800),h=({message:e,primaryColor:t,onFeedback:s})=>{const{id:a,sender:r,text:l,timestamp:c}=e,[h,y]=(0,o.useState)(!1),b=r===u.D$.USER,f=r===u.D$.ASSISTANT,E=r===u.D$.SYSTEM,C=f&&l.length>20&&!l.includes("Would you like")&&s,v=d()("stylist-message-bubble",{"stylist-message-bubble--user":b,"stylist-message-bubble--assistant":f,"stylist-message-bubble--system":E,"stylist-message-bubble--with-feedback":C}),I=b&&t?{backgroundColor:t}:void 0;return(0,n.jsxs)("div",Object.assign({className:v},{children:[!b&&(0,n.jsx)("div",Object.assign({className:"stylist-message-bubble__avatar"},{children:f?(0,n.jsx)("div",Object.assign({className:"stylist-message-bubble__avatar-icon"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M12 1a9 9 0 019 9c0 4.56-3.37 8.33-7.76 8.95l-.19-.47a7.99 7.99 0 002.93-10.57A8.02 8.02 0 004.06 13.1 9 9 0 0112 1zm7.12 13.93l.37.37-.36.36.01-.73zm1.36-1.55a2.83 2.83 0 00-.5-.31l.36-.74c.28.12.54.29.78.48l-.64.57zm-14.81.19l.36.73c-.29.16-.57.35-.8.57l-.57-.64c.31-.3.65-.54 1.01-.66zM6.66 22l1.93-3.1c-.47-.55-.85-1.16-1.14-1.8L2.8 19.13V22h3.86zm10.46-2.91L19 21.99v-2.86l-1.14-.93c.12-.39.19-.8.19-1.22l.08-.04A8.96 8.96 0 0022 10 10 10 0 002 10a9 9 0 003.34 7.03L1.94 20.5A1 1 0 002.86 22h16.28a1 1 0 00.92-1.5l-2.94-3.41z"})}))})):(0,n.jsx)("div",Object.assign({className:"stylist-message-bubble__avatar-info"},{children:"i"}))})),(0,n.jsxs)("div",Object.assign({className:"stylist-message-bubble__content",style:I},{children:[l.split("\n").map(((e,t)=>(0,n.jsxs)(i().Fragment,{children:[e,t<l.split("\n").length-1&&(0,n.jsx)("br",{})]},t))),C&&(0,n.jsx)("div",Object.assign({className:"stylist-message-bubble__feedback"},{children:(0,n.jsx)(p.Vc,{messageId:a,onThumbsUp:()=>{y(!0),s&&(s(a,!0),(0,g.s)(g.X.MESSAGE_THUMBS_UP,(0,_.F6)(),{messageId:a,messageContent:l.substring(0,100)}))},primaryColor:t})}))]})),(0,n.jsx)("div",Object.assign({className:"stylist-message-bubble__time"},{children:(0,m.Yq)(c,"h:mm a")}))]}))},y=s(109),b=s(4833),f=s(7574).A,E=({messages:e,onItemFeedback:t,onOutfitFeedback:s,onMessageFeedback:i,onQuizSubmit:a,isLoading:r=!1,primaryColor:l})=>{const c=(0,o.useRef)(null),d=(0,o.useRef)(null);(0,o.useEffect)((()=>{u()}),[e]);const u=()=>{c.current&&c.current.scrollIntoView({behavior:"smooth"})};return(0,n.jsx)("div",Object.assign({className:"stylist-chat-body",ref:d},{children:(0,n.jsxs)("div",Object.assign({className:"stylist-chat-body__messages"},{children:[e.map((e=>(e=>{switch(e.type){case"text":return(0,n.jsx)(h,{message:e,primaryColor:l,onFeedback:i},e.id);case"recommendation":return(0,n.jsxs)("div",Object.assign({className:"stylist-chat-body__recommendation"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-chat-body__recommendation-title"},{children:"Here are some recommendations for you:"})),(0,n.jsx)("div",Object.assign({className:"stylist-chat-body__recommendation-items"},{children:e.items.map((e=>{const s={id:e.id,retailerId:"default",name:e.name,brand:e.brand,category:e.category,price:e.price,salePrice:e.salePrice,colors:[],sizes:[],imageUrls:[e.imageUrl],url:e.url,matchScore:e.matchScore,matchReasons:e.matchReasons,inStock:!0};return(0,n.jsx)(y.A,{item:s,onFeedback:t,primaryColor:l},e.id)}))}))]}),e.id);case"outfit":return(0,n.jsx)(b.A,{outfit:e.outfit,onFeedback:s,primaryColor:l},e.id);case"quiz":return(0,n.jsx)(f,{quizId:e.quizId,title:e.title,description:e.description,onSubmit:a||(()=>{}),primaryColor:l},e.id);case"loading":return(0,n.jsx)("div",Object.assign({className:"stylist-chat-body__loading"},{children:(0,n.jsxs)("div",Object.assign({className:"stylist-chat-body__loading-dots"},{children:[(0,n.jsx)("span",{}),(0,n.jsx)("span",{}),(0,n.jsx)("span",{})]}))}),e.id);case"error":return(0,n.jsxs)("div",Object.assign({className:"stylist-chat-body__error"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-chat-body__error-icon"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}))})),(0,n.jsx)("div",Object.assign({className:"stylist-chat-body__error-message"},{children:e.error}))]}),e.id);default:return null}})(e))),r&&(0,n.jsx)("div",Object.assign({className:"stylist-chat-body__loading"},{children:(0,n.jsxs)("div",Object.assign({className:"stylist-chat-body__loading-dots"},{children:[(0,n.jsx)("span",{}),(0,n.jsx)("span",{}),(0,n.jsx)("span",{})]}))})),(0,n.jsx)("div",{ref:c})]}))}))},C=({onSendMessage:e,placeholder:t="Type a message...",disabled:s=!1,primaryColor:i})=>{const[r,l]=(0,o.useState)(""),c=(0,o.useRef)(null),{isLoading:d}=(0,a.Lo)();(0,o.useEffect)((()=>{c.current&&c.current.focus()}),[]),(0,o.useEffect)((()=>{c.current&&(c.current.style.height="auto",c.current.style.height=`${Math.min(c.current.scrollHeight,120)}px`)}),[r]);const u=()=>{const t=r.trim();!t||s||d||(e(t),l(""),c.current&&(c.current.style.height="auto"))},m={backgroundColor:i||void 0};return(0,n.jsxs)("div",Object.assign({className:"stylist-chat-input"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-chat-input__container"},{children:(0,n.jsx)("textarea",{ref:c,className:"stylist-chat-input__textarea",placeholder:t,value:r,onChange:e=>{l(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u())},disabled:s||d,rows:1,"aria-label":"Message input"})})),(0,n.jsx)("button",Object.assign({className:"stylist-chat-input__send-button",onClick:u,disabled:!r.trim()||s||d,style:m,"aria-label":"Send message"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}))}))]}))},v=s(2026),I=s(104),S=s(5279),O=s(9283),w=function(e,t,s,n){return new(s||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))};class T{constructor(e,t){this.conversationContext=[],this.recommendationApi=e,this.userId=t,this.claudeConfig={apiKey:O.mU,baseUrl:O.UI,modelName:O.nt,fallbackMode:!O.mU||O.WW},this.conversationContext=[`You are an AI style assistant for a fashion recommendation platform called "The Stylist". \n      The current date is ${(new Date).toLocaleDateString()}.\n      You help users discover clothing items and outfits that match their personal style.\n      Keep responses concise, helpful, and focus on providing personalized fashion advice.\n      When you recommend items, focus on why they would work for the user.\n      If you don't know something specific about fashion, you can suggest general style principles.`],O.Ft&&console.info("ðŸ¤– Claude demo mode is ENABLED - will provide realistic AI responses without API key"),O.WW?console.info("ðŸ§ª Forced demo mode is ENABLED - using fallback for Claude API despite keys"):O.mU?console.info("âœ… Claude API key present - will attempt to use real Claude API"):console.info("â„¹ï¸ No Claude API key found - using rule-based fallback responses")}processMessage(e){return w(this,void 0,void 0,(function*(){((e,t)=>{(0,g.s)(g.X.MESSAGE_SENT,e,{text:t})})(this.userId,e);const t=[],s=this.categorizeIntent(e);if(!this.claudeConfig.fallbackMode)try{const s=yield this.callClaudeAPI(e);return t.push(this.createTextMessage(s,u.D$.ASSISTANT)),this.containsRecommendationIntent(s,e)&&(yield this.addRecommendationMessage(t)),t}catch(e){console.error("Error calling Claude API:",e)}const n=this.getDemoResponse(s,e);if(n)return t.push(this.createTextMessage(n,u.D$.ASSISTANT)),"wedding_dress"===s&&(yield this.addRecommendationMessage(t,"wedding")),t;switch(s){case"recommendation":t.push(this.createTextMessage("I found some items that match your style! Here are my recommendations:",u.D$.ASSISTANT)),yield this.addRecommendationMessage(t,this.extractContext(e));break;case"style_quiz":t.push(this.createTextMessage("Would you like to take our style quiz? It will help me understand your preferences better so I can make more personalized recommendations.",u.D$.ASSISTANT));break;case"virtual_try_on":t.push(this.createTextMessage('You can try on any clothing item by clicking the "Try On" button on a recommendation. Upload your photo, and see how the item looks on you!',u.D$.ASSISTANT));break;case"greeting":t.push(this.createTextMessage("Hello! I'm your personal AI style assistant. I can help you discover clothing that matches your unique style. Would you like some personalized recommendations?",u.D$.ASSISTANT));break;case"help":t.push(this.createTextMessage("I can help you with: \n- Finding clothing recommendations based on your style\n- Creating complete outfits\n- Virtual try-on of garments\n- Style advice and tips\n\nJust let me know what you're looking for!",u.D$.ASSISTANT));break;case"wedding_dress":t.push(this.createTextMessage("I can help you find the perfect wedding dress! Here are some recommendations based on current trends:",u.D$.ASSISTANT)),yield this.addRecommendationMessage(t,"wedding");break;default:t.push(this.createTextMessage("I can help you discover fashion items that match your style. Would you like to see some personalized recommendations?",u.D$.ASSISTANT))}return t}))}callClaudeAPI(e){return w(this,void 0,void 0,(function*(){try{if(this.conversationContext.push(e),this.claudeConfig.apiKey)try{return yield this.callDirectClaudeAPI(e)}catch(e){console.error("Direct Claude API call failed, falling back to backend proxy:",e)}const t=this.recommendationApi.apiClient?`${this.recommendationApi.apiClient.baseURL||""}/chat`:"/api/chat";console.log("Calling Claude API via backend proxy at:",t);const s=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":this.recommendationApi.apiClient.apiKey||""},body:JSON.stringify({userId:this.userId,message:e,context:this.conversationContext.slice(-5)})});if(!s.ok)return console.warn(`Claude API request failed with status: ${s.status}`),"I'm having trouble connecting to my backend services. Let me show you some recommendations based on your request.";const n=yield s.json();return this.conversationContext.push(n.response),n.response}catch(e){return console.error("Error calling Claude API via backend:",e),"I'm having trouble connecting right now. Let me show you some recommendations instead."}}))}callDirectClaudeAPI(e){var t,s;return w(this,void 0,void 0,(function*(){if(!this.claudeConfig.apiKey)throw new Error("No Claude API key available");const n=this.claudeConfig.baseUrl||"https://api.anthropic.com",o=this.claudeConfig.modelName||"claude-3-haiku-20240307";console.log(`Calling Claude API directly with model: ${o}`);const i=this.conversationContext.slice(-5).map(((e,t)=>0===t?{role:"system",content:e}:{role:t%2==1?"user":"assistant",content:e}));i.push({role:"user",content:e});const a=yield fetch(`${n}/v1/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.claudeConfig.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:o,messages:i,max_tokens:1e3})});if(!a.ok){const e=yield a.text();throw console.error(`Claude API direct request failed: ${a.status} - ${e}`),new Error(`Failed to get response from Claude API: ${a.statusText}`)}const r=yield a.json(),l=(null===(s=null===(t=r.content)||void 0===t?void 0:t[0])||void 0===s?void 0:s.text)||"";return this.conversationContext.push(l),l}))}containsRecommendationIntent(e,t){const s=e.toLowerCase(),n=t.toLowerCase(),o=["here are some recommendations","i recommend","would you like to see","i can show you","i'll show you some items","i can recommend"],i=["show me","recommend","what should i wear","find me","can you show","give me ideas","what would look good"];for(const e of o)if(s.includes(e))return!0;for(const e of i)if(n.includes(e))return!0;return!1}addRecommendationMessage(e,t){return w(this,void 0,void 0,(function*(){try{const s=yield this.recommendationApi.getRecommendations({userId:this.userId,context:t,limit:4});if(s.items.length>0){const t=s.items.map((e=>({id:e.id,name:e.name,brand:e.brand,category:e.category,price:e.price,salePrice:e.salePrice,imageUrl:e.imageUrls[0]||"",url:e.url,matchScore:e.matchScore,matchReasons:e.matchReasons})));e.push(this.createRecommendationMessage(t))}if(s.outfits.length>0){e.push(this.createTextMessage("I also created a complete outfit for you:",u.D$.ASSISTANT));const t=s.outfits[0],n={id:t.id,name:t.name,occasion:t.occasion,matchScore:t.matchScore,matchReasons:t.matchReasons,items:t.items.map((e=>({id:e.id,name:e.name,brand:e.brand,category:e.category,price:e.price,salePrice:e.salePrice,imageUrl:e.imageUrls[0]||"",url:e.url,matchScore:e.matchScore,matchReasons:e.matchReasons})))};e.push(this.createOutfitMessage(n))}}catch(t){console.error("Error getting recommendations:",t),e.push(this.createTextMessage("Sorry, I had trouble getting recommendations. Please try again.",u.D$.SYSTEM))}}))}categorizeIntent(e){const t=e.toLowerCase();return t.includes("wedding dress")||t.includes("bridal")||t.includes("wedding")&&t.includes("dress")?"wedding_dress":t.includes("recommend")||t.includes("suggestion")||t.includes("find")||t.includes("show me")?"recommendation":t.includes("quiz")||t.includes("style profile")||t.includes("preferences")?"style_quiz":t.includes("try on")||t.includes("virtual")||t.includes("how does it look")?"virtual_try_on":t.includes("hello")||t.includes("hi")||t.includes("hey")?"greeting":t.includes("help")||t.includes("what can you do")||t.includes("how does this work")?"help":"general"}getDemoResponse(e,t){switch(e){case"wedding_dress":return"I'd be happy to help you find the perfect wedding dress! Based on current trends and classic styles, here are some suggestions:\n\nFor a traditional look, A-line and ball gown silhouettes create a timeless, romantic appearance. If you prefer something more modern, consider a fitted mermaid or trumpet style that accentuates your curves.\n\nMaterial is important too - delicate lace creates a romantic feel, while silk or satin offers elegant simplicity. For spring/summer weddings, lighter fabrics like chiffon or organza are beautiful options.\n\nWould you like to see specific dress recommendations? I can show you some options across different styles and price points that might match what you're looking for.";case"greeting":return"Hello! I'm your personal style assistant. I'm here to help you discover clothing that matches your unique style preferences. I can recommend outfits, help you find specific items, provide style advice, or even let you virtually try on clothes. What kind of fashion help are you looking for today?";case"help":return"I'm your AI fashion assistant, and I can help you with:\n\n- Finding personalized clothing recommendations\n- Creating complete outfits for specific occasions\n- Virtually trying on garments with our try-on feature\n- Answering style questions and providing fashion advice\n- Helping you complete our style quiz to better understand your preferences\n\nJust let me know what you're looking for, and I'll guide you through the process!";default:return O.Ft?`I'd be happy to help you with "${t}". This is a simulated Claude response in demo mode. In a real implementation with an API key, you would get a personalized response from Claude based on your specific query. Would you like to see some clothing recommendations related to this topic?`:""}}extractContext(e){const t=e.toLowerCase(),s=["tops","shirts","t-shirts","blouses","bottoms","pants","jeans","shorts","skirts","dresses","gowns","outerwear","jackets","coats","shoes","sneakers","boots","heels","accessories"];for(const e of s)if(t.includes(e))return e;const n=["casual","formal","business","work","party","date","wedding","weekend","vacation","summer","winter","spring","fall"];for(const e of n)if(t.includes(e))return e}createTextMessage(e,t){return{id:(0,S.A)(),type:u.Go.TEXT,sender:t,text:e,timestamp:new Date}}createRecommendationMessage(e){return{id:(0,S.A)(),type:u.Go.RECOMMENDATION,sender:u.D$.ASSISTANT,items:e,timestamp:new Date}}createOutfitMessage(e){return{id:(0,S.A)(),type:u.Go.OUTFIT,sender:u.D$.ASSISTANT,outfit:e,timestamp:new Date}}}var k=s(4245),x=s(2143),L=s(1527),A=s(8190),N=s(3686),j=function(e,t,s,n){return new(s||(s=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))};console.log("[LIFECYCLE:ChatWidget] Module load started");const R=(0,o.lazy)((()=>(console.log("[LIFECYCLE:ChatWidget] TryOnModalLazy import starting"),Promise.resolve().then(s.bind(s,1527)).then((e=>(console.log("[LIFECYCLE:ChatWidget] TryOnModalLazy successfully loaded"),e))).catch((e=>(console.error("[LIFECYCLE:ChatWidget] Failed to load TryOnModal component:",e),{default:L.default})))))),D=(0,o.lazy)((()=>(console.log("[LIFECYCLE:ChatWidget] StyleQuizModalLazy import starting"),Promise.resolve().then(s.bind(s,8190)).then((e=>(console.log("[LIFECYCLE:ChatWidget] StyleQuizModalLazy successfully loaded"),e))).catch((e=>(console.error("[LIFECYCLE:ChatWidget] Failed to load StyleQuizModal component:",e),{default:A.default})))))),P=(0,o.lazy)((()=>(console.log("[LIFECYCLE:ChatWidget] LookbookLazy import starting"),Promise.resolve().then(s.bind(s,3686)).then((e=>(console.log("[LIFECYCLE:ChatWidget] LookbookLazy successfully loaded"),e))).catch((e=>(console.error("[LIFECYCLE:ChatWidget] Failed to load Lookbook component:",e),{default:N.default}))))));var M=({apiKey:e,retailerId:t,apiUrl:r,position:c="bottom-right",primaryColor:d="#4361ee",greeting:m="Hi there! I'm your AI style assistant. How can I help you today?",onFirstPaint:p})=>{const[h,y]=(0,o.useState)(!1),b=(0,o.useRef)(!1),[f,S]=(0,o.useState)(null),[O,w]=(0,o.useState)(!1),{messages:M,isOpen:F,isMinimized:U,isLoading:z,currentView:G,addTextMessage:B,addMessage:W,setLoading:Y,setError:V,setCurrentView:H}=(0,a.Lo)(),{user:q,setUser:$,addLikedItem:K,addDislikedItem:X}=(0,a.kH)(),{recommendedItems:Z,recommendedOutfits:Q,savedOutfits:J,setRecommendedItems:ee,setRecommendedOutfits:te,addToWishlist:se,addToCart:ne,saveOutfit:oe}=(0,a.W0)(),{addMessageThumbsUp:ie}=(0,v.k)(),ae=(0,I.zA)({apiKey:e,retailerId:t,apiUrl:r}),re=(0,o.useCallback)((()=>j(void 0,void 0,void 0,(function*(){console.log("[LIFECYCLE:ChatWidget] initializeUser starting");try{Y(!0);const e=(0,_.F6)();let t;console.log("[LIFECYCLE:ChatWidget] Got user ID:",e);try{console.log("[LIFECYCLE:ChatWidget] Attempting to get existing user profile"),t=yield ae.user.getUserProfile(e),console.log("[LIFECYCLE:ChatWidget] Found existing user profile")}catch(e){console.log("[LIFECYCLE:ChatWidget] No existing profile found, creating new user"),t=yield ae.user.createUser(),console.log("[LIFECYCLE:ChatWidget] New user profile created")}console.log("[LIFECYCLE:ChatWidget] Setting user profile in store"),$(t),m&&(console.log("[LIFECYCLE:ChatWidget] Sending greeting message"),B(m,"assistant"),console.log("[LIFECYCLE:ChatWidget] Setting timeout for follow-up message (1200ms)"),yield new Promise((e=>setTimeout(e,1200))),console.log("[LIFECYCLE:ChatWidget] Sending follow-up message"),B("I can help you with:\nâ€¢ Finding clothes that match your style\nâ€¢ Creating complete outfits\nâ€¢ Virtual try-ons\n\nTo get started, would you like to take our quick style quiz or see some recommended items?","assistant")),console.log("[LIFECYCLE:ChatWidget] Tracking widget open event"),(0,g.s)(g.X.WIDGET_OPEN,t.userId),x.USE_PARALLEL_INIT?(console.log("[LIFECYCLE:ChatWidget] Using parallel init, fetching recommendations immediately"),yield le(t.userId)):(console.log("[LIFECYCLE:ChatWidget] Using optimized init, deferring recommendation fetch"),window.__STYLIST_PENDING_INITIALIZATIONS=Object.assign(Object.assign({},window.__STYLIST_PENDING_INITIALIZATIONS||{}),{recommendations:{userId:t.userId}})),console.log("[LIFECYCLE:ChatWidget] initializeUser completed successfully")}catch(e){console.error("[LIFECYCLE:ChatWidget] Error initializing user:",e),V("Sorry, I had trouble connecting. Please try again later."),B("Sorry, I had trouble connecting. Please try again later.","system")}finally{Y(!1),console.log("[LIFECYCLE:ChatWidget] initializeUser finished (loading set to false)")}}))),[ae,m,B,$,Y,V]),le=e=>j(void 0,void 0,void 0,(function*(){var t,s;if(console.log("[LIFECYCLE:ChatWidget] fetchInitialRecommendations starting for user:",e),Z.length>0)console.log("[LIFECYCLE:ChatWidget] Skipping recommendation fetch - items already loaded");else try{console.log("[LIFECYCLE:ChatWidget] Fetching recommendations from API");const n=yield ae.recommendation.getRecommendations({userId:e,limit:6});console.log("[LIFECYCLE:ChatWidget] Recommendations received:",(null===(t=n.items)||void 0===t?void 0:t.length)||0,"items",(null===(s=n.outfits)||void 0===s?void 0:s.length)||0,"outfits"),console.log("[LIFECYCLE:ChatWidget] Converting recommendation items to proper format");const o=n.items.map((e=>({id:e.id,retailerId:"default",name:e.name,brand:e.brand,category:e.category,price:e.price,salePrice:e.salePrice,colors:[],sizes:[],imageUrls:[e.imageUrls[0]||""],url:e.url,matchScore:e.matchScore,matchReasons:e.matchReasons,inStock:!0})));if(console.log("[LIFECYCLE:ChatWidget] Setting recommendedItems in store"),ee(o),n.outfits&&n.outfits.length>0){console.log("[LIFECYCLE:ChatWidget] Converting recommendation outfits to proper format");const e=n.outfits.map((e=>({id:e.id,name:e.name||"",occasion:e.occasion,matchScore:e.matchScore,matchReasons:e.matchReasons,items:e.items.map((e=>({id:e.id,retailerId:"default",name:e.name,brand:e.brand,category:e.category,price:e.price,salePrice:e.salePrice,colors:[],sizes:[],imageUrls:[e.imageUrls[0]||""],url:e.url,matchScore:e.matchScore,matchReasons:e.matchReasons,inStock:!0})))})));console.log("[LIFECYCLE:ChatWidget] Setting recommendedOutfits in store"),te(e)}console.log("[LIFECYCLE:ChatWidget] fetchInitialRecommendations completed successfully")}catch(e){console.error("[LIFECYCLE:ChatWidget] Error fetching initial recommendations:",e)}})),[ce,de]=(0,o.useState)(!1),ue=(0,o.useRef)(null),me=(0,o.useRef)(!1);(0,o.useEffect)((()=>{console.log("[LIFECYCLE:ChatWidget] Initialization effect running",{initialized:h,globallyInitialized:!0===window.__STYLIST_CHAT_INITIALIZED,attemptedRef:b.current});const e=!0===window.__STYLIST_CHAT_INITIALIZED;if(h||e||b.current)return void console.log("[LIFECYCLE:ChatWidget] Initialization skipped - already initialized");b.current=!0,console.log("[LIFECYCLE:ChatWidget] Starting user initialization"),window.__STYLIST_CHAT_INITIALIZED=!0,console.log("[LIFECYCLE:ChatWidget] Setting initialization safety timeout (10s)");const t=setTimeout((()=>{h||(console.warn("[LIFECYCLE:ChatWidget] Initialization timed out after 10s, forcing completion"),y(!0))}),1e4);return console.log("[LIFECYCLE:ChatWidget] Calling initializeUser()"),re().then((()=>{clearTimeout(t),console.log("[LIFECYCLE:ChatWidget] initializeUser resolved successfully"),y(!0),console.log("[LIFECYCLE:ChatWidget] Initialization marked as complete"),x.USE_PARALLEL_INIT||me.current||(console.log("[LIFECYCLE:ChatWidget] Setting up first paint timer (100ms)"),ue.current=setTimeout((()=>{me.current||(console.log("[LIFECYCLE:ChatWidget] First paint timer fired, triggering callback"),pe())}),100))})).catch((e=>{clearTimeout(t),console.error("[LIFECYCLE:ChatWidget] Initialization error:",e),y(!0),console.log("[LIFECYCLE:ChatWidget] Initialization marked as complete despite error")})),()=>{console.log("[LIFECYCLE:ChatWidget] Cleaning up initialization timeouts"),clearTimeout(t),ue.current&&clearTimeout(ue.current)}}),[h,re]);const pe=()=>{var e;if(console.log("[LIFECYCLE:ChatWidget] triggerFirstPaint called",{alreadyFired:me.current}),me.current)console.log("[LIFECYCLE:ChatWidget] First paint already triggered, skipping");else if(console.log("[LIFECYCLE:ChatWidget] Marking first paint as fired"),me.current=!0,de(!0),"function"==typeof p&&(console.log("[LIFECYCLE:ChatWidget] Calling onFirstPaint callback"),p()),!x.USE_PARALLEL_INIT&&window.__STYLIST_PENDING_INITIALIZATIONS){if(console.log("[LIFECYCLE:ChatWidget] Using optimized init, checking for pending initializations"),null===(e=window.__STYLIST_PENDING_INITIALIZATIONS)||void 0===e?void 0:e.recommendations){const{userId:e}=window.__STYLIST_PENDING_INITIALIZATIONS.recommendations;console.log("[LIFECYCLE:ChatWidget] Setting timeout for background recommendation fetch (1.5s)"),setTimeout((()=>{console.log("[LIFECYCLE:ChatWidget] Background recommendation timeout fired"),le(e)}),1500)}}else console.log("[LIFECYCLE:ChatWidget] No pending initializations to process")};(0,o.useEffect)((()=>{console.log("[LIFECYCLE:ChatWidget] Global flags and events effect running");const e=()=>{console.log("[LIFECYCLE:ChatWidget] Opening style quiz via global flag or event"),w(!0)},t=()=>{if(console.log("[LIFECYCLE:ChatWidget] Virtual try-on opening requested"),Z.length>0){console.log("[LIFECYCLE:ChatWidget] Recommended items available for try-on:",Z.length);const e=Z[0];try{console.log("[LIFECYCLE:ChatWidget] Opening try-on with item:",e.id),B(`Let's see how ${e.name} looks on you!`,"assistant")}catch(e){console.error("[LIFECYCLE:ChatWidget] Error opening virtual try-on:",e)}}else console.log("[LIFECYCLE:ChatWidget] Cannot open virtual try-on - no recommended items available")};console.log("[LIFECYCLE:ChatWidget] Checking for global style quiz flag:",!!window.__StylistShowStyleQuiz),window.__StylistShowStyleQuiz&&e(),console.log("[LIFECYCLE:ChatWidget] Checking for global try-on flag:",!!window.__StylistShowVirtualTryOn),window.__StylistShowVirtualTryOn&&t();const s=!!window.__StylistWidgetEvents;if(console.log("[LIFECYCLE:ChatWidget] Checking for widget events:",s),s)return console.log("[LIFECYCLE:ChatWidget] Setting up event listeners"),window.__StylistWidgetEvents.on("styleQuiz:open",e),window.__StylistWidgetEvents.on("virtualTryOn:open",t),()=>{console.log("[LIFECYCLE:ChatWidget] Removing event listeners"),window.__StylistWidgetEvents.off("styleQuiz:open",e),window.__StylistWidgetEvents.off("virtualTryOn:open",t)}}),[Z,B]),(0,o.useEffect)((()=>{console.log("[LIFECYCLE:ChatWidget] Chat service initialization effect running",{userExists:!!q,apiExists:!!ae}),q&&ae&&(console.log("[LIFECYCLE:ChatWidget] Creating chat service for user:",q.userId),S(new T(ae.recommendation,q.userId)),console.log("[LIFECYCLE:ChatWidget] Chat service created"))}),[q,ae]),(0,o.useEffect)((()=>{d&&(document.documentElement.style.setProperty("--stylist-primary-color",d),document.documentElement.style.setProperty("--stylist-primary-color-light",ge(d,.2)),document.documentElement.style.setProperty("--stylist-primary-color-dark",_e(d,.2)))}),[d]);const ge=(e,t)=>{try{e=e.replace("#","");const s=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),i=Math.min(255,Math.floor(s+(255-s)*t)),a=Math.min(255,Math.floor(n+(255-n)*t)),r=Math.min(255,Math.floor(o+(255-o)*t));return`#${i.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`}catch(t){return e}},_e=(e,t)=>{try{e=e.replace("#","");const s=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),i=Math.max(0,Math.floor(s*(1-t))),a=Math.max(0,Math.floor(n*(1-t))),r=Math.max(0,Math.floor(o*(1-t)));return`#${i.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`}catch(t){return e}},he=(e,t)=>j(void 0,void 0,void 0,(function*(){if(q)try{t?(K(e),(0,g.s)(g.X.ITEM_LIKE,q.userId,{itemId:e})):(X(e),(0,g.s)(g.X.ITEM_DISLIKE,q.userId,{itemId:e})),yield ae.recommendation.addItemFeedback({userId:q.userId,itemId:e,liked:t,timestamp:new Date}),"chat"===G&&t&&B("Great! I've noted that you like this item. I'll keep this in mind for future recommendations.",u.D$.ASSISTANT)}catch(e){console.error("Error submitting item feedback:",e),V("Failed to save your feedback. Please try again.")}})),ye=(e,t)=>j(void 0,void 0,void 0,(function*(){if(q)try{(0,g.s)(t?g.X.OUTFIT_LIKE:g.X.OUTFIT_DISLIKE,q.userId,{outfitId:e}),yield ae.recommendation.addOutfitFeedback({userId:q.userId,outfitId:e,liked:t,timestamp:new Date}),"chat"===G&&t&&B("Great! I'm glad you like this outfit. I'll remember your preference for future recommendations.","assistant")}catch(e){console.error("Error submitting outfit feedback:",e),V("Failed to save your feedback. Please try again.")}})),be=e=>{if(q)try{se({itemId:e.id,retailerId:t,addedAt:new Date}),"chat"===G&&B(`I've added ${e.name} to your wishlist!`,"assistant"),(0,g.s)(g.X.ADD_TO_WISHLIST,q.userId,{itemId:e.id})}catch(e){console.error("Error adding to wishlist:",e),V("Failed to add item to wishlist. Please try again.")}},fe=(e,n=1,o,i)=>{if(q)try{ne({itemId:e.id,retailerId:t,quantity:n,size:o,color:i,addedAt:new Date}),s.e(776).then(s.bind(s,9776)).then((({purchaseTrackingService:s})=>{s.trackPurchase({productId:e.id,source:"StylistBot",timestamp:new Date,userId:q.userId,retailerId:t})})),"chat"===G&&B(`I've added ${e.name} to your shopping cart!`,"assistant"),(0,g.s)(g.X.ADD_TO_CART,q.userId,{itemId:e.id,quantity:n,size:o,color:i})}catch(e){console.error("Error adding to cart:",e),V("Failed to add item to cart. Please try again.")}},Ee=e=>{if(q)try{oe({outfitId:e.id,userId:q.userId,name:e.name||`Outfit for ${e.occasion}`,items:e.items.map((e=>e.id)),savedAt:new Date}),"chat"===G&&B("I've saved this outfit to your lookbook!","assistant"),(0,g.s)(g.X.OUTFIT_SAVE,q.userId,{outfitId:e.id})}catch(e){console.error("Error saving outfit:",e),V("Failed to save outfit. Please try again.")}},Ce=e=>j(void 0,void 0,void 0,(function*(){if(q)try{Y(!0);const t=25;if(e.length<t){const s=e.map((e=>e.questionId)),n=Array.from({length:t},((e,t)=>`q${t+1}`)).filter((e=>!s.includes(e)));console.warn(`Some questions are unanswered: ${n.join(", ")}`),(0,g.s)(g.X.STYLE_QUIZ_PARTIAL,q.userId,{unansweredCount:n.length})}try{localStorage.removeItem("stylist_quiz_progress_style-quiz-1")}catch(e){console.error("Error clearing quiz progress:",e)}try{yield ae.user.submitStyleQuiz(q.userId,e)}catch(e){console.error("Error submitting style quiz:",e),V("There was an issue saving your style preferences, but we can still provide recommendations.")}let s;w(!1),B("Thanks for completing the style quiz! I now have a better understanding of your preferences. Let me show you some recommendations based on your style profile.","assistant");try{s=yield ae.recommendation.getRecommendations({userId:q.userId,limit:4,includeOutfits:!0})}catch(e){return console.error("Error fetching recommendations:",e),V("Sorry, there was an issue getting your personalized recommendations."),void Y(!1)}yield new Promise((e=>setTimeout(e,1e3))),W({type:u.Go.RECOMMENDATION,sender:u.D$.ASSISTANT,items:s.items});const n=s.items.map((e=>({id:e.id,retailerId:"default",name:e.name,brand:e.brand,category:e.category,price:e.price,salePrice:e.salePrice,colors:[],sizes:[],imageUrls:[e.imageUrl||""],url:e.url,matchScore:e.matchScore,matchReasons:e.matchReasons,inStock:!0})));if(ee(n),s.outfits&&s.outfits.length>0){yield new Promise((e=>setTimeout(e,1e3))),B("I've also created a complete outfit based on your style:","assistant"),yield new Promise((e=>setTimeout(e,500))),W({type:u.Go.OUTFIT,sender:u.D$.ASSISTANT,outfit:s.outfits[0]});const e=s.outfits.map((e=>({id:e.id,name:e.name,occasion:e.occasion,matchScore:e.matchScore,matchReasons:e.matchReasons,items:e.items.map((e=>({id:e.id,retailerId:"default",name:e.name,brand:e.brand,category:e.category,price:e.price,salePrice:e.salePrice,colors:[],sizes:[],imageUrls:[e.imageUrl||""],url:e.url,matchScore:e.matchScore,matchReasons:e.matchReasons,inStock:!0})))})));te(e)}(0,g.s)(g.X.STYLE_QUIZ_COMPLETE,q.userId),yield new Promise((e=>setTimeout(e,1e3))),B("You can see all your recommendations in your lookbook. Would you like to view it now?","assistant")}catch(e){console.error("Unexpected error processing quiz:",e),V("Failed to process the style quiz. Please try again later."),w(!1)}finally{Y(!1)}})),ve=e=>{q&&((0,g.s)(g.X.TRY_ON_SAVED,q.userId,{resultUrl:e}),B("Great! I've saved your virtual try-on. How does it look?","assistant"))};if(!F)return null;const Ie=`stylist-chat-widget ${{"bottom-right":"stylist-chat-widget--bottom-right","bottom-left":"stylist-chat-widget--bottom-left","top-right":"stylist-chat-widget--top-right","top-left":"stylist-chat-widget--top-left"}[c]} ${U?"stylist-chat-widget--minimized":""}`,Se=()=>!!x.USE_PARALLEL_INIT||ce||me.current;return(0,o.useEffect)((()=>{x.USE_PARALLEL_INIT||me.current||setTimeout(pe,0)}),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",Object.assign({className:Ie,"data-testid":"stylist-chat-widget"},{children:[(0,n.jsx)(l,{title:"chat"===G?"The Stylist":"Your Lookbook",primaryColor:d,onSwitchView:e=>{H(e),"lookbook"===e&&(0,g.s)(g.X.VIEW_LOOKBOOK,(null==q?void 0:q.userId)||"anonymous")},currentView:G}),(0,n.jsx)("div",Object.assign({className:"stylist-chat-widget__content"},{children:"chat"===G?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E,{messages:M,onItemFeedback:he,onOutfitFeedback:ye,onMessageFeedback:(e,t)=>j(void 0,void 0,void 0,(function*(){if(q&&t)try{ie(e),(0,g.s)(g.X.MESSAGE_THUMBS_UP,q.userId,{messageId:e})}catch(e){console.error("Error saving message feedback:",e)}})),onAddToWishlist:be,onAddToCart:fe,isLoading:z,primaryColor:d}),(0,n.jsx)(C,{onSendMessage:e=>j(void 0,void 0,void 0,(function*(){if(B(e,"user"),!q||!f)return;Y(!0);const t=e.toLowerCase();if(t.includes("lookbook")||t.includes("show recommendations")||t.includes("show items"))return yield new Promise((e=>setTimeout(e,500))),B("Here's your lookbook with all recommended items and outfits!","assistant"),H("lookbook"),void Y(!1);if(t.includes("back to chat")||t.includes("return to chat"))return yield new Promise((e=>setTimeout(e,500))),B("Switching back to chat view. How else can I help you?","assistant"),H("chat"),void Y(!1);if(t.includes("quiz")||t.includes("style profile")||t.includes("preferences"))return yield new Promise((e=>setTimeout(e,500))),B("Let's find out more about your style preferences! Please answer a few quick questions.","assistant"),q&&(0,g.s)(g.X.STYLE_QUIZ_START,q.userId),w(!0),void Y(!1);try{const t=yield f.processMessage(e);for(let e=0;e<t.length;e++){e>0&&(yield new Promise((e=>setTimeout(e,800))));const s=t[e];if(W(s),"recommendation"===s.type){const e=s.items.map((e=>({id:e.id,retailerId:"default",name:e.name,brand:e.brand,category:e.category,price:e.price,salePrice:e.salePrice,colors:[],sizes:[],imageUrls:[e.imageUrl||""],url:e.url,matchScore:e.matchScore,matchReasons:e.matchReasons,inStock:!0})));ee(e)}if("outfit"===s.type){const e={id:s.outfit.id,name:s.outfit.name,occasion:s.outfit.occasion,matchScore:s.outfit.matchScore,matchReasons:s.outfit.matchReasons,items:s.outfit.items.map((e=>({id:e.id,retailerId:"default",name:e.name,brand:e.brand,category:e.category,price:e.price,salePrice:e.salePrice,colors:[],sizes:[],imageUrls:[e.imageUrl||""],url:e.url,matchScore:e.matchScore,matchReasons:e.matchReasons,inStock:!0})))};Q.some((t=>t.id===e.id))||te([...Q,e])}}}catch(e){console.error("Error processing message:",e),V(e instanceof Error?e.message:String(e)),B("Sorry, I encountered an error while processing your request. Please try again.","system")}finally{Y(!1)}})),placeholder:"Type your question here...",disabled:z,primaryColor:d})]}):Se()?(0,n.jsxs)(n.Fragment,{children:[console.log("[LIFECYCLE:ChatWidget] Rendering Lookbook with AsyncComponentLoader"),(0,n.jsx)(i().Suspense,Object.assign({fallback:(0,n.jsxs)("div",Object.assign({className:"stylist-loading-container"},{children:[(0,n.jsx)("div",{className:"stylist-loading-spinner"}),(0,n.jsx)("p",{children:"Loading lookbook..."})]}))},{children:(0,n.jsxs)(k.A,Object.assign({loadingMessage:"Loading lookbook...",onLoadStart:()=>console.log("[LIFECYCLE:ChatWidget] Lookbook loader starting"),onLoadComplete:()=>console.log("[LIFECYCLE:ChatWidget] Lookbook loader completed"),onLoadError:e=>console.error("[LIFECYCLE:ChatWidget] Lookbook loading error:",e)},{children:[(console.log("[LIFECYCLE:ChatWidget] Before Lookbook render, using lazy:",x.USE_LAZY_LOADING),null),x.USE_LAZY_LOADING?(0,n.jsx)(P,{items:Z,outfits:Q,savedOutfits:J,onItemFeedback:he,onOutfitFeedback:ye,onAddToWishlist:be,onAddToCart:fe,onSaveOutfit:Ee,primaryColor:d}):(0,n.jsx)(N.default,{items:Z,outfits:Q,savedOutfits:J,onItemFeedback:he,onOutfitFeedback:ye,onAddToWishlist:be,onAddToCart:fe,onSaveOutfit:Ee,primaryColor:d}),(console.log("[LIFECYCLE:ChatWidget] After Lookbook render"),null)]}))}))]}):(0,n.jsxs)(n.Fragment,{children:[(console.log("[LIFECYCLE:ChatWidget] Showing lookbook loading placeholder (before first paint)"),null),(0,n.jsx)("div",Object.assign({className:"stylist-chat-widget__loading"},{children:(0,n.jsx)("p",{children:"Initializing lookbook..."})}))]})}))]})),console.log("[LIFECYCLE:ChatWidget] Checking if non-essential components should render:",Se()),Se()&&(0,n.jsxs)(n.Fragment,{children:[console.log("[LIFECYCLE:ChatWidget] Rendering TryOnModal with AsyncComponentLoader"),(0,n.jsx)(i().Suspense,Object.assign({fallback:(0,n.jsxs)("div",Object.assign({className:"stylist-loading-container"},{children:[(0,n.jsx)("div",{className:"stylist-loading-spinner"}),(0,n.jsx)("p",{children:"Loading virtual try-on..."})]}))},{children:(0,n.jsxs)(k.A,Object.assign({loadingMessage:"Loading virtual try-on...",onLoadStart:()=>console.log("[LIFECYCLE:ChatWidget] TryOnModal loader starting"),onLoadComplete:()=>console.log("[LIFECYCLE:ChatWidget] TryOnModal loader completed"),onLoadError:e=>console.error("[LIFECYCLE:ChatWidget] TryOnModal loading error:",e)},{children:[(console.log("[LIFECYCLE:ChatWidget] Before TryOnModal render"),null),x.USE_LAZY_LOADING?(0,n.jsx)(R,{onSave:ve}):(0,n.jsx)(L.default,{onSave:ve}),(console.log("[LIFECYCLE:ChatWidget] After TryOnModal render"),null)]}))})),(console.log("[LIFECYCLE:ChatWidget] Checking if StyleQuizModal should render:",O),null),O&&(0,n.jsxs)(n.Fragment,{children:[(console.log("[LIFECYCLE:ChatWidget] Rendering StyleQuizModal with AsyncComponentLoader"),null),(0,n.jsx)(i().Suspense,Object.assign({fallback:(0,n.jsxs)("div",Object.assign({className:"stylist-loading-container"},{children:[(0,n.jsx)("div",{className:"stylist-loading-spinner"}),(0,n.jsx)("p",{children:"Loading style quiz..."})]}))},{children:(0,n.jsxs)(k.A,Object.assign({loadingMessage:"Loading style quiz...",onLoadStart:()=>console.log("[LIFECYCLE:ChatWidget] StyleQuizModal loader starting"),onLoadComplete:()=>console.log("[LIFECYCLE:ChatWidget] StyleQuizModal loader completed"),onLoadError:e=>console.error("[LIFECYCLE:ChatWidget] StyleQuizModal loading error:",e)},{children:[(console.log("[LIFECYCLE:ChatWidget] Before StyleQuizModal render"),null),x.USE_LAZY_LOADING?(0,n.jsx)(D,{onSubmit:Ce,onClose:()=>w(!1),primaryColor:d}):(0,n.jsx)(A.default,{onSubmit:Ce,onClose:()=>w(!1),primaryColor:d}),(console.log("[LIFECYCLE:ChatWidget] After StyleQuizModal render"),null)]}))}))]})]})]})}},7574:function(e,t,s){"use strict";var n=s(4848),o=s(6540);const i=[{id:"q1",questionText:"How would you describe your overall fashion style?",type:"image",options:[{id:"classic",text:"Classic & Timeless",value:"classic",imageUrl:"https://images.unsplash.com/photo-1603189343302-e603f7add05a?w=400&h=300&fit=crop"},{id:"minimalist",text:"Minimalist & Clean",value:"minimalist",imageUrl:"https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=400&h=300&fit=crop"},{id:"trendy",text:"Trendy & Fashion-Forward",value:"trendy",imageUrl:"https://images.unsplash.com/photo-1523359346063-d879354c0ea5?w=400&h=300&fit=crop"},{id:"edgy",text:"Edgy & Alternative",value:"edgy",imageUrl:"https://images.unsplash.com/photo-1536243298747-ea8874136d64?w=400&h=300&fit=crop"},{id:"sporty",text:"Sporty & Casual",value:"sporty",imageUrl:"https://images.unsplash.com/photo-1517466787929-bc90951d0974?w=400&h=300&fit=crop"},{id:"bohemian",text:"Bohemian & Free-Spirited",value:"bohemian",imageUrl:"https://images.unsplash.com/photo-1534777620591-29eb7d8d7563?w=400&h=300&fit=crop"}],category:"style"},{id:"q2",questionText:"Which color palette do you prefer for your wardrobe?",type:"image",options:[{id:"neutrals",text:"Neutrals (Black, White, Grey, Beige)",value:"neutrals",imageUrl:"https://images.unsplash.com/photo-1518895949257-7621c3c786d7?w=400&h=300&fit=crop"},{id:"earthy",text:"Earthy Tones (Brown, Olive, Rust)",value:"earthy",imageUrl:"https://images.unsplash.com/photo-1514362453360-8f94243c9996?w=400&h=300&fit=crop"},{id:"pastels",text:"Pastels (Light Pink, Baby Blue, Lavender)",value:"pastels",imageUrl:"https://images.unsplash.com/photo-1499781350541-7783f6c6a0c8?w=400&h=300&fit=crop"},{id:"bold",text:"Bold & Bright Colors (Red, Yellow, Electric Blue)",value:"bold",imageUrl:"https://images.unsplash.com/photo-1535639818669-c059d2f038e6?w=400&h=300&fit=crop"},{id:"monochrome",text:"Monochrome or All-Black",value:"monochrome",imageUrl:"https://images.unsplash.com/photo-1550330550-36e5c4d9b0c3?w=400&h=300&fit=crop"}],category:"color"},{id:"q3",questionText:"What type of outfits do you need the most recommendations for?",type:"multiple",options:[{id:"casual",text:"Everyday Casual",value:"casual"},{id:"work",text:"Workwear & Business Casual",value:"work"},{id:"street",text:"Streetwear & Trendy Looks",value:"street"},{id:"date",text:"Date Night & Going Out",value:"date"},{id:"formal",text:"Formal & Special Events",value:"formal"}],category:"occasion"},{id:"q4",questionText:"Which patterns do you typically wear?",type:"multiple",options:[{id:"solid",text:"Solid Colors (No Pattern)",value:"solid"},{id:"stripes",text:"Stripes",value:"stripes"},{id:"floral",text:"Floral",value:"floral"},{id:"geometric",text:"Geometric",value:"geometric"},{id:"animal",text:"Animal Print",value:"animal"},{id:"plaid",text:"Plaid/Check",value:"plaid"}],category:"pattern"},{id:"q5",questionText:"How do you prefer your tops to fit?",type:"image",options:[{id:"oversized",text:"Oversized & Relaxed",value:"oversized",imageUrl:"https://images.unsplash.com/photo-1542837209-3bd9538b3a96?w=400&h=300&fit=crop"},{id:"fitted",text:"Slim & Fitted",value:"fitted",imageUrl:"https://images.unsplash.com/photo-1570727624862-3008fe67a6f9?w=400&h=300&fit=crop"},{id:"cropped",text:"Cropped",value:"cropped",imageUrl:"https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=400&h=300&fit=crop"},{id:"structured",text:"Boxy & Structured",value:"structured",imageUrl:"https://images.unsplash.com/photo-1603252109303-2751441dd157?w=400&h=300&fit=crop"}],category:"fit"},{id:"q6",questionText:"How do you prefer your bottoms to fit?",type:"image",options:[{id:"skinny",text:"Skinny/Slim",value:"skinny",imageUrl:"https://images.unsplash.com/photo-1598808503824-9725718f223d?w=400&h=300&fit=crop"},{id:"relaxed",text:"Relaxed/Regular",value:"relaxed",imageUrl:"https://images.unsplash.com/photo-1581985673473-0784a7a44e39?w=400&h=300&fit=crop"},{id:"wide",text:"Wide Leg",value:"wide",imageUrl:"https://images.unsplash.com/photo-1593030103066-0093718efeb9?w=400&h=300&fit=crop"},{id:"straight",text:"Straight Cut",value:"straight",imageUrl:"https://images.unsplash.com/photo-1582418702059-97ebafb35d09?w=400&h=300&fit=crop"}],category:"fit"},{id:"q7",questionText:"What size do you typically wear for tops?",type:"single",options:[{id:"xs",text:"XS",value:"xs"},{id:"s",text:"S",value:"s"},{id:"m",text:"M",value:"m"},{id:"l",text:"L",value:"l"},{id:"xl",text:"XL",value:"xl"},{id:"xxl",text:"XXL+",value:"xxl"}],category:"size"},{id:"q8",questionText:"What size do you typically wear for bottoms/pants?",type:"single",options:[{id:"0-2",text:"0-2",value:"0-2"},{id:"4-6",text:"4-6",value:"4-6"},{id:"8-10",text:"8-10",value:"8-10"},{id:"12-14",text:"12-14",value:"12-14"},{id:"16-18",text:"16-18",value:"16-18"},{id:"20+",text:"20+",value:"20+"}],category:"size"},{id:"q9",questionText:"What's your typical budget for a single clothing item?",type:"single",options:[{id:"budget_low",text:"Under $50",value:"Under $50"},{id:"budget_medium_low",text:"$50 - $100",value:"$50 - $100"},{id:"budget_medium_high",text:"$100 - $250",value:"$100 - $250"},{id:"budget_high",text:"$250+",value:"$250+"}],category:"budget"},{id:"q10",questionText:"Which casual wear brands do you typically shop?",type:"multiple",options:[{id:"zara",text:"Zara",value:"zara"},{id:"hm",text:"H&M",value:"hm"},{id:"uniqlo",text:"Uniqlo",value:"uniqlo"},{id:"gap",text:"Gap",value:"gap"},{id:"jcrew",text:"J.Crew",value:"jcrew"},{id:"madewell",text:"Madewell",value:"madewell"},{id:"everlane",text:"Everlane",value:"everlane"},{id:"aritzia",text:"Aritzia",value:"aritzia"},{id:"mango",text:"Mango",value:"mango"},{id:"urban",text:"Urban Outfitters",value:"urban"},{id:"abercrombie",text:"Abercrombie & Fitch",value:"abercrombie"},{id:"ae",text:"American Eagle",value:"ae"},{id:"other_casual",text:"Other",value:"other_casual"}],category:"brand"},{id:"q10a",questionText:"Which athletic/athleisure brands do you prefer?",type:"multiple",options:[{id:"nike",text:"Nike",value:"nike"},{id:"adidas",text:"Adidas",value:"adidas"},{id:"lululemon",text:"Lululemon",value:"lululemon"},{id:"athleta",text:"Athleta",value:"athleta"},{id:"under_armour",text:"Under Armour",value:"under_armour"},{id:"puma",text:"Puma",value:"puma"},{id:"alo",text:"Alo Yoga",value:"alo"},{id:"new_balance",text:"New Balance",value:"new_balance"},{id:"gymshark",text:"Gymshark",value:"gymshark"},{id:"fabletics",text:"Fabletics",value:"fabletics"},{id:"other_athletic",text:"Other",value:"other_athletic"}],category:"brand"},{id:"q10b",questionText:"Do you shop any luxury or designer brands?",type:"multiple",options:[{id:"none",text:"None/Not regularly",value:"none"},{id:"coach",text:"Coach",value:"coach"},{id:"mk",text:"Michael Kors",value:"mk"},{id:"tory_burch",text:"Tory Burch",value:"tory_burch"},{id:"theory",text:"Theory",value:"theory"},{id:"allsaints",text:"AllSaints",value:"allsaints"},{id:"gucci",text:"Gucci",value:"gucci"},{id:"louis",text:"Louis Vuitton",value:"louis"},{id:"chanel",text:"Chanel",value:"chanel"},{id:"prada",text:"Prada",value:"prada"},{id:"burberry",text:"Burberry",value:"burberry"},{id:"other_luxury",text:"Other",value:"other_luxury"}],category:"brand"},{id:"q11",questionText:"Which celebrity's style do you most admire? (Modern Icons)",type:"image",options:[{id:"zendaya",text:"Zendaya (Fashion-Forward)",value:"zendaya",imageUrl:"https://www.fillmurray.com/400/301"},{id:"harry",text:"Harry Styles (Bold & Eclectic)",value:"harry",imageUrl:"https://www.fillmurray.com/401/300"},{id:"rihanna",text:"Rihanna (Trendsetter)",value:"rihanna",imageUrl:"https://www.fillmurray.com/401/302"},{id:"timothee",text:"TimothÃ©e Chalamet (Modern Minimal)",value:"timothee",imageUrl:"https://www.fillmurray.com/400/302"},{id:"hailey",text:"Hailey Bieber (Cool Girl)",value:"hailey",imageUrl:"https://www.fillmurray.com/402/301"},{id:"asap",text:"A$AP Rocky (Streetwear)",value:"asap",imageUrl:"https://www.fillmurray.com/403/300"}],category:"inspiration"},{id:"q11a",questionText:"Which celebrity's style do you most admire? (Classic Icons)",type:"image",options:[{id:"audrey",text:"Audrey Hepburn (Timeless)",value:"audrey",imageUrl:"https://www.fillmurray.com/400/300"},{id:"jlo",text:"Jennifer Lopez (Glamorous)",value:"jlo",imageUrl:"https://www.fillmurray.com/402/300"},{id:"beyonce",text:"BeyoncÃ© (Bold & Confident)",value:"beyonce",imageUrl:"https://www.fillmurray.com/404/300"},{id:"pharrell",text:"Pharrell Williams (Streetwear)",value:"pharrell",imageUrl:"https://www.fillmurray.com/401/301"},{id:"blake",text:"Blake Lively (Classic Chic)",value:"blake",imageUrl:"https://www.fillmurray.com/403/302"},{id:"beckham",text:"David Beckham (Polished)",value:"beckham",imageUrl:"https://www.fillmurray.com/405/300"}],category:"inspiration"},{id:"q12",questionText:"What types of shoes do you wear most often?",type:"multiple",options:[{id:"sneakers",text:"Sneakers",value:"sneakers"},{id:"boots",text:"Boots",value:"boots"},{id:"flats",text:"Flats/Loafers",value:"flats"},{id:"heels",text:"Heels",value:"heels"},{id:"sandals",text:"Sandals",value:"sandals"},{id:"athletic",text:"Athletic Shoes",value:"athletic"}],category:"footwear"},{id:"q12a",questionText:"What shoe size do you typically wear?",type:"single",options:[{id:"us5",text:"US 5 / EU 35-36",value:"us5"},{id:"us6",text:"US 6 / EU 36-37",value:"us6"},{id:"us7",text:"US 7 / EU 37-38",value:"us7"},{id:"us8",text:"US 8 / EU 38-39",value:"us8"},{id:"us9",text:"US 9 / EU 39-40",value:"us9"},{id:"us10",text:"US 10 / EU 40-41",value:"us10"},{id:"us11",text:"US 11 / EU 41-42",value:"us11"},{id:"us12",text:"US 12+ / EU 42+",value:"us12"}],category:"size"},{id:"q13",questionText:"Which accessories do you typically wear?",type:"multiple",options:[{id:"none",text:"Minimal/No Accessories",value:"none"},{id:"earrings",text:"Earrings",value:"earrings"},{id:"necklaces",text:"Necklaces",value:"necklaces"},{id:"bracelets",text:"Bracelets/Watches",value:"bracelets"},{id:"rings",text:"Rings",value:"rings"},{id:"scarves",text:"Scarves/Bandanas",value:"scarves"},{id:"hats",text:"Hats",value:"hats"},{id:"belts",text:"Belts",value:"belts"}],category:"accessories"},{id:"q13a",questionText:"What sizes do you typically wear for accessories?",type:"multiple",options:[{id:"bracelet_small",text:'Bracelets: Small (6-7")',value:"bracelet_small"},{id:"bracelet_medium",text:'Bracelets: Medium (7-8")',value:"bracelet_medium"},{id:"bracelet_large",text:'Bracelets: Large (8"+)',value:"bracelet_large"},{id:"ring_small",text:"Rings: Small (5-6)",value:"ring_small"},{id:"ring_medium",text:"Rings: Medium (7-8)",value:"ring_medium"},{id:"ring_large",text:"Rings: Large (9+)",value:"ring_large"},{id:"hat_small",text:"Hats: Small/Medium",value:"hat_small"},{id:"hat_large",text:"Hats: Large/XL",value:"hat_large"},{id:"not_sure",text:"Not sure / Varies",value:"not_sure"}],category:"size"},{id:"q14",questionText:"Which season do you most enjoy dressing for?",type:"image",options:[{id:"spring",text:"Spring",value:"spring",imageUrl:"https://images.unsplash.com/photo-1497942304796-b8bc2cc898f3?w=400&h=300&fit=crop"},{id:"summer",text:"Summer",value:"summer",imageUrl:"https://images.unsplash.com/photo-1517206577696-6ce38fb787a3?w=400&h=300&fit=crop"},{id:"fall",text:"Fall/Autumn",value:"fall",imageUrl:"https://images.unsplash.com/photo-1551843073-4a9a5b6fcd5f?w=400&h=300&fit=crop"},{id:"winter",text:"Winter",value:"winter",imageUrl:"https://images.unsplash.com/photo-1515311320503-6591cade8414?w=400&h=300&fit=crop"}],category:"seasonal"},{id:"q15",questionText:"How do you feel about layering clothes?",type:"single",options:[{id:"love",text:"Love it - the more layers the better",value:"love"},{id:"sometimes",text:"Sometimes - when appropriate for weather",value:"sometimes"},{id:"minimal",text:"Prefer minimal layers",value:"minimal"},{id:"avoid",text:"Avoid layering when possible",value:"avoid"}],category:"styling"},{id:"q16",questionText:"How often do you shop for clothes?",type:"single",options:[{id:"weekly",text:"Weekly",value:"weekly"},{id:"monthly",text:"Monthly",value:"monthly"},{id:"seasonally",text:"Seasonally",value:"seasonally"},{id:"rarely",text:"Rarely/As needed",value:"rarely"}],category:"shopping"},{id:"q17",questionText:"How do you approach fashion trends?",type:"single",options:[{id:"early",text:"Early adopter - always trying new trends",value:"early"},{id:"selective",text:"Selective - adopt trends that match my style",value:"selective"},{id:"wait",text:"Wait and see - adopt trends after they're established",value:"wait"},{id:"avoid",text:"Avoid trends - prefer timeless styles",value:"avoid"}],category:"styling"},{id:"q18",questionText:"When it comes to choosing clothes, you prioritize:",type:"slider",minValue:0,maxValue:100,step:1,category:"priorities"},{id:"q19",questionText:"How important is sustainability in your clothing choices?",type:"single",options:[{id:"very",text:"Very important - I prioritize sustainable brands",value:"very"},{id:"somewhat",text:"Somewhat important - I consider it when convenient",value:"somewhat"},{id:"neutral",text:"Neutral - I don't specifically seek it out",value:"neutral"},{id:"not",text:"Not important to me",value:"not"}],category:"values"},{id:"q20",questionText:"Do you shop secondhand/vintage clothing?",type:"single",options:[{id:"frequently",text:"Frequently",value:"frequently"},{id:"sometimes",text:"Sometimes",value:"sometimes"},{id:"rarely",text:"Rarely",value:"rarely"},{id:"never",text:"Never",value:"never"}],category:"shopping"},{id:"q21",questionText:"What best describes your work environment dress code?",type:"single",options:[{id:"formal",text:"Formal/Business Professional",value:"formal"},{id:"business",text:"Business Casual",value:"business"},{id:"casual",text:"Casual",value:"casual"},{id:"creative",text:"Creative/No Dress Code",value:"creative"},{id:"uniform",text:"Uniform Required",value:"uniform"},{id:"na",text:"Not Applicable",value:"na"}],category:"lifestyle"},{id:"q22",questionText:"How active is your lifestyle?",type:"single",options:[{id:"very",text:"Very active - I need clothes for frequent exercise",value:"very"},{id:"moderately",text:"Moderately active - occasional exercise",value:"moderately"},{id:"somewhat",text:"Somewhat active - light activity",value:"somewhat"},{id:"not",text:"Not very active",value:"not"}],category:"lifestyle"},{id:"q23",questionText:"Which fabric types do you prefer?",type:"multiple",options:[{id:"cotton",text:"Cotton",value:"cotton"},{id:"linen",text:"Linen",value:"linen"},{id:"silk",text:"Silk",value:"silk"},{id:"wool",text:"Wool",value:"wool"},{id:"synthetic",text:"Synthetic/Technical Fabrics",value:"synthetic"},{id:"leather",text:"Leather",value:"leather"},{id:"denim",text:"Denim",value:"denim"},{id:"knit",text:"Knits",value:"knit"}],category:"fabrics"},{id:"q24",questionText:"Do you have any special clothing requirements or preferences?",type:"multiple",options:[{id:"none",text:"None",value:"none"},{id:"pockets",text:"Must have pockets",value:"pockets"},{id:"petite",text:"Petite sizes",value:"petite"},{id:"tall",text:"Tall sizes",value:"tall"},{id:"plus",text:"Plus sizes",value:"plus"},{id:"adaptable",text:"Adaptable/Accessible clothing",value:"adaptable"},{id:"allergy",text:"Hypoallergenic fabrics",value:"allergy"}],category:"requirements"},{id:"q25",questionText:"What's your main style goal right now?",type:"single",options:[{id:"refresh",text:"Refresh my everyday wardrobe",value:"refresh"},{id:"special",text:"Find outfits for special occasions",value:"special"},{id:"transition",text:"Transition to a new style",value:"transition"},{id:"minimize",text:"Build a capsule wardrobe",value:"minimize"},{id:"experiment",text:"Experiment with new styles",value:"experiment"},{id:"confidence",text:"Gain confidence in my clothing choices",value:"confidence"}],category:"goals"}],a="stylist_quiz_progress";t.A=({quizId:e,title:t,description:s,onSubmit:r,primaryColor:l})=>{const[c]=(0,o.useState)(i),{currentQuestionIndex:d,savedAnswers:u}=(()=>{try{const t=localStorage.getItem(`${a}_${e}`);if(t){const e=JSON.parse(t);if(e.answers&&Array.isArray(e.answers))return{currentQuestionIndex:e.currentQuestion||0,savedAnswers:e.answers}}}catch(e){console.error("Error loading saved quiz progress:",e)}return{currentQuestionIndex:0,savedAnswers:[]}})(),[m,p]=(0,o.useState)(d),[g,_]=(0,o.useState)(u),[h,y]=(0,o.useState)(!1),[b,f]=(0,o.useState)(!1);(0,o.useEffect)((()=>{try{const t={currentQuestion:m,answers:g};localStorage.setItem(`${a}_${e}`,JSON.stringify(t))}catch(e){console.error("Error saving quiz progress:",e)}}),[m,g,e]),(0,o.useEffect)((()=>{0!==g.length&&(h||r(g))}),[g,h,r]);const E=(e,t,s)=>{"single"!==s&&"image"!==s||(C(e,t),m<c.length-1&&setTimeout((()=>{p(m+1)}),300))},C=(e,t)=>{const s=[...g],n=g.findIndex((t=>t.questionId===e)),o={questionId:e,answerId:t,answered:new Date};n>=0?s[n]=o:s.push(o),_(s)};if(b)return(0,n.jsx)("div",Object.assign({className:"stylist-style-quiz stylist-style-quiz--loading"},{children:(0,n.jsx)("div",Object.assign({className:"stylist-style-quiz__loader"},{children:"Loading quiz..."}))}));if(0===c.length)return(0,n.jsx)("div",Object.assign({className:"stylist-style-quiz stylist-style-quiz--error"},{children:(0,n.jsx)("div",Object.assign({className:"stylist-style-quiz__error"},{children:"Sorry, we couldn't load the style quiz. Please try again later."}))}));const v=c[m],I=m===c.length-1,S=()=>!!g.find((e=>e.questionId===v.id)),O=Math.round(g.length/c.length*100);return(0,n.jsxs)("div",Object.assign({className:"stylist-style-quiz"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-style-quiz__header"},{children:[(0,n.jsx)("h3",Object.assign({className:"stylist-style-quiz__title"},{children:t})),s&&(0,n.jsx)("p",Object.assign({className:"stylist-style-quiz__description"},{children:s}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-style-quiz__progress"},{children:[(0,n.jsx)("div",{className:"stylist-style-quiz__progress-bar",style:{width:(m+1)/c.length*100+"%",backgroundColor:l}}),(0,n.jsxs)("div",Object.assign({className:"stylist-style-quiz__progress-text"},{children:[O,"% Complete"]}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-style-quiz__question"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-style-quiz__question-number"},{children:["Question ",m+1," of ",c.length]})),(0,n.jsx)("h4",Object.assign({className:"stylist-style-quiz__question-text"},{children:v.questionText}))]})),(()=>{var e,t,s;if(!v)return null;const o=g.find((e=>e.questionId===v.id));switch(v.type){case"single":return(0,n.jsx)("div",Object.assign({className:"stylist-style-quiz__options"},{children:null===(e=v.options)||void 0===e?void 0:e.map((e=>(0,n.jsx)("button",Object.assign({className:"stylist-style-quiz__option "+((null==o?void 0:o.answerId)===e.id?"stylist-style-quiz__option--selected":""),onClick:()=>E(v.id,e.id,"single"),style:(null==o?void 0:o.answerId)===e.id?{borderColor:l,backgroundColor:`${l}20`}:void 0},{children:e.text}),e.id)))}));case"image":return(0,n.jsx)("div",Object.assign({className:"stylist-style-quiz__image-options"},{children:null===(t=v.options)||void 0===t?void 0:t.map((e=>(0,n.jsxs)("button",Object.assign({className:"stylist-style-quiz__image-option "+((null==o?void 0:o.answerId)===e.id?"stylist-style-quiz__image-option--selected":""),onClick:()=>E(v.id,e.id,"image"),style:(null==o?void 0:o.answerId)===e.id?{borderColor:l}:void 0},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-style-quiz__image-container",style:{backgroundImage:e.imageUrl?`url(${e.imageUrl})`:void 0}},{children:!e.imageUrl&&(0,n.jsx)("div",{className:"stylist-style-quiz__image-placeholder"})})),(0,n.jsx)("div",Object.assign({className:"stylist-style-quiz__image-label",style:(null==o?void 0:o.answerId)===e.id?{color:l}:void 0},{children:e.text}))]}),e.id)))}));case"multiple":return(0,n.jsx)("div",Object.assign({className:"stylist-style-quiz__options"},{children:null===(s=v.options)||void 0===s?void 0:s.map((e=>{var t;const s=null===(t=null==o?void 0:o.answerIds)||void 0===t?void 0:t.includes(e.id);return(0,n.jsx)("button",Object.assign({className:"stylist-style-quiz__option "+(s?"stylist-style-quiz__option--selected":""),onClick:()=>{const t=(null==o?void 0:o.answerIds)||[],n=s?t.filter((t=>t!==e.id)):[...t,e.id];((e,t)=>{const s=[...g],n=g.findIndex((t=>t.questionId===e)),o={questionId:e,answerIds:t,answered:new Date};n>=0?s[n]=o:s.push(o),_(s)})(v.id,n)},style:s?{borderColor:l,backgroundColor:`${l}20`}:void 0},{children:e.text}),e.id)}))}));case"slider":const i="q18"===v.id?{left:"Comfort",right:"Style"}:{left:"Low",right:"High"};return(0,n.jsxs)("div",Object.assign({className:"stylist-style-quiz__slider"},{children:[(0,n.jsx)("input",{type:"range",min:v.minValue||0,max:v.maxValue||100,step:v.step||1,value:(null==o?void 0:o.answerValue)||50,onChange:e=>((e,t)=>{const s=[...g],n=g.findIndex((t=>t.questionId===e)),o={questionId:e,answerValue:t,answered:new Date};n>=0?s[n]=o:s.push(o),_(s)})(v.id,parseInt(e.target.value)),style:{accentColor:l}}),(0,n.jsxs)("div",Object.assign({className:"stylist-style-quiz__slider-labels"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-style-quiz__slider-label-left"},{children:i.left})),(0,n.jsx)("div",Object.assign({className:"stylist-style-quiz__slider-label-right"},{children:i.right}))]}))]}));default:return null}})(),(0,n.jsxs)("div",Object.assign({className:"stylist-style-quiz__actions"},{children:[m>0&&(0,n.jsx)("button",Object.assign({className:"stylist-style-quiz__button stylist-style-quiz__button--secondary",onClick:()=>{var e;m>0&&(null===(e=document.querySelector(".stylist-style-quiz__question"))||void 0===e||e.classList.add("fade-out"),setTimeout((()=>{var e,t;p(m-1),null===(e=document.querySelector(".stylist-style-quiz__question"))||void 0===e||e.classList.remove("fade-out"),null===(t=document.querySelector(".stylist-style-quiz__question"))||void 0===t||t.classList.add("fade-in"),setTimeout((()=>{var e;null===(e=document.querySelector(".stylist-style-quiz__question"))||void 0===e||e.classList.remove("fade-in")}),300)}),200))}},{children:"Previous"})),I?(0,n.jsx)("button",Object.assign({className:"stylist-style-quiz__button stylist-style-quiz__button--primary",onClick:()=>{h||(y(!0),r(g))},style:{backgroundColor:l},disabled:!S()||h},{children:h?"Submitting...":"Complete Quiz"})):(0,n.jsx)("button",Object.assign({className:"stylist-style-quiz__button stylist-style-quiz__button--primary",onClick:()=>{var e;m<c.length-1&&(null===(e=document.querySelector(".stylist-style-quiz__question"))||void 0===e||e.classList.add("fade-out"),setTimeout((()=>{var e,t;p(m+1),null===(e=document.querySelector(".stylist-style-quiz__question"))||void 0===e||e.classList.remove("fade-out"),null===(t=document.querySelector(".stylist-style-quiz__question"))||void 0===t||t.classList.add("fade-in"),setTimeout((()=>{var e;null===(e=document.querySelector(".stylist-style-quiz__question"))||void 0===e||e.classList.remove("fade-in")}),300)}),200))},style:{backgroundColor:l},disabled:!S()},{children:"Next"}))]}))]}))}},8108:function(){},8190:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s(4848),o=s(6540),i=s(7574),a=s(3874),r=s(800),l=s(6890),c=s(8054),d=s(259),u=({onSubmit:e,onClose:t,primaryColor:s})=>{const[u,m]=(0,o.useState)([]),[p,g]=(0,o.useState)(!1),_=(0,l.k)(),h=(()=>{const e=(0,l.k)(),t=(0,c.A)(),s=(0,d.oy)(),n=(0,o.useCallback)((t=>{if(!e.user)return;const n=new Date,o=`item_${n.getTime()}_${Math.random().toString(36).substring(2,9)}`,i=Object.assign(Object.assign({},t),{id:o,dateAdded:n,favorite:t.favorite||!1,tags:t.tags||[]});e.addToCloset(i),s.addClosetItem(t,e.user.userId)}),[e,s]),i=(0,o.useCallback)((t=>{e.user&&(e.removeFromCloset(t),s.removeClosetItem(t,e.user.userId))}),[e,s]),a=(0,o.useCallback)(((t,n)=>{e.user&&(e.toggleItemFavorite(t,n),s.toggleFavorite(t,n,e.user.userId))}),[e,s]),r=(0,o.useCallback)((t=>{e.user&&(e.updateUser({preferences:Object.assign(Object.assign({},e.user.preferences),t)}),s.updatePreferences(t,e.user.userId))}),[e,s]),u=(0,o.useCallback)((t=>{e.user&&s.submitQuiz(t,e.user.userId)}),[e,s]),m=(0,o.useCallback)((t=>{e.user&&e.addLikedItem(t)}),[e]),p=(0,o.useCallback)((t=>{e.user&&e.addDislikedItem(t)}),[e]),g=(0,o.useCallback)((n=>{e.user&&(t.saveOutfit(n),s.saveOutfit(n,e.user.userId))}),[e,t,s]),_=(0,o.useCallback)((n=>{e.user&&(t.removeSavedOutfit(n),s.removeOutfit(n,e.user.userId))}),[e,t,s]);return(0,o.useEffect)((()=>{e.user&&s.syncNow()}),[e.user,s]),{syncState:s.state,syncNow:s.syncNow,addToCloset:n,removeFromCloset:i,toggleItemFavorite:a,updatePreferences:r,submitStyleQuiz:u,addLikedItem:m,addDislikedItem:p,saveOutfit:g,removeSavedOutfit:_}})(),y=()=>{if(u.length>0&&u.length<25){const e=(0,r.F6)();(0,a.s)(a.X.STYLE_QUIZ_ABANDON,e,{questionCount:25,answeredCount:u.length,completionRate:Math.round(u.length/25*100)})}t()};return(0,o.useEffect)((()=>{const e=e=>{"Escape"===e.key&&y()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[t,u]),(0,o.useEffect)((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""})),[]),(0,n.jsxs)("div",Object.assign({className:"stylist-style-quiz-modal"},{children:[(0,n.jsx)("div",{className:"stylist-style-quiz-modal__overlay",onClick:y}),(0,n.jsxs)("div",Object.assign({className:"stylist-style-quiz-modal__container"},{children:[(0,n.jsx)("button",{className:"stylist-style-quiz-modal__close-button",onClick:y,"aria-label":"Close style quiz"}),(0,n.jsx)(i.A,{quizId:"style-quiz-1",title:"Your Style Profile",description:"Help us understand your fashion preferences to create personalized style recommendations just for you.",onSubmit:t=>{m(t),(25===t.length||p)&&(g(!0),_.user&&h.submitStyleQuiz(t),e(t))},primaryColor:s})]}))]}))}},8590:function(){},8748:function(e,t,s){"use strict";s.d(t,{Dk:function(){return u},HJ:function(){return d},K0:function(){return _},MC:function(){return p},Ng:function(){return h},Pk:function(){return g},at:function(){return m},uy:function(){return c}}),s(6540);const n="false"!=={NVM_RC_VERSION:"",TERM_PROGRAM:"vscode",CLAUDE_CODE_ENTRYPOINT:"CLI",NODE:"/opt/homebrew/Cellar/node/23.5.0/bin/node",INIT_CWD:"/Users/parkercase/stylist",NVM_CD_FLAGS:"",TERM:"xterm-256color",SHELL:"/bin/bash",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/",npm_config_global_prefix:"/opt/homebrew",CONDA_SHLVL:"1",TERM_PROGRAM_VERSION:"1.86.2",CONDA_PROMPT_MODIFIER:"(base) ",GSETTINGS_SCHEMA_DIR_CONDA_BACKUP:"",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/parkercase/stylist",GIT_EDITOR:"true",NVM_DIR:"/Users/parkercase/.nvm",USER:"parkercase",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/opt/homebrew/etc/npmrc",CONDA_EXE:"/opt/anaconda3/bin/conda",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.JcIuSn6aOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/opt/homebrew/lib/node_modules/npm/bin/npm-cli.js",_CE_CONDA:"",PATH:"/Users/parkercase/stylist/node_modules/.bin:/Users/parkercase/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/opt/homebrew/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/opt/postgresql@14/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/opt/postgresql@14/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin",GSETTINGS_SCHEMA_DIR:"/opt/anaconda3/share/glib-2.0/schemas",npm_package_json:"/Users/parkercase/stylist/package.json",_:"/Users/parkercase/stylist/node_modules/.bin/webpack",npm_config_userconfig:"/Users/parkercase/.npmrc",npm_config_init_module:"/Users/parkercase/.npm-init.js",CONDA_PREFIX:"/opt/anaconda3",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/parkercase/stylist",npm_lifecycle_event:"build",EDITOR:"vi",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"delta",npm_package_name:"stylist-widget",LANG:"en_US.UTF-8",npm_config_npm_version:"11.2.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/opt/homebrew/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",_CE_M:"",XPC_SERVICE_NAME:"0",SHLVL:"4",HOME:"/Users/parkercase",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/parkercase/.npm",CONDA_PYTHON_EXE:"/opt/anaconda3/bin/python",LOGNAME:"parkercase",npm_lifecycle_script:"webpack --mode production",VSCODE_GIT_IPC_HANDLE:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/vscode-git-21a8511f03.sock",COREPACK_ENABLE_AUTO_PIN:"0",CONDA_DEFAULT_ENV:"base",npm_config_user_agent:"npm/11.2.0 node/v23.5.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",CLAUDECODE:"1",npm_node_execpath:"/opt/homebrew/Cellar/node/23.5.0/bin/node",npm_config_prefix:"/opt/homebrew",COLORTERM:"truecolor"}.LOG_DIAGNOSTICS;var o,i;!function(e){e.COMPONENT_MOUNT="COMPONENT_MOUNT",e.COMPONENT_UNMOUNT="COMPONENT_UNMOUNT",e.COMPONENT_RENDER="COMPONENT_RENDER",e.COMPONENT_ERROR="COMPONENT_ERROR",e.SUSPENSE_FALLBACK="SUSPENSE_FALLBACK",e.SUSPENSE_RESOLVED="SUSPENSE_RESOLVED",e.LAZY_LOAD_START="LAZY_LOAD_START",e.LAZY_LOAD_COMPLETE="LAZY_LOAD_COMPLETE",e.LAZY_LOAD_ERROR="LAZY_LOAD_ERROR",e.HOOK_INIT="HOOK_INIT",e.EFFECT_START="EFFECT_START",e.EFFECT_COMPLETE="EFFECT_COMPLETE",e.EFFECT_CLEANUP="EFFECT_CLEANUP",e.STORE_INIT="STORE_INIT",e.STORE_UPDATE="STORE_UPDATE",e.STORE_SUBSCRIPTION="STORE_SUBSCRIPTION",e.ERROR_BOUNDARY="ERROR_BOUNDARY",e.GLOBAL_FLAG="GLOBAL_FLAG",e.PERFORMANCE_MARK="PERFORMANCE_MARK",e.APPLICATION_ERROR="APPLICATION_ERROR",e.CUSTOM="CUSTOM"}(o||(o={})),function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.CRITICAL="CRITICAL"}(i||(i={}));let a=[];const r="undefined"!=typeof window;if(r){const e={log:console.log,warn:console.warn,error:console.error,info:console.info,debug:console.debug};window.__STYLIST_DIAGNOSTICS={logs:a,enabled:n,originalConsole:e}}const l=(e,t,s={})=>{if(!n)return;const{level:o=i.INFO,component:l,data:c,stack:d}=s,u={timestamp:(new Date).toISOString(),type:e,level:o,message:t,component:l,data:c,stack:d};a.push(u),a.length>1e3&&(a=a.slice(-1e3));{const s=Object.assign({type:e,component:l||"global",message:t},c?{data:c}:{});console.log(`%c DIAGNOSTICS %c ${e} %c ${l||"global"} `,"background: #6610f2; color: white; border-radius: 3px 0 0 3px;","background: #fd7e14; color: white;","background: #17a2b8; color: white; border-radius: 0 3px 3px 0;",s)}if(console.log(`__STYLIST_DIAGNOSTIC_LOG_ENTRY__:${JSON.stringify(u)}`),r&&window.__STYLIST_DIAGNOSTICS_LOG_TO_TEMP)try{const e=localStorage.getItem("__STYLIST_DIAGNOSTICS_LOGS")||"[]",t=JSON.parse(e);t.push(u);const s=t.slice(-1e3);localStorage.setItem("__STYLIST_DIAGNOSTICS_LOGS",JSON.stringify(s))}catch(e){}},c=(e,t,s,n)=>{const a={mount:o.COMPONENT_MOUNT,render:o.COMPONENT_RENDER,update:o.COMPONENT_RENDER,unmount:o.COMPONENT_UNMOUNT,error:o.COMPONENT_ERROR,init:o.COMPONENT_MOUNT,action:o.CUSTOM,debug:o.CUSTOM,warning:o.CUSTOM},r={mount:i.INFO,render:i.DEBUG,update:i.DEBUG,unmount:i.INFO,error:i.ERROR,init:i.INFO,action:i.INFO,debug:i.DEBUG,warning:i.WARNING};l(a[t],s,{level:r[t],component:e,data:n})},d=(e,t,s,n)=>{const i="fallback"===t?o.SUSPENSE_FALLBACK:o.SUSPENSE_RESOLVED;l(i,s,{component:e,data:n})},u=(e,t,s,n)=>{const a={start:o.LAZY_LOAD_START,complete:o.LAZY_LOAD_COMPLETE,error:o.LAZY_LOAD_ERROR},r={start:i.INFO,complete:i.INFO,error:i.ERROR};l(a[t],s,{level:r[t],component:e,data:n})},m=(e,t,s,n,i)=>{let a=o.HOOK_INIT;"update"===s?a=o.EFFECT_START:"cleanup"===s&&(a=o.EFFECT_CLEANUP),l(a,n,{component:e,data:Object.assign({hook:t},i)})},p=(e,t,s,n)=>{const i={init:o.STORE_INIT,update:o.STORE_UPDATE,subscribe:o.STORE_SUBSCRIPTION,unsubscribe:o.STORE_SUBSCRIPTION};l(i[t],s,{component:e,data:Object.assign({operation:t},n)})},g=(e,t,s)=>{l(o.ERROR_BOUNDARY,`Error boundary triggered in ${e}`,{level:i.ERROR,component:e,data:{errorMessage:t.message,componentStack:null==s?void 0:s.componentStack},stack:t.stack})},_=(e,t,s,n)=>{l(o.GLOBAL_FLAG,s,{data:Object.assign({flag:e,value:t},n||{})})},h=(e,t,s)=>{l(o.PERFORMANCE_MARK,`Performance: ${e}`,{data:Object.assign({name:e,duration:t},s)})}},9283:function(e,t,s){"use strict";s.d(t,{Ft:function(){return d},H$:function(){return o},NX:function(){return n},UI:function(){return r},WW:function(){return c},c6:function(){return u},dL:function(){return i},mU:function(){return a},nt:function(){return l}});const n=3,o="http://localhost:8000/api/v1",i=15e3,a={NVM_RC_VERSION:"",TERM_PROGRAM:"vscode",CLAUDE_CODE_ENTRYPOINT:"CLI",NODE:"/opt/homebrew/Cellar/node/23.5.0/bin/node",INIT_CWD:"/Users/parkercase/stylist",NVM_CD_FLAGS:"",TERM:"xterm-256color",SHELL:"/bin/bash",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/",npm_config_global_prefix:"/opt/homebrew",CONDA_SHLVL:"1",TERM_PROGRAM_VERSION:"1.86.2",CONDA_PROMPT_MODIFIER:"(base) ",GSETTINGS_SCHEMA_DIR_CONDA_BACKUP:"",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/parkercase/stylist",GIT_EDITOR:"true",NVM_DIR:"/Users/parkercase/.nvm",USER:"parkercase",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/opt/homebrew/etc/npmrc",CONDA_EXE:"/opt/anaconda3/bin/conda",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.JcIuSn6aOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/opt/homebrew/lib/node_modules/npm/bin/npm-cli.js",_CE_CONDA:"",PATH:"/Users/parkercase/stylist/node_modules/.bin:/Users/parkercase/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/opt/homebrew/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/opt/postgresql@14/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/opt/postgresql@14/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin",GSETTINGS_SCHEMA_DIR:"/opt/anaconda3/share/glib-2.0/schemas",npm_package_json:"/Users/parkercase/stylist/package.json",_:"/Users/parkercase/stylist/node_modules/.bin/webpack",npm_config_userconfig:"/Users/parkercase/.npmrc",npm_config_init_module:"/Users/parkercase/.npm-init.js",CONDA_PREFIX:"/opt/anaconda3",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/parkercase/stylist",npm_lifecycle_event:"build",EDITOR:"vi",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"delta",npm_package_name:"stylist-widget",LANG:"en_US.UTF-8",npm_config_npm_version:"11.2.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/opt/homebrew/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",_CE_M:"",XPC_SERVICE_NAME:"0",SHLVL:"4",HOME:"/Users/parkercase",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/parkercase/.npm",CONDA_PYTHON_EXE:"/opt/anaconda3/bin/python",LOGNAME:"parkercase",npm_lifecycle_script:"webpack --mode production",VSCODE_GIT_IPC_HANDLE:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/vscode-git-21a8511f03.sock",COREPACK_ENABLE_AUTO_PIN:"0",CONDA_DEFAULT_ENV:"base",npm_config_user_agent:"npm/11.2.0 node/v23.5.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",CLAUDECODE:"1",npm_node_execpath:"/opt/homebrew/Cellar/node/23.5.0/bin/node",npm_config_prefix:"/opt/homebrew",COLORTERM:"truecolor"}.REACT_APP_ANTHROPIC_API_KEY||"",r={NVM_RC_VERSION:"",TERM_PROGRAM:"vscode",CLAUDE_CODE_ENTRYPOINT:"CLI",NODE:"/opt/homebrew/Cellar/node/23.5.0/bin/node",INIT_CWD:"/Users/parkercase/stylist",NVM_CD_FLAGS:"",TERM:"xterm-256color",SHELL:"/bin/bash",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/",npm_config_global_prefix:"/opt/homebrew",CONDA_SHLVL:"1",TERM_PROGRAM_VERSION:"1.86.2",CONDA_PROMPT_MODIFIER:"(base) ",GSETTINGS_SCHEMA_DIR_CONDA_BACKUP:"",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/parkercase/stylist",GIT_EDITOR:"true",NVM_DIR:"/Users/parkercase/.nvm",USER:"parkercase",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/opt/homebrew/etc/npmrc",CONDA_EXE:"/opt/anaconda3/bin/conda",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.JcIuSn6aOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/opt/homebrew/lib/node_modules/npm/bin/npm-cli.js",_CE_CONDA:"",PATH:"/Users/parkercase/stylist/node_modules/.bin:/Users/parkercase/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/opt/homebrew/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/opt/postgresql@14/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/opt/postgresql@14/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin",GSETTINGS_SCHEMA_DIR:"/opt/anaconda3/share/glib-2.0/schemas",npm_package_json:"/Users/parkercase/stylist/package.json",_:"/Users/parkercase/stylist/node_modules/.bin/webpack",npm_config_userconfig:"/Users/parkercase/.npmrc",npm_config_init_module:"/Users/parkercase/.npm-init.js",CONDA_PREFIX:"/opt/anaconda3",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/parkercase/stylist",npm_lifecycle_event:"build",EDITOR:"vi",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"delta",npm_package_name:"stylist-widget",LANG:"en_US.UTF-8",npm_config_npm_version:"11.2.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/opt/homebrew/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",_CE_M:"",XPC_SERVICE_NAME:"0",SHLVL:"4",HOME:"/Users/parkercase",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/parkercase/.npm",CONDA_PYTHON_EXE:"/opt/anaconda3/bin/python",LOGNAME:"parkercase",npm_lifecycle_script:"webpack --mode production",VSCODE_GIT_IPC_HANDLE:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/vscode-git-21a8511f03.sock",COREPACK_ENABLE_AUTO_PIN:"0",CONDA_DEFAULT_ENV:"base",npm_config_user_agent:"npm/11.2.0 node/v23.5.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",CLAUDECODE:"1",npm_node_execpath:"/opt/homebrew/Cellar/node/23.5.0/bin/node",npm_config_prefix:"/opt/homebrew",COLORTERM:"truecolor"}.REACT_APP_ANTHROPIC_API_URL||"https://api.anthropic.com",l={NVM_RC_VERSION:"",TERM_PROGRAM:"vscode",CLAUDE_CODE_ENTRYPOINT:"CLI",NODE:"/opt/homebrew/Cellar/node/23.5.0/bin/node",INIT_CWD:"/Users/parkercase/stylist",NVM_CD_FLAGS:"",TERM:"xterm-256color",SHELL:"/bin/bash",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/",npm_config_global_prefix:"/opt/homebrew",CONDA_SHLVL:"1",TERM_PROGRAM_VERSION:"1.86.2",CONDA_PROMPT_MODIFIER:"(base) ",GSETTINGS_SCHEMA_DIR_CONDA_BACKUP:"",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/parkercase/stylist",GIT_EDITOR:"true",NVM_DIR:"/Users/parkercase/.nvm",USER:"parkercase",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/opt/homebrew/etc/npmrc",CONDA_EXE:"/opt/anaconda3/bin/conda",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.JcIuSn6aOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/opt/homebrew/lib/node_modules/npm/bin/npm-cli.js",_CE_CONDA:"",PATH:"/Users/parkercase/stylist/node_modules/.bin:/Users/parkercase/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/opt/homebrew/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/opt/postgresql@14/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/opt/postgresql@14/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin",GSETTINGS_SCHEMA_DIR:"/opt/anaconda3/share/glib-2.0/schemas",npm_package_json:"/Users/parkercase/stylist/package.json",_:"/Users/parkercase/stylist/node_modules/.bin/webpack",npm_config_userconfig:"/Users/parkercase/.npmrc",npm_config_init_module:"/Users/parkercase/.npm-init.js",CONDA_PREFIX:"/opt/anaconda3",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/parkercase/stylist",npm_lifecycle_event:"build",EDITOR:"vi",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"delta",npm_package_name:"stylist-widget",LANG:"en_US.UTF-8",npm_config_npm_version:"11.2.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/opt/homebrew/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",_CE_M:"",XPC_SERVICE_NAME:"0",SHLVL:"4",HOME:"/Users/parkercase",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/parkercase/.npm",CONDA_PYTHON_EXE:"/opt/anaconda3/bin/python",LOGNAME:"parkercase",npm_lifecycle_script:"webpack --mode production",VSCODE_GIT_IPC_HANDLE:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/vscode-git-21a8511f03.sock",COREPACK_ENABLE_AUTO_PIN:"0",CONDA_DEFAULT_ENV:"base",npm_config_user_agent:"npm/11.2.0 node/v23.5.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",CLAUDECODE:"1",npm_node_execpath:"/opt/homebrew/Cellar/node/23.5.0/bin/node",npm_config_prefix:"/opt/homebrew",COLORTERM:"truecolor"}.REACT_APP_ANTHROPIC_MODEL||"claude-3-haiku-20240307",c="true"==={NVM_RC_VERSION:"",TERM_PROGRAM:"vscode",CLAUDE_CODE_ENTRYPOINT:"CLI",NODE:"/opt/homebrew/Cellar/node/23.5.0/bin/node",INIT_CWD:"/Users/parkercase/stylist",NVM_CD_FLAGS:"",TERM:"xterm-256color",SHELL:"/bin/bash",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/",npm_config_global_prefix:"/opt/homebrew",CONDA_SHLVL:"1",TERM_PROGRAM_VERSION:"1.86.2",CONDA_PROMPT_MODIFIER:"(base) ",GSETTINGS_SCHEMA_DIR_CONDA_BACKUP:"",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/parkercase/stylist",GIT_EDITOR:"true",NVM_DIR:"/Users/parkercase/.nvm",USER:"parkercase",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/opt/homebrew/etc/npmrc",CONDA_EXE:"/opt/anaconda3/bin/conda",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.JcIuSn6aOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/opt/homebrew/lib/node_modules/npm/bin/npm-cli.js",_CE_CONDA:"",PATH:"/Users/parkercase/stylist/node_modules/.bin:/Users/parkercase/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/opt/homebrew/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/opt/postgresql@14/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/opt/postgresql@14/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin",GSETTINGS_SCHEMA_DIR:"/opt/anaconda3/share/glib-2.0/schemas",npm_package_json:"/Users/parkercase/stylist/package.json",_:"/Users/parkercase/stylist/node_modules/.bin/webpack",npm_config_userconfig:"/Users/parkercase/.npmrc",npm_config_init_module:"/Users/parkercase/.npm-init.js",CONDA_PREFIX:"/opt/anaconda3",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/parkercase/stylist",npm_lifecycle_event:"build",EDITOR:"vi",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"delta",npm_package_name:"stylist-widget",LANG:"en_US.UTF-8",npm_config_npm_version:"11.2.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/opt/homebrew/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",_CE_M:"",XPC_SERVICE_NAME:"0",SHLVL:"4",HOME:"/Users/parkercase",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/parkercase/.npm",CONDA_PYTHON_EXE:"/opt/anaconda3/bin/python",LOGNAME:"parkercase",npm_lifecycle_script:"webpack --mode production",VSCODE_GIT_IPC_HANDLE:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/vscode-git-21a8511f03.sock",COREPACK_ENABLE_AUTO_PIN:"0",CONDA_DEFAULT_ENV:"base",npm_config_user_agent:"npm/11.2.0 node/v23.5.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",CLAUDECODE:"1",npm_node_execpath:"/opt/homebrew/Cellar/node/23.5.0/bin/node",npm_config_prefix:"/opt/homebrew",COLORTERM:"truecolor"}.REACT_APP_FORCE_DEMO_MODE,d="true"==={NVM_RC_VERSION:"",TERM_PROGRAM:"vscode",CLAUDE_CODE_ENTRYPOINT:"CLI",NODE:"/opt/homebrew/Cellar/node/23.5.0/bin/node",INIT_CWD:"/Users/parkercase/stylist",NVM_CD_FLAGS:"",TERM:"xterm-256color",SHELL:"/bin/bash",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/",npm_config_global_prefix:"/opt/homebrew",CONDA_SHLVL:"1",TERM_PROGRAM_VERSION:"1.86.2",CONDA_PROMPT_MODIFIER:"(base) ",GSETTINGS_SCHEMA_DIR_CONDA_BACKUP:"",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/parkercase/stylist",GIT_EDITOR:"true",NVM_DIR:"/Users/parkercase/.nvm",USER:"parkercase",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/opt/homebrew/etc/npmrc",CONDA_EXE:"/opt/anaconda3/bin/conda",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.JcIuSn6aOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/opt/homebrew/lib/node_modules/npm/bin/npm-cli.js",_CE_CONDA:"",PATH:"/Users/parkercase/stylist/node_modules/.bin:/Users/parkercase/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/opt/homebrew/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/opt/postgresql@14/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/opt/postgresql@14/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin",GSETTINGS_SCHEMA_DIR:"/opt/anaconda3/share/glib-2.0/schemas",npm_package_json:"/Users/parkercase/stylist/package.json",_:"/Users/parkercase/stylist/node_modules/.bin/webpack",npm_config_userconfig:"/Users/parkercase/.npmrc",npm_config_init_module:"/Users/parkercase/.npm-init.js",CONDA_PREFIX:"/opt/anaconda3",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/parkercase/stylist",npm_lifecycle_event:"build",EDITOR:"vi",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"delta",npm_package_name:"stylist-widget",LANG:"en_US.UTF-8",npm_config_npm_version:"11.2.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/opt/homebrew/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",_CE_M:"",XPC_SERVICE_NAME:"0",SHLVL:"4",HOME:"/Users/parkercase",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/parkercase/.npm",CONDA_PYTHON_EXE:"/opt/anaconda3/bin/python",LOGNAME:"parkercase",npm_lifecycle_script:"webpack --mode production",VSCODE_GIT_IPC_HANDLE:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/vscode-git-21a8511f03.sock",COREPACK_ENABLE_AUTO_PIN:"0",CONDA_DEFAULT_ENV:"base",npm_config_user_agent:"npm/11.2.0 node/v23.5.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",CLAUDECODE:"1",npm_node_execpath:"/opt/homebrew/Cellar/node/23.5.0/bin/node",npm_config_prefix:"/opt/homebrew",COLORTERM:"truecolor"}.REACT_APP_USE_CLAUDE_DEMO,u={NVM_RC_VERSION:"",TERM_PROGRAM:"vscode",CLAUDE_CODE_ENTRYPOINT:"CLI",NODE:"/opt/homebrew/Cellar/node/23.5.0/bin/node",INIT_CWD:"/Users/parkercase/stylist",NVM_CD_FLAGS:"",TERM:"xterm-256color",SHELL:"/bin/bash",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/",npm_config_global_prefix:"/opt/homebrew",CONDA_SHLVL:"1",TERM_PROGRAM_VERSION:"1.86.2",CONDA_PROMPT_MODIFIER:"(base) ",GSETTINGS_SCHEMA_DIR_CONDA_BACKUP:"",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"0",npm_config_noproxy:"",npm_config_local_prefix:"/Users/parkercase/stylist",GIT_EDITOR:"true",NVM_DIR:"/Users/parkercase/.nvm",USER:"parkercase",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/opt/homebrew/etc/npmrc",CONDA_EXE:"/opt/anaconda3/bin/conda",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.JcIuSn6aOQ/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/opt/homebrew/lib/node_modules/npm/bin/npm-cli.js",_CE_CONDA:"",PATH:"/Users/parkercase/stylist/node_modules/.bin:/Users/parkercase/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/opt/homebrew/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/opt/postgresql@14/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/usr/local/opt/postgresql@14/bin:/opt/anaconda3/bin:/opt/anaconda3/condabin",GSETTINGS_SCHEMA_DIR:"/opt/anaconda3/share/glib-2.0/schemas",npm_package_json:"/Users/parkercase/stylist/package.json",_:"/Users/parkercase/stylist/node_modules/.bin/webpack",npm_config_userconfig:"/Users/parkercase/.npmrc",npm_config_init_module:"/Users/parkercase/.npm-init.js",CONDA_PREFIX:"/opt/anaconda3",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/parkercase/stylist",npm_lifecycle_event:"build",EDITOR:"vi",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"delta",npm_package_name:"stylist-widget",LANG:"en_US.UTF-8",npm_config_npm_version:"11.2.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",XPC_FLAGS:"0x0",npm_config_node_gyp:"/opt/homebrew/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",_CE_M:"",XPC_SERVICE_NAME:"0",SHLVL:"4",HOME:"/Users/parkercase",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/parkercase/.npm",CONDA_PYTHON_EXE:"/opt/anaconda3/bin/python",LOGNAME:"parkercase",npm_lifecycle_script:"webpack --mode production",VSCODE_GIT_IPC_HANDLE:"/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/vscode-git-21a8511f03.sock",COREPACK_ENABLE_AUTO_PIN:"0",CONDA_DEFAULT_ENV:"base",npm_config_user_agent:"npm/11.2.0 node/v23.5.0 darwin arm64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",GIT_ASKPASS:"/private/var/folders/kt/g403r1wd62lc2f9kz5ny50hm0000gn/T/AppTranslocation/7D66C6EE-0B1C-4B5F-B3DE-322DE851B8C4/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:/opt/homebrew/share/info:",CLAUDECODE:"1",npm_node_execpath:"/opt/homebrew/Cellar/node/23.5.0/bin/node",npm_config_prefix:"/opt/homebrew",COLORTERM:"truecolor"}.REACT_APP_REMOVE_BG_API_KEY||""}},function(e){return e.O(0,[96,213],(function(){return e(e.s=2143)})),e.O()}])}));
//# sourceMappingURL=stylist-main.js.map
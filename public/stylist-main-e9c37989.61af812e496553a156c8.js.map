{"version":3,"file":"stylist-main-e9c37989.61af812e496553a156c8.js","mappings":"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","sources":["webpack://StylistWidget/./src/components/common/DebugModeToggle.tsx","webpack://StylistWidget/./src/components/WishlistButton/WishlistButton.tsx","webpack://StylistWidget/./src/components/WishlistButton/index.ts","webpack://StylistWidget/./src/components/WishlistTab/WishlistTab.tsx","webpack://StylistWidget/./src/components/common/AsyncComponentLoader.tsx","webpack://StylistWidget/./src/components/common/LoadingIndicator.tsx","webpack://StylistWidget/./src/components/common/ErrorBoundary.tsx","webpack://StylistWidget/./src/components/TryOnCanvas/BodyGuide.tsx","webpack://StylistWidget/./src/components/TryOnCanvas/TryOnCanvas.tsx","webpack://StylistWidget/./src/components/TryOnCanvas/index.ts","webpack://StylistWidget/./src/components/TryOnControls/TryOnControls.tsx","webpack://StylistWidget/./src/components/TryOnControls/index.ts","webpack://StylistWidget/./src/components/TryOnFeedback/TryOnFeedback.tsx","webpack://StylistWidget/./src/components/VirtualTryOn/VirtualTryOn.tsx","webpack://StylistWidget/./src/components/VirtualTryOn/index.ts","webpack://StylistWidget/./src/components/WishlistNotification/WishlistNotification.tsx","webpack://StylistWidget/./src/components/common/MockDataToggle.tsx","webpack://StylistWidget/./src/components/TryOnModal/TryOnModal.tsx","webpack://StylistWidget/./src/components/TryOnModal/index.ts","webpack://StylistWidget/./src/components/common/SyncStatusIndicator.tsx","webpack://StylistWidget/./src/components/common/AdaptiveImage/AdaptiveImage.tsx","webpack://StylistWidget/./src/components/common/AdaptiveImage/index.ts","webpack://StylistWidget/./src/components/common/OfflineIndicator.tsx","webpack://StylistWidget/./src/components/common/TransitionSmoother/TransitionSmoother.tsx","webpack://StylistWidget/./src/components/common/TransitionSmoother/index.ts"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport { getDebugMode, toggleDebugMode, addDebugModeListener } from '../../utils/debugMode';\nimport './DebugModeToggle.scss';\n/**\n * DebugModeToggle component\n *\n * A small floating button that allows toggling debug mode.\n * When debug mode is enabled, additional debugging information is shown throughout the app.\n */\nconst DebugModeToggle = () => {\n    const [isDebugMode, setIsDebugMode] = useState(getDebugMode());\n    const [isExpanded, setIsExpanded] = useState(false);\n    useEffect(() => {\n        // Listen for debug mode changes from other components\n        const cleanupListener = addDebugModeListener((debugModeState) => {\n            setIsDebugMode(debugModeState);\n        });\n        return cleanupListener;\n    }, []);\n    const handleToggle = () => {\n        const newDebugMode = toggleDebugMode();\n        setIsDebugMode(newDebugMode);\n    };\n    const handleExpand = () => {\n        setIsExpanded(!isExpanded);\n    };\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-debug-toggle-container\" }, { children: [isExpanded && (_jsxs(\"div\", Object.assign({ className: \"stylist-debug-panel\" }, { children: [_jsx(\"h4\", { children: \"Debug Panel\" }), _jsx(\"div\", Object.assign({ className: \"stylist-debug-toggle\" }, { children: _jsxs(\"label\", Object.assign({ className: \"stylist-debug-toggle-label\" }, { children: [_jsx(\"span\", { children: \"Debug Mode\" }), _jsx(\"div\", Object.assign({ className: `stylist-debug-toggle-switch ${isDebugMode ? 'active' : ''}`, onClick: handleToggle }, { children: _jsx(\"div\", { className: \"stylist-debug-toggle-slider\" }) }))] })) })), _jsxs(\"div\", Object.assign({ className: \"stylist-debug-info\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-debug-info-item\" }, { children: [_jsx(\"span\", { children: \"Screen Size:\" }), _jsxs(\"span\", { children: [window.innerWidth, \"x\", window.innerHeight] })] })), _jsxs(\"div\", Object.assign({ className: \"stylist-debug-info-item\" }, { children: [_jsx(\"span\", { children: \"User Agent:\" }), _jsx(\"span\", Object.assign({ className: \"stylist-debug-user-agent\" }, { children: navigator.userAgent }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-debug-info-item\" }, { children: [_jsx(\"span\", { children: \"WebGL:\" }), _jsx(\"span\", { children: (() => {\n                                            try {\n                                                const canvas = document.createElement('canvas');\n                                                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n                                                return gl ? 'Supported' : 'Not Supported';\n                                            }\n                                            catch (e) {\n                                                return 'Error Checking';\n                                            }\n                                        })() })] }))] }))] }))), _jsx(\"button\", Object.assign({ className: `stylist-debug-button ${isDebugMode ? 'active' : ''}`, onClick: handleExpand, title: \"Debug Tools\" }, { children: _jsx(\"svg\", Object.assign({ viewBox: \"0 0 24 24\", width: \"24\", height: \"24\" }, { children: _jsx(\"path\", { fill: \"currentColor\", d: \"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-4.987-3.744A7.966 7.966 0 0 0 12 20c1.97 0 3.773-.712 5.167-1.892A6.979 6.979 0 0 1 12.16 16a6.981 6.981 0 0 1-5.147 2.256zM5.616 16.82A8.975 8.975 0 0 1 12.16 14a8.972 8.972 0 0 1 6.362 2.634 8 8 0 1 0-12.906.187zM12 13a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4z\" }) })) }))] })));\n};\nexport default DebugModeToggle;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport './WishlistButton.scss';\nconst WishlistButton = ({ onClick, isSaved = false, label = 'Save', primaryColor }) => {\n    const buttonStyle = primaryColor ? { backgroundColor: primaryColor } : undefined;\n    return (_jsxs(\"button\", Object.assign({ className: `stylist-wishlist-button ${isSaved ? 'stylist-wishlist-button--saved' : ''}`, onClick: onClick, style: isSaved ? undefined : buttonStyle }, { children: [_jsx(\"span\", Object.assign({ className: \"stylist-wishlist-button__icon\" }, { children: isSaved ? (_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"20\", height: \"20\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\" }) }))) : (_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"20\", height: \"20\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z\" }) }))) })), _jsx(\"span\", Object.assign({ className: \"stylist-wishlist-button__label\" }, { children: isSaved ? 'Saved' : label }))] })));\n};\nexport default WishlistButton;\n","import WishlistButton from './WishlistButton';\nexport default WishlistButton;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// WishlistTab component for displaying and managing wishlisted items\nimport { useState, useEffect } from 'react';\nimport { useRecommendationStore, useUserStore } from '@/store/index';\nimport ItemCard from '@/components/ItemCard';\nimport LoadingIndicator from '@/components/common/LoadingIndicator';\nimport './WishlistTab.scss';\nconst WishlistTab = ({ onAddToCart, onRemoveFromWishlist, onMoveToCloset, onItemClick, primaryColor }) => {\n    const { wishlistItems } = useRecommendationStore();\n    const { user } = useUserStore();\n    const [wishlistProducts, setWishlistProducts] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    // Get full product details for wishlist items\n    useEffect(() => {\n        const getWishlistDetails = () => __awaiter(void 0, void 0, void 0, function* () {\n            setIsLoading(true);\n            try {\n                // In a real application, you would fetch product details from the API\n                // For this demo, we'll simulate by creating dummy product details\n                // Create objects with product details for each wishlist item\n                const products = wishlistItems.map(item => {\n                    return {\n                        id: item.itemId,\n                        retailerId: item.retailerId,\n                        name: item.name || `Product ${item.itemId.substring(0, 6)}`,\n                        brand: item.brand || 'Brand Name',\n                        category: item.category || 'Clothing',\n                        price: item.price || 99.99,\n                        salePrice: item.salePrice,\n                        colors: [],\n                        sizes: [],\n                        imageUrls: [item.imageUrl || ''],\n                        url: item.url || '#',\n                        matchScore: 0,\n                        matchReasons: [],\n                        inStock: true,\n                        addedToWishlistAt: item.addedAt\n                    };\n                });\n                setWishlistProducts(products);\n            }\n            catch (error) {\n                console.error('Error fetching wishlist details:', error);\n            }\n            finally {\n                setIsLoading(false);\n            }\n        });\n        getWishlistDetails();\n    }, [wishlistItems]);\n    // Handle add to cart\n    const handleAddToCart = (item) => {\n        if (onAddToCart) {\n            onAddToCart(item);\n        }\n    };\n    // Handle remove from wishlist\n    const handleRemoveFromWishlist = (itemId) => {\n        if (onRemoveFromWishlist) {\n            onRemoveFromWishlist(itemId);\n        }\n    };\n    // Handle move to closet\n    const handleMoveToCloset = (item) => {\n        if (onMoveToCloset) {\n            onMoveToCloset(item);\n            // After moving to closet, remove from wishlist\n            handleRemoveFromWishlist(item.id);\n        }\n    };\n    // Handle item click\n    const handleItemClick = (item) => {\n        if (onItemClick) {\n            onItemClick(item);\n        }\n    };\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-wishlist-tab\" }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-wishlist-tab__header\" }, { children: _jsx(\"h2\", Object.assign({ className: \"stylist-wishlist-tab__title\" }, { children: \"My Wishlist\" })) })), isLoading ? (_jsxs(\"div\", Object.assign({ className: \"stylist-wishlist-tab__loading\" }, { children: [_jsx(LoadingIndicator, {}), _jsx(\"p\", { children: \"Loading your wishlist...\" })] }))) : wishlistProducts.length === 0 ? (_jsxs(\"div\", Object.assign({ className: \"stylist-wishlist-tab__empty\" }, { children: [_jsx(\"p\", { children: \"Your wishlist is empty.\" }), _jsx(\"p\", { children: \"Items you like will be saved here for later.\" })] }))) : (_jsx(\"div\", Object.assign({ className: \"stylist-wishlist-tab__grid\" }, { children: wishlistProducts.map(item => (_jsxs(\"div\", Object.assign({ className: \"stylist-wishlist-tab__item\" }, { children: [_jsx(ItemCard, { item: {\n                                id: item.id,\n                                name: item.name || '',\n                                brand: item.brand || '',\n                                price: item.price || 0,\n                                salePrice: item.salePrice,\n                                image: item.imageUrls[0] || ''\n                            }, onFavorite: () => { }, isFavorite: true, onRemove: () => handleRemoveFromWishlist(item.id), onClick: () => handleItemClick(item), primaryColor: primaryColor }), _jsxs(\"div\", Object.assign({ className: \"stylist-wishlist-tab__item-actions\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-wishlist-tab__action-btn stylist-wishlist-tab__action-btn--cart\", onClick: () => handleAddToCart(item) }, { children: \"Add to Cart\" })), _jsx(\"button\", Object.assign({ className: \"stylist-wishlist-tab__action-btn stylist-wishlist-tab__action-btn--closet\", onClick: () => handleMoveToCloset(item) }, { children: \"Move to Closet\" }))] }))] }), item.id))) })))] })));\n};\nexport default WishlistTab;\n","import { Fragment as _Fragment, jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect, useState, useRef } from 'react';\nimport LoadingIndicator from './LoadingIndicator';\nimport { USE_LAZY_LOADING } from '../../index';\nimport { logComponentRender, logSuspense, logHook, logPerformance, logErrorBoundary } from '../../diagnostics';\nimport { useDiagnosticLifecycle, useDiagnosticEffect, DiagnosticSuspense, DiagnosticErrorBoundary } from '../../diagnosticHooks';\n// Define a separate component for the suspense fallback to handle logging\nconst LoggingSuspenseFallback = ({ fallback, componentId }) => {\n    // Track render time for performance metrics\n    const renderStartTime = useRef(performance.now());\n    useEffect(() => {\n        const renderDuration = performance.now() - renderStartTime.current;\n        console.log(`[LIFECYCLE:AsyncLoader:${componentId}] Suspense fallback rendering`);\n        // Log the suspense fallback rendering\n        logSuspense(`AsyncLoader:${componentId}`, 'fallback', `Suspense fallback rendering for ${componentId}`, { renderDuration: `${renderDuration.toFixed(2)}ms` });\n        // Log performance mark\n        logPerformance(`SuspenseFallback:${componentId}`, renderDuration, { component: componentId });\n        return () => {\n            const totalDuration = performance.now() - renderStartTime.current;\n            logSuspense(`AsyncLoader:${componentId}`, 'resolved', `Suspense resolved for ${componentId}`, {\n                totalDuration: `${totalDuration.toFixed(2)}ms`,\n                component: componentId\n            });\n        };\n    }, [componentId]);\n    return _jsx(_Fragment, { children: fallback });\n};\n/**\n * A utility component that wraps lazy-loaded components with Suspense\n * and provides a consistent loading state.\n *\n * Only applies Suspense if USE_LAZY_LOADING is true.\n * Includes error boundary functionality and timeouts to prevent infinite suspense.\n *\n * Fixed version to avoid deadlocks by using shorter timeouts and more defensive coding.\n */\nconst AsyncComponentLoader = ({ children, loadingMessage = 'Loading...', fallback, onLoadStart, onLoadComplete, onLoadError }) => {\n    // Add diagnostic lifecycle logging\n    useDiagnosticLifecycle('AsyncComponentLoader');\n    // Track if component is actually loaded to help detect Suspense issues\n    const [isLoaded, setIsLoaded] = useState(false);\n    const [hasTimeout, setHasTimeout] = useState(false);\n    const suspenseTimeoutRef = useRef(null);\n    const safeRenderTimeoutRef = useRef(null);\n    // Add a key to force remount if needed\n    const [componentKey, setComponentKey] = useState(0);\n    // Track mount state to avoid state updates after unmount\n    const isMountedRef = useRef(true);\n    // Log component ID for tracing\n    const componentId = useRef(`async-${Math.random().toString(36).substring(2, 9)}`).current;\n    // Track load start time for performance metrics\n    const loadStartTimeRef = useRef(performance.now());\n    console.log(`[LIFECYCLE:AsyncLoader:${componentId}] Component initialized`);\n    logComponentRender('AsyncComponentLoader', 'mount', `AsyncLoader:${componentId} initialized`, { componentId });\n    // Call onLoadStart if provided\n    useDiagnosticEffect('AsyncComponentLoader', 'loadStart', [onLoadStart], () => {\n        if (onLoadStart && USE_LAZY_LOADING) {\n            console.log(`[LIFECYCLE:AsyncLoader:${componentId}] Calling onLoadStart callback`);\n            logHook('AsyncComponentLoader', 'onLoadStart', 'init', `Calling onLoadStart callback for ${componentId}`);\n            onLoadStart();\n        }\n    });\n    // Handle errors from the error boundary\n    const handleError = (error) => {\n        if (!isMountedRef.current)\n            return;\n        console.warn(`[LIFECYCLE:AsyncLoader:${componentId}] Error loading component:`, error.message);\n        logErrorBoundary('AsyncComponentLoader', error, { componentStack: `AsyncLoader:${componentId}` });\n        if (onLoadError) {\n            console.log(`[LIFECYCLE:AsyncLoader:${componentId}] Calling onLoadError callback`);\n            onLoadError(error);\n        }\n        setIsLoaded(true); // Mark as loaded to avoid further timeouts\n        // Force remount of the component in case of error by changing key\n        setTimeout(() => {\n            if (isMountedRef.current) {\n                console.log(`[LIFECYCLE:AsyncLoader:${componentId}] Forcing remount after error`);\n                logComponentRender('AsyncComponentLoader', 'render', `Forcing remount after error for ${componentId}`, { error: error.message });\n                setComponentKey(prevKey => prevKey + 1);\n            }\n        }, 100);\n    };\n    // Simplified effect to handle mount state without timeouts\n    useDiagnosticEffect('AsyncComponentLoader', 'suspenseTimeouts', [isLoaded, USE_LAZY_LOADING, componentId], () => {\n        if (!USE_LAZY_LOADING)\n            return;\n        console.log(`[LIFECYCLE:AsyncLoader:${componentId}] Setting up mount tracking`);\n        logHook('AsyncComponentLoader', 'suspenseTimeouts', 'init', `Setting up mount tracking for ${componentId}`, { isLoaded });\n        // Set mounted state on mount\n        isMountedRef.current = true;\n        // Mark as loaded immediately to avoid timeout issues\n        if (!isLoaded && isMountedRef.current) {\n            setIsLoaded(true);\n            // Log a performance mark for immediate resolution\n            logSuspense(`AsyncLoader:${componentId}`, 'resolved', `Suspense immediately resolved for ${componentId}`, {\n                component: componentId,\n                forcedResolution: false\n            });\n        }\n        // Cleanup function\n        return () => {\n            console.log(`[LIFECYCLE:AsyncLoader:${componentId}] Cleaning up mount tracking`);\n            logHook('AsyncComponentLoader', 'suspenseTimeouts', 'cleanup', `Cleaning up mount tracking for ${componentId}`);\n            isMountedRef.current = false;\n        };\n    });\n    // Effect to immediately mark component as loaded and call completion callback\n    useDiagnosticEffect('AsyncComponentLoader', 'postRenderLoad', [isLoaded, USE_LAZY_LOADING, onLoadComplete, componentId], () => {\n        if (!USE_LAZY_LOADING)\n            return;\n        if (!isLoaded && isMountedRef.current) {\n            console.log(`[LIFECYCLE:AsyncLoader:${componentId}] Immediately marking component as loaded`);\n            logHook('AsyncComponentLoader', 'postRenderLoad', 'init', `Immediately marking component ${componentId} as loaded`);\n            // Immediately mark as loaded in the same tick\n            setIsLoaded(true);\n            if (onLoadComplete) {\n                console.log(`[LIFECYCLE:AsyncLoader:${componentId}] Calling onLoadComplete callback`);\n                onLoadComplete();\n            }\n            // Log a performance mark for the total load time\n            logPerformance('AsyncComponentLoader:complete', performance.now() - loadStartTimeRef.current, {\n                componentId,\n                hasTimeout\n            });\n        }\n    });\n    // Logging for child rendering\n    useDiagnosticEffect('AsyncComponentLoader', 'childrenRendering', [hasTimeout, componentKey, USE_LAZY_LOADING, componentId], () => {\n        if (USE_LAZY_LOADING) {\n            console.log(`[LIFECYCLE:AsyncLoader:${componentId}] Children rendering ${hasTimeout ? '(timeout mode)' : '(suspense mode)'}`);\n            logComponentRender('AsyncComponentLoader', 'render', `Children rendering for ${componentId}`, {\n                mode: hasTimeout ? 'timeout' : 'suspense',\n                componentKey\n            });\n        }\n    });\n    // If lazy loading is disabled, render children directly\n    if (!USE_LAZY_LOADING) {\n        return _jsx(_Fragment, { children: children });\n    }\n    // Default fallback if none provided\n    const defaultFallback = (_jsxs(\"div\", Object.assign({ className: \"stylist-loading-container\", style: {\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            padding: '2rem',\n            height: '100%'\n        } }, { children: [_jsx(LoadingIndicator, {}), _jsx(\"p\", Object.assign({ style: { marginTop: '1rem' } }, { children: loadingMessage }))] })));\n    // Custom fallback for error state\n    const errorFallback = (_jsxs(\"div\", Object.assign({ className: \"stylist-error-container\", style: {\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            padding: '2rem',\n            height: '100%'\n        } }, { children: [_jsx(\"p\", Object.assign({ style: { marginTop: '1rem' } }, { children: \"Unable to load component\" })), _jsx(\"button\", Object.assign({ onClick: () => isMountedRef.current && setComponentKey(prevKey => prevKey + 1), style: {\n                    marginTop: '1rem',\n                    padding: '0.5rem 1rem',\n                    backgroundColor: 'var(--stylist-primary-color, #4361ee)',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer'\n                } }, { children: \"Try Again\" }))] })));\n    // If we had a timeout, render the component directly with an error boundary\n    if (hasTimeout) {\n        console.log(`[LIFECYCLE:AsyncLoader:${componentId}] Rendering with timeout fallback`);\n        logComponentRender('AsyncComponentLoader', 'render', `Rendering with timeout fallback for ${componentId}`, {\n            mode: 'timeout',\n            timeElapsed: `${((performance.now() - loadStartTimeRef.current)).toFixed(2)}ms`\n        });\n        return (_jsx(DiagnosticErrorBoundary, Object.assign({ componentName: `AsyncLoader:${componentId}`, onError: handleError, fallback: errorFallback }, { children: children }), `timeout-fallback-${componentKey}`));\n    }\n    console.log(`[LIFECYCLE:AsyncLoader:${componentId}] Rendering with suspense`);\n    logComponentRender('AsyncComponentLoader', 'render', `Rendering with suspense for ${componentId}`, {\n        mode: 'suspense',\n        timeElapsed: `${((performance.now() - loadStartTimeRef.current)).toFixed(2)}ms`\n    });\n    // Prepare the fallback content\n    const finalFallback = fallback || defaultFallback;\n    return (_jsx(DiagnosticErrorBoundary, Object.assign({ componentName: `AsyncLoader:${componentId}`, onError: handleError, fallback: errorFallback }, { children: _jsx(DiagnosticSuspense, Object.assign({ componentName: `AsyncLoader:${componentId}`, fallback: _jsx(LoggingSuspenseFallback, { fallback: finalFallback, componentId: componentId }) }, { children: children })) }), `error-boundary-${componentKey}`));\n};\nexport default AsyncComponentLoader;\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\n// src/components/common/LoadingIndicator.tsx\nimport { useState, useEffect } from 'react';\nimport './LoadingIndicator.scss';\n/**\n * Enhanced LoadingIndicator component with multiple style options\n *\n * Features:\n * - Multiple sizes, colors, and animation types\n * - Progress indicator option\n * - Automatic progress animation\n * - Overlay mode for full-container loading\n * - Inline layout option\n */\nconst LoadingIndicator = ({ size = 'medium', text, secondaryText, variant = 'primary', animation = 'spin', showProgress = false, progress, inline = false, overlay = false, customColor, isIndeterminate = false, autoProgressDuration = 0 }) => {\n    const [autoProgress, setAutoProgress] = useState(0);\n    // Handle auto progress animation\n    useEffect(() => {\n        if (autoProgressDuration > 0 && isIndeterminate) {\n            const interval = setInterval(() => {\n                setAutoProgress((prevProgress) => {\n                    // Increment but cap at 90% for indeterminate progress\n                    const newProgress = prevProgress + (100 / (autoProgressDuration / 100));\n                    return newProgress > 90 ? 90 : newProgress;\n                });\n            }, 100);\n            return () => clearInterval(interval);\n        }\n    }, [autoProgressDuration, isIndeterminate]);\n    // Determine the progress percentage to display\n    const progressPercentage = progress !== undefined ? progress : autoProgress;\n    // Build the class list based on props\n    const classNames = [\n        'stylist-loading-indicator',\n        `stylist-loading-indicator--${size}`,\n        variant && `stylist-loading-indicator--${variant}`,\n        animation !== 'spin' && `stylist-loading-indicator--${animation}`,\n        inline && 'stylist-loading-indicator--inline',\n        overlay && 'stylist-loading-indicator--overlay'\n    ].filter(Boolean).join(' ');\n    // Custom style for the spinner if custom color is provided\n    const spinnerStyle = customColor ? {\n        borderColor: `${customColor}40`,\n        borderTopColor: customColor\n    } : undefined;\n    // Custom style for progress bar\n    const progressBarStyle = Object.assign({ width: `${progressPercentage}%` }, (customColor ? { backgroundColor: customColor } : {}));\n    // Render the core component\n    const loadingContent = (_jsxs(_Fragment, { children: [_jsx(\"div\", { className: \"stylist-loading-indicator__spinner\", style: spinnerStyle }), text && _jsx(\"div\", Object.assign({ className: \"stylist-loading-indicator__text\" }, { children: text })), secondaryText &&\n                _jsx(\"div\", Object.assign({ className: \"stylist-loading-indicator__text\", style: { opacity: 0.7, fontSize: '0.9em' } }, { children: secondaryText })), showProgress && (_jsx(\"div\", Object.assign({ className: \"stylist-loading-indicator__progress\" }, { children: _jsx(\"div\", { className: \"stylist-loading-indicator__progress-bar\", style: progressBarStyle }) })))] }));\n    // Wrap in container if overlay mode is enabled\n    return overlay ? (_jsx(\"div\", Object.assign({ className: classNames }, { children: _jsx(\"div\", Object.assign({ className: \"stylist-loading-indicator__container\" }, { children: loadingContent })) }))) : (_jsx(\"div\", Object.assign({ className: classNames }, { children: loadingContent })));\n};\nexport default LoadingIndicator;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Component } from 'react';\nimport './ErrorMessage.scss';\n/**\n * A robust error boundary component to gracefully handle errors in child components\n * Prevents the entire application from crashing when a component fails\n */\nclass ErrorBoundary extends Component {\n    constructor(props) {\n        super(props);\n        this.resetErrorBoundary = () => {\n            this.setState({\n                hasError: false,\n                error: null\n            });\n        };\n        this.state = {\n            hasError: false,\n            error: null\n        };\n    }\n    static getDerivedStateFromError(error) {\n        return {\n            hasError: true,\n            error\n        };\n    }\n    componentDidCatch(error, errorInfo) {\n        // Log error to console for debugging\n        console.error('ErrorBoundary caught an error:', error, errorInfo);\n        // Call onError callback if provided\n        if (this.props.onError) {\n            this.props.onError(error, errorInfo);\n        }\n    }\n    // Reset error state when specified props change\n    componentDidUpdate(prevProps) {\n        if (this.state.hasError && this.props.resetOnChange) {\n            const didResetDependenciesChange = this.props.resetOnChange.some((dep, i) => dep !== (prevProps.resetOnChange || [])[i]);\n            if (didResetDependenciesChange) {\n                this.resetErrorBoundary();\n            }\n        }\n    }\n    render() {\n        if (this.state.hasError) {\n            // Either use the provided fallback or render a default error UI\n            if (this.props.fallback) {\n                return this.props.fallback;\n            }\n            return (_jsx(\"div\", Object.assign({ className: `stylist-error-container ${this.props.errorClassName || ''}` }, { children: _jsxs(\"div\", Object.assign({ className: \"stylist-error-message\" }, { children: [_jsx(\"h3\", { children: \"Something went wrong\" }), _jsx(\"p\", { children: \"The widget had trouble loading this component.\" }), _jsx(\"button\", Object.assign({ onClick: this.resetErrorBoundary, className: \"stylist-error-retry-button\" }, { children: \"Try Again\" }))] })) })));\n        }\n        // When there's no error, render children normally\n        return this.props.children;\n    }\n}\nexport default ErrorBoundary;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport './BodyGuide.scss';\nimport { BodyPosition } from '@/types/tryOn';\nconst BodyGuide = ({ width, height, activePosition }) => {\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-body-guide\", style: { width, height } }, { children: [_jsx(\"div\", Object.assign({ className: `stylist-body-guide__region stylist-body-guide__region--head ${activePosition === BodyPosition.HEAD ? 'stylist-body-guide__region--active' : ''}` }, { children: _jsx(\"span\", Object.assign({ className: \"stylist-body-guide__label\" }, { children: \"Head\" })) })), _jsx(\"div\", Object.assign({ className: `stylist-body-guide__region stylist-body-guide__region--neck ${activePosition === BodyPosition.NECK ? 'stylist-body-guide__region--active' : ''}` }, { children: _jsx(\"span\", Object.assign({ className: \"stylist-body-guide__label\" }, { children: \"Neck\" })) })), _jsx(\"div\", Object.assign({ className: `stylist-body-guide__region stylist-body-guide__region--upper-body ${activePosition === BodyPosition.UPPER_BODY ? 'stylist-body-guide__region--active' : ''}` }, { children: _jsx(\"span\", Object.assign({ className: \"stylist-body-guide__label\" }, { children: \"Upper Body\" })) })), _jsx(\"div\", Object.assign({ className: `stylist-body-guide__region stylist-body-guide__region--waist ${activePosition === BodyPosition.WAIST ? 'stylist-body-guide__region--active' : ''}` }, { children: _jsx(\"span\", Object.assign({ className: \"stylist-body-guide__label\" }, { children: \"Waist\" })) })), _jsx(\"div\", Object.assign({ className: `stylist-body-guide__region stylist-body-guide__region--lower-body ${activePosition === BodyPosition.LOWER_BODY ? 'stylist-body-guide__region--active' : ''}` }, { children: _jsx(\"span\", Object.assign({ className: \"stylist-body-guide__label\" }, { children: \"Lower Body\" })) })), _jsx(\"div\", Object.assign({ className: `stylist-body-guide__region stylist-body-guide__region--feet ${activePosition === BodyPosition.FEET ? 'stylist-body-guide__region--active' : ''}` }, { children: _jsx(\"span\", Object.assign({ className: \"stylist-body-guide__label\" }, { children: \"Feet\" })) })), _jsx(\"div\", Object.assign({ className: `stylist-body-guide__region stylist-body-guide__region--full-body ${activePosition === BodyPosition.FULL_BODY ? 'stylist-body-guide__region--active' : ''}` }, { children: _jsx(\"span\", Object.assign({ className: \"stylist-body-guide__label\" }, { children: \"Full Body\" })) }))] })));\n};\nexport default BodyGuide;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// src/components/TryOnCanvas/TryOnCanvas.tsx\nimport { useEffect, useRef, useState, useCallback } from 'react';\nimport './TryOnCanvas.scss';\nimport { GarmentType } from '@/types/tryOn';\nimport { useTryOnStore } from '@/store/tryOnStore';\nimport { loadImage } from '@/services/image-processing/fileUtils';\nimport { compositeImages, drawGuidelines, compositeImagesLowQuality } from '@/services/image-processing/canvasUtils';\nimport { getDefaultBodyPosition } from '@/services/image-processing/imagePositioning';\nimport BodyGuide from './BodyGuide';\nimport { getDeviceCapabilities, getPerformanceTier, shouldEnableFeature } from '@/utils/deviceCapabilities';\nimport { performanceMonitor } from '@/utils/performanceMonitoring';\nconst TryOnCanvas = ({ outfit, userImage, setCanvasRef, onGarmentSelect, showBodyGuide = false }) => {\n    var _a;\n    const canvasRef = useRef(null);\n    const renderTimeoutRef = useRef(null);\n    const [activeGarmentId, setActiveGarmentId] = useState(null);\n    const [isDragging, setIsDragging] = useState(false);\n    const [dragStart, setDragStart] = useState(null);\n    const [deviceCapabilities, setDeviceCapabilities] = useState({\n        performance: 'medium',\n        useHighQuality: true,\n        useRealTimePreview: true\n    });\n    const [isRendering, setIsRendering] = useState(false);\n    const canvasWidth = useTryOnStore((state) => state.canvasWidth);\n    const canvasHeight = useTryOnStore((state) => state.canvasHeight);\n    const showGuidelines = useTryOnStore((state) => state.settings.showGuidelines);\n    const updateGarment = useTryOnStore((state) => state.updateGarment);\n    // Detect device capabilities on mount\n    useEffect(() => {\n        const detectCapabilities = () => __awaiter(void 0, void 0, void 0, function* () {\n            try {\n                const capabilities = yield getDeviceCapabilities();\n                const performanceTier = getPerformanceTier();\n                // Check if high-quality features should be enabled\n                const useHighQuality = shouldEnableFeature('virtualTryOn', 'medium');\n                const useRealTimePreview = shouldEnableFeature('virtualTryOn', 'high');\n                setDeviceCapabilities({\n                    performance: performanceTier,\n                    useHighQuality,\n                    useRealTimePreview\n                });\n                console.log('[TryOnCanvas] Device capabilities detected:', {\n                    performanceTier,\n                    useHighQuality,\n                    useRealTimePreview\n                });\n            }\n            catch (error) {\n                console.error('[TryOnCanvas] Error detecting device capabilities:', error);\n                // Use default medium capabilities if detection fails\n            }\n        });\n        detectCapabilities();\n    }, []);\n    // Register canvas ref with parent component and store\n    useEffect(() => {\n        if (canvasRef.current) {\n            setCanvasRef(canvasRef.current);\n        }\n    }, [setCanvasRef]);\n    // Optimized compositing function based on device capabilities\n    const compositeImagesOptimized = useCallback((canvas, userImg, garments, loadImageFn) => __awaiter(void 0, void 0, void 0, function* () {\n        const renderStart = performance.now();\n        try {\n            if (deviceCapabilities.useHighQuality) {\n                // Use high-quality compositing for medium/high performance devices\n                yield compositeImages(canvas, userImg, garments, loadImageFn);\n            }\n            else {\n                // Use optimized low-quality compositing for low performance devices\n                yield compositeImagesLowQuality(canvas, userImg, garments, loadImageFn);\n            }\n            const renderEnd = performance.now();\n            const renderTime = renderEnd - renderStart;\n            // Record render performance\n            performanceMonitor.recordComponentRender('TryOnCanvas_compositeImages', renderTime);\n        }\n        catch (error) {\n            console.error('[TryOnCanvas] Error in optimized image compositing:', error);\n        }\n    }), [deviceCapabilities.useHighQuality]);\n    // Debounced render function to prevent excessive renders during dragging\n    const debouncedRender = useCallback(() => {\n        if (renderTimeoutRef.current) {\n            clearTimeout(renderTimeoutRef.current);\n        }\n        // For high performance devices, render immediately\n        if (deviceCapabilities.useRealTimePreview) {\n            renderCanvas();\n            return;\n        }\n        // For lower performance devices, debounce the render\n        renderTimeoutRef.current = setTimeout(() => {\n            renderCanvas();\n        }, deviceCapabilities.performance === 'low' ? 250 : 100);\n    }, [deviceCapabilities.performance, deviceCapabilities.useRealTimePreview]);\n    // Render canvas when outfit or user image changes\n    const renderCanvas = useCallback(() => __awaiter(void 0, void 0, void 0, function* () {\n        const canvas = canvasRef.current;\n        if (!canvas)\n            return;\n        const ctx = canvas.getContext('2d');\n        if (!ctx)\n            return;\n        setIsRendering(true);\n        const renderStart = performance.now();\n        // Clear canvas\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        // Draw guidelines if enabled and no user image\n        if (showGuidelines && !userImage) {\n            // Draw regular guidelines - body guide is shown as a separate component\n            drawGuidelines(canvas);\n            setIsRendering(false);\n            return;\n        }\n        // If no user image, show empty canvas\n        if (!userImage) {\n            setIsRendering(false);\n            return;\n        }\n        try {\n            // Load user image\n            const userImg = yield loadImage(userImage.url);\n            // Draw user image full canvas\n            ctx.drawImage(userImg, 0, 0, canvas.width, canvas.height);\n            // Draw garments if available\n            if (outfit === null || outfit === void 0 ? void 0 : outfit.garments.length) {\n                yield compositeImagesOptimized(canvas, userImg, outfit.garments, loadImage);\n            }\n            const renderEnd = performance.now();\n            const renderTime = renderEnd - renderStart;\n            // Record render time for performance monitoring\n            performanceMonitor.recordComponentRender('TryOnCanvas_render', renderTime);\n        }\n        catch (error) {\n            console.error('Error rendering canvas:', error);\n        }\n        finally {\n            setIsRendering(false);\n        }\n    }), [outfit, userImage, canvasWidth, canvasHeight, showGuidelines, compositeImagesOptimized]);\n    // Effect to trigger canvas rendering\n    useEffect(() => {\n        debouncedRender();\n        return () => {\n            if (renderTimeoutRef.current) {\n                clearTimeout(renderTimeoutRef.current);\n            }\n        };\n    }, [outfit, userImage, canvasWidth, canvasHeight, showGuidelines, activeGarmentId, showBodyGuide, debouncedRender]);\n    // Handle canvas click for garment selection\n    const handleCanvasClick = (e) => __awaiter(void 0, void 0, void 0, function* () {\n        if (!onGarmentSelect || !outfit || !outfit.garments.length)\n            return;\n        const canvas = canvasRef.current;\n        if (!canvas)\n            return;\n        // Get click coordinates\n        const rect = canvas.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        // Check if click is on a garment (from top to bottom in z-index order)\n        const sortedGarments = [...outfit.garments].sort((a, b) => b.zIndex - a.zIndex);\n        // Find the first garment that contains the click point\n        for (const garment of sortedGarments) {\n            try {\n                const { dimensions, offset, scale } = garment;\n                if (!dimensions || !offset)\n                    continue;\n                // Calculate garment position\n                const centerX = canvas.width / 2 + offset.x;\n                const centerY = canvas.height / 2 + offset.y;\n                // Calculate scaled dimensions\n                const scaledWidth = dimensions.width * (scale || 1);\n                const scaledHeight = dimensions.height * (scale || 1);\n                // Calculate garment bounding box\n                const left = centerX - scaledWidth / 2;\n                const top = centerY - scaledHeight / 2;\n                const right = left + scaledWidth;\n                const bottom = top + scaledHeight;\n                // Check if click is within bounding box\n                if (x >= left && x <= right && y >= top && y <= bottom) {\n                    onGarmentSelect(garment.id);\n                    setActiveGarmentId(garment.id);\n                    return;\n                }\n            }\n            catch (error) {\n                console.error('Error checking garment click:', error);\n            }\n        }\n        // If click is not on any garment, deselect\n        onGarmentSelect(null);\n        setActiveGarmentId(null);\n    });\n    // Handle mouse down for drag start\n    const handleMouseDown = (e) => {\n        if (!activeGarmentId)\n            return;\n        const canvas = canvasRef.current;\n        if (!canvas)\n            return;\n        const rect = canvas.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        setIsDragging(true);\n        setDragStart({ x, y });\n    };\n    // Handle mouse move for dragging\n    const handleMouseMove = (e) => {\n        if (!isDragging || !dragStart || !activeGarmentId || !outfit)\n            return;\n        const canvas = canvasRef.current;\n        if (!canvas)\n            return;\n        const rect = canvas.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n        const deltaX = x - dragStart.x;\n        const deltaY = y - dragStart.y;\n        // Update drag start for next move\n        setDragStart({ x, y });\n        // Find the active garment\n        const garment = outfit.garments.find(g => g.id === activeGarmentId);\n        if (!garment || !garment.offset)\n            return;\n        // Update garment offset\n        const newOffset = {\n            x: garment.offset.x + deltaX,\n            y: garment.offset.y + deltaY\n        };\n        // Update garment in store\n        updateGarment(activeGarmentId, { offset: newOffset });\n        // For low-performance devices, show a simple drag indicator instead of re-rendering\n        if (!deviceCapabilities.useRealTimePreview) {\n            // Update placeholder element to show dragging feedback\n            const dragIndicator = document.querySelector('.stylist-try-on-canvas__drag-indicator');\n            if (dragIndicator) {\n                dragIndicator.style.left = `${x}px`;\n                dragIndicator.style.top = `${y}px`;\n            }\n        }\n    };\n    // Handle mouse up to end dragging\n    const handleMouseUp = () => {\n        setIsDragging(false);\n        setDragStart(null);\n        // Force render if we're not using real-time previews\n        if (!deviceCapabilities.useRealTimePreview) {\n            renderCanvas();\n        }\n    };\n    // Ensure mouse up is captured even if outside canvas\n    useEffect(() => {\n        const handleGlobalMouseUp = () => {\n            if (isDragging) {\n                setIsDragging(false);\n                setDragStart(null);\n                // Force render if we're not using real-time previews\n                if (!deviceCapabilities.useRealTimePreview) {\n                    renderCanvas();\n                }\n            }\n        };\n        document.addEventListener('mouseup', handleGlobalMouseUp);\n        return () => {\n            document.removeEventListener('mouseup', handleGlobalMouseUp);\n        };\n    }, [isDragging, deviceCapabilities.useRealTimePreview, renderCanvas]);\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-canvas\" }, { children: [_jsx(\"canvas\", { ref: canvasRef, width: canvasWidth, height: canvasHeight, className: `stylist-try-on-canvas__canvas ${isDragging ? 'stylist-try-on-canvas__canvas--dragging' : ''} ${isRendering ? 'stylist-try-on-canvas__canvas--rendering' : ''}`, onClick: handleCanvasClick, onMouseDown: handleMouseDown, onMouseMove: handleMouseMove, onMouseUp: handleMouseUp }), showBodyGuide && !userImage && (_jsx(BodyGuide, { width: canvasWidth, height: canvasHeight, activePosition: activeGarmentId ? getDefaultBodyPosition(((_a = outfit === null || outfit === void 0 ? void 0 : outfit.garments.find(g => g.id === activeGarmentId)) === null || _a === void 0 ? void 0 : _a.type) || GarmentType.TOP) : undefined })), !userImage && (_jsx(\"div\", Object.assign({ className: \"stylist-try-on-canvas__placeholder\" }, { children: _jsx(\"div\", Object.assign({ className: \"stylist-try-on-canvas__placeholder-text\" }, { children: \"Upload a photo to start the virtual try-on\" })) }))), isRendering && (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-canvas__loading\" }, { children: [_jsx(\"div\", { className: \"stylist-try-on-canvas__loading-spinner\" }), _jsx(\"div\", Object.assign({ className: \"stylist-try-on-canvas__loading-text\" }, { children: \"Processing image...\" }))] }))), isDragging && !deviceCapabilities.useRealTimePreview && (_jsx(\"div\", { className: \"stylist-try-on-canvas__drag-indicator\" })), process.env.NODE_ENV === 'development' && (_jsx(\"div\", Object.assign({ className: \"stylist-try-on-canvas__debug\" }, { children: _jsxs(\"div\", Object.assign({ className: `stylist-try-on-canvas__debug-indicator ${deviceCapabilities.performance}` }, { children: [deviceCapabilities.performance, \" mode\"] })) })))] })));\n};\nexport default TryOnCanvas;\n","// src/components/TryOnCanvas/index.ts\nimport TryOnCanvas from './TryOnCanvas';\nexport default TryOnCanvas;\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\n// TryOnControls component for adjusting garments\nimport { useState, useRef, useMemo } from 'react';\nimport './TryOnControls.scss';\nimport { GarmentType } from '@/types/tryOn';\n// Icon components to enhance visual display\nconst GarmentIcon = ({ type }) => {\n    switch (type) {\n        case GarmentType.TOP:\n            return (_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M16 4l4 5v11H4V9l4-5h8zm-7 5v5h6V9h-6z\" }) })));\n        case GarmentType.BOTTOM:\n            return (_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M7 6l-5 16h20L17 6h-2l-3 8-3-8H7z\" }) })));\n        case GarmentType.DRESS:\n            return (_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M12 2l-5 5v15h10V7l-5-5zm-3 5.5L12 4l3 3.5V20h-6V7.5z\" }) })));\n        case GarmentType.OUTERWEAR:\n            return (_jsxs(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: [_jsx(\"path\", { d: \"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H4V5h16v14z\" }), _jsx(\"path\", { d: \"M7 10h10v7H7z\" })] })));\n        case GarmentType.SHOES:\n            return (_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M19 13v7H5v-7l2-8h2l3 5 3-5h2l2 8z\" }) })));\n        case GarmentType.ACCESSORY:\n            return (_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M17 12c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm-10-3h2V9H7v8zm-4 0h2V9H3v8zm14-8h-2v2h2V9zm0 4h-2v2h2v-2z\" }) })));\n        default:\n            return null;\n    }\n};\nconst TryOnControls = ({ outfit, activeGarmentId, onGarmentSelect, onGarmentRemove, onGarmentUpdate, onGarmentAdd, onChangePhoto, disabled = false }) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    const [showGarments, setShowGarments] = useState(true);\n    const [showControls, setShowControls] = useState(true);\n    const [showAddGarment, setShowAddGarment] = useState(false);\n    const [viewMode, setViewMode] = useState('grid');\n    const fileInputRef = useRef(null);\n    const [selectedGarmentType, setSelectedGarmentType] = useState(null);\n    const [draggedGarmentId, setDraggedGarmentId] = useState(null);\n    // Get active garment details\n    const activeGarment = outfit === null || outfit === void 0 ? void 0 : outfit.garments.find(g => g.id === activeGarmentId);\n    // Group garments by type for organized display\n    const garmentsByType = useMemo(() => {\n        if (!(outfit === null || outfit === void 0 ? void 0 : outfit.garments))\n            return {};\n        return outfit.garments.reduce((acc, garment) => {\n            const type = garment.type || 'unknown';\n            if (!acc[type]) {\n                acc[type] = [];\n            }\n            acc[type].push(garment);\n            return acc;\n        }, {});\n    }, [outfit === null || outfit === void 0 ? void 0 : outfit.garments]);\n    // Handle file input change\n    const handleFileInputChange = (e) => {\n        var _a;\n        const file = (_a = e.target.files) === null || _a === void 0 ? void 0 : _a[0];\n        if (file && selectedGarmentType) {\n            onGarmentAdd(file, selectedGarmentType);\n            // Reset\n            setSelectedGarmentType(null);\n            setShowAddGarment(false);\n            // Clear the input\n            if (fileInputRef.current) {\n                fileInputRef.current.value = '';\n            }\n        }\n    };\n    // Open file dialog for the selected garment type\n    const handleAddGarment = (type) => {\n        setSelectedGarmentType(type);\n        if (fileInputRef.current) {\n            fileInputRef.current.click();\n        }\n    };\n    // Update scale value\n    const handleScaleChange = (e) => {\n        if (activeGarmentId) {\n            const scale = parseFloat(e.target.value);\n            onGarmentUpdate(activeGarmentId, { scale });\n        }\n    };\n    // Update position (offset)\n    const handlePositionChange = (axis, value) => {\n        if (activeGarmentId && (activeGarment === null || activeGarment === void 0 ? void 0 : activeGarment.offset)) {\n            const newOffset = Object.assign({}, activeGarment.offset);\n            newOffset[axis] = value;\n            onGarmentUpdate(activeGarmentId, { offset: newOffset });\n        }\n    };\n    // Update rotation\n    const handleRotationChange = (e) => {\n        if (activeGarmentId) {\n            const rotation = parseFloat(e.target.value);\n            onGarmentUpdate(activeGarmentId, { rotation });\n        }\n    };\n    // Toggle flip horizontal\n    const handleFlipHorizontal = () => {\n        if (activeGarmentId) {\n            onGarmentUpdate(activeGarmentId, {\n                flipHorizontal: !((activeGarment === null || activeGarment === void 0 ? void 0 : activeGarment.flipHorizontal) || false)\n            });\n        }\n    };\n    // Handle batch actions\n    const handleRemoveAllGarments = () => {\n        if ((outfit === null || outfit === void 0 ? void 0 : outfit.garments) && outfit.garments.length > 0) {\n            if (window.confirm('Remove all garments?')) {\n                outfit.garments.forEach(garment => {\n                    onGarmentRemove(garment.id);\n                });\n                // Deselect active garment\n                onGarmentSelect(null);\n            }\n        }\n    };\n    // Handle drag and drop for reordering\n    const handleDragStart = (e, garmentId) => {\n        setDraggedGarmentId(garmentId);\n        e.dataTransfer.setData('text/plain', garmentId);\n        // Set a custom ghost image (optional)\n        const garment = outfit === null || outfit === void 0 ? void 0 : outfit.garments.find(g => g.id === garmentId);\n        if (garment) {\n            const ghostImage = new Image();\n            ghostImage.src = garment.url;\n            e.dataTransfer.setDragImage(ghostImage, 25, 25);\n        }\n    };\n    const handleDragOver = (e) => {\n        e.preventDefault();\n    };\n    const handleDrop = (e, targetGarmentId) => {\n        e.preventDefault();\n        if (draggedGarmentId && draggedGarmentId !== targetGarmentId && (outfit === null || outfit === void 0 ? void 0 : outfit.garments)) {\n            // Get current indices\n            const sourceIndex = outfit.garments.findIndex(g => g.id === draggedGarmentId);\n            const targetIndex = outfit.garments.findIndex(g => g.id === targetGarmentId);\n            if (sourceIndex !== -1 && targetIndex !== -1) {\n                // Update layer index for dragged garment\n                const layerIndex = outfit.garments[targetIndex].layerIndex;\n                onGarmentUpdate(draggedGarmentId, { layerIndex });\n                // Select the dropped garment\n                onGarmentSelect(draggedGarmentId);\n            }\n        }\n        setDraggedGarmentId(null);\n    };\n    // Toggle between grid and list view\n    const toggleViewMode = () => {\n        setViewMode(prevMode => prevMode === 'grid' ? 'list' : 'grid');\n    };\n    // Get number of garments tried on\n    const garmentCount = ((_a = outfit === null || outfit === void 0 ? void 0 : outfit.garments) === null || _a === void 0 ? void 0 : _a.length) || 0;\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__section\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__section-header\", onClick: () => setShowGarments(!showGarments) }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__section-title-container\" }, { children: [_jsx(\"h3\", Object.assign({ className: \"stylist-try-on-controls__section-title\" }, { children: \"Garments\" })), garmentCount > 0 && (_jsx(\"span\", Object.assign({ className: \"stylist-try-on-controls__item-count\" }, { children: garmentCount })))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__header-actions\" }, { children: [garmentCount > 0 && (_jsx(\"button\", Object.assign({ className: \"stylist-try-on-controls__view-toggle\", onClick: (e) => {\n                                            e.stopPropagation();\n                                            toggleViewMode();\n                                        }, \"aria-label\": `Switch to ${viewMode === 'grid' ? 'list' : 'grid'} view` }, { children: viewMode === 'grid' ? (_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M3 13h18v-2H3v2zm0 7h18v-2H3v2zm0-14h18V4H3v2z\" }) }))) : (_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z\" }) }))) }))), _jsx(\"span\", Object.assign({ className: \"stylist-try-on-controls__section-toggle\" }, { children: showGarments ? '' : '+' }))] }))] })), showGarments && (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__section-content\" }, { children: [(!(outfit === null || outfit === void 0 ? void 0 : outfit.garments) || outfit.garments.length === 0) ? (_jsx(\"div\", Object.assign({ className: \"stylist-try-on-controls__empty\" }, { children: \"No garments added yet. Add a garment below.\" }))) : (_jsxs(_Fragment, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-try-on-controls__batch-actions\" }, { children: _jsxs(\"button\", Object.assign({ className: \"stylist-try-on-controls__batch-action stylist-try-on-controls__batch-action--remove\", onClick: handleRemoveAllGarments, disabled: disabled || garmentCount === 0 }, { children: [_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"12\", height: \"12\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\" }) })), \"Remove all\"] })) })), viewMode === 'grid' ? (_jsx(\"div\", Object.assign({ className: \"stylist-try-on-controls__garment-grid\" }, { children: outfit.garments.map(garment => (_jsxs(\"div\", Object.assign({ className: `stylist-try-on-controls__garment-thumbnail ${activeGarmentId === garment.id ? 'stylist-try-on-controls__garment-thumbnail--active' : ''}`, onClick: () => onGarmentSelect(garment.id), draggable: true, onDragStart: (e) => handleDragStart(e, garment.id), onDragOver: handleDragOver, onDrop: (e) => handleDrop(e, garment.id) }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-try-on-controls__garment-image\" }, { children: _jsx(\"img\", { src: garment.url, alt: garment.type }) })), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__garment-type\" }, { children: [_jsx(GarmentIcon, { type: garment.type }), _jsx(\"span\", { children: garment.type })] })), _jsx(\"button\", Object.assign({ className: \"stylist-try-on-controls__garment-remove\", onClick: (e) => {\n                                                        e.stopPropagation();\n                                                        onGarmentRemove(garment.id);\n                                                    }, \"aria-label\": \"Remove garment\" }, { children: _jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\" }) })) })), activeGarmentId === garment.id && (_jsx(\"div\", { className: \"stylist-try-on-controls__garment-active-marker\" }))] }), garment.id))) }))) : (_jsx(\"div\", Object.assign({ className: \"stylist-try-on-controls__garment-list\" }, { children: Object.keys(garmentsByType).map(type => (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__garment-group\" }, { children: [_jsxs(\"h4\", Object.assign({ className: \"stylist-try-on-controls__group-title\" }, { children: [_jsx(GarmentIcon, { type: type }), type, _jsx(\"span\", Object.assign({ className: \"stylist-try-on-controls__group-count\" }, { children: garmentsByType[type].length }))] })), garmentsByType[type].map(garment => (_jsxs(\"div\", Object.assign({ className: `stylist-try-on-controls__garment-list-item ${activeGarmentId === garment.id ? 'stylist-try-on-controls__garment-list-item--active' : ''}`, onClick: () => onGarmentSelect(garment.id), draggable: true, onDragStart: (e) => handleDragStart(e, garment.id), onDragOver: handleDragOver, onDrop: (e) => handleDrop(e, garment.id) }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-try-on-controls__garment-list-image\" }, { children: _jsx(\"img\", { src: garment.url, alt: garment.type }) })), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__garment-list-info\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__garment-name\" }, { children: [garment.type, \" \", garmentsByType[type].indexOf(garment) + 1] })), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__garment-meta\" }, { children: [\"Scale: \", Math.round((garment.scale || 1) * 100), \"%\"] }))] })), _jsx(\"button\", Object.assign({ className: \"stylist-try-on-controls__garment-list-remove\", onClick: (e) => {\n                                                                e.stopPropagation();\n                                                                onGarmentRemove(garment.id);\n                                                            }, \"aria-label\": \"Remove garment\" }, { children: _jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\" }) })) }))] }), garment.id)))] }), type))) })))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__add-garment\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-try-on-controls__button stylist-try-on-controls__button--full-width\", onClick: () => setShowAddGarment(!showAddGarment), disabled: disabled }, { children: showAddGarment ? 'Cancel' : '+ Add Garment' })), showAddGarment && (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__garment-types\" }, { children: [_jsx(\"span\", Object.assign({ className: \"stylist-try-on-controls__label\" }, { children: \"Select garment type:\" })), _jsx(\"div\", Object.assign({ className: \"stylist-try-on-controls__garment-type-grid\" }, { children: Object.values(GarmentType).map(type => (_jsxs(\"button\", Object.assign({ className: \"stylist-try-on-controls__garment-type-button\", onClick: () => handleAddGarment(type), disabled: disabled }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-try-on-controls__garment-type-icon\" }, { children: _jsx(GarmentIcon, { type: type }) })), _jsx(\"span\", { children: type })] }), type))) })), _jsx(\"input\", { ref: fileInputRef, type: \"file\", accept: \"image/*\", className: \"stylist-try-on-controls__input\", style: { display: 'none' }, onChange: handleFileInputChange, disabled: disabled })] })))] }))] })))] })), activeGarment && (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__section\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__section-header\", onClick: () => setShowControls(!showControls) }, { children: [_jsxs(\"h3\", Object.assign({ className: \"stylist-try-on-controls__section-title\" }, { children: [\"Adjustments - \", activeGarment.type] })), _jsx(\"span\", Object.assign({ className: \"stylist-try-on-controls__section-toggle\" }, { children: showControls ? '' : '+' }))] })), showControls && (_jsx(\"div\", Object.assign({ className: \"stylist-try-on-controls__section-content\" }, { children: _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__garment-controls\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__control-group\" }, { children: [_jsxs(\"label\", Object.assign({ className: \"stylist-try-on-controls__label\" }, { children: [\"Size\", _jsxs(\"span\", Object.assign({ className: \"stylist-try-on-controls__value\" }, { children: [Math.round((activeGarment.scale || 1) * 100), \"%\"] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__range-with-buttons\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-try-on-controls__range-button\", onClick: () => {\n                                                        const newScale = Math.max(0.1, (activeGarment.scale || 1) - 0.1);\n                                                        onGarmentUpdate(activeGarmentId, { scale: newScale });\n                                                    }, disabled: disabled || (activeGarment.scale || 1) <= 0.1 }, { children: \"\\u2212\" })), _jsx(\"input\", { type: \"range\", min: \"0.1\", max: \"2\", step: \"0.05\", value: activeGarment.scale || 1, onChange: handleScaleChange, className: \"stylist-try-on-controls__slider\", disabled: disabled }), _jsx(\"button\", Object.assign({ className: \"stylist-try-on-controls__range-button\", onClick: () => {\n                                                        const newScale = Math.min(2, (activeGarment.scale || 1) + 0.1);\n                                                        onGarmentUpdate(activeGarmentId, { scale: newScale });\n                                                    }, disabled: disabled || (activeGarment.scale || 1) >= 2 }, { children: \"+\" }))] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__control-group\" }, { children: [_jsxs(\"label\", Object.assign({ className: \"stylist-try-on-controls__label\" }, { children: [\"Position X\", _jsxs(\"span\", Object.assign({ className: \"stylist-try-on-controls__value\" }, { children: [((_b = activeGarment.offset) === null || _b === void 0 ? void 0 : _b.x) || 0, \"px\"] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__range-with-buttons\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-try-on-controls__range-button\", onClick: () => { var _a; return handlePositionChange('x', (((_a = activeGarment.offset) === null || _a === void 0 ? void 0 : _a.x) || 0) - 10); }, disabled: disabled || (((_c = activeGarment.offset) === null || _c === void 0 ? void 0 : _c.x) || 0) <= -200 }, { children: \"\\u2190\" })), _jsx(\"input\", { type: \"range\", min: \"-200\", max: \"200\", step: \"1\", value: ((_d = activeGarment.offset) === null || _d === void 0 ? void 0 : _d.x) || 0, onChange: (e) => handlePositionChange('x', parseInt(e.target.value)), className: \"stylist-try-on-controls__slider\", disabled: disabled }), _jsx(\"button\", Object.assign({ className: \"stylist-try-on-controls__range-button\", onClick: () => { var _a; return handlePositionChange('x', (((_a = activeGarment.offset) === null || _a === void 0 ? void 0 : _a.x) || 0) + 10); }, disabled: disabled || (((_e = activeGarment.offset) === null || _e === void 0 ? void 0 : _e.x) || 0) >= 200 }, { children: \"\\u2192\" }))] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__control-group\" }, { children: [_jsxs(\"label\", Object.assign({ className: \"stylist-try-on-controls__label\" }, { children: [\"Position Y\", _jsxs(\"span\", Object.assign({ className: \"stylist-try-on-controls__value\" }, { children: [((_f = activeGarment.offset) === null || _f === void 0 ? void 0 : _f.y) || 0, \"px\"] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__range-with-buttons\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-try-on-controls__range-button\", onClick: () => { var _a; return handlePositionChange('y', (((_a = activeGarment.offset) === null || _a === void 0 ? void 0 : _a.y) || 0) - 10); }, disabled: disabled || (((_g = activeGarment.offset) === null || _g === void 0 ? void 0 : _g.y) || 0) <= -200 }, { children: \"\\u2191\" })), _jsx(\"input\", { type: \"range\", min: \"-200\", max: \"200\", step: \"1\", value: ((_h = activeGarment.offset) === null || _h === void 0 ? void 0 : _h.y) || 0, onChange: (e) => handlePositionChange('y', parseInt(e.target.value)), className: \"stylist-try-on-controls__slider\", disabled: disabled }), _jsx(\"button\", Object.assign({ className: \"stylist-try-on-controls__range-button\", onClick: () => { var _a; return handlePositionChange('y', (((_a = activeGarment.offset) === null || _a === void 0 ? void 0 : _a.y) || 0) + 10); }, disabled: disabled || (((_j = activeGarment.offset) === null || _j === void 0 ? void 0 : _j.y) || 0) >= 200 }, { children: \"\\u2193\" }))] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__control-group\" }, { children: [_jsxs(\"label\", Object.assign({ className: \"stylist-try-on-controls__label\" }, { children: [\"Rotation\", _jsxs(\"span\", Object.assign({ className: \"stylist-try-on-controls__value\" }, { children: [activeGarment.rotation || 0, \"\\u00B0\"] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__range-with-buttons\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-try-on-controls__range-button\", onClick: () => {\n                                                        const newRotation = (activeGarment.rotation || 0) - 15;\n                                                        onGarmentUpdate(activeGarmentId, { rotation: newRotation });\n                                                    }, disabled: disabled }, { children: \"\\u21BA\" })), _jsx(\"input\", { type: \"range\", min: \"-180\", max: \"180\", step: \"1\", value: activeGarment.rotation || 0, onChange: handleRotationChange, className: \"stylist-try-on-controls__slider\", disabled: disabled }), _jsx(\"button\", Object.assign({ className: \"stylist-try-on-controls__range-button\", onClick: () => {\n                                                        const newRotation = (activeGarment.rotation || 0) + 15;\n                                                        onGarmentUpdate(activeGarmentId, { rotation: newRotation });\n                                                    }, disabled: disabled }, { children: \"\\u21BB\" }))] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__control-group stylist-try-on-controls__action-buttons\" }, { children: [_jsxs(\"button\", Object.assign({ className: `stylist-try-on-controls__action-button ${activeGarment.flipHorizontal ? 'stylist-try-on-controls__action-button--active' : ''}`, onClick: handleFlipHorizontal, disabled: disabled }, { children: [_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z\" }) })), \"Flip\"] })), _jsxs(\"button\", Object.assign({ className: \"stylist-try-on-controls__action-button\", onClick: () => {\n                                                onGarmentUpdate(activeGarmentId, {\n                                                    scale: 1,\n                                                    rotation: 0,\n                                                    offset: { x: 0, y: 0 },\n                                                    flipHorizontal: false\n                                                });\n                                            }, disabled: disabled }, { children: [_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z\" }) })), \"Reset\"] })), _jsxs(\"button\", Object.assign({ className: \"stylist-try-on-controls__action-button stylist-try-on-controls__action-button--danger\", onClick: () => {\n                                                onGarmentRemove(activeGarmentId);\n                                                onGarmentSelect(null);\n                                            }, disabled: disabled }, { children: [_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\" }) })), \"Remove\"] }))] }))] })) })))] }))), _jsxs(\"div\", Object.assign({ className: \"stylist-try-on-controls__section\" }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-try-on-controls__section-header\" }, { children: _jsx(\"h3\", Object.assign({ className: \"stylist-try-on-controls__section-title\" }, { children: \"Photo\" })) })), _jsx(\"div\", Object.assign({ className: \"stylist-try-on-controls__section-content\" }, { children: _jsxs(\"button\", Object.assign({ className: \"stylist-try-on-controls__button stylist-try-on-controls__button--full-width\", onClick: onChangePhoto, disabled: disabled }, { children: [_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M21 6h-3.17L16 4h-6v2h5.12l1.83 2H21v12H5v-9H3v9c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zM8 14c0 2.76 2.24 5 5 5s5-2.24 5-5-2.24-5-5-5-5 2.24-5 5zm5-3c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3zM5 6h3V4H5V1H3v3H0v2h3v3h2z\" }) })), \"Change Photo\"] })) }))] }))] })));\n};\nexport default TryOnControls;\n","// src/components/TryOnControls/index.ts\nimport TryOnControls from './TryOnControls';\nexport default TryOnControls;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// TryOnFeedback component for providing feedback on virtual try-on\nimport { useState } from 'react';\nimport './TryOnFeedback.scss';\nimport { useRecommendationStore } from '@/store/index';\nconst TryOnFeedback = ({ garmentId, onLike, onDislike, onAddToWishlist, onAddToCart, onSaveNote, item, primaryColor }) => {\n    const [isLiked, setIsLiked] = useState(false);\n    const [showLikeOptions, setShowLikeOptions] = useState(false);\n    const [note, setNote] = useState('');\n    const [showNoteInput, setShowNoteInput] = useState(false);\n    const [addedToWishlist, setAddedToWishlist] = useState(false);\n    const [addedToCart, setAddedToCart] = useState(false);\n    const [noteSaved, setNoteSaved] = useState(false);\n    // Access the recommendation store\n    const { addToWishlist, addToCart } = useRecommendationStore();\n    // Handle like button click\n    const handleLike = () => {\n        setIsLiked(true);\n        onLike(garmentId);\n        setShowLikeOptions(true);\n    };\n    // Handle dislike button click\n    const handleDislike = () => {\n        onDislike(garmentId);\n    };\n    // Handle add to wishlist\n    const handleAddToWishlist = () => {\n        var _a;\n        // Create a wishlist item (even if item is not provided)\n        const wishlistItem = {\n            itemId: garmentId,\n            retailerId: (item === null || item === void 0 ? void 0 : item.retailerId) || 'demo_retailer',\n            addedAt: new Date(),\n            name: (item === null || item === void 0 ? void 0 : item.name) || `Item ${garmentId.slice(0, 6)}`,\n            brand: (item === null || item === void 0 ? void 0 : item.brand) || 'Unknown brand',\n            price: (item === null || item === void 0 ? void 0 : item.price) || 0,\n            imageUrl: ((_a = item === null || item === void 0 ? void 0 : item.imageUrls) === null || _a === void 0 ? void 0 : _a[0]) || ''\n        };\n        // Add to store\n        addToWishlist(wishlistItem);\n        // Call the prop callback\n        onAddToWishlist(garmentId);\n        // Show success state\n        setAddedToWishlist(true);\n        setShowLikeOptions(false);\n        // Reset success state after a delay\n        setTimeout(() => {\n            setAddedToWishlist(false);\n        }, 2000);\n    };\n    // Handle add to cart\n    const handleAddToCart = () => {\n        var _a, _b, _c;\n        // Create a cart item (even if item is not provided)\n        const cartItem = {\n            itemId: garmentId,\n            retailerId: (item === null || item === void 0 ? void 0 : item.retailerId) || 'demo_retailer',\n            quantity: 1,\n            size: ((_a = item === null || item === void 0 ? void 0 : item.sizes) === null || _a === void 0 ? void 0 : _a[0]) || 'M',\n            color: ((_b = item === null || item === void 0 ? void 0 : item.colors) === null || _b === void 0 ? void 0 : _b[0]) || 'default',\n            addedAt: new Date(),\n            name: (item === null || item === void 0 ? void 0 : item.name) || `Item ${garmentId.slice(0, 6)}`,\n            brand: (item === null || item === void 0 ? void 0 : item.brand) || 'Unknown brand',\n            price: (item === null || item === void 0 ? void 0 : item.price) || 0,\n            imageUrl: ((_c = item === null || item === void 0 ? void 0 : item.imageUrls) === null || _c === void 0 ? void 0 : _c[0]) || ''\n        };\n        // Add to store\n        addToCart(cartItem);\n        // Call the prop callback\n        onAddToCart(garmentId);\n        // Show success state\n        setAddedToCart(true);\n        setShowLikeOptions(false);\n        // Reset success state after a delay\n        setTimeout(() => {\n            setAddedToCart(false);\n        }, 2000);\n    };\n    // Handle save note\n    const handleSaveNote = () => {\n        if (note.trim()) {\n            onSaveNote(garmentId, note);\n            // Show success state\n            setNoteSaved(true);\n            setShowNoteInput(false);\n            setShowLikeOptions(false);\n            // Reset success state after a delay\n            setTimeout(() => {\n                setNoteSaved(false);\n                setNote('');\n            }, 2000);\n        }\n    };\n    // Custom style for primary color\n    const buttonStyle = primaryColor ? { backgroundColor: primaryColor } : undefined;\n    // Render success states\n    if (addedToWishlist) {\n        return (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-feedback__success\" }, { children: [_jsx(\"span\", Object.assign({ role: \"img\", \"aria-label\": \"Added to Wishlist\" }, { children: \"\\u2764\\uFE0F\" })), \" Added to Wishlist!\"] })));\n    }\n    if (addedToCart) {\n        return (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-feedback__success\" }, { children: [_jsx(\"span\", Object.assign({ role: \"img\", \"aria-label\": \"Added to Cart\" }, { children: \"\\uD83D\\uDED2\" })), \" Added to Cart!\"] })));\n    }\n    if (noteSaved) {\n        return (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-feedback__success\" }, { children: [_jsx(\"span\", Object.assign({ role: \"img\", \"aria-label\": \"Note Saved\" }, { children: \"\\uD83D\\uDCDD\" })), \" Note Saved!\"] })));\n    }\n    return (_jsx(\"div\", Object.assign({ className: \"stylist-try-on-feedback\" }, { children: !isLiked ? (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-feedback__buttons\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-try-on-feedback__button stylist-try-on-feedback__button--like\", onClick: handleLike, style: buttonStyle }, { children: _jsx(\"span\", Object.assign({ role: \"img\", \"aria-label\": \"Like\" }, { children: \"\\uD83D\\uDC4D\" })) })), _jsx(\"button\", Object.assign({ className: \"stylist-try-on-feedback__button stylist-try-on-feedback__button--dislike\", onClick: handleDislike }, { children: _jsx(\"span\", Object.assign({ role: \"img\", \"aria-label\": \"Dislike\" }, { children: \"\\uD83D\\uDC4E\" })) }))] }))) : showLikeOptions ? (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-feedback__options\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-try-on-feedback__option-button\", onClick: handleAddToWishlist, style: buttonStyle }, { children: \"Add to Wishlist\" })), _jsx(\"button\", Object.assign({ className: \"stylist-try-on-feedback__option-button\", onClick: handleAddToCart, style: buttonStyle }, { children: \"Add to Cart\" })), _jsx(\"button\", Object.assign({ className: \"stylist-try-on-feedback__option-button\", onClick: () => setShowNoteInput(true), style: buttonStyle }, { children: \"Just Save a Note\" }))] }))) : showNoteInput ? (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-feedback__note-input\" }, { children: [_jsx(\"input\", { type: \"text\", placeholder: \"What do you like about this item?\", value: note, onChange: (e) => setNote(e.target.value), autoFocus: true }), _jsx(\"button\", Object.assign({ className: \"stylist-try-on-feedback__note-save\", onClick: handleSaveNote, style: buttonStyle }, { children: \"Save\" }))] }))) : (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-feedback__liked\" }, { children: [_jsx(\"span\", Object.assign({ role: \"img\", \"aria-label\": \"Liked\" }, { children: \"\\uD83D\\uDC96\" })), \" Liked!\"] }))) })));\n};\nexport default TryOnFeedback;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// Main virtual try-on component\nimport React, { useEffect, useState, useCallback, useRef } from 'react';\nimport './VirtualTryOn.scss';\nimport TryOnCanvas from '@/components/TryOnCanvas';\nimport TryOnControls from '@/components/TryOnControls';\nimport TryOnFeedback from '@/components/TryOnFeedback';\nimport ImageUploader from '@/components/ImageUploader';\nimport { useTryOn } from '@/hooks/useTryOn';\nimport { ProcessingStatus } from '@/types/tryOn';\nimport { preloadBodyPixModel } from '@/services/background-removal/utils';\nimport { useRecommendationStore } from '@/store/recommendationStore';\nimport AdaptiveImage from '@/components/common/AdaptiveImage';\n// Define CameraFacing enum since it might not be exported from ImageUploader\nvar CameraFacing;\n(function (CameraFacing) {\n    CameraFacing[\"FRONT\"] = \"user\";\n    CameraFacing[\"BACK\"] = \"environment\";\n})(CameraFacing || (CameraFacing = {}));\n// Try-on flow steps\nvar TryOnStep;\n(function (TryOnStep) {\n    TryOnStep[\"SELECT_IMAGE\"] = \"select_image\";\n    TryOnStep[\"SELECT_ITEM\"] = \"select_item\";\n    TryOnStep[\"PREVIEW\"] = \"preview\";\n    TryOnStep[\"CAPTURE\"] = \"capture\";\n    TryOnStep[\"REVIEW\"] = \"review\";\n    TryOnStep[\"ACTION\"] = \"action\";\n})(TryOnStep || (TryOnStep = {}));\nconst VirtualTryOn = ({ onClose, onSave, onAddToLookbook, primaryColor = '#3f51b5' }) => {\n    var _a, _b;\n    const { currentOutfit, userImage, isLoading, error, canvasRef, setCanvasRef, uploadUserImage, addGarment, removeGarment, updateGarmentProperties, clearUserImage, saveTryOnResult, closeTryOnModal } = useTryOn();\n    // Get recommendation store functions\n    const { addToWishlist, addToCart } = useRecommendationStore();\n    const [activeGarmentId, setActiveGarmentId] = useState(null);\n    const [showUploader, setShowUploader] = useState(!userImage);\n    const [savingToLookbook, setSavingToLookbook] = useState(false);\n    const [saveSuccess, setSaveSuccess] = useState(false);\n    // Track visibility to optimize model loading\n    const [isVisible, setIsVisible] = useState(false);\n    // Use a ref to ensure we only load the model once\n    const modelLoaded = React.useRef(false);\n    const [webglSupported, setWebglSupported] = useState(null);\n    // Try-on flow state\n    const [currentStep, setCurrentStep] = useState(TryOnStep.SELECT_IMAGE);\n    const [countdownTimer, setCountdownTimer] = useState(null);\n    const countdownIntervalRef = useRef(null);\n    const [captureInProgress, setCaptureInProgress] = useState(false);\n    const [reviewMode, setReviewMode] = useState(false);\n    const [capturedImage, setCapturedImage] = useState(null);\n    // Check WebGL support on mount\n    useEffect(() => {\n        // Function to check WebGL support\n        const checkWebGLSupport = () => {\n            try {\n                const canvas = document.createElement('canvas');\n                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n                if (!gl) {\n                    console.warn('WebGL not supported');\n                    setWebglSupported(false);\n                    return false;\n                }\n                // Use a more comprehensive check for compatibility\n                const isWebGLFullySupported = () => {\n                    try {\n                        // Test for required extensions\n                        const extensions = [\n                            'OES_texture_float',\n                            'WEBGL_color_buffer_float',\n                            'OES_element_index_uint'\n                        ];\n                        // Need to cast gl to WebGLRenderingContext to access getExtension method\n                        const webGLContext = gl;\n                        const supportedExtensions = extensions.filter(ext => webGLContext.getExtension(ext));\n                        // If most extensions are supported, consider it supported\n                        return supportedExtensions.length >= 2;\n                    }\n                    catch (e) {\n                        console.warn('Error testing WebGL extensions:', e);\n                        return false;\n                    }\n                };\n                // Check if WebGL is fully supported for TensorFlow.js\n                const fullySupported = isWebGLFullySupported();\n                setWebglSupported(true);\n                return fullySupported;\n            }\n            catch (e) {\n                console.warn('Error checking WebGL support:', e);\n                setWebglSupported(false);\n                return false;\n            }\n        };\n        checkWebGLSupport();\n    }, []);\n    // Create an observer to detect when the component is visible\n    useEffect(() => {\n        if (!userImage)\n            return;\n        // Set component as visible\n        setIsVisible(true);\n        // Only preload the model if it hasn't been loaded yet, the component is visible, and WebGL is supported\n        if (isVisible && !modelLoaded.current && webglSupported !== false) {\n            modelLoaded.current = true;\n            // Preload with error handling\n            preloadBodyPixModel().catch(err => {\n                console.warn('Error preloading BodyPix model:', err);\n                // No need to set an error state here as the background removal process\n                // will handle errors gracefully\n            });\n        }\n    }, [userImage, isVisible, webglSupported]);\n    // Update the current step based on state changes\n    useEffect(() => {\n        if (!userImage) {\n            setCurrentStep(TryOnStep.SELECT_IMAGE);\n            return;\n        }\n        if (userImage.processingStatus === ProcessingStatus.REMOVING_BACKGROUND) {\n            setCurrentStep(TryOnStep.SELECT_IMAGE);\n            return;\n        }\n        if (userImage.processingStatus === ProcessingStatus.COMPLETED) {\n            if (!currentOutfit || !currentOutfit.garments || currentOutfit.garments.length === 0) {\n                setCurrentStep(TryOnStep.SELECT_ITEM);\n                return;\n            }\n            if (captureInProgress) {\n                setCurrentStep(TryOnStep.CAPTURE);\n                return;\n            }\n            if (reviewMode) {\n                setCurrentStep(TryOnStep.REVIEW);\n                return;\n            }\n            if (activeGarmentId) {\n                setCurrentStep(TryOnStep.ACTION);\n                return;\n            }\n            setCurrentStep(TryOnStep.PREVIEW);\n        }\n    }, [\n        userImage,\n        currentOutfit,\n        activeGarmentId,\n        captureInProgress,\n        reviewMode\n    ]);\n    // Focus on the active garment when it changes\n    useEffect(() => {\n        if (activeGarmentId && currentOutfit) {\n            const garment = currentOutfit.garments.find(g => g.id === activeGarmentId);\n            if (garment) {\n                // Highlight the active garment in the controls\n                const garmentElement = document.getElementById(`garment-${activeGarmentId}`);\n                if (garmentElement) {\n                    garmentElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n                }\n            }\n        }\n    }, [activeGarmentId, currentOutfit]);\n    // Show uploader if no user image is available\n    useEffect(() => {\n        if (!userImage) {\n            setShowUploader(true);\n        }\n    }, [userImage]);\n    // Handle image upload\n    const handleImageUpload = (file) => __awaiter(void 0, void 0, void 0, function* () {\n        yield uploadUserImage(file);\n        setShowUploader(false);\n    });\n    // Handle garment upload\n    const handleGarmentUpload = (file, type) => __awaiter(void 0, void 0, void 0, function* () {\n        yield addGarment(file, type);\n    });\n    // Start capture countdown\n    const startCaptureCountdown = useCallback(() => {\n        // Clear any existing countdown\n        if (countdownIntervalRef.current) {\n            window.clearInterval(countdownIntervalRef.current);\n        }\n        setCaptureInProgress(true);\n        setCountdownTimer(5); // 5 second countdown\n        countdownIntervalRef.current = window.setInterval(() => {\n            setCountdownTimer(prev => {\n                if (prev === null || prev <= 1) {\n                    // Time to capture when countdown reaches 0\n                    if (countdownIntervalRef.current) {\n                        window.clearInterval(countdownIntervalRef.current);\n                        countdownIntervalRef.current = null;\n                    }\n                    // Take the photo\n                    captureCurrentImage();\n                    return null;\n                }\n                return prev - 1;\n            });\n        }, 1000);\n    }, []);\n    // Cancel countdown\n    const cancelCountdown = useCallback(() => {\n        if (countdownIntervalRef.current) {\n            window.clearInterval(countdownIntervalRef.current);\n            countdownIntervalRef.current = null;\n            setCountdownTimer(null);\n            setCaptureInProgress(false);\n        }\n    }, []);\n    // Capture current canvas state\n    const captureCurrentImage = useCallback(() => {\n        if (!canvasRef)\n            return;\n        try {\n            // Get image data URL from canvas\n            const imageUrl = canvasRef.toDataURL('image/jpeg');\n            setCapturedImage(imageUrl);\n            setReviewMode(true);\n            setCaptureInProgress(false);\n        }\n        catch (err) {\n            console.error('Error capturing image:', err);\n            setCaptureInProgress(false);\n        }\n    }, [canvasRef]);\n    // Handle save to lookbook\n    const handleSaveToLookbook = () => __awaiter(void 0, void 0, void 0, function* () {\n        var _c;\n        if (!canvasRef || !currentOutfit)\n            return;\n        try {\n            setSavingToLookbook(true);\n            const result = yield saveTryOnResult();\n            if (result) {\n                // Call onSave if provided\n                if (onSave) {\n                    onSave(result.resultImageUrl);\n                }\n                if (onAddToLookbook) {\n                    // Convert try-on result to saved outfit format\n                    const savedOutfit = {\n                        userId: 'current_user',\n                        outfitId: result.id,\n                        id: result.id,\n                        name: `Try-On Result ${new Date().toLocaleDateString()}`,\n                        items: ((_c = currentOutfit === null || currentOutfit === void 0 ? void 0 : currentOutfit.garments) === null || _c === void 0 ? void 0 : _c.map(g => g.id)) || [],\n                        savedAt: new Date(),\n                        imageUrl: result.resultImageUrl || '',\n                        createdAt: new Date()\n                    };\n                    onAddToLookbook(savedOutfit);\n                }\n                setSaveSuccess(true);\n                // Close modal after successful save with a delay\n                setTimeout(() => {\n                    if (onClose) {\n                        onClose();\n                    }\n                    else {\n                        closeTryOnModal();\n                    }\n                }, 1500);\n            }\n        }\n        catch (err) {\n            console.error('Error saving to lookbook:', err);\n        }\n        finally {\n            setSavingToLookbook(false);\n        }\n    });\n    // Handle close\n    const handleClose = () => {\n        if (onClose) {\n            onClose();\n        }\n        else {\n            closeTryOnModal();\n        }\n    };\n    // Reset function to start over\n    const handleReset = () => {\n        clearUserImage();\n        setShowUploader(true);\n        setActiveGarmentId(null);\n        setSaveSuccess(false);\n        setReviewMode(false);\n        setCapturedImage(null);\n        // Clear any countdown timer\n        if (countdownIntervalRef.current) {\n            window.clearInterval(countdownIntervalRef.current);\n            countdownIntervalRef.current = null;\n            setCountdownTimer(null);\n        }\n        setCaptureInProgress(false);\n    };\n    // Convert garment to wishlist item\n    const handleAddToWishlist = (garmentId) => {\n        if (!currentOutfit || !currentOutfit.garments)\n            return;\n        const garment = currentOutfit.garments.find(g => g.id === garmentId);\n        if (!garment)\n            return;\n        // Create a wishlist item from garment\n        const wishlistItem = {\n            itemId: garment.id,\n            retailerId: 'default_retailer_id',\n            name: garment.type || 'Garment',\n            addedAt: new Date(),\n            imageUrl: garment.url || '',\n            price: 0 // Mock price, would come from product data\n        };\n        // Add to wishlist\n        addToWishlist(wishlistItem);\n        alert('Item added to wishlist!');\n    };\n    // Convert garment to cart item\n    const handleAddToCart = (garmentId) => {\n        if (!currentOutfit || !currentOutfit.garments)\n            return;\n        const garment = currentOutfit.garments.find(g => g.id === garmentId);\n        if (!garment)\n            return;\n        // Create a cart item from garment\n        const cartItem = {\n            itemId: garment.id,\n            retailerId: 'default_retailer_id',\n            name: garment.type || 'Garment',\n            price: 0,\n            quantity: 1,\n            imageUrl: garment.url || '',\n            addedAt: new Date() // Add required addedAt field\n        };\n        // Add to cart\n        addToCart(cartItem);\n        alert('Item added to cart!');\n    };\n    // Discard current review and return to preview\n    const handleDiscardReview = () => {\n        setReviewMode(false);\n        setCapturedImage(null);\n    };\n    // Render step indicator\n    const renderStepIndicator = () => {\n        const steps = [\n            { id: TryOnStep.SELECT_IMAGE, name: 'Choose Photo' },\n            { id: TryOnStep.SELECT_ITEM, name: 'Select Item' },\n            { id: TryOnStep.PREVIEW, name: 'Preview' },\n            { id: TryOnStep.REVIEW, name: 'Review' },\n            { id: TryOnStep.ACTION, name: 'Complete' }\n        ];\n        return (_jsx(\"div\", Object.assign({ className: \"stylist-virtual-try-on__steps\" }, { children: steps.map((step, index) => (_jsxs(\"div\", Object.assign({ className: `stylist-virtual-try-on__step ${currentStep === step.id ? 'stylist-virtual-try-on__step--active' : ''} ${\n                // Determine completed steps\n                (currentStep === TryOnStep.SELECT_ITEM && index === 0) ||\n                    (currentStep === TryOnStep.PREVIEW && index < 2) ||\n                    (currentStep === TryOnStep.CAPTURE && index < 2) ||\n                    (currentStep === TryOnStep.REVIEW && index < 3) ||\n                    (currentStep === TryOnStep.ACTION && index < 4)\n                    ? 'stylist-virtual-try-on__step--completed'\n                    : ''}` }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-virtual-try-on__step-number\" }, { children: index + 1 })), _jsx(\"div\", Object.assign({ className: \"stylist-virtual-try-on__step-name\" }, { children: step.name }))] }), step.id))) })));\n    };\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on__header\", style: { backgroundColor: primaryColor } }, { children: [_jsx(\"h2\", Object.assign({ className: \"stylist-virtual-try-on__title\" }, { children: \"Virtual Try-On\" })), _jsx(\"button\", Object.assign({ className: \"stylist-virtual-try-on__close-btn\", onClick: handleClose, \"aria-label\": \"Close\" }, { children: _jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"24\", height: \"24\" }, { children: _jsx(\"path\", { d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" }) })) }))] })), renderStepIndicator(), _jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on__content\" }, { children: [showUploader ? (_jsx(ImageUploader, { onUpload: handleImageUpload, title: \"Upload or Take a Photo\", description: \"Upload a photo or use your webcam to try on clothes\", countdownDuration: 5 })) : (_jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on__canvas-container\" }, { children: [reviewMode && capturedImage ? (_jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on__review\" }, { children: [_jsx(AdaptiveImage, { src: capturedImage || '', alt: \"Try-on preview\", className: \"stylist-virtual-try-on__review-image\", loadingPriority: \"high\", quality: \"high\" }), _jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on__review-actions\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-virtual-try-on__review-action stylist-virtual-try-on__review-action--discard\", onClick: handleDiscardReview }, { children: \"Discard\" })), _jsx(\"button\", Object.assign({ className: \"stylist-virtual-try-on__review-action stylist-virtual-try-on__review-action--save\", onClick: handleSaveToLookbook, style: { backgroundColor: primaryColor } }, { children: \"Save to Lookbook\" }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on__review-feedback\" }, { children: [_jsx(\"p\", { children: \"How does it look?\" }), _jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on__review-feedback-buttons\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-virtual-try-on__review-feedback-button\" }, { children: \"\\uD83D\\uDC4D Love it!\" })), _jsx(\"button\", Object.assign({ className: \"stylist-virtual-try-on__review-feedback-button\" }, { children: \"\\uD83D\\uDC4E Not for me\" }))] }))] }))] }))) : (\n                            // Regular try-on canvas\n                            _jsx(TryOnCanvas, { outfit: currentOutfit, userImage: userImage, setCanvasRef: setCanvasRef, onGarmentSelect: setActiveGarmentId, showBodyGuide: !userImage })), captureInProgress && countdownTimer !== null && (_jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on__countdown\" }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-virtual-try-on__countdown-number\" }, { children: countdownTimer })), _jsx(\"button\", Object.assign({ className: \"stylist-virtual-try-on__countdown-cancel\", onClick: cancelCountdown }, { children: \"Cancel\" }))] }))), (userImage === null || userImage === void 0 ? void 0 : userImage.processingStatus) === ProcessingStatus.REMOVING_BACKGROUND && (_jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on__processing\" }, { children: [_jsx(\"div\", { className: \"stylist-virtual-try-on__spinner\" }), _jsx(\"p\", { children: \"Removing background...\" })] }))), webglSupported === false && userImage && (_jsx(\"div\", Object.assign({ className: \"stylist-virtual-try-on__warning\" }, { children: _jsxs(\"p\", { children: [_jsx(\"strong\", { children: \"Note:\" }), \" 3D graphics acceleration (WebGL) may not be fully supported in your browser. Background removal might use the original image.\"] }) }))), error && (_jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on__error\" }, { children: [_jsx(\"p\", { children: error }), _jsx(\"button\", Object.assign({ className: \"stylist-virtual-try-on__retry-btn\", onClick: handleReset }, { children: \"Try Again\" }))] }))), !reviewMode && currentStep === TryOnStep.ACTION &&\n                                (userImage === null || userImage === void 0 ? void 0 : userImage.processingStatus) === ProcessingStatus.COMPLETED &&\n                                (currentOutfit === null || currentOutfit === void 0 ? void 0 : currentOutfit.garments) && currentOutfit.garments.length > 0 &&\n                                activeGarmentId && (_jsx(TryOnFeedback, { garmentId: activeGarmentId, onLike: (garmentId) => {\n                                    var _a;\n                                    // Find the garment in the outfit\n                                    const garment = (_a = currentOutfit === null || currentOutfit === void 0 ? void 0 : currentOutfit.garments) === null || _a === void 0 ? void 0 : _a.find(g => g.id === garmentId);\n                                    if (garment) {\n                                        // Log a positive feedback to AI model\n                                        console.log('Liked garment:', garmentId);\n                                        alert('Thanks for your feedback!');\n                                    }\n                                }, onDislike: (garmentId) => {\n                                    var _a;\n                                    // Find the garment in the outfit\n                                    const garment = (_a = currentOutfit === null || currentOutfit === void 0 ? void 0 : currentOutfit.garments) === null || _a === void 0 ? void 0 : _a.find(g => g.id === garmentId);\n                                    if (garment) {\n                                        // Remove from try-on queue\n                                        removeGarment(garmentId);\n                                        // Log a negative feedback to AI model\n                                        console.log('Disliked garment:', garmentId);\n                                        alert('Item removed. We\\'ll note your preference.');\n                                    }\n                                }, onAddToWishlist: handleAddToWishlist, onAddToCart: handleAddToCart, onSaveNote: (garmentId, note) => {\n                                    // Add note to garment for AI learning\n                                    console.log('Save note for garment:', garmentId, note);\n                                    alert('Note saved! We\\'ll use this feedback to improve recommendations.');\n                                }, primaryColor: primaryColor })), !reviewMode && currentStep === TryOnStep.PREVIEW &&\n                                (userImage === null || userImage === void 0 ? void 0 : userImage.processingStatus) === ProcessingStatus.COMPLETED &&\n                                (currentOutfit === null || currentOutfit === void 0 ? void 0 : currentOutfit.garments) && currentOutfit.garments.length > 0 && (_jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on__capture-prompt\" }, { children: [_jsx(\"p\", { children: \"Like how it looks? Take a photo!\" }), _jsx(\"button\", Object.assign({ className: \"stylist-virtual-try-on__capture-button\", onClick: startCaptureCountdown, style: { backgroundColor: primaryColor } }, { children: \"Capture Now\" }))] })))] }))), !showUploader && userImage && !reviewMode && (_jsx(TryOnControls, { outfit: currentOutfit, activeGarmentId: activeGarmentId, onGarmentSelect: setActiveGarmentId, onGarmentRemove: removeGarment, onGarmentUpdate: updateGarmentProperties, onGarmentAdd: handleGarmentUpload, onChangePhoto: handleReset, disabled: isLoading || captureInProgress }))] })), saveSuccess && (_jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on__success\" }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-virtual-try-on__success-icon\" }, { children: _jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"24\", height: \"24\" }, { children: _jsx(\"path\", { d: \"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\" }) })) })), _jsx(\"p\", Object.assign({ className: \"stylist-virtual-try-on__success-message\" }, { children: \"Saved to your Lookbook!\" }))] }))), _jsxs(\"div\", Object.assign({ className: \"stylist-virtual-try-on__footer\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-virtual-try-on__secondary-btn\", onClick: handleClose }, { children: \"Close\" })), !reviewMode && !captureInProgress && currentStep === TryOnStep.PREVIEW && (_jsx(\"button\", Object.assign({ className: \"stylist-virtual-try-on__primary-btn\", onClick: handleSaveToLookbook, disabled: isLoading ||\n                            !userImage ||\n                            userImage.processingStatus !== ProcessingStatus.COMPLETED ||\n                            !((_a = currentOutfit === null || currentOutfit === void 0 ? void 0 : currentOutfit.garments) === null || _a === void 0 ? void 0 : _a.length) ||\n                            savingToLookbook ||\n                            saveSuccess, style: { backgroundColor: primaryColor } }, { children: savingToLookbook ? 'Saving...' : (saveSuccess ? 'Saved!' : 'Save to Lookbook') }))), !reviewMode && !captureInProgress && currentStep === TryOnStep.PREVIEW && (_jsx(\"button\", Object.assign({ className: \"stylist-virtual-try-on__primary-btn\", onClick: startCaptureCountdown, disabled: isLoading ||\n                            !userImage ||\n                            userImage.processingStatus !== ProcessingStatus.COMPLETED ||\n                            !((_b = currentOutfit === null || currentOutfit === void 0 ? void 0 : currentOutfit.garments) === null || _b === void 0 ? void 0 : _b.length), style: { backgroundColor: primaryColor } }, { children: \"Take Photo\" })))] }))] })));\n};\nexport default VirtualTryOn;\n","import VirtualTryOn from './VirtualTryOn';\nexport default VirtualTryOn;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// WishlistNotification component for showing alerts about wishlisted items\nimport { useState, useEffect } from 'react';\nimport { useRecommendationStore } from '@/store/index';\nimport './WishlistNotification.scss';\nconst WishlistNotification = ({ onClickNotification }) => {\n    const { wishlistItems } = useRecommendationStore();\n    const [notifications, setNotifications] = useState([]);\n    const [isOpen, setIsOpen] = useState(false);\n    const [hasUnread, setHasUnread] = useState(false);\n    // Check for notifications on component mount and when wishlist changes\n    useEffect(() => {\n        // In a real application, you would fetch this data from an API\n        // For this demo, we'll generate random notifications for wishlisted items\n        // Clear existing timer if component is unmounted\n        const timerId = setTimeout(() => {\n            if (wishlistItems.length > 0) {\n                // Simulate getting notifications for random wishlist items\n                const randomItem = wishlistItems[Math.floor(Math.random() * wishlistItems.length)];\n                if (randomItem) {\n                    // Create a notification for the item\n                    const newNotification = {\n                        id: `notification_${Date.now()}`,\n                        itemId: randomItem.itemId,\n                        itemName: randomItem.name || `Product ${randomItem.itemId.slice(0, 6)}`,\n                        type: Math.random() > 0.5 ? 'sale' : 'low_stock',\n                        date: new Date(),\n                        read: false\n                    };\n                    // Add the notification to the list\n                    setNotifications(prev => [...prev, newNotification]);\n                    setHasUnread(true);\n                }\n            }\n        }, 5000); // Show notification after 5 seconds\n        return () => clearTimeout(timerId);\n    }, [wishlistItems]);\n    // Toggle notification panel\n    const toggleNotificationPanel = () => {\n        setIsOpen(!isOpen);\n        // Mark all as read when opening\n        if (!isOpen) {\n            setNotifications(prev => prev.map(notif => (Object.assign(Object.assign({}, notif), { read: true }))));\n            setHasUnread(false);\n        }\n    };\n    // Handle clicking a notification\n    const handleNotificationClick = () => {\n        if (onClickNotification) {\n            onClickNotification();\n        }\n        setIsOpen(false);\n    };\n    // Clear all notifications\n    const clearAllNotifications = () => {\n        setNotifications([]);\n        setHasUnread(false);\n        setIsOpen(false);\n    };\n    // If no notifications, don't render anything\n    if (notifications.length === 0) {\n        return null;\n    }\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-wishlist-notification\" }, { children: [_jsxs(\"button\", Object.assign({ className: `stylist-wishlist-notification__bell ${hasUnread ? 'has-unread' : ''}`, onClick: toggleNotificationPanel, \"aria-label\": \"Notifications\" }, { children: [_jsx(\"span\", Object.assign({ className: \"stylist-wishlist-notification__icon\" }, { children: \"\\uD83D\\uDD14\" })), hasUnread && (_jsx(\"span\", { className: \"stylist-wishlist-notification__badge\" }))] })), isOpen && (_jsxs(\"div\", Object.assign({ className: \"stylist-wishlist-notification__panel\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-wishlist-notification__header\" }, { children: [_jsx(\"h3\", Object.assign({ className: \"stylist-wishlist-notification__title\" }, { children: \"Notifications\" })), _jsx(\"button\", Object.assign({ className: \"stylist-wishlist-notification__close\", onClick: () => setIsOpen(false), \"aria-label\": \"Close notifications\" }, { children: \"\\u00D7\" }))] })), _jsx(\"div\", Object.assign({ className: \"stylist-wishlist-notification__list\" }, { children: notifications.length === 0 ? (_jsx(\"div\", Object.assign({ className: \"stylist-wishlist-notification__empty\" }, { children: \"No notifications\" }))) : (notifications.map(notification => (_jsx(\"div\", Object.assign({ className: `stylist-wishlist-notification__item ${notification.read ? 'read' : 'unread'}`, onClick: handleNotificationClick }, { children: _jsxs(\"div\", Object.assign({ className: \"stylist-wishlist-notification__content\" }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-wishlist-notification__item-icon\" }, { children: notification.type === 'sale' ? '' : '' })), _jsxs(\"div\", Object.assign({ className: \"stylist-wishlist-notification__item-text\" }, { children: [_jsx(\"p\", Object.assign({ className: \"stylist-wishlist-notification__item-message\" }, { children: notification.type === 'sale'\n                                                    ? `${notification.itemName} is now on sale!`\n                                                    : `${notification.itemName} is running low in stock!` })), _jsx(\"span\", Object.assign({ className: \"stylist-wishlist-notification__item-time\" }, { children: new Date(notification.date).toLocaleTimeString([], {\n                                                    hour: '2-digit',\n                                                    minute: '2-digit'\n                                                }) }))] }))] })) }), notification.id)))) })), notifications.length > 0 && (_jsx(\"div\", Object.assign({ className: \"stylist-wishlist-notification__footer\" }, { children: _jsx(\"button\", Object.assign({ className: \"stylist-wishlist-notification__clear\", onClick: clearAllNotifications }, { children: \"Clear all\" })) })))] })))] })));\n};\nexport default WishlistNotification;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport { setMockDataMode } from '../../mock-data';\nimport { FORCE_DEMO_MODE } from '../../utils/environment';\nimport './MockDataToggle.scss';\n/**\n * A toggle switch component to enable/disable mock data mode\n * Only visible in development mode or when forced demo mode is enabled\n */\nconst MockDataToggle = () => {\n    // Initialize state based on localStorage\n    const [isMockEnabled, setIsMockEnabled] = useState(() => {\n        try {\n            return localStorage.getItem('STYLIST_DATA_MODE') === 'demo';\n        }\n        catch (e) {\n            return false;\n        }\n    });\n    // Update state when localStorage changes (for sync across tabs)\n    useEffect(() => {\n        const handleStorageChange = (e) => {\n            if (e.key === 'STYLIST_DATA_MODE') {\n                setIsMockEnabled(e.newValue === 'demo');\n            }\n        };\n        window.addEventListener('storage', handleStorageChange);\n        return () => window.removeEventListener('storage', handleStorageChange);\n    }, []);\n    // Toggle the mock data mode\n    const toggleMockData = () => {\n        const newValue = !isMockEnabled;\n        setIsMockEnabled(newValue);\n        setMockDataMode(newValue);\n    };\n    // Only show in development or when forced demo mode is enabled\n    if (process.env.NODE_ENV !== 'development' && !FORCE_DEMO_MODE) {\n        return null;\n    }\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-mock-data-toggle\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"toggle-container\" }, { children: [_jsx(\"span\", Object.assign({ className: \"toggle-label\" }, { children: \"Mock Data\" })), _jsxs(\"label\", Object.assign({ className: \"toggle-switch\" }, { children: [_jsx(\"input\", { type: \"checkbox\", checked: isMockEnabled, onChange: toggleMockData, \"aria-label\": \"Toggle mock data\" }), _jsx(\"span\", { className: \"toggle-slider\" })] })), _jsx(\"div\", Object.assign({ className: `toggle-status ${isMockEnabled ? 'enabled' : 'disabled'}` }, { children: isMockEnabled ? 'Enabled' : 'Disabled' }))] })), isMockEnabled && (_jsx(\"div\", Object.assign({ className: \"mock-data-message\" }, { children: \"Using mock data for API requests\" })))] })));\n};\nexport default MockDataToggle;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// Modal component for virtual try-on\nimport React, { useEffect } from 'react';\nimport './TryOnModal.scss';\nimport VirtualTryOn from '@/components/VirtualTryOn';\nimport { useTryOnStore } from '@/store/tryOnStore';\nconst TryOnModal = ({ onClose, onSave }) => {\n    const isTryOnModalOpen = useTryOnStore((state) => state.isTryOnModalOpen);\n    const closeTryOnModal = useTryOnStore((state) => state.closeTryOnModal);\n    // Handle closing - using useCallback to avoid dependency issues\n    const handleClose = React.useCallback(() => {\n        if (onClose) {\n            onClose();\n        }\n        else {\n            closeTryOnModal();\n        }\n    }, [onClose, closeTryOnModal]);\n    // Handle escape key\n    useEffect(() => {\n        const handleEscapeKey = (e) => {\n            if (e.key === 'Escape' && isTryOnModalOpen) {\n                handleClose();\n            }\n        };\n        document.addEventListener('keydown', handleEscapeKey);\n        return () => {\n            document.removeEventListener('keydown', handleEscapeKey);\n        };\n    }, [isTryOnModalOpen, handleClose]);\n    // Prevent body scrolling when modal is open\n    useEffect(() => {\n        if (isTryOnModalOpen) {\n            document.body.style.overflow = 'hidden';\n        }\n        else {\n            document.body.style.overflow = '';\n        }\n        return () => {\n            document.body.style.overflow = '';\n        };\n    }, [isTryOnModalOpen]);\n    if (!isTryOnModalOpen) {\n        return null;\n    }\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-try-on-modal\" }, { children: [_jsx(\"div\", { className: \"stylist-try-on-modal__overlay\", onClick: handleClose }), _jsx(\"div\", Object.assign({ className: \"stylist-try-on-modal__container\" }, { children: _jsx(VirtualTryOn, { onClose: handleClose, onSave: onSave }) }))] })));\n};\nexport default TryOnModal;\n","// src/components/TryOnModal/index.ts\nimport TryOnModal from './TryOnModal';\nexport default TryOnModal;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useSyncContext } from '../../services/SyncProvider';\nimport './SyncStatusIndicator.scss';\nexport const SyncStatusIndicator = () => {\n    const { syncState, isOnline, isSlowConnection } = useSyncContext();\n    // Don't show anything if there are no pending operations\n    if (syncState.pendingOperations === 0 && !syncState.isSyncing) {\n        return null;\n    }\n    // Determine the indicator state\n    let status = 'syncing';\n    let message = 'Syncing...';\n    if (!isOnline) {\n        status = 'offline';\n        message = `${syncState.pendingOperations} change${syncState.pendingOperations !== 1 ? 's' : ''} pending`;\n    }\n    else if (syncState.isSyncing) {\n        status = 'syncing';\n        message = 'Syncing...';\n    }\n    else if (syncState.pendingOperations > 0) {\n        status = 'pending';\n        message = `${syncState.pendingOperations} change${syncState.pendingOperations !== 1 ? 's' : ''} pending`;\n    }\n    return (_jsxs(\"div\", Object.assign({ className: `sync-status-indicator sync-status-${status}` }, { children: [_jsxs(\"div\", Object.assign({ className: \"sync-status-icon\" }, { children: [status === 'syncing' && (_jsx(\"svg\", Object.assign({ className: \"sync-spinner\", viewBox: \"0 0 24 24\" }, { children: _jsx(\"circle\", { className: \"sync-spinner-path\", cx: \"12\", cy: \"12\", r: \"10\", fill: \"none\", stroke: \"currentColor\", strokeWidth: \"4\" }) }))), status === 'pending' && _jsx(\"span\", { children: \"\\u23F1\\uFE0F\" }), status === 'offline' && _jsx(\"span\", { children: \"\\uD83D\\uDCF4\" })] })), _jsx(\"span\", Object.assign({ className: \"sync-status-message\" }, { children: message }))] })));\n};\nexport default SyncStatusIndicator;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState, useEffect, useRef, memo } from 'react';\nimport { performanceMonitor } from '../../../utils/performanceMonitoring';\nimport './AdaptiveImage.scss';\nconst DEFAULT_BLUR_PLACEHOLDER = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxIDEiIHdpZHRoPSIxIiBoZWlnaHQ9IjEiPjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiNlZWVlZWUiLz48L3N2Zz4=';\nconst getQualityModifiedUrl = (originalUrl, quality) => {\n    // If the URL already includes quality parameters, avoid adding duplicates\n    if (originalUrl.includes('quality=') || originalUrl.includes('q=')) {\n        return originalUrl;\n    }\n    const url = new URL(originalUrl, window.location.origin);\n    // If URL is to a third-party service that supports image optimization\n    if (url.hostname.includes('cloudinary.com')) {\n        // Example: Add Cloudinary quality parameters\n        if (quality === 'low') {\n            url.pathname = url.pathname.replace('/upload/', '/upload/q_auto:low/');\n        }\n        else if (quality === 'medium') {\n            url.pathname = url.pathname.replace('/upload/', '/upload/q_auto:good/');\n        }\n        // For high quality, no modification needed\n        return url.toString();\n    }\n    else if (url.hostname.includes('imgix.net')) {\n        // Example: Add Imgix quality parameters\n        const qualityMap = { high: 90, medium: 75, low: 60 };\n        url.searchParams.set('q', qualityMap[quality].toString());\n        return url.toString();\n    }\n    // For local images or unsupported services, return original URL\n    return originalUrl;\n};\nconst AdaptiveImage = ({ src, alt, className = '', width, height, placeholderSrc = DEFAULT_BLUR_PLACEHOLDER, loadingPriority = 'medium', quality: requestedQuality = 'high', onLoad, onError, style, }) => {\n    const [loaded, setLoaded] = useState(false);\n    const [error, setError] = useState(false);\n    const imgRef = useRef(null);\n    const startTimeRef = useRef(0);\n    // Determine actual quality based on device capabilities and requested quality\n    const actualQuality = requestedQuality; // Use requested quality directly for now\n    // Get appropriate image source based on quality\n    const optimizedSrc = getQualityModifiedUrl(src, actualQuality);\n    // Determine loading strategy based on priority\n    const shouldLazyLoad = loadingPriority === 'low' || loadingPriority === 'medium';\n    useEffect(() => {\n        // Reset states when src changes\n        setLoaded(false);\n        setError(false);\n        // Track start time for performance monitoring\n        startTimeRef.current = performance.now();\n        // For high priority images, preload the image\n        if (loadingPriority === 'high') {\n            const preloadLink = document.createElement('link');\n            preloadLink.rel = 'preload';\n            preloadLink.as = 'image';\n            preloadLink.href = optimizedSrc;\n            document.head.appendChild(preloadLink);\n            return () => {\n                document.head.removeChild(preloadLink);\n            };\n        }\n    }, [optimizedSrc, loadingPriority]);\n    const handleLoad = () => {\n        const loadTime = performance.now() - startTimeRef.current;\n        try {\n            // Use a safer way to track image loading\n            if (performanceMonitor && typeof performanceMonitor.recordComponentRender === 'function') {\n                // Use the component render method as a fallback\n                performanceMonitor.recordComponentRender('AdaptiveImage_Load', loadTime);\n            }\n        }\n        catch (err) {\n            console.log('Performance monitoring error:', err);\n        }\n        setLoaded(true);\n        if (onLoad)\n            onLoad();\n    };\n    const handleError = () => {\n        try {\n            // Use a safer way to track image errors\n            if (performanceMonitor && typeof performanceMonitor.recordComponentRender === 'function') {\n                // Use the component render method as a fallback\n                performanceMonitor.recordComponentRender('AdaptiveImage_Error', 0);\n            }\n        }\n        catch (err) {\n            console.log('Performance monitoring error:', err);\n        }\n        setError(true);\n        if (onError)\n            onError();\n    };\n    // Apply loading strategy\n    const loadingAttr = shouldLazyLoad ? 'lazy' : 'eager';\n    // Calculate aspect ratio to prevent layout shifts\n    const hasExplicitDimensions = width && height;\n    const aspectRatio = hasExplicitDimensions ? `${width}/${height}` : undefined;\n    return (_jsxs(\"div\", Object.assign({ className: `adaptive-image ${loaded ? 'loaded' : ''} ${error ? 'error' : ''} ${className}`, style: Object.assign({ width: width || '100%', height: height || '100%', aspectRatio }, style) }, { children: [!loaded && !error && (_jsx(\"div\", { className: \"adaptive-image__placeholder\", style: {\n                    backgroundImage: `url(${placeholderSrc})`,\n                    width: '100%',\n                    height: '100%'\n                } })), _jsx(\"img\", { ref: imgRef, src: error ? placeholderSrc : optimizedSrc, alt: alt, loading: loadingAttr, onLoad: handleLoad, onError: handleError, className: `adaptive-image__img ${loaded ? 'visible' : ''}`, style: { opacity: loaded ? 1 : 0 } })] })));\n};\nexport default memo(AdaptiveImage);\n","import AdaptiveImage from './AdaptiveImage';\nexport default AdaptiveImage;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// src/components/common/OfflineIndicator.tsx\nimport { useState } from 'react';\nimport './OfflineIndicator.scss';\nimport useOfflineMode from '../../hooks/useOfflineMode';\nimport { processPendingRequests } from '../../services/offlineService';\n/**\n * OfflineIndicator Component\n *\n * Displays the current network and offline mode status, with controls\n * to toggle offline mode and sync data when reconnected.\n */\nconst OfflineIndicator = ({ hasOfflineData = false, position = 'top', showControls = true }) => {\n    const { isOnline, isOfflineMode, setOfflineMode } = useOfflineMode(hasOfflineData);\n    const [isExpanded, setIsExpanded] = useState(false);\n    const [isSyncing, setIsSyncing] = useState(false);\n    // Determine the status text and style\n    const isOffline = !isOnline || isOfflineMode;\n    const statusText = isOffline\n        ? isOfflineMode\n            ? 'Offline Mode'\n            : 'You are offline'\n        : 'Online';\n    // Handle manual sync\n    const handleSync = () => __awaiter(void 0, void 0, void 0, function* () {\n        if (!isOnline)\n            return;\n        setIsSyncing(true);\n        try {\n            yield processPendingRequests();\n        }\n        catch (error) {\n            console.error('Failed to sync data:', error);\n        }\n        finally {\n            setIsSyncing(false);\n        }\n    });\n    // Toggle offline mode\n    const toggleOfflineMode = () => {\n        setOfflineMode(!isOfflineMode);\n    };\n    // Position class\n    const positionClass = `stylist-offline-indicator--${position}`;\n    return (_jsxs(\"div\", Object.assign({ className: `stylist-offline-indicator ${positionClass} ${isOffline ? 'stylist-offline-indicator--offline' : ''}` }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-offline-indicator__status\", onClick: () => setIsExpanded(!isExpanded) }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-offline-indicator__status-icon\" }, { children: isOffline ? (_jsx(\"svg\", Object.assign({ viewBox: \"0 0 24 24\", width: \"16\", height: \"16\" }, { children: _jsx(\"path\", { fill: \"currentColor\", d: \"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95A5.469 5.469 0 0 1 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11A2.98 2.98 0 0 1 22 15c0 1.65-1.35 3-3 3zm-9-3.82l-2.09-2.09L6.5 13.5 10 17l6.01-6.01-1.41-1.41-4.6 4.6z\" }) }))) : (_jsx(\"svg\", Object.assign({ viewBox: \"0 0 24 24\", width: \"16\", height: \"16\" }, { children: _jsx(\"path\", { fill: \"currentColor\", d: \"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95A5.469 5.469 0 0 1 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11A2.98 2.98 0 0 1 22 15c0 1.65-1.35 3-3 3z\" }) }))) })), _jsx(\"span\", Object.assign({ className: \"stylist-offline-indicator__status-text\" }, { children: statusText })), isExpanded ? (_jsx(\"svg\", Object.assign({ viewBox: \"0 0 24 24\", width: \"16\", height: \"16\" }, { children: _jsx(\"path\", { fill: \"currentColor\", d: \"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z\" }) }))) : (_jsx(\"svg\", Object.assign({ viewBox: \"0 0 24 24\", width: \"16\", height: \"16\" }, { children: _jsx(\"path\", { fill: \"currentColor\", d: \"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z\" }) })))] })), isExpanded && showControls && (_jsxs(\"div\", Object.assign({ className: \"stylist-offline-indicator__controls\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-offline-indicator__toggle\" }, { children: [_jsx(\"span\", { children: \"Offline Mode\" }), _jsxs(\"label\", Object.assign({ className: \"stylist-offline-indicator__toggle-switch\" }, { children: [_jsx(\"input\", { type: \"checkbox\", checked: isOfflineMode, onChange: toggleOfflineMode, disabled: !isOnline }), _jsx(\"span\", { className: \"stylist-offline-indicator__toggle-slider\" })] }))] })), isOffline && hasOfflineData && (_jsxs(\"div\", Object.assign({ className: \"stylist-offline-indicator__info\" }, { children: [_jsx(\"svg\", Object.assign({ viewBox: \"0 0 24 24\", width: \"16\", height: \"16\" }, { children: _jsx(\"path\", { fill: \"currentColor\", d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\" }) })), _jsx(\"span\", { children: \"Showing cached data\" })] }))), isOnline && (_jsxs(\"button\", Object.assign({ className: \"stylist-offline-indicator__sync-btn\", onClick: handleSync, disabled: isSyncing }, { children: [isSyncing ? 'Syncing...' : 'Sync Now', _jsx(\"svg\", Object.assign({ viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", className: isSyncing ? 'rotating' : '' }, { children: _jsx(\"path\", { fill: \"currentColor\", d: \"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\" }) }))] })))] })))] })));\n};\nexport default OfflineIndicator;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, useMemo, useState } from 'react';\nimport { getAnimationComplexity } from '../../../utils/animationUtils';\nimport './TransitionSmoother.scss';\n/**\n * TransitionSmoother - A component that provides smooth transitions with adaptive complexity\n * based on device capabilities.\n *\n * This component optimizes performance by:\n * 1. Adjusting animation complexity based on device capabilities\n * 2. Using CSS transitions instead of JS animations where possible\n * 3. Debouncing rapid transitions to prevent jank\n */\nconst TransitionSmoother = ({ children, show, type = 'fade', duration = 300, className = '', onEnter, onExit }) => {\n    const [isVisible, setIsVisible] = useState(show);\n    const [isAnimating, setIsAnimating] = useState(false);\n    // Get the appropriate animation complexity level\n    const animationClass = useMemo(() => {\n        return getAnimationComplexity({\n            high: 'animation--high',\n            medium: 'animation--medium',\n            low: 'animation--low',\n            none: 'animation--none'\n        });\n    }, []);\n    // Calculate the actual duration based on device capabilities\n    const actualDuration = useMemo(() => {\n        if (animationClass === 'animation--none') {\n            // No animation for very low-end devices\n            return 0;\n        }\n        else if (animationClass === 'animation--low') {\n            // Shorter duration for low-end devices\n            return Math.round(duration * 0.7);\n        }\n        else if (animationClass === 'animation--medium') {\n            // Slightly shorter duration for medium devices\n            return Math.round(duration * 0.85);\n        }\n        return duration;\n    }, [duration, animationClass]);\n    useEffect(() => {\n        let timer;\n        if (show) {\n            // When showing, make the element visible immediately\n            setIsVisible(true);\n            setIsAnimating(true);\n            if (onEnter) {\n                onEnter();\n            }\n            timer = setTimeout(() => {\n                setIsAnimating(false);\n            }, actualDuration);\n        }\n        else {\n            // When hiding, start the exit animation\n            setIsAnimating(true);\n            if (onExit) {\n                onExit();\n            }\n            // Remove the element after the animation completes\n            timer = setTimeout(() => {\n                setIsVisible(false);\n                setIsAnimating(false);\n            }, actualDuration);\n        }\n        return () => {\n            clearTimeout(timer);\n        };\n    }, [show, actualDuration, onEnter, onExit]);\n    // Don't render anything if not visible\n    if (!isVisible && !isAnimating) {\n        return null;\n    }\n    // Get transition classes based on type and direction\n    const getTransitionClasses = () => {\n        const baseClass = `transition-smoother--${type}`;\n        const stateClass = show ? 'transition-smoother--enter' : 'transition-smoother--exit';\n        return `${baseClass} ${stateClass} ${animationClass}`;\n    };\n    return (_jsx(\"div\", Object.assign({ className: `transition-smoother ${getTransitionClasses()} ${className}`, style: {\n            '--transition-duration': `${actualDuration}ms`,\n        } }, { children: children })));\n};\nexport default TransitionSmoother;\n","import TransitionSmoother from './TransitionSmoother';\nexport default TransitionSmoother;\n"],"names":["isDebugMode","setIsDebugMode","useState","isExpanded","setIsExpanded","useEffect","debugModeState","Object","assign","className","children","onClick","newDebugMode","window","innerWidth","innerHeight","navigator","userAgent","canvas","document","createElement","getContext","e","title","viewBox","width","height","fill","d","isSaved","label","primaryColor","buttonStyle","backgroundColor","undefined","style","xmlns","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","apply","onAddToCart","onRemoveFromWishlist","onMoveToCloset","onItemClick","wishlistItems","user","wishlistProducts","setWishlistProducts","isLoading","setIsLoading","products","map","item","id","itemId","retailerId","name","substring","brand","category","price","salePrice","colors","sizes","imageUrls","imageUrl","url","matchScore","matchReasons","inStock","addedToWishlistAt","addedAt","error","handleRemoveFromWishlist","LoadingIndicator","length","ItemCard","image","onFavorite","isFavorite","onRemove","handleItemClick","handleAddToCart","handleMoveToCloset","LoggingSuspenseFallback","fallback","componentId","renderStartTime","useRef","performance","now","renderDuration","current","toFixed","component","totalDuration","loadingMessage","onLoadStart","onLoadComplete","onLoadError","isLoaded","setIsLoaded","hasTimeout","setHasTimeout","componentKey","setComponentKey","isMountedRef","Math","random","toString","loadStartTimeRef","USE_LAZY_LOADING","handleError","componentStack","setTimeout","message","prevKey","forcedResolution","mode","defaultFallback","display","flexDirection","alignItems","justifyContent","padding","marginTop","errorFallback","color","border","borderRadius","cursor","timeElapsed","componentName","onError","finalFallback","size","text","secondaryText","variant","animation","showProgress","progress","inline","overlay","customColor","isIndeterminate","autoProgressDuration","autoProgress","setAutoProgress","interval","setInterval","prevProgress","newProgress","clearInterval","progressPercentage","classNames","filter","Boolean","join","spinnerStyle","borderColor","borderTopColor","progressBarStyle","loadingContent","opacity","fontSize","ErrorBoundary","Component","constructor","props","super","this","resetErrorBoundary","setState","hasError","state","getDerivedStateFromError","componentDidCatch","errorInfo","componentDidUpdate","prevProps","resetOnChange","some","dep","i","render","errorClassName","activePosition","HEAD","NECK","UPPER_BODY","WAIST","LOWER_BODY","FEET","FULL_BODY","outfit","userImage","setCanvasRef","onGarmentSelect","showBodyGuide","_a","canvasRef","renderTimeoutRef","activeGarmentId","setActiveGarmentId","isDragging","setIsDragging","dragStart","setDragStart","deviceCapabilities","setDeviceCapabilities","useHighQuality","useRealTimePreview","isRendering","setIsRendering","canvasWidth","canvasHeight","showGuidelines","settings","updateGarment","performanceTier","compositeImagesOptimized","useCallback","userImg","garments","loadImageFn","renderStart","renderTime","recordComponentRender","debouncedRender","clearTimeout","renderCanvas","ctx","clearRect","drawImage","handleGlobalMouseUp","addEventListener","removeEventListener","ref","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","sortedGarments","sort","a","b","zIndex","garment","dimensions","offset","scale","centerX","centerY","scaledWidth","scaledHeight","onMouseDown","onMouseMove","deltaX","deltaY","find","g","newOffset","dragIndicator","querySelector","onMouseUp","type","TOP","GarmentIcon","BOTTOM","DRESS","OUTERWEAR","SHOES","ACCESSORY","onGarmentRemove","onGarmentUpdate","onGarmentAdd","onChangePhoto","disabled","_b","_c","_d","_e","_f","_g","_h","_j","showGarments","setShowGarments","showControls","setShowControls","showAddGarment","setShowAddGarment","viewMode","setViewMode","fileInputRef","selectedGarmentType","setSelectedGarmentType","draggedGarmentId","setDraggedGarmentId","activeGarment","garmentsByType","useMemo","reduce","acc","push","handlePositionChange","axis","handleDragStart","garmentId","dataTransfer","setData","ghostImage","Image","src","setDragImage","handleDragOver","preventDefault","handleDrop","targetGarmentId","sourceIndex","findIndex","targetIndex","layerIndex","garmentCount","stopPropagation","prevMode","confirm","forEach","draggable","onDragStart","onDragOver","onDrop","alt","keys","indexOf","round","values","click","handleAddGarment","accept","onChange","file","target","files","newScale","max","min","parseFloat","parseInt","rotation","newRotation","flipHorizontal","CameraFacing","TryOnStep","onLike","onDislike","onAddToWishlist","onSaveNote","isLiked","setIsLiked","showLikeOptions","setShowLikeOptions","note","setNote","showNoteInput","setShowNoteInput","addedToWishlist","setAddedToWishlist","addedToCart","setAddedToCart","noteSaved","setNoteSaved","addToWishlist","addToCart","role","wishlistItem","Date","slice","cartItem","quantity","placeholder","autoFocus","trim","onClose","onSave","onAddToLookbook","currentOutfit","uploadUserImage","addGarment","removeGarment","updateGarmentProperties","clearUserImage","saveTryOnResult","closeTryOnModal","useTryOn","showUploader","setShowUploader","savingToLookbook","setSavingToLookbook","saveSuccess","setSaveSuccess","isVisible","setIsVisible","modelLoaded","webglSupported","setWebglSupported","currentStep","setCurrentStep","SELECT_IMAGE","countdownTimer","setCountdownTimer","countdownIntervalRef","captureInProgress","setCaptureInProgress","reviewMode","setReviewMode","capturedImage","setCapturedImage","gl","fullySupported","webGLContext","ext","getExtension","isWebGLFullySupported","checkWebGLSupport","catch","err","processingStatus","REMOVING_BACKGROUND","COMPLETED","SELECT_ITEM","CAPTURE","REVIEW","ACTION","PREVIEW","garmentElement","getElementById","scrollIntoView","behavior","block","startCaptureCountdown","prev","captureCurrentImage","cancelCountdown","toDataURL","handleSaveToLookbook","resultImageUrl","savedOutfit","userId","outfitId","toLocaleDateString","items","savedAt","createdAt","handleClose","handleReset","steps","index","renderStepIndicator","ImageUploader","onUpload","description","countdownDuration","AdaptiveImage","A","loadingPriority","quality","alert","onClickNotification","notifications","setNotifications","isOpen","setIsOpen","hasUnread","setHasUnread","timerId","randomItem","floor","newNotification","itemName","date","read","handleNotificationClick","notif","notification","toLocaleTimeString","hour","minute","isMockEnabled","setIsMockEnabled","localStorage","getItem","handleStorageChange","key","newValue","checked","isTryOnModalOpen","handleEscapeKey","body","overflow","VirtualTryOn","syncState","isOnline","isSlowConnection","useSyncContext","pendingOperations","isSyncing","status","cx","cy","r","stroke","strokeWidth","memo","placeholderSrc","requestedQuality","onLoad","loaded","setLoaded","setError","imgRef","startTimeRef","optimizedSrc","originalUrl","includes","URL","location","origin","hostname","pathname","replace","qualityMap","high","medium","low","searchParams","set","getQualityModifiedUrl","shouldLazyLoad","preloadLink","rel","as","href","head","appendChild","removeChild","loadingAttr","aspectRatio","backgroundImage","loading","loadTime","hasOfflineData","position","isOfflineMode","setOfflineMode","setIsSyncing","isOffline","statusText","positionClass","show","duration","onEnter","onExit","isAnimating","setIsAnimating","animationClass","none","actualDuration","timer"],"sourceRoot":""}
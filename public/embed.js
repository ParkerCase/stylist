/*! For license information please see embed.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("embed",[],t):"object"==typeof exports?exports.embed=t():e.embed=t()}(this,(()=>(()=>{"use strict";var e={2162:(e,t,n)=>{var r=n(6540),s=n(9888);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=s.useSyncExternalStore,a=r.useRef,u=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var d=a(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=c((function(){function e(e){if(!u){if(u=!0,i=e,e=r(e),void 0!==s&&f.hasValue){var t=f.value;if(s(t,e))return a=t}return a=e}if(t=a,o(i,e))return t;var n=r(e);return void 0!==s&&s(t,n)?(i=e,t):(i=e,a=n)}var i,a,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,s]);var m=i(e,d[0],d[1]);return u((function(){f.hasValue=!0,f.value=m}),[m]),l(m),m}},5287:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function O(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}O.prototype.isReactComponent={},O.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},O.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=O.prototype;var S=v.prototype=new b;S.constructor=v,g(S,O.prototype),S.isPureReactComponent=!0;var h=Array.isArray,I=Object.prototype.hasOwnProperty,E={current:null},w={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,r){var s,o={},i=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)I.call(t,s)&&!w.hasOwnProperty(s)&&(o[s]=t[s]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(s in u=e.defaultProps)void 0===o[s]&&(o[s]=u[s]);return{$$typeof:n,type:e,key:i,ref:a,props:o,_owner:E.current}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function x(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function k(e,t,s,o,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var u=!1;if(null===e)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return i=i(u=e),e=""===o?"."+x(u,0):o,h(i)?(s="",null!=e&&(s=e.replace(_,"$&/")+"/"),k(i,t,s,"",(function(e){return e}))):null!=i&&(R(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(_,"$&/")+"/")+e)),t.push(i)),1;if(u=0,o=""===o?".":o+":",h(e))for(var c=0;c<e.length;c++){var l=o+x(a=e[c],c);u+=k(a,t,s,l,i)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),c=0;!(a=e.next()).done;)u+=k(a=a.value,t,s,l=o+x(a,c++),i);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function T(e,t,n){if(null==e)return e;var r=[],s=0;return k(e,r,"","",(function(e){return t.call(n,e,s++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var C={current:null},U={transition:null},L={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:U,ReactCurrentOwner:E};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=O,t.Fragment=s,t.Profiler=i,t.PureComponent=v,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=M,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=g({},e.props),o=e.key,i=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,a=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)I.call(t,c)&&!w.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];s.children=u}return{$$typeof:n,type:e.type,key:o,ref:i,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=j,t.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=R,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=U.transition;U.transition={};try{e()}finally{U.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return C.current.useCallback(e,t)},t.useContext=function(e){return C.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return C.current.useDeferredValue(e)},t.useEffect=function(e,t){return C.current.useEffect(e,t)},t.useId=function(){return C.current.useId()},t.useImperativeHandle=function(e,t,n){return C.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return C.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return C.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return C.current.useMemo(e,t)},t.useReducer=function(e,t,n){return C.current.useReducer(e,t,n)},t.useRef=function(e){return C.current.useRef(e)},t.useState=function(e){return C.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return C.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return C.current.useTransition()},t.version="18.3.1"},6540:(e,t,n)=>{e.exports=n(5287)},8493:(e,t,n)=>{var r=n(6540);var s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,i=r.useEffect,a=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!s(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),s=r[0].inst,l=r[1];return a((function(){s.value=n,s.getSnapshot=t,c(s)&&l({inst:s})}),[e,n,t]),i((function(){return c(s)&&l({inst:s}),e((function(){c(s)&&l({inst:s})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},9242:(e,t,n)=>{e.exports=n(2162)},9888:(e,t,n)=>{e.exports=n(8493)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{close:()=>z,init:()=>A,open:()=>P});const s=e=>{let t;const n=new Set,r=(e,r)=>{const s="function"==typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=r?r:"object"!=typeof s||null===s)?s:Object.assign({},t,s),n.forEach((n=>n(t,e)))}},s=()=>t,o={setState:r,getState:s,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{n.clear()}},i=t=e(r,s,o);return o},o=e=>e?s(e):s;var i=n(6540),a=n(9242);const{useDebugValue:u}=i,{useSyncExternalStoreWithSelector:c}=a;let l=!1;const d=e=>e;const f=e=>{const t="function"==typeof e?o(e):e,n=(e,n)=>function(e,t=d,n){n&&!l&&(l=!0);const r=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return u(r),r}(t,e,n);return Object.assign(n,t),n},m=e=>e?f(e):f;const p={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let g;const y=new Uint8Array(16);const O=[];for(let e=0;e<256;++e)O.push((e+256).toString(16).slice(1));function b(e,t=0){return(O[e[t+0]]+O[e[t+1]]+O[e[t+2]]+O[e[t+3]]+"-"+O[e[t+4]]+O[e[t+5]]+"-"+O[e[t+6]]+O[e[t+7]]+"-"+O[e[t+8]]+O[e[t+9]]+"-"+O[e[t+10]]+O[e[t+11]]+O[e[t+12]]+O[e[t+13]]+O[e[t+14]]+O[e[t+15]]).toLowerCase()}const v=function(e,t,n){if(p.randomUUID&&!t&&!e)return p.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!g){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");g=crypto.getRandomValues.bind(crypto)}return g(y)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return b(r)};var S,h;!function(e){e.TEXT="text",e.RECOMMENDATION="recommendation",e.OUTFIT="outfit",e.QUIZ="quiz",e.LOADING="loading",e.ERROR="error"}(S||(S={})),function(e){e.USER="user",e.ASSISTANT="assistant",e.SYSTEM="system"}(h||(h={}));const I=m(((e,t)=>({messages:[],isOpen:!1,isMinimized:!1,isLoading:!1,error:null,addMessage:t=>{const n=v(),r=new Date,s=Object.assign(Object.assign({},t),{id:n,timestamp:r});return e((e=>({messages:[...e.messages,s]}))),n},addTextMessage:(e,n)=>{const r=n,s={type:S.TEXT,sender:r,text:e};return t().addMessage(s)},updateMessage:(t,n)=>{e((e=>({messages:e.messages.map((e=>e.id===t?Object.assign(Object.assign({},e),n):e))})))},removeMessage:t=>{e((e=>({messages:e.messages.filter((e=>e.id!==t))})))},clearMessages:()=>{e({messages:[]})},toggleOpen:()=>{const n=t().isOpen;e({isOpen:!n,isMinimized:!1})},toggleMinimize:()=>{const n=t().isMinimized;e({isMinimized:!n})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})}}))),E=new Map,w=e=>{const t=E.get(e);return t?Object.fromEntries(Object.entries(t.stores).map((([e,t])=>[e,t.getState()]))):{}},j=(e,t={})=>(n,r,s)=>{const{enabled:o,anonymousActionType:i,store:a,...u}=t;let c;try{c=(null==o||o)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(e){}if(!c)return e(n,r,s);const{connection:l,...d}=((e,t,n)=>{if(void 0===e)return{type:"untracked",connection:t.connect(n)};const r=E.get(n.name);if(r)return{type:"tracked",store:e,...r};const s={connection:t.connect(n),stores:{}};return E.set(n.name,s),{type:"tracked",store:e,...s}})(a,c,u);let f=!0;s.setState=(e,t,o)=>{const c=n(e,t);if(!f)return c;const d=void 0===o?{type:i||"anonymous"}:"string"==typeof o?{type:o}:o;return void 0===a?(null==l||l.send(d,r()),c):(null==l||l.send({...d,type:`${a}/${d.type}`},{...w(u.name),[a]:s.getState()}),c)};const m=(...e)=>{const t=f;f=!1,n(...e),f=t},p=e(s.setState,r,s);if("untracked"===d.type?null==l||l.init(p):(d.stores[d.store]=s,null==l||l.init(Object.fromEntries(Object.entries(d.stores).map((([e,t])=>[e,e===d.store?p:t.getState()]))))),s.dispatchFromDevtools&&"function"==typeof s.dispatch){let e=!1;const t=s.dispatch;s.dispatch=(...n)=>{"__setState"!==n[0].type||e||(e=!0),t(...n)}}return l.subscribe((e=>{var t;switch(e.type){case"ACTION":if("string"!=typeof e.payload)return;return R(e.payload,(e=>{if("__setState"!==e.type)s.dispatchFromDevtools&&"function"==typeof s.dispatch&&s.dispatch(e);else{if(void 0===a)return void m(e.state);Object.keys(e.state).length;const t=e.state[a];if(null==t)return;JSON.stringify(s.getState())!==JSON.stringify(t)&&m(t)}}));case"DISPATCH":switch(e.payload.type){case"RESET":return m(p),void 0===a?null==l?void 0:l.init(s.getState()):null==l?void 0:l.init(w(u.name));case"COMMIT":return void 0===a?void(null==l||l.init(s.getState())):null==l?void 0:l.init(w(u.name));case"ROLLBACK":return R(e.state,(e=>{if(void 0===a)return m(e),void(null==l||l.init(s.getState()));m(e[a]),null==l||l.init(w(u.name))}));case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return R(e.state,(e=>{void 0!==a?JSON.stringify(s.getState())!==JSON.stringify(e[a])&&m(e[a]):m(e)}));case"IMPORT_STATE":{const{nextLiftedState:n}=e.payload,r=null==(t=n.computedStates.slice(-1)[0])?void 0:t.state;if(!r)return;return m(void 0===a?r:r[a]),void(null==l||l.send(null,n))}case"PAUSE_RECORDING":return f=!f}return}})),p},R=(e,t)=>{let n;try{n=JSON.parse(e)}catch(e){}void 0!==n&&t(n)};function _(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var r;const s=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),o=null!=(r=n.getItem(e))?r:null;return o instanceof Promise?o.then(s):s(o)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}const x=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>x(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>x(t)(e)}}},k=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((e,t)=>(n,r,s)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const a=new Set,u=new Set;let c;try{c=o.getStorage()}catch(e){}if(!c)return e(((...e)=>{n(...e)}),r,s);const l=x(o.serialize),d=()=>{const e=o.partialize({...r()});let t;const n=l({state:e,version:o.version}).then((e=>c.setItem(o.name,e))).catch((e=>{t=e}));if(t)throw t;return n},f=s.setState;s.setState=(e,t)=>{f(e,t),d()};const m=e(((...e)=>{n(...e),d()}),r,s);let p;const g=()=>{var e;if(!c)return;i=!1,a.forEach((e=>e(r())));const t=(null==(e=o.onRehydrateStorage)?void 0:e.call(o,r()))||void 0;return x(c.getItem.bind(c))(o.name).then((e=>{if(e)return o.deserialize(e)})).then((e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return e.state;if(o.migrate)return o.migrate(e.state,e.version)}})).then((e=>{var t;return p=o.merge(e,null!=(t=r())?t:m),n(p,!0),d()})).then((()=>{null==t||t(p,void 0),i=!0,u.forEach((e=>e(p)))})).catch((e=>{null==t||t(void 0,e)}))};return s.persist={setOptions:e=>{o={...o,...e},e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>i,onHydrate:e=>(a.add(e),()=>{a.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},g(),p||m})(e,t):((e,t)=>(n,r,s)=>{let o={storage:_((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const a=new Set,u=new Set;let c=o.storage;if(!c)return e(((...e)=>{n(...e)}),r,s);const l=()=>{const e=o.partialize({...r()});return c.setItem(o.name,{state:e,version:o.version})},d=s.setState;s.setState=(e,t)=>{d(e,t),l()};const f=e(((...e)=>{n(...e),l()}),r,s);let m;s.getInitialState=()=>f;const p=()=>{var e,t;if(!c)return;i=!1,a.forEach((e=>{var t;return e(null!=(t=r())?t:f)}));const s=(null==(t=o.onRehydrateStorage)?void 0:t.call(o,null!=(e=r())?e:f))||void 0;return x(c.getItem.bind(c))(o.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];if(o.migrate)return[!0,o.migrate(e.state,e.version)]}return[!1,void 0]})).then((e=>{var t;const[s,i]=e;if(m=o.merge(i,null!=(t=r())?t:f),n(m,!0),s)return l()})).then((()=>{null==s||s(m,void 0),m=r(),i=!0,u.forEach((e=>e(m)))})).catch((e=>{null==s||s(void 0,e)}))};return s.persist={setOptions:e=>{o={...o,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>i,onHydrate:e=>(a.add(e),()=>{a.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},o.skipHydration||p(),m||f})(e,t);m()(k(((e,t)=>({user:null,styleQuizResult:null,isLoading:!1,error:null,setUser:t=>{e({user:t})},updateUser:n=>{const r=t().user;r&&e({user:Object.assign(Object.assign({},r),n)})},setStyleQuizResult:t=>{e({styleQuizResult:t})},addToCloset:n=>{const r=t().user;r&&e({user:Object.assign(Object.assign({},r),{closet:[...r.closet,n]})})},removeFromCloset:n=>{const r=t().user;r&&e({user:Object.assign(Object.assign({},r),{closet:r.closet.filter((e=>e.id!==n))})})},toggleItemFavorite:(n,r)=>{const s=t().user;s&&e({user:Object.assign(Object.assign({},s),{closet:s.closet.map((e=>e.id===n?Object.assign(Object.assign({},e),{favorite:r}):e))})})},addLikedItem:n=>{const r=t().user;r&&(r.feedback.likedItems.includes(n)||e({user:Object.assign(Object.assign({},r),{feedback:Object.assign(Object.assign({},r.feedback),{likedItems:[...r.feedback.likedItems,n],dislikedItems:r.feedback.dislikedItems.filter((e=>e!==n)),lastInteraction:new Date})})}))},addDislikedItem:n=>{const r=t().user;r&&(r.feedback.dislikedItems.includes(n)||e({user:Object.assign(Object.assign({},r),{feedback:Object.assign(Object.assign({},r.feedback),{dislikedItems:[...r.feedback.dislikedItems,n],likedItems:r.feedback.likedItems.filter((e=>e!==n)),lastInteraction:new Date})})}))},removeLikedItem:n=>{const r=t().user;r&&e({user:Object.assign(Object.assign({},r),{feedback:Object.assign(Object.assign({},r.feedback),{likedItems:r.feedback.likedItems.filter((e=>e!==n)),lastInteraction:new Date})})})},removeDislikedItem:n=>{const r=t().user;r&&e({user:Object.assign(Object.assign({},r),{feedback:Object.assign(Object.assign({},r.feedback),{dislikedItems:r.feedback.dislikedItems.filter((e=>e!==n)),lastInteraction:new Date})})})},addViewedItem:n=>{const r=t().user;r&&(r.feedback.viewedItems.includes(n)||e({user:Object.assign(Object.assign({},r),{feedback:Object.assign(Object.assign({},r.feedback),{viewedItems:[...r.feedback.viewedItems,n],lastInteraction:new Date})})}))},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},logout:()=>{e({user:null,styleQuizResult:null})}})),{name:"stylist-user-storage",partialize:e=>({user:e.user,styleQuizResult:e.styleQuizResult})}));var T,D,C,U;!function(e){e.TOP="top",e.BOTTOM="bottom",e.DRESS="dress",e.OUTERWEAR="outerwear",e.SHOES="shoes",e.ACCESSORY="accessory"}(T||(T={})),function(e){e.UPPER_BODY="upper_body",e.LOWER_BODY="lower_body",e.FULL_BODY="full_body",e.HEAD="head",e.FEET="feet",e.HANDS="hands",e.NECK="neck",e.WAIST="waist"}(D||(D={})),function(e){e.IDLE="idle",e.UPLOADING="uploading",e.PROCESSING="processing",e.REMOVING_BACKGROUND="removing_background",e.COMPLETED="completed",e.FAILED="failed"}(C||(C={})),function(e){e.REMOVE_BG_API="remove_bg_api",e.TENSORFLOW="tensorflow",e.MANUAL="manual"}(U||(U={}));const L=e=>{switch(e){case T.TOP:return D.UPPER_BODY;case T.BOTTOM:return D.LOWER_BODY;case T.DRESS:return D.FULL_BODY;case T.OUTERWEAR:return D.UPPER_BODY;case T.SHOES:return D.FEET;case T.ACCESSORY:return D.HEAD;default:return D.FULL_BODY}},M={preferredBackgroundRemovalMethod:U.TENSORFLOW,removeBackgroundAutomatically:!0,showGuidelines:!0,highQualityRendering:!0,defaultGarmentScale:{[T.TOP]:.8,[T.BOTTOM]:.7,[T.DRESS]:.9,[T.OUTERWEAR]:.85,[T.SHOES]:.5,[T.ACCESSORY]:.4},defaultGarmentOffset:{[T.TOP]:{x:0,y:-50},[T.BOTTOM]:{x:0,y:100},[T.DRESS]:{x:0,y:0},[T.OUTERWEAR]:{x:0,y:-30},[T.SHOES]:{x:0,y:200},[T.ACCESSORY]:{x:0,y:-150}}};m()(j(k(((e,t)=>({currentOutfit:null,userImage:null,isLoading:!1,error:null,settings:M,savedResults:[],canvasWidth:600,canvasHeight:800,isTryOnModalOpen:!1,isUploadModalOpen:!1,setCurrentOutfit:t=>{e({currentOutfit:t})},addGarmentToOutfit:n=>{const{currentOutfit:r}=t();if(r){const t=r.garments.filter((e=>!(e.type===n.type&&e.bodyPosition===n.bodyPosition)));e({currentOutfit:Object.assign(Object.assign({},r),{garments:[...t,n]})})}else{const t={id:`outfit_${Date.now()}`,garments:[n],createdAt:new Date};e({currentOutfit:t})}},removeGarmentFromOutfit:n=>{const{currentOutfit:r}=t();if(r){const t=r.garments.filter((e=>e.id!==n));e({currentOutfit:Object.assign(Object.assign({},r),{garments:t})})}},updateGarment:(n,r)=>{const{currentOutfit:s}=t();if(s){const t=s.garments.map((e=>e.id===n?Object.assign(Object.assign({},e),r):e));e({currentOutfit:Object.assign(Object.assign({},s),{garments:t})})}},setUserImage:n=>{e({userImage:n});const{currentOutfit:r}=t();if(r){const t=n;e({currentOutfit:Object.assign(Object.assign({},r),{userImage:t})})}},updateUserImage:n=>{const{userImage:r}=t();if(r){const s=Object.assign(Object.assign({},r),n);e({userImage:s});const{currentOutfit:o}=t();o&&e({currentOutfit:Object.assign(Object.assign({},o),{userImage:s})})}},clearUserImage:()=>{e({userImage:null});const{currentOutfit:n}=t();if(n){const t=Object.assign(Object.assign({},n),{userImage:void 0});e({currentOutfit:t})}},updateOutfit:n=>{const{currentOutfit:r}=t();r&&e({currentOutfit:Object.assign(Object.assign({},r),n)})},setSettings:n=>{e({settings:Object.assign(Object.assign({},t().settings),n)})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},saveResult:n=>{const r=[...t().savedResults],s=r.findIndex((e=>e.id===n.id));s>=0?r[s]=n:r.push(n),e({savedResults:r})},deleteSavedResult:n=>{const r=t().savedResults.filter((e=>e.id!==n));e({savedResults:r})},setCanvasDimensions:(t,n)=>{e({canvasWidth:t,canvasHeight:n})},openTryOnModal:()=>{e({isTryOnModalOpen:!0})},closeTryOnModal:()=>{e({isTryOnModalOpen:!1})},openUploadModal:()=>{e({isUploadModalOpen:!0})},closeUploadModal:()=>{e({isUploadModalOpen:!1})},reset:()=>{e({currentOutfit:null,userImage:null,isLoading:!1,error:null})},startNewTryOn:(n,r)=>{const{settings:s}=t(),o=t().currentOutfit||{id:crypto.randomUUID(),garments:[],createdAt:new Date},i={id:crypto.randomUUID(),type:r,url:"string"==typeof n?n:URL.createObjectURL(n),bodyPosition:L(r),zIndex:o.garments.length+1,layerIndex:o.garments.length,scale:s.defaultGarmentScale[r]||1,offset:s.defaultGarmentOffset[r]||{x:0,y:0},rotation:0,withoutBackground:!0},a=[...o.garments||[],i];e({currentOutfit:Object.assign(Object.assign({},o),{garments:a})})},tryOnOutfit:t=>{e({currentOutfit:t})}})),{name:"stylist-try-on-storage",partialize:e=>({settings:e.settings,savedResults:e.savedResults})}),{name:"try-on-store"})),m(((e,t)=>({recommendedItems:[],recommendedOutfits:[],savedOutfits:[],wishlistItems:[],cartItems:[],viewedItems:[],context:null,isLoading:!1,error:null,setRecommendedItems:t=>{e({recommendedItems:t})},setRecommendedOutfits:t=>{e({recommendedOutfits:t})},setSavedOutfits:t=>{e({savedOutfits:t})},addToWishlist:n=>{t().wishlistItems.some((e=>e.itemId===n.itemId))||e((e=>({wishlistItems:[...e.wishlistItems,n]})))},removeFromWishlist:t=>{e((e=>({wishlistItems:e.wishlistItems.filter((e=>e.itemId!==t))})))},addToCart:n=>{const r=t().cartItems.findIndex((e=>e.itemId===n.itemId));e(r>=0?e=>{const t=[...e.cartItems];return t[r].quantity+=n.quantity,{cartItems:t}}:e=>({cartItems:[...e.cartItems,n]}))},removeFromCart:t=>{e((e=>({cartItems:e.cartItems.filter((e=>e.itemId!==t))})))},updateCartItemQuantity:(t,n)=>{e((e=>({cartItems:e.cartItems.map((e=>e.itemId===t?Object.assign(Object.assign({},e),{quantity:n}):e))})))},addViewedItem:n=>{t().viewedItems.includes(n)||e((e=>({viewedItems:[...e.viewedItems,n]})))},saveOutfit:n=>{t().savedOutfits.some((e=>e.outfitId===n.outfitId))||e((e=>({savedOutfits:[...e.savedOutfits,n]})))},removeSavedOutfit:t=>{e((e=>({savedOutfits:e.savedOutfits.filter((e=>e.outfitId!==t))})))},setContext:t=>{e({context:t})},clearRecommendations:()=>{e({recommendedItems:[],recommendedOutfits:[],context:null})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})}})));function A(e){window.__StylistWidgetConfig=e,document.getElementById("stylist-widget-button")||function(e){const t=document.createElement("button");t.id="stylist-widget-button",t.className="stylist-widget-button",t.setAttribute("aria-label","Open Stylist Widget");const n=e.position||"bottom-right";t.classList.add(`stylist-widget-button--${n}`),e.primaryColor&&(t.style.backgroundColor=e.primaryColor);t.innerHTML='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">\n      <path d="M12 1a9 9 0 019 9c0 4.56-3.37 8.33-7.76 8.95l-.19-.47a7.99 7.99 0 002.93-10.57A8.02 8.02 0 004.06 13.1 9 9 0 0112 1zm7.12 13.93l.37.37-.36.36.01-.73zm1.36-1.55a2.83 2.83 0 00-.5-.31l.36-.74c.28.12.54.29.78.48l-.64.57zm-14.81.19l.36.73c-.29.16-.57.35-.8.57l-.57-.64c.31-.3.65-.54 1.01-.66zM6.66 22l1.93-3.1c-.47-.55-.85-1.16-1.14-1.8L2.8 19.13V22h3.86zm10.46-2.91L19 21.99v-2.86l-1.14-.93c.12-.39.19-.8.19-1.22l.08-.04A8.96 8.96 0 0022 10 10 10 0 002 10a9 9 0 003.34 7.03L1.94 20.5A1 1 0 002.86 22h16.28a1 1 0 00.92-1.5l-2.94-3.41z"/>\n    </svg>\n  ';const r=document.createElement("style");r.textContent="\n    .stylist-widget-button {\n      position: fixed;\n      width: 56px;\n      height: 56px;\n      border-radius: 50%;\n      background-color: #4361ee;\n      color: white;\n      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border: none;\n      z-index: 9999;\n      transition: transform 0.3s ease, box-shadow 0.3s ease;\n    }\n    \n    .stylist-widget-button:hover {\n      transform: scale(1.05);\n      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);\n    }\n    \n    .stylist-widget-button--bottom-right {\n      bottom: 20px;\n      right: 20px;\n    }\n    \n    .stylist-widget-button--bottom-left {\n      bottom: 20px;\n      left: 20px;\n    }\n    \n    .stylist-widget-button--top-right {\n      top: 20px;\n      right: 20px;\n    }\n    \n    .stylist-widget-button--top-left {\n      top: 20px;\n      left: 20px;\n    }\n    \n    @media (max-width: 576px) {\n      .stylist-widget-button {\n        width: 48px;\n        height: 48px;\n      }\n    }\n  ",document.head.appendChild(r),document.body.appendChild(t),t.addEventListener("click",P)}(e)}function P(){I.getState().toggleOpen()}function z(){const{isOpen:e}=I.getState();e&&I.getState().toggleOpen()}return window.StylistWidget={init:A,open:P,close:z},r})()));
"use strict";(self.webpackChunkStylistWidget=self.webpackChunkStylistWidget||[]).push([[1733],{1211:function(n,t,e){e.d(t,{qr:function(){return N}});var r=e(67897),o=e(35287),s=e(45119),a=e(70125),i=e(25030),u=e(89359),c=e(53621),l=e(62058),p=e(65703),d=e(9258),h=e(96522),f=e(92596),m=e(70929),g=e(62302),T=e(17986),b=e(54268),v=e(77126),k=e(18941),x=e(7703),E=e(67261),Y=e(12151);function y(n,t=!1){return r.T2.tidy((()=>{(0,s.vA)(2===n.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${n.shape.length}D Tensor.`));const e=n.shape[0],m=n.shape[1];let g=(0,c.y)(e),b=(0,a.o)(n);const E=(0,k.K)([[1]],[1,1]);let y=(0,a.o)(E);const N=e>=m?m:e;for(let n=0;n<N;++n){const t=b,s=y,c=g;[y,b,g]=r.T2.tidy((()=>{const t=(0,T.d)(b,[n,n],[e-n,1]),r=(0,f.x)(t),o=(0,T.d)(b,[n,n],[1,1]),s=(0,Y._)((0,l.r)(o,0),(0,k.K)([[-1]]),(0,k.K)([[1]])),c=(0,v.j)(o,(0,d.l)(s,r)),N=(0,u.y)(t,c);y=1===N.shape[0]?(0,a.o)(E):(0,i.x)([E,(0,T.d)(N,[1,0],[N.shape[0]-1,N.shape[1]])],0);const A=(0,h.H)((0,u.y)((0,p.N)(s,c),r)),_=(0,T.d)(b,[n,0],[e-n,m]),$=(0,d.l)(A,y),S=(0,x.m)(y);if(0===n)b=(0,v.j)(_,(0,p.N)($,(0,p.N)(S,_)));else{const t=(0,v.j)(_,(0,p.N)($,(0,p.N)(S,_)));b=(0,i.x)([(0,T.d)(b,[0,0],[n,m]),t],0)}const w=(0,x.m)($),M=(0,T.d)(g,[0,n],[e,g.shape[1]-n]);if(0===n)g=(0,v.j)(M,(0,p.N)((0,p.N)(M,y),w));else{const t=(0,v.j)(M,(0,p.N)((0,p.N)(M,y),w));g=(0,i.x)([(0,T.d)(g,[0,0],[e,n]),t],1)}return[y,b,g]})),(0,o.AS)([t,s,c])}return!t&&e>m&&(g=(0,T.d)(g,[0,0],[e,m]),b=(0,T.d)(b,[0,0],[m,m])),[g,b]}))}const N=(0,m.op)({qr_:function(n,t=!1){if((0,s.vA)(n.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${n.rank}`)),2===n.rank)return y(n,t);{const e=n.shape.slice(0,n.shape.length-2).reduce(((n,t)=>n*t)),r=(0,E.K)((0,g.t)(n,[e,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),o=[],s=[];r.forEach((n=>{const[e,r]=y(n,t);o.push(e),s.push(r)}));return[(0,g.t)((0,b.t)(o,0),n.shape),(0,g.t)((0,b.t)(s,0),n.shape)]}}})},1242:function(n,t,e){e.d(t,{p:function(){return i}});var r=e(67897),o=e(15441),s=e(28189),a=e(45119);const i=(0,e(70929).op)({transform_:function(n,t,e="nearest",i="constant",u=0,c){const l=(0,s.YT)(n,"image","transform","float32"),p=(0,s.YT)(t,"transforms","transform","float32");a.vA(4===l.rank,(()=>`Error in transform: image must be rank 4,but got rank ${l.rank}.`)),a.vA(2===p.rank&&(p.shape[0]===l.shape[0]||1===p.shape[0])&&8===p.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),a.vA(null==c||2===c.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${c}.`));const d={image:l,transforms:p},h={interpolation:e,fillMode:i,fillValue:u,outputShape:c};return r.T2.runKernel(o.dL,d,h)}})},5323:function(n,t,e){e.d(t,{U:function(){return a}});var r=e(28189),o=e(45119),s=e(74027);const a=async function(n,t,e=1){const a=(0,r.YT)(n,"predictions","inTopK"),i=(0,r.YT)(t,"targets","inTopK");(0,o.vA)(a.rank>1,(()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${a.rank}`)),(0,o.vA)(a.rank-1===i.rank,(()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${a.rank} and targets rank ${i.rank}`)),(0,o.O3)(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const u=a.shape[a.shape.length-1];(0,o.vA)(e>0&&e<=u,(()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${u}), but got ${e}`));const c=await a.data(),l=await i.data(),[p,d]=[c.length/u,u],h=(0,o.ce)("bool",p);for(let r=0;r<p;r++){const n=r*d,t=c.subarray(n,n+d),o=[];for(let e=0;e<t.length;e++)o.push({value:t[e],index:e});o.sort(((n,t)=>t.value-n.value)),h[r]=0;for(let s=0;s<e;s++)if(o[s].index===l[r]){h[r]=1;break}}return n!==a&&a.dispose(),t!==i&&i.dispose(),(0,s.O)(h,i.shape,"bool")}},5902:function(n,t,e){e.d(t,{R:function(){return u}});var r=e(8360),o=e(28189),s=e(68712),a=e(45702),i=e(62018);const u=async function(n,t,e,u=.5,c=Number.NEGATIVE_INFINITY,l=!1){const p=(0,o.YT)(n,"boxes","nonMaxSuppressionAsync"),d=(0,o.YT)(t,"scores","nonMaxSuppressionAsync"),h=(0,s.W)(p,d,e,u,c,null),f=h.maxOutputSize,m=h.iouThreshold,g=h.scoreThreshold,[T,b]=await Promise.all([p.data(),d.data()]),{selectedIndices:v,validOutputs:k}=(0,r.ZS)(T,b,f,m,g,l);return p!==n&&p.dispose(),d!==t&&d.dispose(),{selectedIndices:(0,i.t)(v,"int32"),validOutputs:(0,a.d)(k,"int32")}}},6300:function(n,t,e){e.d(t,{y:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({isNaN_:function(n){const t={x:(0,s.YT)(n,"x","isNaN")};return r.T2.runKernel(o.iP,t)}})},7425:function(n,t,e){e.d(t,{l:function(){return i}});var r=e(8360),o=e(28189),s=e(68712),a=e(62018);const i=async function(n,t,e,i=.5,u=Number.NEGATIVE_INFINITY,c=0){const l=(0,o.YT)(n,"boxes","nonMaxSuppressionAsync"),p=(0,o.YT)(t,"scores","nonMaxSuppressionAsync"),d=(0,s.W)(l,p,e,i,u,c);e=d.maxOutputSize,i=d.iouThreshold,u=d.scoreThreshold,c=d.softNmsSigma;const h=await Promise.all([l.data(),p.data()]),f=h[0],m=h[1],{selectedIndices:g,selectedScores:T}=(0,r.ut)(f,m,e,i,u,c);return l!==n&&l.dispose(),p!==t&&p.dispose(),{selectedIndices:(0,a.t)(g,"int32"),selectedScores:(0,a.t)(T)}}},7843:function(n,t,e){e.d(t,{Y:function(){return o}});var r=e(28189);const o=(0,e(70929).op)({multiRNNCell_:function(n,t,e,o){const s=(0,r.YT)(t,"data","multiRNNCell"),a=(0,r.j1)(e,"c","multiRNNCell"),i=(0,r.j1)(o,"h","multiRNNCell");let u=s;const c=[];for(let r=0;r<n.length;r++){const t=n[r](u,a[r],i[r]);c.push(t[0]),c.push(t[1]),u=t[1]}const l=[],p=[];for(let r=0;r<c.length;r+=2)l.push(c[r]),p.push(c[r+1]);return[l,p]}})},9258:function(n,t,e){e.d(t,{l:function(){return i}});var r=e(67897),o=e(15441),s=e(30565),a=e(28189);const i=(0,e(70929).op)({mul_:function(n,t){let e=(0,a.YT)(n,"a","mul"),i=(0,a.YT)(t,"b","mul");[e,i]=(0,s.makeTypesMatch)(e,i);const u={a:e,b:i};return r.T2.runKernel(o.xu,u)}})},9879:function(n,t,e){e.d(t,{z:function(){return i}});var r=e(67897),o=e(15441),s=e(28189),a=e(62198);const i=(0,e(70929).op)({logicalOr_:function(n,t){const e=(0,s.YT)(n,"a","logicalOr","bool"),i=(0,s.YT)(t,"b","logicalOr","bool");(0,a.Ky)(e.shape,i.shape);const u={a:e,b:i};return r.T2.runKernel(o.LX,u)}})},12015:function(n,t,e){e.d(t,{K:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({log1p_:function(n){const t={x:(0,s.YT)(n,"x","log1p")};return r.T2.runKernel(o.Cg,t)}})},12611:function(n,t,e){e.d(t,{i:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({mean_:function(n,t=null,e=!1){const a={x:(0,s.YT)(n,"x","mean")},i={axis:t,keepDims:e};return r.T2.runKernel(o.g5,a,i)}})},12644:function(n,t,e){e.d(t,{B:function(){return c}});var r=e(67897),o=e(15441),s=e(30565),a=e(28189),i=e(62198),u=e(29809);const c=(0,e(70929).op)({minimum_:function(n,t){let e=(0,a.YT)(n,"a","minimum"),c=(0,a.YT)(t,"b","minimum");[e,c]=(0,s.makeTypesMatch)(e,c),"bool"===e.dtype&&(e=(0,u.w)(e,"int32"),c=(0,u.w)(c,"int32")),(0,i.Ky)(e.shape,c.shape);const l={a:e,b:c};return r.T2.runKernel(o.LG,l)}})},13330:function(n,t,e){e.d(t,{V:function(){return f}});var r=e(28189),o=e(45119),s=e(37523),a=e(21078),i=e(8631),u=e(44010),c=e(41938),l=e(70929),p=e(62302),d=e(77126),h=e(83791);const f=(0,l.op)({logSumExp_:function(n,t=null,e=!1){const l=(0,r.YT)(n,"x","logSumExp"),f=(0,o.Y6)(t,l.shape),m=(0,c.T)(l,f,!0),g=(0,d.j)(l,m),T=(0,i.o)(g),b=(0,h.c)(T,f),v=(0,u.R)(b),k=(0,s.W)((0,p.t)(m,v.shape),v);if(e){const n=(0,a.SM)(k.shape,f);return(0,p.t)(k,n)}return k}})},13337:function(n,t,e){e.d(t,{D:function(){return u}});var r=e(67897),o=e(15441),s=e(30565),a=e(28189),i=e(62198);const u=(0,e(70929).op)({greaterEqual_:function(n,t){let e=(0,a.YT)(n,"a","greaterEqual"),u=(0,a.YT)(t,"b","greaterEqual");[e,u]=(0,s.makeTypesMatch)(e,u),(0,i.Ky)(e.shape,u.shape);const c={a:e,b:u};return r.T2.runKernel(o.lL,c)}})},13789:function(n,t,e){e.d(t,{n:function(){return i}});var r=e(67897),o=e(15441),s=e(28189),a=e(62198);const i=(0,e(70929).op)({logicalAnd_:function(n,t){const e=(0,s.YT)(n,"a","logicalAnd","bool"),i=(0,s.YT)(t,"b","logicalAnd","bool");(0,a.Ky)(e.shape,i.shape);const u={a:e,b:i};return r.T2.runKernel(o.RU,u)}})},14349:function(n,t,e){e.d(t,{e:function(){return c}});var r=e(67897),o=e(15441),s=e(28189),a=e(45119),i=e(70929),u=e(62302);const c=(0,i.op)({maxPool3d_:function(n,t=[1,1,1],e,i,c,l="NDHWC"){const p=(0,s.YT)(n,"x","maxPool3d");let d=p,h=!1;4===p.rank&&(h=!0,d=(0,u.t)(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),a.vA(5===d.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${d.rank}.`)),a.vA("NDHWC"===l,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${l}`)),null!=c&&a.vA(a.E6(i),(()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${c} but got pad ${i}.`));const f={x:d},m={filterSize:t,strides:e,pad:i,dimRoundingMode:c,dataFormat:l},g=r.T2.runKernel(o.yS,f,m);return h?(0,u.t)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}})},15027:function(n,t,e){e.d(t,{O:function(){return c}});var r=e(65703),o=e(61411),s=e(62302),a=e(50259),i=e(28189),u=e(45119);function c(n,t,{indexing:e="xy"}={}){if("xy"!==e&&"ij"!==e)throw new TypeError(`${e} is not a valid third argument to meshgrid`);if(void 0===n)return[];let c=(0,i.YT)(n,"x","meshgrid",n instanceof a.qY?n.dtype:"float32");if(void 0===t)return[c];let l=(0,i.YT)(t,"y","meshgrid",t instanceof a.qY?t.dtype:"float32");const p=(0,u.Ze)(c.shape),d=(0,u.Ze)(l.shape);return"xy"===e?(c=(0,s.t)(c,[1,-1]),l=(0,s.t)(l,[-1,1]),[(0,r.N)((0,o.S)([d,1],c.dtype),c),(0,r.N)(l,(0,o.S)([1,p],l.dtype))]):(c=(0,s.t)(c,[-1,1]),l=(0,s.t)(l,[1,-1]),[(0,r.N)(c,(0,o.S)([1,d],c.dtype)),(0,r.N)((0,o.S)([p,1],l.dtype),l)])}},15606:function(n,t,e){e.d(t,{R:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({floor_:function(n){const t={x:(0,s.YT)(n,"x","floor")};return r.T2.runKernel(o.Zg,t)}})},19925:function(n,t,e){e.d(t,{r:function(){return u}});var r=e(28189),o=e(62198),s=e(13789),a=e(89881),i=e(9879);const u=(0,e(70929).op)({logicalXor_:function(n,t){const e=(0,r.YT)(n,"a","logicalXor","bool"),u=(0,r.YT)(t,"b","logicalXor","bool");return(0,o.Ky)(e.shape,u.shape),(0,s.n)((0,i.z)(n,t),(0,a.N)((0,s.n)(n,t)))}})},21780:function(n,t,e){e.d(t,{_:function(){return f}});var r=e(28189),o=e(45119),s=e(37523),a=e(44010),i=e(27084),u=e(9258),c=e(96522),l=e(70929),p=e(45702),d=e(77126),h=e(69533);const f=(0,l.op)({logLoss_:function(n,t,e,l=1e-7,f=i.i.SUM_BY_NONZERO_WEIGHTS){const m=(0,r.YT)(n,"labels","logLoss"),g=(0,r.YT)(t,"predictions","logLoss");let T=null;null!=e&&(T=(0,r.YT)(e,"weights","logLoss")),(0,o.O3)(m.shape,g.shape,"Error in logLoss: ");const b=(0,p.d)(1),v=(0,p.d)(l),k=(0,c.H)((0,u.l)(m,(0,a.R)((0,s.W)(g,v)))),x=(0,u.l)((0,d.j)(b,m),(0,a.R)((0,s.W)((0,d.j)(b,g),v))),E=(0,d.j)(k,x);return(0,h.M)(E,T,f)}})},22150:function(n,t,e){e.d(t,{b:function(){return c}});var r=e(28189),o=e(45119),s=e(27084),a=e(70929),i=e(53427),u=e(69533);const c=(0,a.op)({meanSquaredError_:function(n,t,e,a=s.i.SUM_BY_NONZERO_WEIGHTS){const c=(0,r.YT)(n,"labels","meanSquaredError"),l=(0,r.YT)(t,"predictions","meanSquaredError");let p=null;null!=e&&(p=(0,r.YT)(e,"weights","meanSquaredError")),(0,o.O3)(c.shape,l.shape,"Error in meanSquaredError: ");const d=(0,i.P)(c,l);return(0,u.M)(d,p,a)}})},23938:function(n,t,e){e.d(t,{d:function(){return i}});var r=e(67897),o=e(15441),s=e(28189),a=e(45119);const i=(0,e(70929).op)({maxPoolGrad_:function(n,t,e,i,u,c,l){const p=(0,s.YT)(n,"dy","maxPoolGrad"),d=(0,s.YT)(t,"input","maxPoolGrad"),h=(0,s.YT)(e,"output","maxPoolGrad");a.vA(d.rank===p.rank,(()=>`Rank of input (${d.rank}) does not match rank of dy (${p.rank})`)),a.vA(4===p.rank,(()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${p.rank}.`)),a.vA(4===d.rank,(()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${d.rank}.`)),null!=l&&a.vA(a.E6(c),(()=>`Error in maxPoolGrad: pad must be an integer when using, dimRoundingMode ${l} but got pad ${c}.`));const f={dy:p,input:d,output:h},m={filterSize:i,strides:u,pad:c,dimRoundingMode:l};return r.T2.runKernel(o.RX,f,m)}})},27084:function(n,t,e){var r;e.d(t,{i:function(){return r}}),function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},28304:function(n,t,e){e.d(t,{s:function(){return c}});var r=e(67897),o=e(15441),s=e(28189),a=e(45119),i=e(70929),u=e(62302);const c=(0,i.op)({maxPool3dGrad_:function(n,t,e,i,c,l,p){const d=(0,s.YT)(n,"dy","maxPool3dGrad"),h=(0,s.YT)(t,"input","maxPool3dGrad"),f=(0,s.YT)(e,"output","maxPool3dGrad");let m=d,g=h,T=f,b=!1;4===h.rank&&(b=!0,m=(0,u.t)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]]),g=(0,u.t)(h,[1,h.shape[0],h.shape[1],h.shape[2],h.shape[3]]),T=(0,u.t)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]])),a.vA(5===m.rank,(()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${m.rank}.`)),a.vA(5===g.rank,(()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${g.rank}.`)),a.vA(5===T.rank,(()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${T.rank}.`)),null!=p&&a.vA(a.E6(l),(()=>`Error in maxPool3dGrad: pad must be an integer when using, dimRoundingMode ${p} but got pad ${l}.`));const v={dy:m,input:g,output:T},k={filterSize:i,strides:c,pad:l,dimRoundingMode:p},x=r.T2.runKernel(o.cH,v,k);return b?(0,u.t)(x,[x.shape[1],x.shape[2],x.shape[3],x.shape[4]]):x}})},30099:function(n,t,e){e.d(t,{N:function(){return m}});var r=e(67897),o=e(31830),s=e(15441),a=e(30565),i=e(28189),u=e(45119),c=e(37523),l=e(62198),p=e(68646),d=e(65703),h=e(70929),f=e(62302);const m=(0,h.op)({fusedMatMul_:function({a:n,b:t,transposeA:e=!1,transposeB:h=!1,bias:m,activation:g="linear",preluActivationWeights:T,leakyreluAlpha:b}){if(!1===(0,p.zE)(r.T2.state.gradientDepth,g)){let r=(0,d.N)(n,t,e,h);return null!=m&&(r=(0,c.W)(r,m)),(0,p.f2)(r,g,T,b)}let v=(0,i.YT)(n,"a","fused matMul"),k=(0,i.YT)(t,"b","fused matMul");[v,k]=(0,a.makeTypesMatch)(v,k);const x=e?v.shape[v.rank-2]:v.shape[v.rank-1],E=h?k.shape[k.rank-1]:k.shape[k.rank-2],Y=e?v.shape[v.rank-1]:v.shape[v.rank-2],y=h?k.shape[k.rank-2]:k.shape[k.rank-1],N=v.shape.slice(0,-2),A=k.shape.slice(0,-2),_=u.Ze(N),$=u.Ze(A);u.vA(v.rank>=2&&k.rank>=2&&v.rank===k.rank,(()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${v.rank} and ${k.rank}.`)),u.vA(u.r1(N,A),(()=>`Error in fused matMul: outer dimensions (${N}) and (${A}) of Tensors with shapes ${v.shape} and ${k.shape} must match.`)),u.vA(x===E,(()=>`Error in fused matMul: inner shapes (${x}) and (${E}) of Tensors with shapes ${v.shape} and ${k.shape} and transposeA=${e} and transposeB=${h} must match.`));const S=v.shape.slice(0,-2).concat([Y,y]),w=e?(0,f.t)(v,[_,x,Y]):(0,f.t)(v,[_,Y,x]),M=h?(0,f.t)(k,[$,y,E]):(0,f.t)(k,[$,E,y]);let K,R;null!=m&&(K=(0,i.YT)(m,"bias","fused matMul"),[K]=(0,a.makeTypesMatch)(K,v),l.Ky(S,K.shape)),null!=T&&(R=(0,i.YT)(T,"prelu weights","fused matMul"));const z=(n,t)=>{const[r,o,s,a]=t,i=(0,p.XB)((0,f.t)(n,s.shape),s,g);let u,c;if(e||h?!e&&h?(u=(0,d.N)(i,o,!1,!1),c=(0,d.N)(i,r,!0,!1)):e&&!h?(u=(0,d.N)(o,i,!1,!0),c=(0,d.N)(r,i,!1,!1)):(u=(0,d.N)(o,i,!0,!0),c=(0,d.N)(i,r,!0,!0)):(u=(0,d.N)(i,o,!1,!0),c=(0,d.N)(r,i,!0,!1)),null!=m){return[u,c,(0,p.Do)(a,i)]}return[u,c]},O={a:w,b:M,bias:K,preluActivationWeights:R},I={transposeA:e,transposeB:h,activation:g,leakyreluAlpha:b};if(null==m){const n=(0,o._X)(((n,t,e)=>{const o=r.T2.runKernel(s.Dr,O,I);return e([n,t,o]),{value:(0,f.t)(o,S),gradFunc:z}}));return n(w,M)}{const n=(0,o._X)(((n,t,e,o)=>{const a=r.T2.runKernel(s.Dr,O,I);return o([n,t,a,e]),{value:(0,f.t)(a,S),gradFunc:z}}));return n(w,M,K)}}})},30178:function(n,t,e){e.d(t,{P:function(){return c}});var r=e(67897),o=e(15441),s=e(30565),a=e(28189),i=e(62198),u=e(29809);const c=(0,e(70929).op)({maximum_:function(n,t){let e=(0,a.YT)(n,"a","maximum"),c=(0,a.YT)(t,"b","maximum");[e,c]=(0,s.makeTypesMatch)(e,c),"bool"===e.dtype&&(e=(0,u.w)(e,"int32"),c=(0,u.w)(c,"int32")),(0,i.Ky)(e.shape,c.shape);const l={a:e,b:c};return r.T2.runKernel(o.LD,l)}})},31951:function(n,t,e){e.d(t,{C:function(){return i}});var r=e(67897),o=e(15441),s=e(28189),a=e(45119);const i=(0,e(70929).op)({cropAndResize_:function(n,t,e,i,u="bilinear",c=0){const l=(0,s.YT)(n,"image","cropAndResize"),p=(0,s.YT)(t,"boxes","cropAndResize","float32"),d=(0,s.YT)(e,"boxInd","cropAndResize","int32"),h=p.shape[0];a.vA(4===l.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${l.rank}.`)),a.vA(2===p.rank&&4===p.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${h},4] but had shape ${p.shape}.`)),a.vA(1===d.rank&&d.shape[0]===h,(()=>`Error in cropAndResize: boxInd must be have size [${h}] but had shape ${p.shape}.`)),a.vA(2===i.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${i.length}.`)),a.vA(i[0]>=1&&i[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${i}`)),a.vA("bilinear"===u||"nearest"===u,(()=>`method must be bilinear or nearest, but was ${u}`));const f={image:l,boxes:p,boxInd:d},m={method:u,extrapolationValue:c,cropSize:i};return r.T2.runKernel(o.MR,f,m)}})},33454:function(n,t,e){e.d(t,{E:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({isInf_:function(n){const t={x:(0,s.YT)(n,"x","isInf")};return r.T2.runKernel(o.E3,t)}})},35040:function(n,t,e){e.d(t,{n:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({imag_:function(n){const t={input:(0,s.YT)(n,"input","imag")};return r.T2.runKernel(o.dv,t)}})},36359:function(n,t,e){e.d(t,{x:function(){return T}});var r=e(28189),o=e(45119),s=e(13337),a=e(56508),i=e(13789),u=e(70929),c=e(44645),l=e(62302),p=e(45702),d=e(54268),h=e(77126),f=e(67261),m=e(12151),g=e(42855);const T=(0,u.op)({bandPart_:function(n,t,e){(0,o.vA)(t%1===0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),(0,o.vA)(e%1===0,(()=>`bandPart(): numUpper must be an integer, got ${e}.`));const u=(0,r.YT)(n,"a","bandPart");(0,o.vA)(u.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${u.rank}.`));const T=u.shape,[b,v]=u.shape.slice(-2);if(!(t<=b))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${b}).`);if(!(e<=v))throw new Error(`bandPart(): numUpper (${e}) must not be greater than the number of columns (${v}).`);t<0&&(t=b),e<0&&(e=v);const k=(0,l.t)((0,c.y)(0,b,1,"int32"),[-1,1]),x=(0,c.y)(0,v,1,"int32"),E=(0,h.j)(k,x),Y=(0,i.n)((0,a.I)(E,(0,p.d)(+t,"int32")),(0,s.D)(E,(0,p.d)(-e,"int32"))),y=(0,g.U)([b,v],u.dtype);return(0,l.t)((0,d.t)((0,f.K)((0,l.t)(u,[-1,b,v])).map((n=>(0,m._)(Y,n,y)))),T)}})},39417:function(n,t,e){e.d(t,{l:function(){return d}});var r=e(28189),o=e(45119),s=e(27084),a=e(9258),i=e(70929),u=e(45702),c=e(77126),l=e(83791),p=e(69533);const d=(0,i.op)({cosineDistance_:function(n,t,e,i,d=s.i.SUM_BY_NONZERO_WEIGHTS){const h=(0,r.YT)(n,"labels","cosineDistance"),f=(0,r.YT)(t,"predictions","cosineDistance");let m=null;null!=i&&(m=(0,r.YT)(i,"weights","cosineDistance")),(0,o.O3)(h.shape,f.shape,"Error in cosineDistance: ");const g=(0,u.d)(1),T=(0,c.j)(g,(0,l.c)((0,a.l)(h,f),e,!0));return(0,p.M)(T,m,d)}})},40718:function(n,t,e){e.d(t,{c:function(){return m}});var r=e(28189),o=e(45119),s=e(4888),a=e(37523),i=e(27084),u=e(12644),c=e(9258),l=e(70929),p=e(45702),d=e(45793),h=e(77126),f=e(69533);const m=(0,l.op)({huberLoss_:function(n,t,e,l=1,m=i.i.SUM_BY_NONZERO_WEIGHTS){const g=(0,r.YT)(n,"labels","huberLoss"),T=(0,r.YT)(t,"predictions","huberLoss");let b=null;null!=e&&(b=(0,r.YT)(e,"weights","huberLoss")),(0,o.O3)(g.shape,T.shape,"Error in huberLoss: ");const v=(0,p.d)(l),k=(0,s.t)((0,h.j)(T,g)),x=(0,u.B)(k,v),E=(0,h.j)(k,x),Y=(0,a.W)((0,c.l)((0,p.d)(.5),(0,d.E)(x)),(0,c.l)(v,E));return(0,f.M)(Y,b,m)}})},41938:function(n,t,e){e.d(t,{T:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({max_:function(n,t=null,e=!1){const a={x:(0,s.YT)(n,"x","max")},i={reductionIndices:t,keepDims:e};return r.T2.runKernel(o.VA,a,i)}})},42164:function(n,t,e){e.r(t),e.d(t,{conv2d:function(){return r.X},depthwiseConv2d:function(){return o.G},matMul:function(){return s.N}});var r=e(93502),o=e(91624),s=e(30099)},42954:function(n,t,e){e.d(t,{b:function(){return c}});var r=e(67897),o=e(15441),s=e(28189),a=e(45119),i=e(70929),u=e(62302);const c=(0,i.op)({resizeNearestNeighbor_:function(n,t,e=!1,i=!1){const c=(0,s.YT)(n,"images","resizeNearestNeighbor");a.vA(3===c.rank||4===c.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${c.rank}.`)),a.vA(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),a.vA("float32"===c.dtype||"int32"===c.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),a.vA(!1===i||!1===e,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let l=c,p=!1;3===c.rank&&(p=!0,l=(0,u.t)(c,[1,c.shape[0],c.shape[1],c.shape[2]]));const[]=t,d={images:l},h={alignCorners:e,halfPixelCenters:i,size:t},f=r.T2.runKernel(o.jO,d,h);return p?(0,u.t)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}})},44010:function(n,t,e){e.d(t,{R:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({log_:function(n){const t={x:(0,s.YT)(n,"x","log")};return r.T2.runKernel(o.M3,t)}})},44711:function(n,t,e){e.d(t,{v:function(){return c}});var r=e(67897),o=e(15441),s=e(28189),a=e(45119),i=e(70929),u=e(62302);const c=(0,i.op)({resizeBilinear_:function(n,t,e=!1,i=!1){const c=(0,s.YT)(n,"images","resizeBilinear");a.vA(3===c.rank||4===c.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${c.rank}.`)),a.vA(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),a.vA(!1===i||!1===e,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let l=c,p=!1;3===c.rank&&(p=!0,l=(0,u.t)(c,[1,c.shape[0],c.shape[1],c.shape[2]]));const[]=t,d={images:l},h={alignCorners:e,halfPixelCenters:i,size:t},f=r.T2.runKernel(o.hg,d,h);return p?(0,u.t)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}})},45243:function(n,t,e){e.d(t,{R:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({maxPoolWithArgmax_:function(n,t,e,a,i=!1){const u={x:(0,s.YT)(n,"x","maxPoolWithArgmax")},c={filterSize:t,strides:e,pad:a,includeBatchInIndex:i},l=r.T2.runKernel(o.TL,u,c);return{result:l[0],indexes:l[1]}}})},46545:function(n,t,e){e.d(t,{m:function(){return s}});var r=e(67897),o=e(15441);function s(n,t,e){if(e<=0)throw new Error("The number of values should be positive.");const s={start:n,stop:t,num:e};return r.T2.runKernel(o.mn,{},s)}},48229:function(n,t,e){e.d(t,{k:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({gather_:function(n,t,e=0,a=0){const i={x:(0,s.YT)(n,"x","gather"),indices:(0,s.YT)(t,"indices","gather","int32")},u={axis:e,batchDims:a};return r.T2.runKernel(o.mx,i,u)}})},55598:function(n,t,e){e.d(t,{S:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({gatherND_:function(n,t){const e=(0,s.YT)(t,"indices","gatherND","int32"),a={params:(0,s.YT)(n,"x","gatherND"),indices:e};return r.T2.runKernel(o.O4,a)}})},56248:function(n,t,e){e.d(t,{L:function(){return i}});var r=e(67897),o=e(15441),s=e(28189),a=e(68712);const i=(0,e(70929).op)({nonMaxSuppression_:function(n,t,e,i=.5,u=Number.NEGATIVE_INFINITY){const c=(0,s.YT)(n,"boxes","nonMaxSuppression"),l=(0,s.YT)(t,"scores","nonMaxSuppression"),p=(0,a.W)(c,l,e,i,u),d={maxOutputSize:e=p.maxOutputSize,iouThreshold:i=p.iouThreshold,scoreThreshold:u=p.scoreThreshold};return r.T2.runKernel(o.SD,{boxes:c,scores:l},d)}})},56508:function(n,t,e){e.d(t,{I:function(){return u}});var r=e(67897),o=e(15441),s=e(30565),a=e(28189),i=e(62198);const u=(0,e(70929).op)({lessEqual_:function(n,t){let e=(0,a.YT)(n,"a","lessEqual"),u=(0,a.YT)(t,"b","lessEqual");[e,u]=(0,s.makeTypesMatch)(e,u),(0,i.Ky)(e.shape,u.shape);const c={a:e,b:u};return r.T2.runKernel(o.Cw,c)}})},57436:function(n,t,e){e.d(t,{j:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({min_:function(n,t=null,e=!1){const a={x:(0,s.YT)(n,"x","min")},i={axis:t,keepDims:e};return r.T2.runKernel(o.lN,a,i)}})},58687:function(n,t,e){e.d(t,{k:function(){return T}});var r=e(28189),o=e(45119),s=e(4888),a=e(37523),i=e(8631),u=e(12015),c=e(27084),l=e(9258),p=e(96522),d=e(70929),h=e(90112),f=e(45702),m=e(77126),g=e(69533);const T=(0,d.op)({sigmoidCrossEntropy_:function(n,t,e,d=0,T=c.i.SUM_BY_NONZERO_WEIGHTS){let b=(0,r.YT)(n,"multiClassLabels","sigmoidCrossEntropy");const v=(0,r.YT)(t,"logits","sigmoidCrossEntropy");let k=null;if(null!=e&&(k=(0,r.YT)(e,"weights","sigmoidCrossEntropy")),(0,o.O3)(b.shape,v.shape,"Error in sigmoidCrossEntropy: "),d>0){const n=(0,f.d)(d),t=(0,f.d)(1),e=(0,f.d)(.5);b=(0,a.W)((0,l.l)(b,(0,m.j)(t,n)),(0,l.l)(e,n))}const x=function(n,t){const e=(0,r.YT)(n,"labels","sigmoidCrossEntropyWithLogits"),c=(0,r.YT)(t,"logits","sigmoidCrossEntropyWithLogits");(0,o.O3)(e.shape,c.shape,"Error in sigmoidCrossEntropyWithLogits: ");const d=(0,h.V)(c),f=(0,l.l)(c,e),g=(0,u.K)((0,i.o)((0,p.H)((0,s.t)(c))));return(0,a.W)((0,m.j)(d,f),g)}(b,v);return(0,g.M)(x,k,T)}})},60152:function(n,t,e){e.d(t,{z:function(){return i}});var r=e(67897),o=e(15441),s=e(30565),a=e(28189);const i=(0,e(70929).op)({mod_:function(n,t){let e=(0,a.YT)(n,"a","mod"),i=(0,a.YT)(t,"b","mod");[e,i]=(0,s.makeTypesMatch)(e,i);const u={a:e,b:i};return r.T2.runKernel(o.BL,u)}})},61303:function(n,t,e){e.d(t,{M:function(){return u}});var r=e(67897),o=e(15441),s=e(30565),a=e(28189),i=e(62198);const u=(0,e(70929).op)({less_:function(n,t){let e=(0,a.YT)(n,"a","less"),u=(0,a.YT)(t,"b","less");[e,u]=(0,s.makeTypesMatch)(e,u),(0,i.Ky)(e.shape,u.shape);const c={a:e,b:u};return r.T2.runKernel(o.mI,c)}})},62058:function(n,t,e){e.d(t,{r:function(){return u}});var r=e(67897),o=e(15441),s=e(30565),a=e(28189),i=e(62198);const u=(0,e(70929).op)({greater_:function(n,t){let e=(0,a.YT)(n,"a","greater"),u=(0,a.YT)(t,"b","greater");[e,u]=(0,s.makeTypesMatch)(e,u),(0,i.Ky)(e.shape,u.shape);const c={a:e,b:u};return r.T2.runKernel(o.Xh,c)}})},64658:function(n,t,e){e.d(t,{x:function(){return i}});var r=e(67897),o=e(15441),s=e(28189),a=e(45119);const i=(0,e(70929).op)({rotateWithOffset_:function(n,t,e=0,i=.5){const u=(0,s.YT)(n,"image","rotateWithOffset","float32");a.vA(4===u.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${u.rank}.`));const c={image:u},l={radians:t,fillValue:e,center:i};return r.T2.runKernel(o.BK,c,l)}})},65703:function(n,t,e){e.d(t,{N:function(){return i}});var r=e(67897),o=e(15441),s=e(30565),a=e(28189);const i=(0,e(70929).op)({matMul_:function(n,t,e=!1,i=!1){let u=(0,a.YT)(n,"a","matMul"),c=(0,a.YT)(t,"b","matMul");[u,c]=(0,s.makeTypesMatch)(u,c);const l={a:u,b:c},p={transposeA:e,transposeB:i};return r.T2.runKernel(o.jA,l,p)}})},65772:function(n,t,e){e.d(t,{C:function(){return h}});var r=e(30565),o=e(28189),s=e(45119),a=e(37523),i=e(89359),u=e(9258),c=e(70929),l=e(98990),p=e(45702),d=e(77126);const h=(0,c.op)({movingAverage_:function(n,t,e,c,h=!0){const f=(0,o.YT)(n,"v","movingAverage"),m=(0,o.YT)(t,"x","movingAverage"),g=(0,o.YT)(e,"decay","movingAverage");(0,r.assertTypesMatch)(f,m),s.vA(s.r1(f.shape,m.shape),(()=>"Shape mismatch in v and x"));const T=(0,p.d)(1),b=(0,d.j)(T,g);let v=(0,u.l)((0,d.j)(m,f),b);if(h){s.vA(null!=c,(()=>"When using zeroDebias: true, step is required."));const n=(0,o.YT)(c,"step","movingAverage");v=(0,i.y)(v,(0,d.j)(T,(0,l.n)(g,n)))}return(0,a.W)(f,v)}})},66567:function(n,t,e){e.d(t,{F:function(){return i}});var r=e(67897),o=e(15441),s=e(28189),a=e(45119);const i=(0,e(70929).op)({mirrorPad_:function(n,t,e){a.vA("reflect"===e||"symmetric"===e,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${e}.`));const i=(0,s.YT)(n,"x","mirrorPad");if(0===i.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");a.vA(t.length===i.rank,(()=>`Padding doesn't match input. Must be ${i.rank}. Got ${t.length}.`));const u="reflect"===e?1:0;for(let r=0;r<i.rank;r++)a.vA(2===t[r].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),a.vA(t[r][0]>=0&&t[r][0]<=i.shape[r]-u&&t[r][1]>=0&&t[r][1]<=i.shape[r]-u,(()=>`Padding in dimension ${r} cannot be greater than or equal to ${i.shape[r]-u} or less than 0 for input of shape ${i.shape}`));const c={paddings:t,mode:e},l={x:i};return r.T2.runKernel(o.x7,l,c)}})},66919:function(n,t,e){e.d(t,{H:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({leakyRelu_:function(n,t=.2){const e={x:(0,s.YT)(n,"x","leakyRelu")},a={alpha:t};return r.T2.runKernel(o.X0,e,a)}})},68318:function(n,t,e){e.d(t,{M:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({isFinite_:function(n){const t={x:(0,s.YT)(n,"x","isFinite")};return r.T2.runKernel(o.gI,t)}})},68646:function(n,t,e){e.d(t,{Do:function(){return m},XB:function(){return f},f2:function(){return g},zE:function(){return T}});var r=e(62198),o=e(83416),s=e(66919),a=e(9258),i=e(64394),u=e(90112),c=e(83732),l=e(62302),p=e(28968),d=e(10700),h=e(83791);function f(n,t,e){if(null==e||"linear"===e)return n;if("relu"===e)return(0,a.l)(n,(0,d.P)(t));throw new Error(`Cannot compute gradient for fused activation ${e}.`)}function m(n,t){let e=t;const o=r.Lx(n.shape,t.shape);return o.length>0&&(e=(0,h.c)(e,o)),(0,l.t)(e,n.shape)}function g(n,t,e,r){if("linear"===t)return n;if("relu"===t)return(0,u.V)(n);if("elu"===t)return(0,o.P)(n);if("relu6"===t)return(0,c.j)(n);if("prelu"===t)return(0,i.N)(n,e);if("leakyrelu"===t)return(0,s.H)(n,r);if("sigmoid"===t)return(0,p.r)(n);throw new Error(`Unknown fused activation ${t}.`)}const T=(n,t)=>!(n>0)||"linear"===t},69533:function(n,t,e){e.d(t,{M:function(){return f}});var r=e(28189),o=e(29809),s=e(89359),a=e(27084),i=e(12611),u=e(9258),c=e(42118),l=e(61411),p=e(70929),d=e(45702),h=e(83791);const f=(0,p.op)({computeWeightedLoss_:function(n,t,e=a.i.SUM_BY_NONZERO_WEIGHTS){const p=(0,r.YT)(n,"losses","computeWeightedLoss");let f=null;null!=t&&(f=(0,r.YT)(t,"weights","computeWeightedLoss"));const m=null==f?p:(0,u.l)(p,f);if(e===a.i.NONE)return m;if(e===a.i.SUM)return(0,h.c)(m);if(e===a.i.MEAN){if(null==f)return(0,i.i)(m);{const n=p.size/f.size,t=(0,s.y)((0,h.c)(m),(0,h.c)(f));return n>1?(0,s.y)(t,(0,d.d)(n)):t}}if(e===a.i.SUM_BY_NONZERO_WEIGHTS){if(null==f)return(0,s.y)((0,h.c)(m),(0,d.d)(p.size));{const n=(0,u.l)(f,(0,l.S)(p.shape)),t=(0,o.w)((0,h.c)((0,c.E)(n,(0,d.d)(0))),"float32");return(0,s.y)((0,h.c)(m),t)}}throw Error(`Unknown reduction: ${e}`)}})},69881:function(n,t,e){e.d(t,{C:function(){return x}});var r=e(31830),o=e(28189),s=e(45119),a=e(37523),i=e(21078),u=e(29809),c=e(89359),l=e(8631),p=e(13330),d=e(27084),h=e(9258),f=e(96522),m=e(70929),g=e(62302),T=e(45702),b=e(77126),v=e(83791),k=e(69533);const x=(0,m.op)({softmaxCrossEntropy_:function(n,t,e,m=0,x=d.i.SUM_BY_NONZERO_WEIGHTS){let E=(0,o.YT)(n,"onehotLabels","softmaxCrossEntropy");const Y=(0,o.YT)(t,"logits","softmaxCrossEntropy");let y=null;if(null!=e&&(y=(0,o.YT)(e,"weights","softmaxCrossEntropy")),(0,s.O3)(E.shape,Y.shape,"Error in softmaxCrossEntropy: "),m>0){const n=(0,T.d)(m),t=(0,T.d)(1),e=(0,T.d)(E.shape[1]);E=(0,a.W)((0,h.l)(E,(0,b.j)(t,n)),(0,c.y)(n,e))}const N=function(n,t,e=-1){if(-1===e&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${e}`);const o=(0,r._X)(((n,t,r)=>{const o=(0,p.V)(t,[e],!0),s=(0,b.j)((0,u.w)(t,"float32"),o);r([n,s]);const a=(0,f.H)((0,h.l)(s,n));return{value:(0,v.c)(a,[e]),gradFunc:(n,t)=>{const[r,o]=t,s=(0,i.SM)(n.shape,[e]);return[(0,h.l)((0,g.t)(n,s),(0,b.j)((0,u.w)(r,"float32"),(0,l.o)(o))),(0,h.l)((0,g.t)(n,s),(0,b.j)((0,l.o)(o),(0,u.w)(r,"float32")))]}}}));return o(n,t)}(E,Y);return(0,k.M)(N,y,x)}})},70215:function(n,t,e){e.d(t,{z:function(){return i}});var r=e(8360),o=e(28189),s=e(68712),a=e(62018);const i=async function(n,t,e,i=.5,u=Number.NEGATIVE_INFINITY){const c=(0,o.YT)(n,"boxes","nonMaxSuppressionAsync"),l=(0,o.YT)(t,"scores","nonMaxSuppressionAsync"),p=(0,s.W)(c,l,e,i,u);e=p.maxOutputSize,i=p.iouThreshold,u=p.scoreThreshold;const d=await Promise.all([c.data(),l.data()]),h=d[0],f=d[1],{selectedIndices:m}=(0,r.c7)(h,f,e,i,u);return c!==n&&c.dispose(),l!==t&&l.dispose(),(0,a.t)(m,"int32")}},70327:function(n,t,e){e.d(t,{Z:function(){return d}});var r=e(28189),o=e(45119),s=e(27084),a=e(9258),i=e(70929),u=e(90112),c=e(45702),l=e(77126),p=e(69533);const d=(0,i.op)({hingeLoss_:function(n,t,e,i=s.i.SUM_BY_NONZERO_WEIGHTS){let d=(0,r.YT)(n,"labels","hingeLoss");const h=(0,r.YT)(t,"predictions","hingeLoss");let f=null;null!=e&&(f=(0,r.YT)(e,"weights","hingeLoss")),(0,o.O3)(d.shape,h.shape,"Error in hingeLoss: ");const m=(0,c.d)(1);d=(0,l.j)((0,a.l)((0,c.d)(2),d),m);const g=(0,u.V)((0,l.j)(m,(0,a.l)(d,h)));return(0,p.M)(g,f,i)}})},71781:function(n,t,e){e.d(t,{O:function(){return u}});var r=e(67897),o=e(15441),s=e(28189),a=e(70929),i=e(62302);const u=(0,a.op)({multinomial_:function(n,t,e,a=!1){const u=(0,s.YT)(n,"logits","multinomial"),c=u.size,l=u.rank;if(c<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${c}.`);if(l>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${l}`);e=e||Math.random();const p={logits:1===l?(0,i.t)(u,[1,-1]):u},d={numSamples:t,seed:e,normalized:a},h=r.T2.runKernel(o.WT,p,d);return 1===l?(0,i.t)(h,[h.size]):h}})},71892:function(n,t,e){e.d(t,{u:function(){return s}});var r=e(67897),o=e(15441);const s=(0,e(70929).op)({localResponseNormalizationBackprop_:function(n,t,e,s=5,a=1,i=1,u=.5){const c={x:n,y:t,dy:e},l={depthRadius:s,bias:a,alpha:i,beta:u};return r.T2.runKernel(o.To,c,l)}})},73866:function(n,t,e){e.d(t,{n:function(){return i}});var r=e(67897),o=e(15441),s=e(28189),a=e(45119);const i=(0,e(70929).op)({flipLeftRight_:function(n){const t=(0,s.YT)(n,"image","flipLeftRight","float32");a.vA(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const e={image:t};return r.T2.runKernel(o.Bx,e,{})}})},76304:function(n,t,e){e.d(t,{i:function(){return f}});var r=e(67897),o=e(45119),s=e(89359),a=e(9258),i=e(92596),u=e(70929),c=e(66512),l=e(5932),p=e(54268),d=e(77126),h=e(83791);const f=(0,u.op)({gramSchmidt_:function(n){let t;if(Array.isArray(n)){t=!1,(0,o.vA)(null!=n&&n.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const e=n[0].shape[0];for(let t=1;t<n.length;++t)(0,o.vA)(n[t].shape[0]===e,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${n[t].shape[0]} vs. ${e})`))}else t=!0,n=(0,c.l)(n,n.shape[0],0).map((n=>(0,l.r)(n,[0])));(0,o.vA)(n.length<=n[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${n.length}) exceeds number of dimensions (${n[0].shape[0]}).`));const e=[],u=n;for(let o=0;o<n.length;++o)e.push(r.T2.tidy((()=>{let n=u[o];if(o>0)for(let t=0;t<o;++t){const r=(0,a.l)((0,h.c)((0,a.l)(e[t],n)),e[t]);n=(0,d.j)(n,r)}return(0,s.y)(n,(0,i.x)(n,"euclidean"))})));return t?(0,p.t)(e,0):e}})},80525:function(n,t,e){e.d(t,{E:function(){return Y}});var r=e(62018),o=e(70929),s=e(29809),a=e(66512),i=e(40758),u=e(56508),c=e(62058),l=e(83791),p=e(37523),d=e(9258),h=e(89359),f=e(77126),m=e(25912),g=e(12151),T=e(96111),b=e(17986),v=e(44645),k=e(74027),x=e(45119),E=e(28189);const Y=(0,o.op)({threshold_:function(n,t="binary",e=!1,o=.5){const Y=(0,E.YT)(n,"image","threshold"),y=Y.shape[0]*Y.shape[1];let N,A,_,$,S=(0,d.l)((0,r.t)([o]),255);if(x.vA(3===Y.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${Y.rank}.`)),x.vA(3===Y.shape[2]||1===Y.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${Y.shape[2]}.`)),x.vA("int32"===Y.dtype||"float32"===Y.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${Y.dtype}.`)),x.vA("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===Y.shape[2]){[N,A,_]=(0,a.l)(Y,[1,1,1],-1);const n=(0,d.l)(N,.2989),t=(0,d.l)(A,.587),e=(0,d.l)(_,.114);$=(0,p.W)((0,p.W)(n,t),e)}else $=n;if("otsu"===t){S=function(n,t){let e,o,s,a,i,u,m=(0,r.t)([-1]),k=(0,r.t)([0]),x=(0,r.t)([0]);for(let E=0;E<n.size-1;E++){e=(0,b.d)(n,0,E+1),o=(0,b.d)(n,E+1),i=(0,h.y)((0,l.c)(e),t),u=(0,h.y)((0,l.c)(o),t);const Y=(0,l.c)((0,d.l)(e,(0,v.y)(0,e.size)));s=(0,h.y)(Y,(0,l.c)(e));const y=(0,T.G)(o.shape,e.size),N=(0,p.W)((0,v.y)(0,o.size),y),A=(0,d.l)(o,N);a=(0,h.y)((0,l.c)(A),(0,l.c)(o));const _=(0,f.j)(s,a),$=(0,f.j)(s,a),S=(0,d.l)(i,u);x=(0,d.l)((0,d.l)(S,_),$);const w=(0,c.r)(x,k);k=(0,g._)(w,x,k),m=(0,g._)(w,(0,r.t)([E]),m)}return m}((0,i.H)((0,s.w)((0,m.L)($),"int32"),(0,k.O)([]),256),y)}const w=e?(0,u.I)($,S):(0,c.r)($,S);return(0,s.w)((0,d.l)(w,255),"int32")}})},83869:function(n,t,e){e.r(t),e.d(t,{prepareAndValidate:function(){return o}});var r=e(45119);function o(n,t){const e=n.shape.length,o=t.shape.length;if(e<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${e}.`);if(o<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${o}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[o-1]>e)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[o-1]} vs. ${e}`);if(0===(0,r.Ze)(n.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${n.shape}.`);const s=t.shape,a=s[s.length-1];let i=1;for(let r=0;r<s.length-1;++r)i*=s[r];const u=n.shape,c=s.slice();c.pop();let l=1;for(let r=a;r<e;++r)l*=u[r],c.push(u[r]);const p=[...(0,r.Ur)(n.shape).map((n=>n/l)),1].slice(0,a);return[c,i,l,p]}},84305:function(n,t,e){e.d(t,{H:function(){return i}});var r=e(67897),o=e(15441),s=e(28189),a=e(68712);const i=(0,e(70929).op)({nonMaxSuppressionPadded_:function(n,t,e,i=.5,u=Number.NEGATIVE_INFINITY,c=!1){const l=(0,s.YT)(n,"boxes","nonMaxSuppression"),p=(0,s.YT)(t,"scores","nonMaxSuppression"),d=(0,a.W)(l,p,e,i,u,null),h={boxes:l,scores:p},f={maxOutputSize:d.maxOutputSize,iouThreshold:d.iouThreshold,scoreThreshold:d.scoreThreshold,padToMaxOutputSize:c},m=r.T2.runKernel(o.Zl,h,f);return{selectedIndices:m[0],validOutputs:m[1]}}})},86999:function(n,t,e){e.d(t,{j:function(){return l}});var r=e(67897),o=e(15441),s=e(28189),a=e(45119),i=e(47195),u=e(70929),c=e(62302);const l=(0,u.op)({maxPool_:function(n,t,e,u,l){const p=(0,s.YT)(n,"x","maxPool");let d=p,h=!1;3===p.rank&&(h=!0,d=(0,c.t)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),a.vA(4===d.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${d.rank}.`)),a.vA(i.G0(e,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${e} and dilations '1'`)),null!=l&&a.vA(a.E6(u),(()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${l} but got pad ${u}.`));const f={x:d},m={filterSize:t,strides:e,pad:u,dimRoundingMode:l},g=r.T2.runKernel(o.t3,f,m);return h?(0,c.t)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},88991:function(n,t,e){e.d(t,{w:function(){return i}});var r=e(67897),o=e(15441),s=e(30565),a=e(28189);const i=(0,e(70929).op)({floorDiv_:function(n,t){let e=(0,a.YT)(n,"a","floorDiv"),i=(0,a.YT)(t,"b","floorDiv");[e,i]=(0,s.makeTypesMatch)(e,i);const u={a:e,b:i};return r.T2.runKernel(o.El,u)}})},89535:function(n,t,e){e.d(t,{n:function(){return l}});var r=e(28189),o=e(45119),s=e(4888),a=e(27084),i=e(70929),u=e(77126),c=e(69533);const l=(0,i.op)({absoluteDifference_:function(n,t,e,i=a.i.SUM_BY_NONZERO_WEIGHTS){const l=(0,r.YT)(n,"labels","absoluteDifference"),p=(0,r.YT)(t,"predictions","absoluteDifference");let d=null;null!=e&&(d=(0,r.YT)(e,"weights","absoluteDifference")),(0,o.O3)(l.shape,p.shape,"Error in absoluteDifference: ");const h=(0,s.t)((0,u.j)(l,p));return(0,c.M)(h,d,i)}})},89881:function(n,t,e){e.d(t,{N:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({logicalNot_:function(n){const t={x:(0,s.YT)(n,"x","logicalNot","bool")};return r.T2.runKernel(o.nZ,t)}})},91413:function(n,t,e){e.d(t,{C:function(){return d}});var r=e(28189),o=e(45119),s=e(21078),a=e(29809),i=e(12611),u=e(70929),c=e(62302),l=e(45793),p=e(77126);const d=(0,u.op)({moments_:function(n,t=null,e=!1){n=(0,r.YT)(n,"x","moments");const u=(0,o.Y6)(t,n.shape),d=(0,i.i)(n,u,e);let h=d.shape;e||(h=(0,s.SM)(d.shape,u));const f=(0,l.E)((0,p.j)((0,a.w)(n,"float32"),(0,c.t)(d,h)));return{mean:d,variance:(0,i.i)(f,u,e)}}})},91624:function(n,t,e){e.d(t,{G:function(){return b}});var r=e(67897),o=e(31830),s=e(15441),a=e(30565),i=e(28189),u=e(45119),c=e(37523),l=e(62198),p=e(47195),d=e(10676),h=e(41890),f=e(83134),m=e(68646),g=e(70929),T=e(62302);const b=(0,g.op)({fusedDepthwiseConv2d_:function({x:n,filter:t,strides:e,pad:g,dataFormat:b="NHWC",dilations:v=[1,1],dimRoundingMode:k,bias:x,activation:E="linear",preluActivationWeights:Y,leakyreluAlpha:y}){if(!1===(0,m.zE)(r.T2.state.gradientDepth,E)){let r=(0,d.G)(n,t,e,g,b,v,k);return null!=x&&(r=(0,c.W)(r,x)),(0,m.f2)(r,E,Y,y)}const N=(0,i.YT)(n,"x","depthwiseConv2d"),A=(0,i.YT)(t,"filter","depthwiseConv2d");let _=N,$=!1;3===N.rank&&($=!0,_=(0,T.t)(N,[1,N.shape[0],N.shape[1],N.shape[2]])),u.vA(4===_.rank,(()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${_.rank}.`)),u.vA(4===A.rank,(()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${A.rank}.`)),u.vA(_.shape[3]===A.shape[2],(()=>`Error in fused depthwiseConv2d: number of input channels (${_.shape[3]}) must match the inChannels dimension in filter ${A.shape[2]}.`)),null==v&&(v=[1,1]),u.vA(p.G0(e,v),(()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${e} and dilations '${v}'`)),null!=k&&u.vA(u.E6(g),(()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${k} but got pad ${g}.`));const S=p.uf(_.shape,A.shape,e,v,g,k,!0);let w,M;null!=x&&(w=(0,i.YT)(x,"bias","fused conv2d"),[w]=(0,a.makeTypesMatch)(w,N),l.Ky(S.outShape,w.shape)),null!=Y&&(M=(0,i.YT)(Y,"prelu weights","fused depthwiseConv2d"));const K=(n,t)=>{u.vA(p.Dh(v),(()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${v}'`));const[r,o,s,a]=t,i=(0,m.XB)(n,s,E),c=(0,f.l)(o.shape,i,r,e,g,v,k),l=(0,h.x)(o,i,r.shape,e,g,v,k);if(null!=a){return[c,l,(0,m.Do)(w,i)]}return[c,l]},R={x:_,filter:A,bias:w,preluActivationWeights:M},z={strides:e,pad:g,dataFormat:b,dilations:v,dimRoundingMode:k,activation:E,leakyreluAlpha:y};if(null==x){const n=(0,o._X)(((n,t,e)=>{let o=r.T2.runKernel(s.T7,R,z);return e([t,n,o]),$&&(o=(0,T.t)(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:K}}));return n(_,A)}{const n=(0,o._X)(((n,t,e,o)=>{let a=r.T2.runKernel(s.T7,R,z);return o([t,n,a,e]),$&&(a=(0,T.t)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:K}}));return n(_,A,w)}}})},93502:function(n,t,e){e.d(t,{X:function(){return b}});var r=e(67897),o=e(31830),s=e(15441),a=e(30565),i=e(28189),u=e(45119),c=e(37523),l=e(62198),p=e(28794),d=e(25248),h=e(80252),f=e(47195),m=e(68646),g=e(70929),T=e(62302);const b=(0,g.op)({fusedConv2d_:function({x:n,filter:t,strides:e,pad:g,dataFormat:b="NHWC",dilations:v=[1,1],dimRoundingMode:k,bias:x,activation:E="linear",preluActivationWeights:Y,leakyreluAlpha:y}){if(E=E||"linear",!1===(0,m.zE)(r.T2.state.gradientDepth,E)){let r=(0,p.X)(n,t,e,g,b,v,k);return null!=x&&(r=(0,c.W)(r,x)),(0,m.f2)(r,E,Y,y)}const N=(0,i.YT)(n,"x","conv2d"),A=(0,i.YT)(t,"filter","conv2d");let _=N,$=!1;3===N.rank&&($=!0,_=(0,T.t)(N,[1,N.shape[0],N.shape[1],N.shape[2]])),u.vA(4===_.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${_.rank}.`)),u.vA(4===A.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${A.rank}.`)),null!=k&&u.vA(u.E6(g),(()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${k} but got pad ${g}.`)),u.vA(_.shape[3]===A.shape[2],(()=>`Error in conv2d: depth of input (${_.shape[3]}) must match input depth for filter ${A.shape[2]}.`)),u.vA(f.G0(e,v),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${v}'`)),u.vA("NHWC"===b,(()=>`Error in conv2d: got dataFormat of ${b} but only NHWC is currently supported.`));const S=f.uf(_.shape,A.shape,e,v,g,k);let w,M;null!=x&&(w=(0,i.YT)(x,"bias","fused conv2d"),[w]=(0,a.makeTypesMatch)(w,N),l.Ky(S.outShape,w.shape)),null!=Y&&(M=(0,i.YT)(Y,"prelu weights","fused conv2d"));const K=(n,t)=>{const[r,o,s,a]=t,i=(0,m.XB)(n,s,E);u.vA(f.Dh(v),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${v}'`));const c=[(0,h.v)(o.shape,i,r,e,g),(0,d.H)(o,i,r.shape,e,g)];if(null!=a){const n=(0,m.Do)(a,i);c.push(n)}return c},R={x:_,filter:A,bias:w,preluActivationWeights:M},z={strides:e,pad:g,dataFormat:b,dilations:v,dimRoundingMode:k,activation:E,leakyreluAlpha:y};if(null==x){const n=(0,o._X)(((n,t,e)=>{let o=r.T2.runKernel(s.aA,R,z);return e([t,n,o]),$&&(o=(0,T.t)(o,[o.shape[1],o.shape[2],o.shape[3]])),{value:o,gradFunc:K}}));return n(_,A)}{const n=(0,o._X)(((n,t,e,o)=>{let a=r.T2.runKernel(s.aA,R,z);return o([t,n,a,e]),$&&(a=(0,T.t)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:K}}));return n(_,A,w)}}})},93531:function(n,t,e){e.d(t,{K:function(){return c}});var r=e(67897),o=e(15441),s=e(28189),a=e(45119),i=e(70929),u=e(62302);const c=(0,i.op)({localResponseNormalization_:function(n,t=5,e=1,i=1,c=.5){const l=(0,s.YT)(n,"x","localResponseNormalization");a.vA(4===l.rank||3===l.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${l.rank}.`)),a.vA(a.E6(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let p=l,d=!1;3===l.rank&&(d=!0,p=(0,u.t)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));const h={x:p},f={depthRadius:t,bias:e,alpha:i,beta:c},m=r.T2.runKernel(o.jM,h,f);return d?(0,u.t)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},95634:function(n,t,e){e.d(t,{f:function(){return i}});var r=e(67897),o=e(15441),s=e(28189),a=e(68712);const i=(0,e(70929).op)({nonMaxSuppressionWithScore_:function(n,t,e,i=.5,u=Number.NEGATIVE_INFINITY,c=0){const l=(0,s.YT)(n,"boxes","nonMaxSuppression"),p=(0,s.YT)(t,"scores","nonMaxSuppression"),d=(0,a.W)(l,p,e,i,u,c),h={boxes:l,scores:p},f={maxOutputSize:e=d.maxOutputSize,iouThreshold:i=d.iouThreshold,scoreThreshold:u=d.scoreThreshold,softNmsSigma:c=d.softNmsSigma},m=r.T2.runKernel(o.e0,h,f);return{selectedIndices:m[0],selectedScores:m[1]}}})},95645:function(n,t,e){e.d(t,{n:function(){return l}});var r=e(31830),o=e(28189),s=e(9258),a=e(96522),i=e(70929),u=e(28968),c=e(66030);const l=(0,i.op)({logSigmoid_:function(n){const t=(0,o.YT)(n,"x","logSigmoid");return(0,r._X)((n=>({value:(0,a.H)((0,c.l)((0,a.H)(n))),gradFunc:t=>(0,s.l)(t,(0,u.r)((0,a.H)(n)))})))(t)}})},96111:function(n,t,e){e.d(t,{G:function(){return s}});var r=e(67897),o=e(15441);function s(n,t,e){const s={shape:n,value:t,dtype:e};return r.T2.runKernel(o.SQ,{},s)}},96522:function(n,t,e){e.d(t,{H:function(){return a}});var r=e(67897),o=e(15441),s=e(28189);const a=(0,e(70929).op)({neg_:function(n){const t={x:(0,s.YT)(n,"x","neg")};return r.T2.runKernel(o.l0,t)}})},97991:function(n,t,e){e.d(t,{H:function(){return h}});var r=e(31830),o=e(28189),s=e(29809),a=e(8631),i=e(44010),u=e(41938),c=e(9258),l=e(70929),p=e(77126),d=e(83791);const h=(0,l.op)({logSoftmax_:function(n,t=-1){const e=(0,o.YT)(n,"logits","logSoftmax");if(-1===t&&(t=e.rank-1),t!==e.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and axis was ${t}`);return(0,r._X)(((n,e)=>{const r=(0,u.T)(n,t,!0),o=(0,p.j)(n,r),l=(0,p.j)((0,s.w)(o,"float32"),(0,i.R)((0,d.c)((0,a.o)(o),t,!0)));e([l]);return{value:l,gradFunc:(n,e)=>{const[r]=e,o=(0,a.o)(r);return(0,p.j)(n,(0,c.l)((0,d.c)(n,t,!0),o))}}}))(e)}})}}]);
//# sourceMappingURL=stylist-vendors-e656afa6.f59eddeebdf1337d0c7b.js.map
"use strict";(self.webpackChunkStylistWidget=self.webpackChunkStylistWidget||[]).push([[8140],{19034:function(s,t,e){var n=e(74848),i=e(96540),a=e(71751);t.A=()=>{const[s,t]=(0,i.useState)((0,a.N)()),[e,o]=(0,i.useState)(!1);(0,i.useEffect)((()=>(0,a.Ez)((s=>{t(s)}))),[]);return(0,n.jsxs)("div",Object.assign({className:"stylist-debug-toggle-container"},{children:[e&&(0,n.jsxs)("div",Object.assign({className:"stylist-debug-panel"},{children:[(0,n.jsx)("h4",{children:"Debug Panel"}),(0,n.jsx)("div",Object.assign({className:"stylist-debug-toggle"},{children:(0,n.jsxs)("label",Object.assign({className:"stylist-debug-toggle-label"},{children:[(0,n.jsx)("span",{children:"Debug Mode"}),(0,n.jsx)("div",Object.assign({className:"stylist-debug-toggle-switch "+(s?"active":""),onClick:()=>{const s=(0,a.D2)();t(s)}},{children:(0,n.jsx)("div",{className:"stylist-debug-toggle-slider"})}))]}))})),(0,n.jsxs)("div",Object.assign({className:"stylist-debug-info"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-debug-info-item"},{children:[(0,n.jsx)("span",{children:"Screen Size:"}),(0,n.jsxs)("span",{children:[window.innerWidth,"x",window.innerHeight]})]})),(0,n.jsxs)("div",Object.assign({className:"stylist-debug-info-item"},{children:[(0,n.jsx)("span",{children:"User Agent:"}),(0,n.jsx)("span",Object.assign({className:"stylist-debug-user-agent"},{children:navigator.userAgent}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-debug-info-item"},{children:[(0,n.jsx)("span",{children:"WebGL:"}),(0,n.jsx)("span",{children:(()=>{try{const s=document.createElement("canvas");return s.getContext("webgl")||s.getContext("experimental-webgl")?"Supported":"Not Supported"}catch(s){return"Error Checking"}})()})]}))]}))]})),(0,n.jsx)("button",Object.assign({className:"stylist-debug-button "+(s?"active":""),onClick:()=>{o(!e)},title:"Debug Tools"},{children:(0,n.jsx)("svg",Object.assign({viewBox:"0 0 24 24",width:"24",height:"24"},{children:(0,n.jsx)("path",{fill:"currentColor",d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-4.987-3.744A7.966 7.966 0 0 0 12 20c1.97 0 3.773-.712 5.167-1.892A6.979 6.979 0 0 1 12.16 16a6.981 6.981 0 0 1-5.147 2.256zM5.616 16.82A8.975 8.975 0 0 1 12.16 14a8.972 8.972 0 0 1 6.362 2.634 8 8 0 1 0-12.906.187zM12 13a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"})}))}))]}))}},20148:function(s,t,e){e.d(t,{A:function(){return i}});var n=e(74848);var i=({onClick:s,isSaved:t=!1,label:e="Save",primaryColor:i})=>{const a=i?{backgroundColor:i}:void 0;return(0,n.jsxs)("button",Object.assign({className:"stylist-wishlist-button "+(t?"stylist-wishlist-button--saved":""),onClick:s,style:t?void 0:a},{children:[(0,n.jsx)("span",Object.assign({className:"stylist-wishlist-button__icon"},{children:t?(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})):(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"})}))})),(0,n.jsx)("span",Object.assign({className:"stylist-wishlist-button__label"},{children:t?"Saved":e}))]}))}},30171:function(s,t,e){e.d(t,{A:function(){return c}});var n=e(74848),i=e(96540),a=e(94371),o=e(32330),l=e(35495),r=function(s,t,e,n){return new(e||(e=Promise))((function(i,a){function o(s){try{r(n.next(s))}catch(t){a(t)}}function l(s){try{r(n.throw(s))}catch(t){a(t)}}function r(s){var t;s.done?i(s.value):(t=s.value,t instanceof e?t:new e((function(s){s(t)}))).then(o,l)}r((n=n.apply(s,t||[])).next())}))};var c=({onAddToCart:s,onRemoveFromWishlist:t,onMoveToCloset:e,onItemClick:c,primaryColor:d})=>{const{wishlistItems:u}=(0,a.W0)(),{user:g}=(0,a.kH)(),[m,h]=(0,i.useState)([]),[y,v]=(0,i.useState)(!0);(0,i.useEffect)((()=>{r(void 0,void 0,void 0,(function*(){v(!0);try{const s=u.map((s=>({id:s.itemId,retailerId:s.retailerId,name:s.name||`Product ${s.itemId.substring(0,6)}`,brand:s.brand||"Brand Name",category:s.category||"Clothing",price:s.price||99.99,salePrice:s.salePrice,colors:[],sizes:[],imageUrls:[s.imageUrl||""],url:s.url||"#",matchScore:0,matchReasons:[],inStock:!0,addedToWishlistAt:s.addedAt})));h(s)}catch(s){}finally{v(!1)}}))}),[u]);const j=s=>{t&&t(s)};return(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-tab"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-tab__header"},{children:(0,n.jsx)("h2",Object.assign({className:"stylist-wishlist-tab__title"},{children:"My Wishlist"}))})),y?(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-tab__loading"},{children:[(0,n.jsx)(l.A,{}),(0,n.jsx)("p",{children:"Loading your wishlist..."})]})):0===m.length?(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-tab__empty"},{children:[(0,n.jsx)("p",{children:"Your wishlist is empty."}),(0,n.jsx)("p",{children:"Items you like will be saved here for later."})]})):(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-tab__grid"},{children:m.map((t=>(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-tab__item"},{children:[(0,n.jsx)(o.default,{item:{id:t.id,name:t.name||"",brand:t.brand||"",price:t.price||0,salePrice:t.salePrice,image:t.imageUrls[0]||""},onFavorite:()=>{},isFavorite:!0,onRemove:()=>j(t.id),onClick:()=>(s=>{c&&c(s)})(t),primaryColor:d}),(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-tab__item-actions"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-wishlist-tab__action-btn stylist-wishlist-tab__action-btn--cart",onClick:()=>(t=>{s&&s(t)})(t)},{children:"Add to Cart"})),(0,n.jsx)("button",Object.assign({className:"stylist-wishlist-tab__action-btn stylist-wishlist-tab__action-btn--closet",onClick:()=>(s=>{e&&(e(s),j(s.id))})(t)},{children:"Move to Closet"}))]}))]}),t.id)))}))]}))}},30492:function(s,t,e){var n=e(74848),i=e(96540),a=e(35495),o=e(4879),l=e(20453),r=e(99264);const c=({fallback:s,componentId:t})=>{const e=(0,i.useRef)(performance.now());return(0,i.useEffect)((()=>{const s=performance.now()-e.current;return(0,l.HJ)(`AsyncLoader:${t}`,"fallback",`Suspense fallback rendering for ${t}`,{renderDuration:`${s.toFixed(2)}ms`}),(0,l.Ng)(`SuspenseFallback:${t}`,s,{component:t}),()=>{const s=performance.now()-e.current;(0,l.HJ)(`AsyncLoader:${t}`,"resolved",`Suspense resolved for ${t}`,{totalDuration:`${s.toFixed(2)}ms`,component:t})}}),[t]),(0,n.jsx)(n.Fragment,{children:s})};t.A=({children:s,loadingMessage:t="Loading...",fallback:e,onLoadStart:d,onLoadComplete:u,onLoadError:g})=>{(0,r.Dp)("AsyncComponentLoader");const[m,h]=(0,i.useState)(!1),[y,v]=(0,i.useState)(!1),[j,b]=((0,i.useRef)(null),(0,i.useRef)(null),(0,i.useState)(0)),_=(0,i.useRef)(!0),x=(0,i.useRef)(`async-${Math.random().toString(36).substring(2,9)}`).current,p=(0,i.useRef)(performance.now());(0,l.uy)("AsyncComponentLoader","mount",`AsyncLoader:${x} initialized`,{componentId:x}),(0,r.Im)("AsyncComponentLoader","loadStart",[d],(()=>{d&&o.USE_LAZY_LOADING&&((0,l.at)("AsyncComponentLoader","onLoadStart","init",`Calling onLoadStart callback for ${x}`),d())}));const f=s=>{_.current&&((0,l.Pk)("AsyncComponentLoader",s,{componentStack:`AsyncLoader:${x}`}),g&&g(s),h(!0),setTimeout((()=>{_.current&&((0,l.uy)("AsyncComponentLoader","render",`Forcing remount after error for ${x}`,{error:s.message}),b((s=>s+1)))}),100))};if((0,r.Im)("AsyncComponentLoader","suspenseTimeouts",[m,o.USE_LAZY_LOADING,x],(()=>{if(o.USE_LAZY_LOADING)return(0,l.at)("AsyncComponentLoader","suspenseTimeouts","init",`Setting up mount tracking for ${x}`,{isLoaded:m}),_.current=!0,!m&&_.current&&(h(!0),(0,l.HJ)(`AsyncLoader:${x}`,"resolved",`Suspense immediately resolved for ${x}`,{component:x,forcedResolution:!1})),()=>{(0,l.at)("AsyncComponentLoader","suspenseTimeouts","cleanup",`Cleaning up mount tracking for ${x}`),_.current=!1}})),(0,r.Im)("AsyncComponentLoader","postRenderLoad",[m,o.USE_LAZY_LOADING,u,x],(()=>{o.USE_LAZY_LOADING&&!m&&_.current&&((0,l.at)("AsyncComponentLoader","postRenderLoad","init",`Immediately marking component ${x} as loaded`),h(!0),u&&u(),(0,l.Ng)("AsyncComponentLoader:complete",performance.now()-p.current,{componentId:x,hasTimeout:y}))})),(0,r.Im)("AsyncComponentLoader","childrenRendering",[y,j,o.USE_LAZY_LOADING,x],(()=>{o.USE_LAZY_LOADING&&(0,l.uy)("AsyncComponentLoader","render",`Children rendering for ${x}`,{mode:y?"timeout":"suspense",componentKey:j})})),!o.USE_LAZY_LOADING)return(0,n.jsx)(n.Fragment,{children:s});const w=(0,n.jsxs)("div",Object.assign({className:"stylist-loading-container",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",height:"100%"}},{children:[(0,n.jsx)(a.A,{}),(0,n.jsx)("p",Object.assign({style:{marginTop:"1rem"}},{children:t}))]})),O=(0,n.jsxs)("div",Object.assign({className:"stylist-error-container",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",height:"100%"}},{children:[(0,n.jsx)("p",Object.assign({style:{marginTop:"1rem"}},{children:"Unable to load component"})),(0,n.jsx)("button",Object.assign({onClick:()=>_.current&&b((s=>s+1)),style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"var(--stylist-primary-color, #4361ee)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},{children:"Try Again"}))]}));if(y)return(0,l.uy)("AsyncComponentLoader","render",`Rendering with timeout fallback for ${x}`,{mode:"timeout",timeElapsed:`${(performance.now()-p.current).toFixed(2)}ms`}),(0,n.jsx)(r.ap,Object.assign({componentName:`AsyncLoader:${x}`,onError:f,fallback:O},{children:s}),`timeout-fallback-${j}`);(0,l.uy)("AsyncComponentLoader","render",`Rendering with suspense for ${x}`,{mode:"suspense",timeElapsed:`${(performance.now()-p.current).toFixed(2)}ms`});const N=e||w;return(0,n.jsx)(r.ap,Object.assign({componentName:`AsyncLoader:${x}`,onError:f,fallback:O},{children:(0,n.jsx)(r.OT,Object.assign({componentName:`AsyncLoader:${x}`,fallback:(0,n.jsx)(c,{fallback:N,componentId:x})},{children:s}))}),`error-boundary-${j}`)}},35495:function(s,t,e){var n=e(74848),i=e(96540);t.A=({size:s="medium",text:t,secondaryText:e,variant:a="primary",animation:o="spin",showProgress:l=!1,progress:r,inline:c=!1,overlay:d=!1,customColor:u,isIndeterminate:g=!1,autoProgressDuration:m=0})=>{const[h,y]=(0,i.useState)(0);(0,i.useEffect)((()=>{if(m>0&&g){const s=setInterval((()=>{y((s=>{const t=s+100/(m/100);return t>90?90:t}))}),100);return()=>clearInterval(s)}}),[m,g]);const v=void 0!==r?r:h,j=["stylist-loading-indicator",`stylist-loading-indicator--${s}`,a&&`stylist-loading-indicator--${a}`,"spin"!==o&&`stylist-loading-indicator--${o}`,c&&"stylist-loading-indicator--inline",d&&"stylist-loading-indicator--overlay"].filter(Boolean).join(" "),b=u?{borderColor:`${u}40`,borderTopColor:u}:void 0,_=Object.assign({width:`${v}%`},u?{backgroundColor:u}:{}),x=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"stylist-loading-indicator__spinner",style:b}),t&&(0,n.jsx)("div",Object.assign({className:"stylist-loading-indicator__text"},{children:t})),e&&(0,n.jsx)("div",Object.assign({className:"stylist-loading-indicator__text",style:{opacity:.7,fontSize:"0.9em"}},{children:e})),l&&(0,n.jsx)("div",Object.assign({className:"stylist-loading-indicator__progress"},{children:(0,n.jsx)("div",{className:"stylist-loading-indicator__progress-bar",style:_})}))]});return d?(0,n.jsx)("div",Object.assign({className:j},{children:(0,n.jsx)("div",Object.assign({className:"stylist-loading-indicator__container"},{children:x}))})):(0,n.jsx)("div",Object.assign({className:j},{children:x}))}},51462:function(s,t,e){var n=e(74848),i=e(96540);class a extends i.Component{constructor(s){super(s),this.resetErrorBoundary=()=>{this.setState({hasError:!1,error:null})},this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,t){this.props.onError&&this.props.onError(s,t)}componentDidUpdate(s){if(this.state.hasError&&this.props.resetOnChange){this.props.resetOnChange.some(((t,e)=>t!==(s.resetOnChange||[])[e]))&&this.resetErrorBoundary()}}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,n.jsx)("div",Object.assign({className:`stylist-error-container ${this.props.errorClassName||""}`},{children:(0,n.jsxs)("div",Object.assign({className:"stylist-error-message"},{children:[(0,n.jsx)("h3",{children:"Something went wrong"}),(0,n.jsx)("p",{children:"The widget had trouble loading this component."}),(0,n.jsx)("button",Object.assign({onClick:this.resetErrorBoundary,className:"stylist-error-retry-button"},{children:"Try Again"}))]}))})):this.props.children}}t.A=a},54826:function(s,t,e){e.r(t),e.d(t,{default:function(){return k}});var n=e(74848),i=e(96540),a=e(45639),o=e(1206),l=e(41071),r=e(57401),c=e(97524);var d=({width:s,height:t,activePosition:e})=>(0,n.jsxs)("div",Object.assign({className:"stylist-body-guide",style:{width:s,height:t}},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--head "+(e===a.GT.HEAD?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Head"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--neck "+(e===a.GT.NECK?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Neck"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--upper-body "+(e===a.GT.UPPER_BODY?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Upper Body"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--waist "+(e===a.GT.WAIST?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Waist"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--lower-body "+(e===a.GT.LOWER_BODY?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Lower Body"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--feet "+(e===a.GT.FEET?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Feet"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-body-guide__region stylist-body-guide__region--full-body "+(e===a.GT.FULL_BODY?"stylist-body-guide__region--active":"")},{children:(0,n.jsx)("span",Object.assign({className:"stylist-body-guide__label"},{children:"Full Body"}))}))]})),u=e(87463),g=e(61363),m=function(s,t,e,n){return new(e||(e=Promise))((function(i,a){function o(s){try{r(n.next(s))}catch(t){a(t)}}function l(s){try{r(n.throw(s))}catch(t){a(t)}}function r(s){var t;s.done?i(s.value):(t=s.value,t instanceof e?t:new e((function(s){s(t)}))).then(o,l)}r((n=n.apply(s,t||[])).next())}))};var h=({outfit:s,userImage:t,setCanvasRef:e,onGarmentSelect:h,showBodyGuide:y=!1})=>{var v;const j=(0,i.useRef)(null),b=(0,i.useRef)(null),[_,x]=(0,i.useState)(null),[p,f]=(0,i.useState)(!1),[w,O]=(0,i.useState)(null),[N,C]=(0,i.useState)({performance:"medium",useHighQuality:!0,useRealTimePreview:!0}),[k,S]=(0,i.useState)(!1),E=(0,o.j)((s=>s.canvasWidth)),A=(0,o.j)((s=>s.canvasHeight)),I=(0,o.j)((s=>s.settings.showGuidelines)),L=(0,o.j)((s=>s.updateGarment));(0,i.useEffect)((()=>{m(void 0,void 0,void 0,(function*(){try{yield(0,u.B$)();const s=(0,u.z0)(),t=(0,u.F2)("virtualTryOn","medium"),e=(0,u.F2)("virtualTryOn","high");C({performance:s,useHighQuality:t,useRealTimePreview:e})}catch(s){}}))}),[]),(0,i.useEffect)((()=>{j.current&&e(j.current)}),[e]);const T=(0,i.useCallback)(((s,t,e,n)=>m(void 0,void 0,void 0,(function*(){const i=performance.now();try{N.useHighQuality?yield(0,r.WZ)(s,t,e,n):yield(0,r.bj)(s,t,e,n);const a=performance.now()-i;g.Hp.recordComponentRender("TryOnCanvas_compositeImages",a)}catch(a){}}))),[N.useHighQuality]),M=(0,i.useCallback)((()=>{b.current&&clearTimeout(b.current),N.useRealTimePreview?R():b.current=setTimeout((()=>{R()}),"low"===N.performance?250:100)}),[N.performance,N.useRealTimePreview]),R=(0,i.useCallback)((()=>m(void 0,void 0,void 0,(function*(){const e=j.current;if(!e)return;const n=e.getContext("2d");if(!n)return;S(!0);const i=performance.now();if(n.clearRect(0,0,e.width,e.height),I&&!t)return(0,r.Qb)(e),void S(!1);if(t)try{const a=yield(0,l.yt)(t.url);n.drawImage(a,0,0,e.width,e.height),(null===s||void 0===s?void 0:s.garments.length)&&(yield T(e,a,s.garments,l.yt));const o=performance.now()-i;g.Hp.recordComponentRender("TryOnCanvas_render",o)}catch(a){}finally{S(!1)}else S(!1)}))),[s,t,E,A,I,T]);(0,i.useEffect)((()=>(M(),()=>{b.current&&clearTimeout(b.current)})),[s,t,E,A,I,_,y,M]);return(0,i.useEffect)((()=>{const s=()=>{p&&(f(!1),O(null),N.useRealTimePreview||R())};return document.addEventListener("mouseup",s),()=>{document.removeEventListener("mouseup",s)}}),[p,N.useRealTimePreview,R]),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-canvas"},{children:[(0,n.jsx)("canvas",{ref:j,width:E,height:A,className:`stylist-try-on-canvas__canvas ${p?"stylist-try-on-canvas__canvas--dragging":""} ${k?"stylist-try-on-canvas__canvas--rendering":""}`,onClick:t=>m(void 0,void 0,void 0,(function*(){if(!h||!s||!s.garments.length)return;const e=j.current;if(!e)return;const n=e.getBoundingClientRect(),i=t.clientX-n.left,a=t.clientY-n.top,o=[...s.garments].sort(((s,t)=>t.zIndex-s.zIndex));for(const s of o)try{const{dimensions:t,offset:n,scale:o}=s;if(!t||!n)continue;const l=e.width/2+n.x,r=e.height/2+n.y,c=t.width*(o||1),d=t.height*(o||1),u=l-c/2,g=r-d/2;if(i>=u&&i<=u+c&&a>=g&&a<=g+d)return h(s.id),void x(s.id)}catch(l){}h(null),x(null)})),onMouseDown:s=>{if(!_)return;const t=j.current;if(!t)return;const e=t.getBoundingClientRect(),n=s.clientX-e.left,i=s.clientY-e.top;f(!0),O({x:n,y:i})},onMouseMove:t=>{if(!p||!w||!_||!s)return;const e=j.current;if(!e)return;const n=e.getBoundingClientRect(),i=t.clientX-n.left,a=t.clientY-n.top,o=i-w.x,l=a-w.y;O({x:i,y:a});const r=s.garments.find((s=>s.id===_));if(!r||!r.offset)return;const c={x:r.offset.x+o,y:r.offset.y+l};if(L(_,{offset:c}),!N.useRealTimePreview){const s=document.querySelector(".stylist-try-on-canvas__drag-indicator");s&&(s.style.left=`${i}px`,s.style.top=`${a}px`)}},onMouseUp:()=>{f(!1),O(null),N.useRealTimePreview||R()}}),y&&!t&&(0,n.jsx)(d,{width:E,height:A,activePosition:_?(0,c.f8)((null===(v=null===s||void 0===s?void 0:s.garments.find((s=>s.id===_)))||void 0===v?void 0:v.type)||a.Nu.TOP):void 0}),!t&&(0,n.jsx)("div",Object.assign({className:"stylist-try-on-canvas__placeholder"},{children:(0,n.jsx)("div",Object.assign({className:"stylist-try-on-canvas__placeholder-text"},{children:"Upload a photo to start the virtual try-on"}))})),k&&(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-canvas__loading"},{children:[(0,n.jsx)("div",{className:"stylist-try-on-canvas__loading-spinner"}),(0,n.jsx)("div",Object.assign({className:"stylist-try-on-canvas__loading-text"},{children:"Processing image..."}))]})),p&&!N.useRealTimePreview&&(0,n.jsx)("div",{className:"stylist-try-on-canvas__drag-indicator"}),!1]}))};const y=({type:s})=>{switch(s){case a.Nu.TOP:return(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M16 4l4 5v11H4V9l4-5h8zm-7 5v5h6V9h-6z"})}));case a.Nu.BOTTOM:return(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M7 6l-5 16h20L17 6h-2l-3 8-3-8H7z"})}));case a.Nu.DRESS:return(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M12 2l-5 5v15h10V7l-5-5zm-3 5.5L12 4l3 3.5V20h-6V7.5z"})}));case a.Nu.OUTERWEAR:return(0,n.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:[(0,n.jsx)("path",{d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H4V5h16v14z"}),(0,n.jsx)("path",{d:"M7 10h10v7H7z"})]}));case a.Nu.SHOES:return(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M19 13v7H5v-7l2-8h2l3 5 3-5h2l2 8z"})}));case a.Nu.ACCESSORY:return(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M17 12c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm-10-3h2V9H7v8zm-4 0h2V9H3v8zm14-8h-2v2h2V9zm0 4h-2v2h2v-2z"})}));default:return null}};var v=({outfit:s,activeGarmentId:t,onGarmentSelect:e,onGarmentRemove:o,onGarmentUpdate:l,onGarmentAdd:r,onChangePhoto:c,disabled:d=!1})=>{var u,g,m,h,v,j,b,_,x;const[p,f]=(0,i.useState)(!0),[w,O]=(0,i.useState)(!0),[N,C]=(0,i.useState)(!1),[k,S]=(0,i.useState)("grid"),E=(0,i.useRef)(null),[A,I]=(0,i.useState)(null),[L,T]=(0,i.useState)(null),M=null===s||void 0===s?void 0:s.garments.find((s=>s.id===t)),R=(0,i.useMemo)((()=>(null===s||void 0===s?void 0:s.garments)?s.garments.reduce(((s,t)=>{const e=t.type||"unknown";return s[e]||(s[e]=[]),s[e].push(t),s}),{}):{}),[null===s||void 0===s?void 0:s.garments]),z=(s,e)=>{if(t&&(null===M||void 0===M?void 0:M.offset)){const n=Object.assign({},M.offset);n[s]=e,l(t,{offset:n})}},D=(t,e)=>{T(e),t.dataTransfer.setData("text/plain",e);const n=null===s||void 0===s?void 0:s.garments.find((s=>s.id===e));if(n){const s=new Image;s.src=n.url,t.dataTransfer.setDragImage(s,25,25)}},$=s=>{s.preventDefault()},P=(t,n)=>{if(t.preventDefault(),L&&L!==n&&(null===s||void 0===s?void 0:s.garments)){const t=s.garments.findIndex((s=>s.id===L)),i=s.garments.findIndex((s=>s.id===n));if(-1!==t&&-1!==i){const t=s.garments[i].layerIndex;l(L,{layerIndex:t}),e(L)}}T(null)},H=(null===(u=null===s||void 0===s?void 0:s.garments)||void 0===u?void 0:u.length)||0;return(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__section"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__section-header",onClick:()=>f(!p)},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__section-title-container"},{children:[(0,n.jsx)("h3",Object.assign({className:"stylist-try-on-controls__section-title"},{children:"Garments"})),H>0&&(0,n.jsx)("span",Object.assign({className:"stylist-try-on-controls__item-count"},{children:H}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__header-actions"},{children:[H>0&&(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__view-toggle",onClick:s=>{s.stopPropagation(),S((s=>"grid"===s?"list":"grid"))},"aria-label":`Switch to ${"grid"===k?"list":"grid"} view`},{children:"grid"===k?(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M3 13h18v-2H3v2zm0 7h18v-2H3v2zm0-14h18V4H3v2z"})})):(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z"})}))})),(0,n.jsx)("span",Object.assign({className:"stylist-try-on-controls__section-toggle"},{children:p?"\u2212":"+"}))]}))]})),p&&(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__section-content"},{children:[(null===s||void 0===s?void 0:s.garments)&&0!==s.garments.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__batch-actions"},{children:(0,n.jsxs)("button",Object.assign({className:"stylist-try-on-controls__batch-action stylist-try-on-controls__batch-action--remove",onClick:()=>{(null===s||void 0===s?void 0:s.garments)&&s.garments.length>0&&window.confirm("Remove all garments?")&&(s.garments.forEach((s=>{o(s.id)})),e(null))},disabled:d||0===H},{children:[(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"12",height:"12",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})),"Remove all"]}))})),"grid"===k?(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__garment-grid"},{children:s.garments.map((s=>(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__garment-thumbnail "+(t===s.id?"stylist-try-on-controls__garment-thumbnail--active":""),onClick:()=>e(s.id),draggable:!0,onDragStart:t=>D(t,s.id),onDragOver:$,onDrop:t=>P(t,s.id)},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__garment-image"},{children:(0,n.jsx)("img",{src:s.url,alt:s.type})})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__garment-type"},{children:[(0,n.jsx)(y,{type:s.type}),(0,n.jsx)("span",{children:s.type})]})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__garment-remove",onClick:t=>{t.stopPropagation(),o(s.id)},"aria-label":"Remove garment"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})}))})),t===s.id&&(0,n.jsx)("div",{className:"stylist-try-on-controls__garment-active-marker"})]}),s.id)))})):(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__garment-list"},{children:Object.keys(R).map((s=>(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__garment-group"},{children:[(0,n.jsxs)("h4",Object.assign({className:"stylist-try-on-controls__group-title"},{children:[(0,n.jsx)(y,{type:s}),s,(0,n.jsx)("span",Object.assign({className:"stylist-try-on-controls__group-count"},{children:R[s].length}))]})),R[s].map((i=>(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__garment-list-item "+(t===i.id?"stylist-try-on-controls__garment-list-item--active":""),onClick:()=>e(i.id),draggable:!0,onDragStart:s=>D(s,i.id),onDragOver:$,onDrop:s=>P(s,i.id)},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__garment-list-image"},{children:(0,n.jsx)("img",{src:i.url,alt:i.type})})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__garment-list-info"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__garment-name"},{children:[i.type," ",R[s].indexOf(i)+1]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__garment-meta"},{children:["Scale: ",Math.round(100*(i.scale||1)),"%"]}))]})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__garment-list-remove",onClick:s=>{s.stopPropagation(),o(i.id)},"aria-label":"Remove garment"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})}))}))]}),i.id)))]}),s)))}))]}):(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__empty"},{children:"No garments added yet. Add a garment below."})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__add-garment"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__button stylist-try-on-controls__button--full-width",onClick:()=>C(!N),disabled:d},{children:N?"Cancel":"+ Add Garment"})),N&&(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__garment-types"},{children:[(0,n.jsx)("span",Object.assign({className:"stylist-try-on-controls__label"},{children:"Select garment type:"})),(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__garment-type-grid"},{children:Object.values(a.Nu).map((s=>(0,n.jsxs)("button",Object.assign({className:"stylist-try-on-controls__garment-type-button",onClick:()=>(s=>{I(s),E.current&&E.current.click()})(s),disabled:d},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__garment-type-icon"},{children:(0,n.jsx)(y,{type:s})})),(0,n.jsx)("span",{children:s})]}),s)))})),(0,n.jsx)("input",{ref:E,type:"file",accept:"image/*",className:"stylist-try-on-controls__input",style:{display:"none"},onChange:s=>{var t;const e=null===(t=s.target.files)||void 0===t?void 0:t[0];e&&A&&(r(e,A),I(null),C(!1),E.current&&(E.current.value=""))},disabled:d})]}))]}))]}))]})),M&&(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__section"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__section-header",onClick:()=>O(!w)},{children:[(0,n.jsxs)("h3",Object.assign({className:"stylist-try-on-controls__section-title"},{children:["Adjustments - ",M.type]})),(0,n.jsx)("span",Object.assign({className:"stylist-try-on-controls__section-toggle"},{children:w?"\u2212":"+"}))]})),w&&(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__section-content"},{children:(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__garment-controls"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__control-group"},{children:[(0,n.jsxs)("label",Object.assign({className:"stylist-try-on-controls__label"},{children:["Size",(0,n.jsxs)("span",Object.assign({className:"stylist-try-on-controls__value"},{children:[Math.round(100*(M.scale||1)),"%"]}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__range-with-buttons"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__range-button",onClick:()=>{const s=Math.max(.1,(M.scale||1)-.1);l(t,{scale:s})},disabled:d||(M.scale||1)<=.1},{children:"\u2212"})),(0,n.jsx)("input",{type:"range",min:"0.1",max:"2",step:"0.05",value:M.scale||1,onChange:s=>{if(t){const e=parseFloat(s.target.value);l(t,{scale:e})}},className:"stylist-try-on-controls__slider",disabled:d}),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__range-button",onClick:()=>{const s=Math.min(2,(M.scale||1)+.1);l(t,{scale:s})},disabled:d||(M.scale||1)>=2},{children:"+"}))]}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__control-group"},{children:[(0,n.jsxs)("label",Object.assign({className:"stylist-try-on-controls__label"},{children:["Position X",(0,n.jsxs)("span",Object.assign({className:"stylist-try-on-controls__value"},{children:[(null===(g=M.offset)||void 0===g?void 0:g.x)||0,"px"]}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__range-with-buttons"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__range-button",onClick:()=>{var s;return z("x",((null===(s=M.offset)||void 0===s?void 0:s.x)||0)-10)},disabled:d||((null===(m=M.offset)||void 0===m?void 0:m.x)||0)<=-200},{children:"\u2190"})),(0,n.jsx)("input",{type:"range",min:"-200",max:"200",step:"1",value:(null===(h=M.offset)||void 0===h?void 0:h.x)||0,onChange:s=>z("x",parseInt(s.target.value)),className:"stylist-try-on-controls__slider",disabled:d}),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__range-button",onClick:()=>{var s;return z("x",((null===(s=M.offset)||void 0===s?void 0:s.x)||0)+10)},disabled:d||((null===(v=M.offset)||void 0===v?void 0:v.x)||0)>=200},{children:"\u2192"}))]}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__control-group"},{children:[(0,n.jsxs)("label",Object.assign({className:"stylist-try-on-controls__label"},{children:["Position Y",(0,n.jsxs)("span",Object.assign({className:"stylist-try-on-controls__value"},{children:[(null===(j=M.offset)||void 0===j?void 0:j.y)||0,"px"]}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__range-with-buttons"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__range-button",onClick:()=>{var s;return z("y",((null===(s=M.offset)||void 0===s?void 0:s.y)||0)-10)},disabled:d||((null===(b=M.offset)||void 0===b?void 0:b.y)||0)<=-200},{children:"\u2191"})),(0,n.jsx)("input",{type:"range",min:"-200",max:"200",step:"1",value:(null===(_=M.offset)||void 0===_?void 0:_.y)||0,onChange:s=>z("y",parseInt(s.target.value)),className:"stylist-try-on-controls__slider",disabled:d}),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__range-button",onClick:()=>{var s;return z("y",((null===(s=M.offset)||void 0===s?void 0:s.y)||0)+10)},disabled:d||((null===(x=M.offset)||void 0===x?void 0:x.y)||0)>=200},{children:"\u2193"}))]}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__control-group"},{children:[(0,n.jsxs)("label",Object.assign({className:"stylist-try-on-controls__label"},{children:["Rotation",(0,n.jsxs)("span",Object.assign({className:"stylist-try-on-controls__value"},{children:[M.rotation||0,"\xb0"]}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__range-with-buttons"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__range-button",onClick:()=>{const s=(M.rotation||0)-15;l(t,{rotation:s})},disabled:d},{children:"\u21ba"})),(0,n.jsx)("input",{type:"range",min:"-180",max:"180",step:"1",value:M.rotation||0,onChange:s=>{if(t){const e=parseFloat(s.target.value);l(t,{rotation:e})}},className:"stylist-try-on-controls__slider",disabled:d}),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-controls__range-button",onClick:()=>{const s=(M.rotation||0)+15;l(t,{rotation:s})},disabled:d},{children:"\u21bb"}))]}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__control-group stylist-try-on-controls__action-buttons"},{children:[(0,n.jsxs)("button",Object.assign({className:"stylist-try-on-controls__action-button "+(M.flipHorizontal?"stylist-try-on-controls__action-button--active":""),onClick:()=>{t&&l(t,{flipHorizontal:!(null===M||void 0===M?void 0:M.flipHorizontal)})},disabled:d},{children:[(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"})})),"Flip"]})),(0,n.jsxs)("button",Object.assign({className:"stylist-try-on-controls__action-button",onClick:()=>{l(t,{scale:1,rotation:0,offset:{x:0,y:0},flipHorizontal:!1})},disabled:d},{children:[(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"})})),"Reset"]})),(0,n.jsxs)("button",Object.assign({className:"stylist-try-on-controls__action-button stylist-try-on-controls__action-button--danger",onClick:()=>{o(t),e(null)},disabled:d},{children:[(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})),"Remove"]}))]}))]}))}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-controls__section"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__section-header"},{children:(0,n.jsx)("h3",Object.assign({className:"stylist-try-on-controls__section-title"},{children:"Photo"}))})),(0,n.jsx)("div",Object.assign({className:"stylist-try-on-controls__section-content"},{children:(0,n.jsxs)("button",Object.assign({className:"stylist-try-on-controls__button stylist-try-on-controls__button--full-width",onClick:c,disabled:d},{children:[(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor"},{children:(0,n.jsx)("path",{d:"M21 6h-3.17L16 4h-6v2h5.12l1.83 2H21v12H5v-9H3v9c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zM8 14c0 2.76 2.24 5 5 5s5-2.24 5-5-2.24-5-5-5-5 2.24-5 5zm5-3c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3zM5 6h3V4H5V1H3v3H0v2h3v3h2z"})})),"Change Photo"]}))}))]}))]}))},j=e(94371);var b,_,x=({garmentId:s,onLike:t,onDislike:e,onAddToWishlist:a,onAddToCart:o,onSaveNote:l,item:r,primaryColor:c})=>{const[d,u]=(0,i.useState)(!1),[g,m]=(0,i.useState)(!1),[h,y]=(0,i.useState)(""),[v,b]=(0,i.useState)(!1),[_,x]=(0,i.useState)(!1),[p,f]=(0,i.useState)(!1),[w,O]=(0,i.useState)(!1),{addToWishlist:N,addToCart:C}=(0,j.W0)(),k=c?{backgroundColor:c}:void 0;return _?(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__success"},{children:[(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Added to Wishlist"},{children:"\u2764\ufe0f"}))," Added to Wishlist!"]})):p?(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__success"},{children:[(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Added to Cart"},{children:"\ud83d\uded2"}))," Added to Cart!"]})):w?(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__success"},{children:[(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Note Saved"},{children:"\ud83d\udcdd"}))," Note Saved!"]})):(0,n.jsx)("div",Object.assign({className:"stylist-try-on-feedback"},{children:d?g?(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__options"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-try-on-feedback__option-button",onClick:()=>{var t;const e={itemId:s,retailerId:(null===r||void 0===r?void 0:r.retailerId)||"demo_retailer",addedAt:new Date,name:(null===r||void 0===r?void 0:r.name)||`Item ${s.slice(0,6)}`,brand:(null===r||void 0===r?void 0:r.brand)||"Unknown brand",price:(null===r||void 0===r?void 0:r.price)||0,imageUrl:(null===(t=null===r||void 0===r?void 0:r.imageUrls)||void 0===t?void 0:t[0])||""};N(e),a(s),x(!0),m(!1),setTimeout((()=>{x(!1)}),2e3)},style:k},{children:"Add to Wishlist"})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-feedback__option-button",onClick:()=>{var t,e,n;const i={itemId:s,retailerId:(null===r||void 0===r?void 0:r.retailerId)||"demo_retailer",quantity:1,size:(null===(t=null===r||void 0===r?void 0:r.sizes)||void 0===t?void 0:t[0])||"M",color:(null===(e=null===r||void 0===r?void 0:r.colors)||void 0===e?void 0:e[0])||"default",addedAt:new Date,name:(null===r||void 0===r?void 0:r.name)||`Item ${s.slice(0,6)}`,brand:(null===r||void 0===r?void 0:r.brand)||"Unknown brand",price:(null===r||void 0===r?void 0:r.price)||0,imageUrl:(null===(n=null===r||void 0===r?void 0:r.imageUrls)||void 0===n?void 0:n[0])||""};C(i),o(s),f(!0),m(!1),setTimeout((()=>{f(!1)}),2e3)},style:k},{children:"Add to Cart"})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-feedback__option-button",onClick:()=>b(!0),style:k},{children:"Just Save a Note"}))]})):v?(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__note-input"},{children:[(0,n.jsx)("input",{type:"text",placeholder:"What do you like about this item?",value:h,onChange:s=>y(s.target.value),autoFocus:!0}),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-feedback__note-save",onClick:()=>{h.trim()&&(l(s,h),O(!0),b(!1),m(!1),setTimeout((()=>{O(!1),y("")}),2e3))},style:k},{children:"Save"}))]})):(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__liked"},{children:[(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Liked"},{children:"\ud83d\udc96"}))," Liked!"]})):(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-feedback__buttons"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-try-on-feedback__button stylist-try-on-feedback__button--like",onClick:()=>{u(!0),t(s),m(!0)},style:k},{children:(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Like"},{children:"\ud83d\udc4d"}))})),(0,n.jsx)("button",Object.assign({className:"stylist-try-on-feedback__button stylist-try-on-feedback__button--dislike",onClick:()=>{e(s)}},{children:(0,n.jsx)("span",Object.assign({role:"img","aria-label":"Dislike"},{children:"\ud83d\udc4e"}))}))]}))}))},p=e(66770),f=e(76639),w=e(86846),O=e(9055),N=e(77294),C=function(s,t,e,n){return new(e||(e=Promise))((function(i,a){function o(s){try{r(n.next(s))}catch(t){a(t)}}function l(s){try{r(n.throw(s))}catch(t){a(t)}}function r(s){var t;s.done?i(s.value):(t=s.value,t instanceof e?t:new e((function(s){s(t)}))).then(o,l)}r((n=n.apply(s,t||[])).next())}))};!function(s){s.FRONT="user",s.BACK="environment"}(b||(b={})),function(s){s.SELECT_IMAGE="select_image",s.SELECT_ITEM="select_item",s.PREVIEW="preview",s.CAPTURE="capture",s.REVIEW="review",s.ACTION="action"}(_||(_={}));var k=({onClose:s,onSave:t,onAddToLookbook:e,primaryColor:o="#3f51b5"})=>{var l,r;const{currentOutfit:c,userImage:d,isLoading:u,error:g,canvasRef:m,setCanvasRef:y,uploadUserImage:j,addGarment:b,removeGarment:k,updateGarmentProperties:S,clearUserImage:E,saveTryOnResult:A,closeTryOnModal:I}=(0,f.k)(),{addToWishlist:L,addToCart:T}=(0,O.W)(),[M,R]=(0,i.useState)(null),[z,D]=(0,i.useState)(!d),[$,P]=(0,i.useState)(!1),[H,G]=(0,i.useState)(!1),[B,W]=(0,i.useState)(!1),U=i.useRef(!1),[V,F]=(0,i.useState)(null),[Z,Y]=(0,i.useState)(_.SELECT_IMAGE),[q,Q]=(0,i.useState)(null),X=(0,i.useRef)(null),[K,J]=(0,i.useState)(!1),[ss,ts]=(0,i.useState)(!1),[es,ns]=(0,i.useState)(null);(0,i.useEffect)((()=>{(()=>{try{const s=document.createElement("canvas"),t=s.getContext("webgl")||s.getContext("experimental-webgl");if(!t)return F(!1),!1;const e=(()=>{try{const s=t;return["OES_texture_float","WEBGL_color_buffer_float","OES_element_index_uint"].filter((t=>s.getExtension(t))).length>=2}catch(s){return!1}})();return F(!0),e}catch(s){return F(!1),!1}})()}),[]),(0,i.useEffect)((()=>{d&&(W(!0),B&&!U.current&&!1!==V&&(U.current=!0,(0,w.kd)().catch((s=>{}))))}),[d,B,V]),(0,i.useEffect)((()=>{if(d)if(d.processingStatus!==a.GS.REMOVING_BACKGROUND){if(d.processingStatus===a.GS.COMPLETED){if(!c||!c.garments||0===c.garments.length)return void Y(_.SELECT_ITEM);if(K)return void Y(_.CAPTURE);if(ss)return void Y(_.REVIEW);if(M)return void Y(_.ACTION);Y(_.PREVIEW)}}else Y(_.SELECT_IMAGE);else Y(_.SELECT_IMAGE)}),[d,c,M,K,ss]),(0,i.useEffect)((()=>{if(M&&c){if(c.garments.find((s=>s.id===M))){const s=document.getElementById(`garment-${M}`);s&&s.scrollIntoView({behavior:"smooth",block:"nearest"})}}}),[M,c]),(0,i.useEffect)((()=>{d||D(!0)}),[d]);const is=(0,i.useCallback)((()=>{X.current&&window.clearInterval(X.current),J(!0),Q(5),X.current=window.setInterval((()=>{Q((s=>null===s||s<=1?(X.current&&(window.clearInterval(X.current),X.current=null),os(),null):s-1))}),1e3)}),[]),as=(0,i.useCallback)((()=>{X.current&&(window.clearInterval(X.current),X.current=null,Q(null),J(!1))}),[]),os=(0,i.useCallback)((()=>{if(m)try{const s=m.toDataURL("image/jpeg");ns(s),ts(!0),J(!1)}catch(s){J(!1)}}),[m]),ls=()=>C(void 0,void 0,void 0,(function*(){var n;if(m&&c)try{P(!0);const i=yield A();if(i){if(t&&t(i.resultImageUrl),e){const s={userId:"current_user",outfitId:i.id,id:i.id,name:`Try-On Result ${(new Date).toLocaleDateString()}`,items:(null===(n=null===c||void 0===c?void 0:c.garments)||void 0===n?void 0:n.map((s=>s.id)))||[],savedAt:new Date,imageUrl:i.resultImageUrl||"",createdAt:new Date};e(s)}G(!0),setTimeout((()=>{s?s():I()}),1500)}}catch(i){}finally{P(!1)}})),rs=()=>{s?s():I()},cs=()=>{E(),D(!0),R(null),G(!1),ts(!1),ns(null),X.current&&(window.clearInterval(X.current),X.current=null,Q(null)),J(!1)};return(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__header",style:{backgroundColor:o}},{children:[(0,n.jsx)("h2",Object.assign({className:"stylist-virtual-try-on__title"},{children:"Virtual Try-On"})),(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__close-btn",onClick:rs,"aria-label":"Close"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},{children:(0,n.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})}))}))]})),(()=>{const s=[{id:_.SELECT_IMAGE,name:"Choose Photo"},{id:_.SELECT_ITEM,name:"Select Item"},{id:_.PREVIEW,name:"Preview"},{id:_.REVIEW,name:"Review"},{id:_.ACTION,name:"Complete"}];return(0,n.jsx)("div",Object.assign({className:"stylist-virtual-try-on__steps"},{children:s.map(((s,t)=>(0,n.jsxs)("div",Object.assign({className:`stylist-virtual-try-on__step ${Z===s.id?"stylist-virtual-try-on__step--active":""} ${Z===_.SELECT_ITEM&&0===t||Z===_.PREVIEW&&t<2||Z===_.CAPTURE&&t<2||Z===_.REVIEW&&t<3||Z===_.ACTION&&t<4?"stylist-virtual-try-on__step--completed":""}`},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-virtual-try-on__step-number"},{children:t+1})),(0,n.jsx)("div",Object.assign({className:"stylist-virtual-try-on__step-name"},{children:s.name}))]}),s.id)))}))})(),(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__content"},{children:[z?(0,n.jsx)(p.A,{onUpload:s=>C(void 0,void 0,void 0,(function*(){yield j(s),D(!1)})),title:"Upload or Take a Photo",description:"Upload a photo or use your webcam to try on clothes",countdownDuration:5}):(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__canvas-container"},{children:[ss&&es?(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__review"},{children:[(0,n.jsx)(N.A,{src:es||"",alt:"Try-on preview",className:"stylist-virtual-try-on__review-image",loadingPriority:"high",quality:"high"}),(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__review-actions"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__review-action stylist-virtual-try-on__review-action--discard",onClick:()=>{ts(!1),ns(null)}},{children:"Discard"})),(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__review-action stylist-virtual-try-on__review-action--save",onClick:ls,style:{backgroundColor:o}},{children:"Save to Lookbook"}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__review-feedback"},{children:[(0,n.jsx)("p",{children:"How does it look?"}),(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__review-feedback-buttons"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__review-feedback-button"},{children:"\ud83d\udc4d Love it!"})),(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__review-feedback-button"},{children:"\ud83d\udc4e Not for me"}))]}))]}))]})):(0,n.jsx)(h,{outfit:c,userImage:d,setCanvasRef:y,onGarmentSelect:R,showBodyGuide:!d}),K&&null!==q&&(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__countdown"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-virtual-try-on__countdown-number"},{children:q})),(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__countdown-cancel",onClick:as},{children:"Cancel"}))]})),(null===d||void 0===d?void 0:d.processingStatus)===a.GS.REMOVING_BACKGROUND&&(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__processing"},{children:[(0,n.jsx)("div",{className:"stylist-virtual-try-on__spinner"}),(0,n.jsx)("p",{children:"Removing background..."})]})),!1===V&&d&&(0,n.jsx)("div",Object.assign({className:"stylist-virtual-try-on__warning"},{children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Note:"})," 3D graphics acceleration (WebGL) may not be fully supported in your browser. Background removal might use the original image."]})})),g&&(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__error"},{children:[(0,n.jsx)("p",{children:g}),(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__retry-btn",onClick:cs},{children:"Try Again"}))]})),!ss&&Z===_.ACTION&&(null===d||void 0===d?void 0:d.processingStatus)===a.GS.COMPLETED&&(null===c||void 0===c?void 0:c.garments)&&c.garments.length>0&&M&&(0,n.jsx)(x,{garmentId:M,onLike:s=>{var t;(null===(t=null===c||void 0===c?void 0:c.garments)||void 0===t?void 0:t.find((t=>t.id===s)))&&alert("Thanks for your feedback!")},onDislike:s=>{var t;(null===(t=null===c||void 0===c?void 0:c.garments)||void 0===t?void 0:t.find((t=>t.id===s)))&&(k(s),alert("Item removed. We'll note your preference."))},onAddToWishlist:s=>{if(!c||!c.garments)return;const t=c.garments.find((t=>t.id===s));if(!t)return;const e={itemId:t.id,retailerId:"default_retailer_id",name:t.type||"Garment",addedAt:new Date,imageUrl:t.url||"",price:0};L(e),alert("Item added to wishlist!")},onAddToCart:s=>{if(!c||!c.garments)return;const t=c.garments.find((t=>t.id===s));if(!t)return;const e={itemId:t.id,retailerId:"default_retailer_id",name:t.type||"Garment",price:0,quantity:1,imageUrl:t.url||"",addedAt:new Date};T(e),alert("Item added to cart!")},onSaveNote:(s,t)=>{alert("Note saved! We'll use this feedback to improve recommendations.")},primaryColor:o}),!ss&&Z===_.PREVIEW&&(null===d||void 0===d?void 0:d.processingStatus)===a.GS.COMPLETED&&(null===c||void 0===c?void 0:c.garments)&&c.garments.length>0&&(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__capture-prompt"},{children:[(0,n.jsx)("p",{children:"Like how it looks? Take a photo!"}),(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__capture-button",onClick:is,style:{backgroundColor:o}},{children:"Capture Now"}))]}))]})),!z&&d&&!ss&&(0,n.jsx)(v,{outfit:c,activeGarmentId:M,onGarmentSelect:R,onGarmentRemove:k,onGarmentUpdate:S,onGarmentAdd:(s,t)=>C(void 0,void 0,void 0,(function*(){yield b(s,t)})),onChangePhoto:cs,disabled:u||K})]})),H&&(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__success"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-virtual-try-on__success-icon"},{children:(0,n.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},{children:(0,n.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}))})),(0,n.jsx)("p",Object.assign({className:"stylist-virtual-try-on__success-message"},{children:"Saved to your Lookbook!"}))]})),(0,n.jsxs)("div",Object.assign({className:"stylist-virtual-try-on__footer"},{children:[(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__secondary-btn",onClick:rs},{children:"Close"})),!ss&&!K&&Z===_.PREVIEW&&(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__primary-btn",onClick:ls,disabled:u||!d||d.processingStatus!==a.GS.COMPLETED||!(null===(l=null===c||void 0===c?void 0:c.garments)||void 0===l?void 0:l.length)||$||H,style:{backgroundColor:o}},{children:$?"Saving...":H?"Saved!":"Save to Lookbook"})),!ss&&!K&&Z===_.PREVIEW&&(0,n.jsx)("button",Object.assign({className:"stylist-virtual-try-on__primary-btn",onClick:is,disabled:u||!d||d.processingStatus!==a.GS.COMPLETED||!(null===(r=null===c||void 0===c?void 0:c.garments)||void 0===r?void 0:r.length),style:{backgroundColor:o}},{children:"Take Photo"}))]}))]}))}},55265:function(s,t,e){e.d(t,{A:function(){return o}});var n=e(74848),i=e(96540),a=e(94371);var o=({onClickNotification:s})=>{const{wishlistItems:t}=(0,a.W0)(),[e,o]=(0,i.useState)([]),[l,r]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const s=setTimeout((()=>{if(t.length>0){const s=t[Math.floor(Math.random()*t.length)];if(s){const t={id:`notification_${Date.now()}`,itemId:s.itemId,itemName:s.name||`Product ${s.itemId.slice(0,6)}`,type:Math.random()>.5?"sale":"low_stock",date:new Date,read:!1};o((s=>[...s,t])),d(!0)}}}),5e3);return()=>clearTimeout(s)}),[t]);const u=()=>{s&&s(),r(!1)};return 0===e.length?null:(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-notification"},{children:[(0,n.jsxs)("button",Object.assign({className:"stylist-wishlist-notification__bell "+(c?"has-unread":""),onClick:()=>{r(!l),l||(o((s=>s.map((s=>Object.assign(Object.assign({},s),{read:!0}))))),d(!1))},"aria-label":"Notifications"},{children:[(0,n.jsx)("span",Object.assign({className:"stylist-wishlist-notification__icon"},{children:"\ud83d\udd14"})),c&&(0,n.jsx)("span",{className:"stylist-wishlist-notification__badge"})]})),l&&(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-notification__panel"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-notification__header"},{children:[(0,n.jsx)("h3",Object.assign({className:"stylist-wishlist-notification__title"},{children:"Notifications"})),(0,n.jsx)("button",Object.assign({className:"stylist-wishlist-notification__close",onClick:()=>r(!1),"aria-label":"Close notifications"},{children:"\xd7"}))]})),(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-notification__list"},{children:0===e.length?(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-notification__empty"},{children:"No notifications"})):e.map((s=>(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-notification__item "+(s.read?"read":"unread"),onClick:u},{children:(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-notification__content"},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-notification__item-icon"},{children:"sale"===s.type?"\ud83d\udcb0":"\u26a0\ufe0f"})),(0,n.jsxs)("div",Object.assign({className:"stylist-wishlist-notification__item-text"},{children:[(0,n.jsx)("p",Object.assign({className:"stylist-wishlist-notification__item-message"},{children:"sale"===s.type?`${s.itemName} is now on sale!`:`${s.itemName} is running low in stock!`})),(0,n.jsx)("span",Object.assign({className:"stylist-wishlist-notification__item-time"},{children:new Date(s.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}))]}))]}))}),s.id)))})),e.length>0&&(0,n.jsx)("div",Object.assign({className:"stylist-wishlist-notification__footer"},{children:(0,n.jsx)("button",Object.assign({className:"stylist-wishlist-notification__clear",onClick:()=>{o([]),d(!1),r(!1)}},{children:"Clear all"}))}))]}))]}))}},63154:function(s,t,e){var n=e(74848),i=e(96540),a=e(18811),o=e(33994);t.A=()=>{const[s,t]=(0,i.useState)((()=>{try{return"demo"===localStorage.getItem("STYLIST_DATA_MODE")}catch(s){return!1}}));(0,i.useEffect)((()=>{const s=s=>{"STYLIST_DATA_MODE"===s.key&&t("demo"===s.newValue)};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)}),[]);return o.WW?(0,n.jsxs)("div",Object.assign({className:"stylist-mock-data-toggle"},{children:[(0,n.jsxs)("div",Object.assign({className:"toggle-container"},{children:[(0,n.jsx)("span",Object.assign({className:"toggle-label"},{children:"Mock Data"})),(0,n.jsxs)("label",Object.assign({className:"toggle-switch"},{children:[(0,n.jsx)("input",{type:"checkbox",checked:s,onChange:()=>{const e=!s;t(e),(0,a.m7)(e)},"aria-label":"Toggle mock data"}),(0,n.jsx)("span",{className:"toggle-slider"})]})),(0,n.jsx)("div",Object.assign({className:"toggle-status "+(s?"enabled":"disabled")},{children:s?"Enabled":"Disabled"}))]})),s&&(0,n.jsx)("div",Object.assign({className:"mock-data-message"},{children:"Using mock data for API requests"}))]})):null}},70212:function(s,t,e){e.r(t),e.d(t,{default:function(){return l}});var n=e(74848),i=e(96540),a=e(54826),o=e(1206);var l=({onClose:s,onSave:t})=>{const e=(0,o.j)((s=>s.isTryOnModalOpen)),l=(0,o.j)((s=>s.closeTryOnModal)),r=i.useCallback((()=>{s?s():l()}),[s,l]);return(0,i.useEffect)((()=>{const s=s=>{"Escape"===s.key&&e&&r()};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}}),[e,r]),(0,i.useEffect)((()=>(document.body.style.overflow=e?"hidden":"",()=>{document.body.style.overflow=""})),[e]),e?(0,n.jsxs)("div",Object.assign({className:"stylist-try-on-modal"},{children:[(0,n.jsx)("div",{className:"stylist-try-on-modal__overlay",onClick:r}),(0,n.jsx)("div",Object.assign({className:"stylist-try-on-modal__container"},{children:(0,n.jsx)(a.default,{onClose:r,onSave:t})}))]})):null}},74740:function(s,t,e){var n=e(74848),i=e(18634);t.A=()=>{const{syncState:s,isOnline:t,isSlowConnection:e}=(0,i.useSyncContext)();if(0===s.pendingOperations&&!s.isSyncing)return null;let a="syncing",o="Syncing...";return t?s.isSyncing?(a="syncing",o="Syncing..."):s.pendingOperations>0&&(a="pending",o=`${s.pendingOperations} change${1!==s.pendingOperations?"s":""} pending`):(a="offline",o=`${s.pendingOperations} change${1!==s.pendingOperations?"s":""} pending`),(0,n.jsxs)("div",Object.assign({className:`sync-status-indicator sync-status-${a}`},{children:[(0,n.jsxs)("div",Object.assign({className:"sync-status-icon"},{children:["syncing"===a&&(0,n.jsx)("svg",Object.assign({className:"sync-spinner",viewBox:"0 0 24 24"},{children:(0,n.jsx)("circle",{className:"sync-spinner-path",cx:"12",cy:"12",r:"10",fill:"none",stroke:"currentColor",strokeWidth:"4"})})),"pending"===a&&(0,n.jsx)("span",{children:"\u23f1\ufe0f"}),"offline"===a&&(0,n.jsx)("span",{children:"\ud83d\udcf4"})]})),(0,n.jsx)("span",Object.assign({className:"sync-status-message"},{children:o}))]}))}},77294:function(s,t,e){e.d(t,{A:function(){return o}});var n=e(74848),i=e(96540),a=e(61363);var o=(0,i.memo)((({src:s,alt:t,className:e="",width:o,height:l,placeholderSrc:r="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxIDEiIHdpZHRoPSIxIiBoZWlnaHQ9IjEiPjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiNlZWVlZWUiLz48L3N2Zz4=",loadingPriority:c="medium",quality:d="high",onLoad:u,onError:g,style:m})=>{const[h,y]=(0,i.useState)(!1),[v,j]=(0,i.useState)(!1),b=(0,i.useRef)(null),_=(0,i.useRef)(0),x=((s,t)=>{if(s.includes("quality=")||s.includes("q="))return s;const e=new URL(s,window.location.origin);if(e.hostname.includes("cloudinary.com"))return"low"===t?e.pathname=e.pathname.replace("/upload/","/upload/q_auto:low/"):"medium"===t&&(e.pathname=e.pathname.replace("/upload/","/upload/q_auto:good/")),e.toString();if(e.hostname.includes("imgix.net")){const s={high:90,medium:75,low:60};return e.searchParams.set("q",s[t].toString()),e.toString()}return s})(s,d),p="low"===c||"medium"===c;(0,i.useEffect)((()=>{if(y(!1),j(!1),_.current=performance.now(),"high"===c){const s=document.createElement("link");return s.rel="preload",s.as="image",s.href=x,document.head.appendChild(s),()=>{document.head.removeChild(s)}}}),[x,c]);const f=p?"lazy":"eager",w=o&&l?`${o}/${l}`:void 0;return(0,n.jsxs)("div",Object.assign({className:`adaptive-image ${h?"loaded":""} ${v?"error":""} ${e}`,style:Object.assign({width:o||"100%",height:l||"100%",aspectRatio:w},m)},{children:[!h&&!v&&(0,n.jsx)("div",{className:"adaptive-image__placeholder",style:{backgroundImage:`url(${r})`,width:"100%",height:"100%"}}),(0,n.jsx)("img",{ref:b,src:v?r:x,alt:t,loading:f,onLoad:()=>{const s=performance.now()-_.current;try{a.Hp&&"function"===typeof a.Hp.recordComponentRender&&a.Hp.recordComponentRender("AdaptiveImage_Load",s)}catch(t){}y(!0),u&&u()},onError:()=>{try{a.Hp&&"function"===typeof a.Hp.recordComponentRender&&a.Hp.recordComponentRender("AdaptiveImage_Error",0)}catch(s){}j(!0),g&&g()},className:"adaptive-image__img "+(h?"visible":""),style:{opacity:h?1:0}})]}))}))},85224:function(s,t,e){var n=e(74848),i=e(96540),a=e(23497),o=e(80634),l=function(s,t,e,n){return new(e||(e=Promise))((function(i,a){function o(s){try{r(n.next(s))}catch(t){a(t)}}function l(s){try{r(n.throw(s))}catch(t){a(t)}}function r(s){var t;s.done?i(s.value):(t=s.value,t instanceof e?t:new e((function(s){s(t)}))).then(o,l)}r((n=n.apply(s,t||[])).next())}))};t.A=({hasOfflineData:s=!1,position:t="top",showControls:e=!0})=>{const{isOnline:r,isOfflineMode:c,setOfflineMode:d}=(0,a.A)(s),[u,g]=(0,i.useState)(!1),[m,h]=(0,i.useState)(!1),y=!r||c,v=y?c?"Offline Mode":"You are offline":"Online",j=`stylist-offline-indicator--${t}`;return(0,n.jsxs)("div",Object.assign({className:`stylist-offline-indicator ${j} ${y?"stylist-offline-indicator--offline":""}`},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-offline-indicator__status",onClick:()=>g(!u)},{children:[(0,n.jsx)("div",Object.assign({className:"stylist-offline-indicator__status-icon"},{children:y?(0,n.jsx)("svg",Object.assign({viewBox:"0 0 24 24",width:"16",height:"16"},{children:(0,n.jsx)("path",{fill:"currentColor",d:"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95A5.469 5.469 0 0 1 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11A2.98 2.98 0 0 1 22 15c0 1.65-1.35 3-3 3zm-9-3.82l-2.09-2.09L6.5 13.5 10 17l6.01-6.01-1.41-1.41-4.6 4.6z"})})):(0,n.jsx)("svg",Object.assign({viewBox:"0 0 24 24",width:"16",height:"16"},{children:(0,n.jsx)("path",{fill:"currentColor",d:"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95A5.469 5.469 0 0 1 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11A2.98 2.98 0 0 1 22 15c0 1.65-1.35 3-3 3z"})}))})),(0,n.jsx)("span",Object.assign({className:"stylist-offline-indicator__status-text"},{children:v})),u?(0,n.jsx)("svg",Object.assign({viewBox:"0 0 24 24",width:"16",height:"16"},{children:(0,n.jsx)("path",{fill:"currentColor",d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"})})):(0,n.jsx)("svg",Object.assign({viewBox:"0 0 24 24",width:"16",height:"16"},{children:(0,n.jsx)("path",{fill:"currentColor",d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z"})}))]})),u&&e&&(0,n.jsxs)("div",Object.assign({className:"stylist-offline-indicator__controls"},{children:[(0,n.jsxs)("div",Object.assign({className:"stylist-offline-indicator__toggle"},{children:[(0,n.jsx)("span",{children:"Offline Mode"}),(0,n.jsxs)("label",Object.assign({className:"stylist-offline-indicator__toggle-switch"},{children:[(0,n.jsx)("input",{type:"checkbox",checked:c,onChange:()=>{d(!c)},disabled:!r}),(0,n.jsx)("span",{className:"stylist-offline-indicator__toggle-slider"})]}))]})),y&&s&&(0,n.jsxs)("div",Object.assign({className:"stylist-offline-indicator__info"},{children:[(0,n.jsx)("svg",Object.assign({viewBox:"0 0 24 24",width:"16",height:"16"},{children:(0,n.jsx)("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})),(0,n.jsx)("span",{children:"Showing cached data"})]})),r&&(0,n.jsxs)("button",Object.assign({className:"stylist-offline-indicator__sync-btn",onClick:()=>l(void 0,void 0,void 0,(function*(){if(r){h(!0);try{yield(0,o.lb)()}catch(s){}finally{h(!1)}}})),disabled:m},{children:[m?"Syncing...":"Sync Now",(0,n.jsx)("svg",Object.assign({viewBox:"0 0 24 24",width:"16",height:"16",className:m?"rotating":""},{children:(0,n.jsx)("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})}))]}))]}))]}))}},99972:function(s,t,e){e.d(t,{A:function(){return o}});var n=e(74848),i=e(96540),a=e(61768);var o=({children:s,show:t,type:e="fade",duration:o=300,className:l="",onEnter:r,onExit:c})=>{const[d,u]=(0,i.useState)(t),[g,m]=(0,i.useState)(!1),h=(0,i.useMemo)((()=>(0,a.XG)({high:"animation--high",medium:"animation--medium",low:"animation--low",none:"animation--none"})),[]),y=(0,i.useMemo)((()=>"animation--none"===h?0:"animation--low"===h?Math.round(.7*o):"animation--medium"===h?Math.round(.85*o):o),[o,h]);if((0,i.useEffect)((()=>{let s;return t?(u(!0),m(!0),r&&r(),s=setTimeout((()=>{m(!1)}),y)):(m(!0),c&&c(),s=setTimeout((()=>{u(!1),m(!1)}),y)),()=>{clearTimeout(s)}}),[t,y,r,c]),!d&&!g)return null;return(0,n.jsx)("div",Object.assign({className:`transition-smoother transition-smoother--${e} ${t?"transition-smoother--enter":"transition-smoother--exit"} ${h} ${l}`,style:{"--transition-duration":`${y}ms`}},{children:s}))}}}]);
//# sourceMappingURL=stylist-main-e9c37989.61af812e496553a156c8.js.map
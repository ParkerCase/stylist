"use strict";(self.webpackChunkStylistWidget=self.webpackChunkStylistWidget||[]).push([[4525],{6090:function(t,n,e){e.d(n,{Ni:function(){return r},VI:function(){return i}});var s=e(9495);let a;function r(){return null==a&&(a=(0,s.backend)().epsilon()),a}function i(){return"channelsLast"}},39459:function(t,n,e){e.d(n,{BC:function(){return f},IU:function(){return p},Kx:function(){return u},Uc:function(){return d},tB:function(){return c},uM:function(){return i},uU:function(){return o}});var s=e(84604),a=e(44813);const r=new Map;function i(t){(0,a.E6)(s.To,"DataFormat",t)}function o(t){(0,a.E6)(s.ft,"InterpolationFormat",t)}function c(t){(0,a.E6)(s.EY,"PaddingMode",t)}function u(t){(0,a.E6)(s.bb,"PoolMode",t)}const h=[],l="/";function p(t,n){h.push(t);try{const t=n();return h.pop(),t}catch(e){throw h.pop(),e}}function f(t){if(!m(t))throw new Error("Not a valid tensor name: '"+t+"'");return(0===h.length?"":h.join(l)+l)+t}function d(t){if(!m(t))throw new Error("Not a valid tensor name: '"+t+"'");r.has(t)||r.set(t,0);const n=r.get(t);if(r.set(t,r.get(t)+1),n>0){const e=`${t}_${n}`;return r.set(e,1),e}return t}const y=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function m(t){return!!t.match(y)}},47661:function(t,n,e){e.d(n,{Bq:function(){return l},Dh:function(){return f},EZ:function(){return A},Ew:function(){return b},FE:function(){return x},KK:function(){return M},Ls:function(){return F},Om:function(){return E},PS:function(){return p},Pq:function(){return V},UG:function(){return u},Vs:function(){return g},aY:function(){return N},kg:function(){return k},ly:function(){return w},ni:function(){return v},r0:function(){return y},u1:function(){return m},ux:function(){return h},wg:function(){return c}});var s=e(9495),a=e(39459),r=e(15841),i=e(73072),o=e(6090);function c(t,n){return s.cast(t,n)}function u(t,n=-1){const e=t.shape.slice();return n<0&&(n=e.length+n+1),e.splice(n,0,1),s.reshape(t,e)}function h(t,n){return(0,s.tidy)((()=>{if(2!==t.shape.length)throw new r.Qp(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);return g(u(t,1),[1,n,1])}))}function l(t){const n=[i.no(t.shape)];return s.reshape(t,n)}function p(t){if(t.rank<=1)throw new r.Qp(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const n=[t.shape[0],i.no(t.shape,1)];return s.reshape(t,n)}function f(t,n,e){return(0,s.tidy)((()=>{switch(t.rank){case 1:return s.slice1d(t,n,e);case 2:return s.slice2d(t,[n,0],[e,t.shape[1]]);case 3:return s.slice3d(t,[n,0,0],[e,t.shape[1],t.shape[2]]);case 4:return s.slice4d(t,[n,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3]]);case 5:return s.slice(t,[n,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return s.slice(t,[n,0,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new r.Qp(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}))}function d(t,n,e){return(0,s.tidy)((()=>{switch(t.rank){case 1:return s.slice1d(t,n,e);case 2:return s.slice2d(t,[0,n],[t.shape[0],e]);case 3:return s.slice3d(t,[0,0,n],[t.shape[0],t.shape[1],e]);case 4:return s.slice4d(t,[0,0,0,n],[t.shape[0],t.shape[1],t.shape[2],e]);default:throw new r.Qp(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}}))}function y(t,n,e,a){return(0,s.tidy)((()=>{switch(t.rank){case 1:return s.slice1d(t,n,e);case 2:switch(a){case 1:return f(t,n,e);case 2:return d(t,n,e);default:throw new r.Qp(`The axis is not within the rank of the tensor ${a}`)}case 3:switch(a){case 1:return f(t,n,e);case 2:return s.slice3d(t,[0,n,0],[t.shape[0],e,t.shape[2]]);case 3:return d(t,n,e);default:throw new r.Qp(`The axis is not within the rank of the tensor ${a}`)}case 4:switch(a){case 1:return f(t,n,e);case 2:return s.slice4d(t,[0,n,0,0],[t.shape[0],e,t.shape[2],t.shape[3]]);case 3:return s.slice4d(t,[0,0,n,0],[t.shape[0],t.shape[1],e,t.shape[3]]);case 4:return d(t,n,e);default:throw new r.Qp(`The axis is not within the rank of the tensor ${a}`)}default:throw new r.Qp(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}}))}function m(t,n=-1){let e;return n<0&&(e=t[0].rank,n=0!==e?e:0),n===t[0].rank&&(n=-1),s.concat(t,n)}function w(t,n){switch(t.rank){case 1:return s.concat1d([t,n]);case 2:return s.concat2d([t,n],0);case 3:return s.concat3d([t,n],0);case 4:return s.concat4d([t,n],0);default:throw new r.Qp(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function g(t,n){if(Array.isArray(n)||(n=[n]),t.rank!==n.length)throw new r.Qp(`The length of input n (${n.length}) does not match the number of dimensions in input x (${t.rank})`);return s.tile(t,n)}function x(t,n=0,e=1,a,r){return s.randomNormal(t,n,e,a,r)}function E(t,n,e,a){if(t.rank<2||n.rank<2)throw new r.EH(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${n.shape}`);if(n.rank>=3){if(t.shape.slice(-1)[0]!==n.shape.slice(-2)[0])throw new r.EH(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${n.shape}`)}if(2===t.rank&&2===n.rank){const r=!1,i=!1;return s.fused.matMul({a:t,b:n,transposeA:r,transposeB:i,bias:a?B(t.rank,a,(0,o.VI)()):null,activation:e})}{const r=t.shape.slice(),i=r.pop();t=s.reshape(t,[-1,i]);const c=n.shape.slice(),u=c.pop(),h=c.pop(),l=[...c,u],p=Array.from({length:n.rank},((t,e)=>0===e?n.rank-2:e<=n.rank-2?e-1:e));n=s.reshape(s.transpose(n,p),[h,-1]);const f=[...r,...l],d=!1,y=!1;return s.reshape(s.fused.matMul({a:t,b:n,transposeA:d,transposeB:y,bias:a?B(t.rank,a,(0,o.VI)()):null,activation:e}),f)}}function k(t,n,e){return(0,s.tidy)((()=>(n=Array.isArray(n)?(0,s.tensor1d)(n,"int32"):s.cast(n,"int32"),s.gather(t,n,e))))}function b(t){return s.mul(t,t)}function B(t,n,e){const a=n.shape;if(1!==n.rank&&n.rank!==t)throw new r.Qp(`Unexpected bias dimensions: ${n.rank}; expected it to be 1 or ${t}`);if(5===t){if("channelsFirst"===e)return 1===a.length?s.reshape(n,[1,a[0],1,1,1]):s.reshape(n,[1,a[3],a[0],a[1],a[2]]);if("channelsLast"===e)return 1===a.length?s.reshape(n,[1,1,1,1,a[0]]):s.reshape(n,[1].concat(a))}else if(4===t){if("channelsFirst"===e)return 1===a.length?s.reshape(n,[1,a[0],1,1]):s.reshape(n,[1,a[2],a[0],a[1]]);if("channelsLast"===e)return 1===a.length?s.reshape(n,[1,1,1,a[0]]):s.reshape(n,[1].concat(a))}else if(3===t){if("channelsFirst"===e)return 1===a.length?s.reshape(n,[1,a[0],1]):s.reshape(n,[1,a[1],a[0]]);if("channelsLast"===e)return 1===a.length?s.reshape(n,[1,1,a[0]]):s.reshape(n,[1].concat(a))}else if(t<3)return n;throw new r.Qp(`Unsupported input rank by biasAdd: ${n.rank}`)}function v(t,n,e){return(0,s.tidy)((()=>(null==e&&(e=(0,o.VI)()),(0,a.uM)(e),s.add(t,B(t.rank,n,e)))))}function V(t,n=1){if(1!==n)throw new r.EH(`Support for alpha values other than 1 (${n}) is not implemented yet.`);return s.elu(t)}function N(t){return(0,s.tidy)((()=>s.div(t,s.add(s.abs(t),1))))}function A(t,n,e,a){return(0,s.tidy)((()=>s.dropout(t,n,e,a)))}function M(t){return(0,s.tidy)((()=>{const n=s.add(.5,s.mul(.2,t));return s.clipByValue(n,0,1)}))}function F(t,n,e=!1){return e?t():n()}},49044:function(t,n,e){var s=e(85244);e(59013),e(15841),e(96681);s.J5},54678:function(t,n,e){e.d(n,{X:function(){return s}});class s{constructor(t){this.seed=t}next(){if(void 0!==this.seed)return this.seed++}}s.className="RandomSeed"},85244:function(t,n,e){e.d(n,{Eq:function(){return f},J5:function(){return c},dY:function(){return y}});var s,a=e(9495),r=e(15841),i=e(96681),o=e(44813);!function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"}(s||(s={}));class c{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,n){}async onEpochEnd(t,n){}async onBatchBegin(t,n){}async onBatchEnd(t,n){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class u{constructor(t,n=10){null==t&&(t=[]),this.callbacks=t,this.queueLength=n}append(t){this.callbacks.push(t)}setParams(t){for(const n of this.callbacks)n.setParams(t)}setModel(t){for(const n of this.callbacks)n.setModel(t)}async onEpochBegin(t,n){null==n&&(n={});for(const e of this.callbacks)await e.onEpochBegin(t,n)}async onEpochEnd(t,n){null==n&&(n={});for(const e of this.callbacks)await e.onEpochEnd(t,n)}async onBatchBegin(t,n){null==n&&(n={});for(const e of this.callbacks)await e.onBatchBegin(t,n)}async onBatchEnd(t,n){null==n&&(n={});for(const e of this.callbacks)await e.onBatchEnd(t,n)}async onTrainBegin(t){null==t&&(t={});for(const n of this.callbacks)await n.onTrainBegin(t)}async onTrainEnd(t){null==t&&(t={});for(const n of this.callbacks)await n.onTrainEnd(t)}}class h extends c{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,n){null==n&&(n={});const e=null==n.size?0:n.size;this.seen+=e;for(const s in n){const t=n[s];if("number"===typeof t)this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+t*e;else{let n;s in this.totals?n=this.totals[s]:this.totals[s]=0;const r=(0,a.tidy)((()=>(0,a.add)(this.totals[s],(0,a.mul)(t,e))));this.totals[s]=r,null!=n&&n.dispose()}}}async onEpochEnd(t,n){if(null!=n)for(const e of this.params.metrics)null!=this.totals[e]&&("number"===typeof this.totals[e]?n[e]=this.totals[e]/this.seen:(0,a.tidy)((()=>{const t=(0,a.mul)((0,a.div)(1,this.seen),this.totals[e]);n[e]=t,this.totals[e].dispose(),(0,a.keep)(n[e])})))}}class l extends c{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,n){null==n&&(n={}),this.epoch.push(t);for(const e in n)null==this.history[e]&&(this.history[e]=[]),this.history[e].push(n[e])}async syncData(){const t=[],n=[],e=[];for(const a in this.history){const s=this.history[a];for(let r=0;r<s.length;++r)if("number"!==typeof s[r]){const i=s[r];t.push(i.data()),n.push(a),e.push(r)}}const s=await Promise.all(t);for(let a=0;a<s.length;++a){this.history[n[a]][e[a]].dispose(),this.history[n[a]][e[a]]=s[a][0]}}}class p extends c{constructor(t,n){if(super(),this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||a.nextFrame,this.yieldEvery=n||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=t.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");a.util.isNumber(this.yieldEvery)&&(this.maybeWait=o.sg(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,n,e){const s=[];null!=this.yield&&(await(0,i.I)(e),s.push(this.yield(t,n,e))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(t,n){this.currentEpoch=t,null!=this.epochBegin&&(await(0,i.I)(n),await this.epochBegin(t,n))}async onEpochEnd(t,n){const e=[];null!=this.epochEnd&&(await(0,i.I)(n),e.push(this.epochEnd(t,n))),"epoch"===this.yieldEvery&&e.push(this.nextFrameFunc()),await Promise.all(e)}async onBatchBegin(t,n){null!=this.batchBegin&&(await(0,i.I)(n),await this.batchBegin(t,n))}async onBatchEnd(t,n){const e=[];null!=this.batchEnd&&(await(0,i.I)(n),e.push(this.batchEnd(t,n))),"batch"===this.yieldEvery?e.push(this.nextFrameFunc()):a.util.isNumber(this.yieldEvery)&&e.push(this.maybeWait(this.currentEpoch,t,n)),await Promise.all(e)}async onTrainBegin(t){null!=this.trainBegin&&(await(0,i.I)(t),await this.trainBegin(t))}async onTrainEnd(t){null!=this.trainEnd&&(await(0,i.I)(t),await this.trainEnd(t))}}function f(t,n){if(null==t&&(t={}),t instanceof c)return[t];if(Array.isArray(t)&&t[0]instanceof c)return t;return o.st(t).map((t=>new p(t,n)))}class d{constructor(){}static registerCallbackConstructor(t,n){a.util.assert(t>=0&&Number.isInteger(t),(()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`)),d.checkForDuplicate(n),null==d.constructors[t]&&(d.constructors[t]=[]),d.constructors[t].push(n)}static checkForDuplicate(t){for(const n in d.constructors){d.constructors[+n].forEach((n=>{if(n===t)throw new r.Qp("Duplicate callback constructor.")}))}}static clear(){d.constructors={}}static createCallbacks(t){const n=[];for(const e in d.constructors){const s=+e;t>=s&&n.push(...d.constructors[s])}return n.map((t=>new t))}}function y(t,n,e,s,a,r,i,o,c){const p=new l,f=[new h,...d.createCallbacks(n)];null!=t&&f.push(...t),f.push(p);const y=new u(f);return y.setParams({epochs:e,initialEpoch:s,samples:a,steps:r,batchSize:i,verbose:n,doValidation:o,metrics:c}),{callbackList:y,history:p}}d.constructors={}},87504:function(t,n,e){e.d(n,{YZ:function(){return y},uH:function(){return f}});var s=e(9495),a=e(6090),r=e(44813);function i(t,n){return(0,s.tidy)((()=>s.sqrt(s.sum(s.mul(t,t),n,!0))))}class o extends s.serialization.Serializable{getConfig(){return{}}}class c extends o{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return(0,s.tidy)((()=>{const n=i(t,this.axis),e=s.clipByValue(n,0,this.maxValue);return s.mul(t,s.div(e,s.add((0,a.Ni)(),n)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}c.className="MaxNorm",s.serialization.registerClass(c);class u extends o{constructor(t){super(),this.defaultAxis=0,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return(0,s.tidy)((()=>s.div(t,s.add((0,a.Ni)(),i(t,this.axis)))))}getConfig(){return{axis:this.axis}}}u.className="UnitNorm",s.serialization.registerClass(u);class h extends o{apply(t){return s.relu(t)}}h.className="NonNeg",s.serialization.registerClass(h);class l extends o{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=t.minValue?t.minValue:this.defaultMinValue,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.rate=null!=t.rate?t.rate:this.defaultRate,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return(0,s.tidy)((()=>{const n=i(t,this.axis),e=s.add(s.mul(this.rate,s.clipByValue(n,this.minValue,this.maxValue)),s.mul(1-this.rate,n));return s.mul(t,s.div(e,s.add((0,a.Ni)(),n)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}l.className="MinMaxNorm",s.serialization.registerClass(l);const p={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function f(t){return(0,r.k4)(t)}function d(t,n={}){return(0,r.Xv)(t,s.serialization.SerializationMap.getMap().classNameMap,n,"constraint")}function y(t){if(null==t)return null;if("string"===typeof t){return d({className:t in p?p[t]:t,config:{}})}return t instanceof o?t:d(t)}},91686:function(t,n,e){e.d(n,{j:function(){return a},v:function(){return i}});let s=0;function a(){return s++}const r={};function i(t=""){return t in r||(r[t]=0),r[t]+=1,t+r[t].toString()}}}]);
//# sourceMappingURL=stylist-vendors-13e69d33.ecb4a3769f74a91c1fb2.js.map
"use strict";(self.webpackChunkStylistWidget=self.webpackChunkStylistWidget||[]).push([[6704],{1242:function(e,n,r){r.d(n,{p:function(){return i}});var t=r(67897),s=r(15441),o=r(28189),a=r(45119);const i=(0,r(70929).op)({transform_:function(e,n,r="nearest",i="constant",u=0,c){const l=(0,o.YT)(e,"image","transform","float32"),p=(0,o.YT)(n,"transforms","transform","float32");a.vA(4===l.rank,(()=>`Error in transform: image must be rank 4,but got rank ${l.rank}.`)),a.vA(2===p.rank&&(p.shape[0]===l.shape[0]||1===p.shape[0])&&8===p.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),a.vA(null==c||2===c.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${c}.`));const h={image:l,transforms:p},d={interpolation:r,fillMode:i,fillValue:u,outputShape:c};return t.T2.runKernel(s.dLy,h,d)}})},5323:function(e,n,r){r.d(n,{U:function(){return a}});var t=r(28189),s=r(45119),o=r(74027);const a=async function(e,n,r=1){const a=(0,t.YT)(e,"predictions","inTopK"),i=(0,t.YT)(n,"targets","inTopK");(0,s.vA)(a.rank>1,(()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${a.rank}`)),(0,s.vA)(a.rank-1===i.rank,(()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${a.rank} and targets rank ${i.rank}`)),(0,s.O3)(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const u=a.shape[a.shape.length-1];(0,s.vA)(r>0&&r<=u,(()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${u}), but got ${r}`));const c=await a.data(),l=await i.data(),[p,h]=[c.length/u,u],d=(0,s.ce)("bool",p);for(let t=0;t<p;t++){const e=t*h,n=c.subarray(e,e+h),s=[];for(let r=0;r<n.length;r++)s.push({value:n[r],index:r});s.sort(((e,n)=>n.value-e.value)),d[t]=0;for(let o=0;o<r;o++)if(s[o].index===l[t]){d[t]=1;break}}return e!==a&&a.dispose(),n!==i&&i.dispose(),(0,o.O)(d,i.shape,"bool")}},5902:function(e,n,r){r.d(n,{R:function(){return u}});var t=r(8360),s=r(28189),o=r(68712),a=r(45702),i=r(62018);const u=async function(e,n,r,u=.5,c=Number.NEGATIVE_INFINITY,l=!1){const p=(0,s.YT)(e,"boxes","nonMaxSuppressionAsync"),h=(0,s.YT)(n,"scores","nonMaxSuppressionAsync"),d=(0,o.W)(p,h,r,u,c,null),f=d.maxOutputSize,g=d.iouThreshold,b=d.scoreThreshold,[m,T]=await Promise.all([p.data(),h.data()]),{selectedIndices:k,validOutputs:v}=(0,t.ZS)(m,T,f,g,b,l);return p!==e&&p.dispose(),h!==n&&h.dispose(),{selectedIndices:(0,i.t)(k,"int32"),validOutputs:(0,a.d)(v,"int32")}}},7425:function(e,n,r){r.d(n,{l:function(){return i}});var t=r(8360),s=r(28189),o=r(68712),a=r(62018);const i=async function(e,n,r,i=.5,u=Number.NEGATIVE_INFINITY,c=0){const l=(0,s.YT)(e,"boxes","nonMaxSuppressionAsync"),p=(0,s.YT)(n,"scores","nonMaxSuppressionAsync"),h=(0,o.W)(l,p,r,i,u,c);r=h.maxOutputSize,i=h.iouThreshold,u=h.scoreThreshold,c=h.softNmsSigma;const d=await Promise.all([l.data(),p.data()]),f=d[0],g=d[1],{selectedIndices:b,selectedScores:m}=(0,t.ut)(f,g,r,i,u,c);return l!==e&&l.dispose(),p!==n&&p.dispose(),{selectedIndices:(0,a.t)(b,"int32"),selectedScores:(0,a.t)(m)}}},13337:function(e,n,r){r.d(n,{D:function(){return u}});var t=r(67897),s=r(15441),o=r(30565),a=r(28189),i=r(62198);const u=(0,r(70929).op)({greaterEqual_:function(e,n){let r=(0,a.YT)(e,"a","greaterEqual","string_or_numeric"),u=(0,a.YT)(n,"b","greaterEqual","string_or_numeric");[r,u]=(0,o.makeTypesMatch)(r,u),(0,i.assertAndGetBroadcastShape)(r.shape,u.shape);const c={a:r,b:u};return t.T2.runKernel(s.lLS,c)}})},21557:function(e,n,r){r.d(n,{S:function(){return l}});var t=r(28189),s=r(45119),o=r(29809),a=r(79853),i=r(8710),u=r(70929),c=r(62018);const l=(0,u.op)({rgbToGrayscale_:function(e){const n=(0,t.YT)(e,"image","RGBToGrayscale"),r=n.rank-1,u=n.shape[r];s.vA(n.rank>=2,(()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${n.rank}.`)),s.vA(3===u,(()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${u}.`));const l=n.dtype,p=(0,o.w)(n,"float32"),h=(0,c.t)([.2989,.587,.114]);let d;switch(n.rank){case 2:d=(0,a._)("ij,j->i",p,h);break;case 3:d=(0,a._)("ijk,k->ij",p,h);break;case 4:d=(0,a._)("ijkl,l->ijk",p,h);break;case 5:d=(0,a._)("ijklm,m->ijkl",p,h);break;case 6:d=(0,a._)("ijklmn,n->ijklm",p,h);break;default:throw new Error("Not a valid tensor rank.")}return d=(0,i.U)(d,-1),(0,o.w)(d,l)}})},31951:function(e,n,r){r.d(n,{C:function(){return i}});var t=r(67897),s=r(15441),o=r(28189),a=r(45119);const i=(0,r(70929).op)({cropAndResize_:function(e,n,r,i,u="bilinear",c=0){const l=(0,o.YT)(e,"image","cropAndResize"),p=(0,o.YT)(n,"boxes","cropAndResize","float32"),h=(0,o.YT)(r,"boxInd","cropAndResize","int32"),d=p.shape[0];a.vA(4===l.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${l.rank}.`)),a.vA(2===p.rank&&4===p.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${d},4] but had shape ${p.shape}.`)),a.vA(1===h.rank&&h.shape[0]===d,(()=>`Error in cropAndResize: boxInd must be have size [${d}] but had shape ${p.shape}.`)),a.vA(2===i.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${i.length}.`)),a.vA(i[0]>=1&&i[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${i}`)),a.vA("bilinear"===u||"nearest"===u,(()=>`method must be bilinear or nearest, but was ${u}`));const f={image:l,boxes:p,boxInd:h},g={method:u,extrapolationValue:c,cropSize:i};return t.T2.runKernel(s.MRQ,f,g)}})},35040:function(e,n,r){r.d(n,{n:function(){return a}});var t=r(67897),s=r(15441),o=r(28189);const a=(0,r(70929).op)({imag_:function(e){const n={input:(0,o.YT)(e,"input","imag")};return t.T2.runKernel(s.dv8,n)}})},41477:function(e,n,r){r.d(n,{C:function(){return i}});var t=r(28189),s=r(45119),o=r(70929),a=r(64826);const i=(0,o.op)({grayscaleToRGB_:function(e){const n=(0,t.YT)(e,"image","grayscaleToRGB"),r=n.rank-1,o=n.shape[r];s.vA(n.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${n.rank}.`)),s.vA(1===o,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${o}.`));const i=new Array(n.rank);return i.fill(1,0,r),i[r]=3,(0,a.V)(n,i)}})},42954:function(e,n,r){r.d(n,{b:function(){return c}});var t=r(67897),s=r(15441),o=r(28189),a=r(45119),i=r(70929),u=r(62302);const c=(0,i.op)({resizeNearestNeighbor_:function(e,n,r=!1,i=!1){const c=(0,o.YT)(e,"images","resizeNearestNeighbor");a.vA(3===c.rank||4===c.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${c.rank}.`)),a.vA(2===n.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${n}.`)),a.vA("float32"===c.dtype||"int32"===c.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),a.vA(!1===i||!1===r,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let l=c,p=!1;3===c.rank&&(p=!0,l=(0,u.t)(c,[1,c.shape[0],c.shape[1],c.shape[2]]));const[]=n,h={images:l},d={alignCorners:r,halfPixelCenters:i,size:n},f=t.T2.runKernel(s.jOE,h,d);return p?(0,u.t)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}})},44711:function(e,n,r){r.d(n,{v:function(){return c}});var t=r(67897),s=r(15441),o=r(28189),a=r(45119),i=r(70929),u=r(62302);const c=(0,i.op)({resizeBilinear_:function(e,n,r=!1,i=!1){const c=(0,o.YT)(e,"images","resizeBilinear");a.vA(3===c.rank||4===c.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${c.rank}.`)),a.vA(2===n.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${n}.`)),a.vA(!1===i||!1===r,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let l=c,p=!1;3===c.rank&&(p=!0,l=(0,u.t)(c,[1,c.shape[0],c.shape[1],c.shape[2]]));const[]=n,h={images:l},d={alignCorners:r,halfPixelCenters:i,size:n},f=t.T2.runKernel(s.hgw,h,d);return p?(0,u.t)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}})},56248:function(e,n,r){r.d(n,{L:function(){return i}});var t=r(67897),s=r(15441),o=r(28189),a=r(68712);const i=(0,r(70929).op)({nonMaxSuppression_:function(e,n,r,i=.5,u=Number.NEGATIVE_INFINITY){const c=(0,o.YT)(e,"boxes","nonMaxSuppression","float32"),l=(0,o.YT)(n,"scores","nonMaxSuppression","float32"),p=(0,a.W)(c,l,r,i,u),h={maxOutputSize:r=p.maxOutputSize,iouThreshold:i=p.iouThreshold,scoreThreshold:u=p.scoreThreshold};return t.T2.runKernel(s.SDM,{boxes:c,scores:l},h)}})},62058:function(e,n,r){r.d(n,{r:function(){return u}});var t=r(67897),s=r(15441),o=r(30565),a=r(28189),i=r(62198);const u=(0,r(70929).op)({greater_:function(e,n){let r=(0,a.YT)(e,"a","greater","string_or_numeric"),u=(0,a.YT)(n,"b","greater","string_or_numeric");[r,u]=(0,o.makeTypesMatch)(r,u),(0,i.assertAndGetBroadcastShape)(r.shape,u.shape);const c={a:r,b:u};return t.T2.runKernel(s.XhZ,c)}})},64658:function(e,n,r){r.d(n,{x:function(){return i}});var t=r(67897),s=r(15441),o=r(28189),a=r(45119);const i=(0,r(70929).op)({rotateWithOffset_:function(e,n,r=0,i=.5){const u=(0,o.YT)(e,"image","rotateWithOffset","float32");a.vA(4===u.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${u.rank}.`));const c={image:u},l={radians:n,fillValue:r,center:i};return t.T2.runKernel(s.BK4,c,l)}})},68318:function(e,n,r){r.d(n,{M:function(){return a}});var t=r(67897),s=r(15441),o=r(28189);const a=(0,r(70929).op)({isFinite_:function(e){const n={x:(0,o.YT)(e,"x","isFinite")};return t.T2.runKernel(s.gIW,n)}})},70215:function(e,n,r){r.d(n,{z:function(){return i}});var t=r(8360),s=r(28189),o=r(68712),a=r(62018);const i=async function(e,n,r,i=.5,u=Number.NEGATIVE_INFINITY){const c=(0,s.YT)(e,"boxes","nonMaxSuppressionAsync"),l=(0,s.YT)(n,"scores","nonMaxSuppressionAsync"),p=(0,o.W)(c,l,r,i,u);r=p.maxOutputSize,i=p.iouThreshold,u=p.scoreThreshold;const h=await Promise.all([c.data(),l.data()]),d=h[0],f=h[1],{selectedIndices:g}=(0,t.c7)(d,f,r,i,u);return c!==e&&c.dispose(),l!==n&&l.dispose(),(0,a.t)(g,"int32")}},73866:function(e,n,r){r.d(n,{n:function(){return i}});var t=r(67897),s=r(15441),o=r(28189),a=r(45119);const i=(0,r(70929).op)({flipLeftRight_:function(e){const n=(0,o.YT)(e,"image","flipLeftRight","float32");a.vA(4===n.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${n.rank}.`));const r={image:n};return t.T2.runKernel(s.BxF,r,{})}})},80525:function(e,n,r){r.d(n,{E:function(){return y}});var t=r(62018),s=r(70929),o=r(29809),a=r(66512),i=r(40758),u=r(56508),c=r(62058),l=r(83791),p=r(37523),h=r(9258),d=r(89359),f=r(77126),g=r(25912),b=r(12151),m=r(96111),T=r(17986),k=r(44645),v=r(74027),x=r(45119),A=r(28189);const y=(0,s.op)({threshold_:function(e,n="binary",r=!1,s=.5){const y=(0,A.YT)(e,"image","threshold"),S=y.shape[0]*y.shape[1];let z,E,I,N,Y=(0,h.l)((0,t.t)([s]),255);if(x.vA(3===y.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${y.rank}.`)),x.vA(3===y.shape[2]||1===y.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${y.shape[2]}.`)),x.vA("int32"===y.dtype||"float32"===y.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${y.dtype}.`)),x.vA("otsu"===n||"binary"===n,(()=>`Method must be binary or otsu, but was ${n}`)),3===y.shape[2]){[z,E,I]=(0,a.l)(y,[1,1,1],-1);const e=(0,h.l)(z,.2989),n=(0,h.l)(E,.587),r=(0,h.l)(I,.114);N=(0,p.W)((0,p.W)(e,n),r)}else N=e;if("otsu"===n){Y=function(e,n){let r,s,o,a,i,u,g=(0,t.t)([-1]),v=(0,t.t)([0]),x=(0,t.t)([0]);for(let A=0;A<e.size-1;A++){r=(0,T.d)(e,0,A+1),s=(0,T.d)(e,A+1),i=(0,d.y)((0,l.c)(r),n),u=(0,d.y)((0,l.c)(s),n);const y=(0,l.c)((0,h.l)(r,(0,k.y)(0,r.size)));o=(0,d.y)(y,(0,l.c)(r));const S=(0,m.G)(s.shape,r.size),z=(0,p.W)((0,k.y)(0,s.size),S),E=(0,h.l)(s,z);a=(0,d.y)((0,l.c)(E),(0,l.c)(s));const I=(0,f.j)(o,a),N=(0,f.j)(o,a),Y=(0,h.l)(i,u);x=(0,h.l)((0,h.l)(Y,I),N);const _=(0,c.r)(x,v);v=(0,b._)(_,x,v),g=(0,b._)(_,(0,t.t)([A]),g)}return g}((0,i.H)((0,o.w)((0,g.L)(N),"int32"),(0,v.O)([]),256),S)}const _=r?(0,u.I)(N,Y):(0,c.r)(N,Y);return(0,o.w)((0,h.l)(_,255),"int32")}})},84305:function(e,n,r){r.d(n,{H:function(){return i}});var t=r(67897),s=r(15441),o=r(28189),a=r(68712);const i=(0,r(70929).op)({nonMaxSuppressionPadded_:function(e,n,r,i=.5,u=Number.NEGATIVE_INFINITY,c=!1){const l=(0,o.YT)(e,"boxes","nonMaxSuppression"),p=(0,o.YT)(n,"scores","nonMaxSuppression"),h=(0,a.W)(l,p,r,i,u,null),d={boxes:l,scores:p},f={maxOutputSize:h.maxOutputSize,iouThreshold:h.iouThreshold,scoreThreshold:h.scoreThreshold,padToMaxOutputSize:c},g=t.T2.runKernel(s.Zl4,d,f);return{selectedIndices:g[0],validOutputs:g[1]}}})},95634:function(e,n,r){r.d(n,{f:function(){return i}});var t=r(67897),s=r(15441),o=r(28189),a=r(68712);const i=(0,r(70929).op)({nonMaxSuppressionWithScore_:function(e,n,r,i=.5,u=Number.NEGATIVE_INFINITY,c=0){const l=(0,o.YT)(e,"boxes","nonMaxSuppression"),p=(0,o.YT)(n,"scores","nonMaxSuppression"),h=(0,a.W)(l,p,r,i,u,c),d={boxes:l,scores:p},f={maxOutputSize:r=h.maxOutputSize,iouThreshold:i=h.iouThreshold,scoreThreshold:u=h.scoreThreshold,softNmsSigma:c=h.softNmsSigma},g=t.T2.runKernel(s.e0f,d,f);return{selectedIndices:g[0],selectedScores:g[1]}}})}}]);
//# sourceMappingURL=stylist-vendors-25fe0953.17e11453a9b8b63fddf3.js.map
"use strict";(self.webpackChunkStylistWidget=self.webpackChunkStylistWidget||[]).push([[6724],{37622:function(t,e,i){var s=i(79730),n=i(9495),a=i(63057),r=i(15841),o=i(47661);class l extends s.Wd{constructor(t){super(t),this.numTokens=t.numTokens,t.outputMode?this.outputMode=t.outputMode:this.outputMode="multiHot"}getConfig(){const t={numTokens:this.numTokens,outputMode:this.outputMode},e=super.getConfig();return Object.assign(t,e),t}computeOutputShape(t){return null==(t=(0,a.U$)(t))?[this.numTokens]:"oneHot"===this.outputMode&&1!==t[t.length-1]?(t.push(this.numTokens),t):(t[t.length-1]=this.numTokens,t)}call(t,e){return(0,n.tidy)((()=>{let i;if("int32"!==(t=(0,a.un)(t)).dtype&&(t=o.wg(t,"int32")),"undefined"!==typeof e.countWeights){if("count"!==this.outputMode)throw new r.Qp(`countWeights is not used when outputMode !== count.\n              Received countWeights=${e.countWeights}`);i=(0,a.un)(e.countWeights)}const s=(0,n.max)(t),l=(0,n.min)(t),d=(0,n.greater)(this.numTokens,s).bufferSync().get(0),h=(0,n.greaterEqual)(l,0).bufferSync().get(0);if(!d||!h)throw new r.Qp(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return function(t,e,i,s){let l=(0,a.un)(t);if("int32"!==l.dtype&&(l=o.wg(l,"int32")),"int"===e)return l;const d=l.shape;if(0===l.rank&&(l=(0,n.expandDims)(l,-1)),"oneHot"===e&&1!==l.shape[l.shape.length-1]&&(l=(0,n.expandDims)(l,-1)),l.rank>2)throw new r.Qp(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${d} which would result in output rank ${l.rank}.`);const h=["multiHot","oneHot"].includes(e),u=l;let p;if(p="undefined"!==typeof s&&"count"===e?(0,n.denseBincount)(u,s,i,h):(0,n.denseBincount)(u,[],i,h),"tfIdf"!==e)return p;if(s)return(0,n.mul)(p,s);throw new r.Qp("When outputMode is 'tfIdf', weights must be provided.")}(t,this.outputMode,this.numTokens,i)}))}}l.className="CategoryEncoding",n.serialization.registerClass(l)},47477:function(t,e,i){var s=i(9495),n=i(6090),a=i(47661),r=i(39459),o=i(79730),l=i(15841),d=i(69184),h=i(44813),u=i(63057),p=i(9548);function c(t,e,i,a,o,l){return(0,s.tidy)((()=>{let d;(0,r.uM)(o),(0,r.Kx)(l),(0,r.tB)(a),null==i&&(i=[1,1]),null==a&&(a="valid"),null==o&&(o=(0,n.VI)()),null==l&&(l="max"),t=(0,p.RK)(t,o);const h="same"===a?"same":"valid";return d="max"===l?s.maxPool(t,e,i,h):s.avgPool(t,e,i,h),"channelsFirst"===o&&(d=s.transpose(d,[0,3,1,2])),d}))}function g(t,e,i,a,o,l){return(0,s.tidy)((()=>{let d;(0,r.uM)(o),(0,r.Kx)(l),(0,r.tB)(a),null==i&&(i=[1,1,1]),null==a&&(a="valid"),null==o&&(o=(0,n.VI)()),null==l&&(l="max"),t=(0,p.al)(t,o);const h="same"===a?"same":"valid";return d="max"===l?s.maxPool3d(t,e,i,h):s.avgPool3d(t,e,i,h),"channelsFirst"===o&&(d=s.transpose(d,[0,4,1,2,3])),d}))}class m extends o.Wd{constructor(t){if(null==t.poolSize&&(t.poolSize=2),super(t),"number"===typeof t.poolSize)this.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!==typeof t.poolSize[0])throw new l.Qp(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);this.poolSize=t.poolSize}if((0,h.oo)(this.poolSize,"poolSize"),null==t.strides)this.strides=this.poolSize;else if("number"===typeof t.strides)this.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!==typeof t.strides[0])throw new l.Qp(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);this.strides=t.strides}(0,h.oo)(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,(0,r.tB)(this.padding),this.inputSpec=[new o.eO({ndim:3})]}computeOutputShape(t){t=(0,u.U$)(t);const e=(0,d.Ol)(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]}call(t,e){return(0,s.tidy)((()=>{this.invokeCallHook(t,e),t=a.UG((0,u.un)(t),2);const i=this.poolingFunction((0,u.un)(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return s.squeeze(i,[2])}))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(t,e),t}}class f extends m{constructor(t){super(t)}poolingFunction(t,e,i,s,n){return(0,r.uM)(n),(0,r.tB)(s),c(t,e,i,s,n,"max")}}f.className="MaxPooling1D",s.serialization.registerClass(f);class w extends m{constructor(t){super(t)}poolingFunction(t,e,i,s,n){return(0,r.uM)(n),(0,r.tB)(s),c(t,e,i,s,n,"avg")}}w.className="AveragePooling1D",s.serialization.registerClass(w);class z extends o.Wd{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new l.Qp(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];(0,h.oo)(this.poolSize,"poolSize"),(0,h.oo)(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,(0,r.uM)(this.dataFormat),(0,r.tB)(this.padding),this.inputSpec=[new o.eO({ndim:4})]}computeOutputShape(t){t=(0,u.U$)(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],i="channelsFirst"===this.dataFormat?t[3]:t[2];return e=(0,d.Ol)(e,this.poolSize[0],this.padding,this.strides[0]),i=(0,d.Ol)(i,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,i]:[t[0],e,i,t[3]]}call(t,e){return(0,s.tidy)((()=>(this.invokeCallHook(t,e),this.poolingFunction((0,u.un)(t),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class S extends z{constructor(t){super(t)}poolingFunction(t,e,i,s,n){return(0,r.uM)(n),(0,r.tB)(s),c(t,e,i,s,n,"max")}}S.className="MaxPooling2D",s.serialization.registerClass(S);class y extends z{constructor(t){super(t)}poolingFunction(t,e,i,s,n){return(0,r.uM)(n),(0,r.tB)(s),c(t,e,i,s,n,"avg")}}y.className="AveragePooling2D",s.serialization.registerClass(y);class b extends o.Wd{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(3!==t.strides.length)throw new l.Qp(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];(0,h.oo)(this.poolSize,"poolSize"),(0,h.oo)(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,(0,r.uM)(this.dataFormat),(0,r.tB)(this.padding),this.inputSpec=[new o.eO({ndim:5})]}computeOutputShape(t){t=(0,u.U$)(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],i="channelsFirst"===this.dataFormat?t[3]:t[2],s="channelsFirst"===this.dataFormat?t[4]:t[3];return e=(0,d.Ol)(e,this.poolSize[0],this.padding,this.strides[0]),i=(0,d.Ol)(i,this.poolSize[1],this.padding,this.strides[1]),s=(0,d.Ol)(s,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,i,s]:[t[0],e,i,s,t[4]]}call(t,e){return(0,s.tidy)((()=>(this.invokeCallHook(t,e),this.poolingFunction((0,u.un)(t),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class F extends b{constructor(t){super(t)}poolingFunction(t,e,i,s,n){return(0,r.uM)(n),(0,r.tB)(s),g(t,e,i,s,n,"max")}}F.className="MaxPooling3D",s.serialization.registerClass(F);class v extends b{constructor(t){super(t)}poolingFunction(t,e,i,s,n){return(0,r.uM)(n),(0,r.tB)(s),g(t,e,i,s,n,"avg")}}v.className="AveragePooling3D",s.serialization.registerClass(v);class x extends o.Wd{constructor(t){super(t),this.inputSpec=[new o.eO({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,e){throw new l.EH}}class C extends x{constructor(t){super(t||{})}call(t,e){return(0,s.tidy)((()=>{const e=(0,u.un)(t);return s.mean(e,1)}))}}C.className="GlobalAveragePooling1D",s.serialization.registerClass(C);class M extends x{constructor(t){super(t||{})}call(t,e){return(0,s.tidy)((()=>{const e=(0,u.un)(t);return s.max(e,1)}))}}M.className="GlobalMaxPooling1D",s.serialization.registerClass(M);class A extends o.Wd{constructor(t){super(t),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,(0,r.uM)(this.dataFormat),this.inputSpec=[new o.eO({ndim:4})]}computeOutputShape(t){return"channelsLast"===this.dataFormat?[t[0],t[3]]:[t[0],t[1]]}call(t,e){throw new l.EH}getConfig(){const t={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class O extends A{call(t,e){return(0,s.tidy)((()=>{const e=(0,u.un)(t);return"channelsLast"===this.dataFormat?s.mean(e,[1,2]):s.mean(e,[2,3])}))}}O.className="GlobalAveragePooling2D",s.serialization.registerClass(O);class k extends A{call(t,e){return(0,s.tidy)((()=>{const e=(0,u.un)(t);return"channelsLast"===this.dataFormat?s.max(e,[1,2]):s.max(e,[2,3])}))}}k.className="GlobalMaxPooling2D",s.serialization.registerClass(k)},55795:function(t,e,i){i.d(e,{i:function(){return a}});var s=i(9495),n=i(44813);function a(t,e={},i=!1){return(0,n.Xv)(t,s.serialization.SerializationMap.getMap().classNameMap,e,"layer",i)}},59604:function(t,e,i){var s=i(9495),n=i(63057),a=i(15841),r=i(93928);const o=new Set(["bilinear","nearest"]);class l extends r.W{constructor(t){super(t);const{factor:e,interpolation:i="bilinear"}=t;if(this.factor=e,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new a.Qp(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new a.Qp(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new a.Qp(`factor cannot have upper bound less than lower bound.\n        Got upper bound: ${this.widthUpper}.\n        Got lower bound: ${this.widthLower}\n      `);if(i){if(!o.has(i))throw new a.Qp(`Invalid interpolation parameter: ${i} is not implemented`);this.interpolation=i}}getConfig(){const t={factor:this.factor,interpolation:this.interpolation},e=super.getConfig();return Object.assign(t,e),t}computeOutputShape(t){const e=(t=(0,n.U$)(t))[2];return[this.imgHeight,-1,e]}call(t,e){return(0,s.tidy)((()=>{const e=(0,n.un)(t);this.imgHeight=e.shape[e.shape.length-3];const i=e.shape[e.shape.length-2];this.widthFactor=(0,s.randomUniform)([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*i;a=Math.round(a);const r=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return s.image.resizeBilinear(t,r);case"nearest":return s.image.resizeNearestNeighbor(t,r);default:throw new Error(`Interpolation is ${this.interpolation}\n          but only ${[...o]} are supported`)}}))}}l.className="RandomWidth",s.serialization.registerClass(l)},62822:function(t,e,i){var s=i(9495),n=i(63057),a=i(79730),r=i(47661);const{resizeBilinear:o,cropAndResize:l}=s.image;class d extends a.Wd{constructor(t){super(t),this.height=t.height,this.width=t.width}centerCrop(t,e,i,a,o,d,h,u){return(0,s.tidy)((()=>{let p,c=!1;const g=[e/d,i/h,(a+e)/d,(o+i)/h],m=[];3===t.rank?(c=!0,p=(0,s.stack)([t])):p=t;for(let t=0;t<p.shape[0];t++)m.push(g);const f=(0,s.tensor)(m,[m.length,4]),w=(0,s.range)(0,m.length,1,"int32"),z=l(p,f,w,[a,o],"nearest");return c?r.wg((0,n.un)((0,s.unstack)(z)),u):r.wg(z,u)}))}upsize(t,e,i,n){return(0,s.tidy)((()=>{const s=o(t,[e,i]);return r.wg(s,n)}))}call(t,e){return(0,s.tidy)((()=>{const e=(0,n.un)(t),i=e.dtype,s=e.shape,a=s[s.length-3],r=s[s.length-2];let o=0;a!==this.height&&(o=Math.floor((a-this.height)/2));let l=0;return r!==this.width&&(l=Math.floor((r-this.width)/2),0===l&&(l=1)),o>=0&&l>=0?this.centerCrop(e,o,l,this.height,this.width,a,r,i):this.upsize(t,this.height,this.width,i)}))}getConfig(){const t={height:this.height,width:this.width},e=super.getConfig();return Object.assign(t,e),t}computeOutputShape(t){const e=(t=(0,n.U$)(t)).length-3,i=t.length-2;return t[e]=this.height,t[i]=this.width,t}}d.className="CenterCrop",s.serialization.registerClass(d)},79298:function(t,e,i){var s=i(79730),n=i(9495),a=i(63057),r=i(47661);class o extends s.Wd{constructor(t){super(t),this.scale=t.scale,t.offset?this.offset=t.offset:this.offset=0}getConfig(){const t={scale:this.scale,offset:this.offset},e=super.getConfig();return Object.assign(t,e),t}call(t,e){return(0,n.tidy)((()=>("float32"!==(t=(0,a.un)(t)).dtype&&(t=r.wg(t,"float32")),(0,n.add)((0,n.mul)(t,this.scale),this.offset))))}}o.className="Rescaling",n.serialization.registerClass(o)},79710:function(t,e,i){var s=i(9495),n=i(6090),a=i(79730),r=i(15841),o=i(63057);class l extends a.Wd{constructor(t){if(null==t&&(t={}),super(t),this.dataFormat=null==t.dataFormat?(0,n.VI)():t.dataFormat,null==t.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof t.padding)this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new r.Qp(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let e,i;if("number"===typeof t.padding[0])e=[t.padding[0],t.padding[0]],i=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new r.Qp(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(e=t.padding[0],2!==t.padding[1].length)throw new r.Qp(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);i=t.padding[1]}this.padding=[e,i]}this.inputSpec=[new a.eO({ndim:4})]}computeOutputShape(t){let e,i;return t=(0,o.U$)(t),"channelsFirst"===this.dataFormat?(e=null!=t[2]&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,i=null!=t[3]&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null,[t[0],t[1],e,i]):(e=null!=t[1]&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,i=null!=t[2]&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,[t[0],e,i,t[3]])}call(t,e){return(0,s.tidy)((()=>{return e=(0,o.un)(t),i=this.padding,a=this.dataFormat,(0,s.tidy)((()=>{if(4!==e.rank)throw new r.Qp(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(null==i&&(i=[[1,1],[1,1]]),2!==i.length||2!==i[0].length||2!==i[1].length)throw new r.Qp("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a=(0,n.VI)()),"channelsLast"!==a&&"channelsFirst"!==a)throw new r.Qp(`Unknown data format: ${a}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let t;return t="channelsFirst"===a?[[0,0],[0,0],i[0],i[1]]:[[0,0],i[0],i[1],[0,0]],s.pad(e,t)}));var e,i,a}))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}l.className="ZeroPadding2D",s.serialization.registerClass(l)},94777:function(t,e,i){var s=i(9495),n=i(79730),a=i(15841),r=i(63057);const o=new Set(["bilinear","nearest"]);class l extends n.Wd{constructor(t){if(super(t),this.height=t.height,this.width=t.width,t.interpolation){if(!o.has(t.interpolation))throw new a.Qp(`Invalid interpolation parameter: ${t.interpolation} is not implemented`);this.interpolation=t.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(t.cropToAspectRatio)}computeOutputShape(t){const e=(t=(0,r.U$)(t))[2];return[this.height,this.width,e]}getConfig(){const t={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},e=super.getConfig();return Object.assign(t,e),t}call(t,e){return(0,s.tidy)((()=>{const e=[this.height,this.width];if("bilinear"===this.interpolation)return s.image.resizeBilinear(t,e,!this.cropToAspectRatio);if("nearest"===this.interpolation)return s.image.resizeNearestNeighbor(t,e,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...o]} are supported`)}))}}l.className="Resizing",s.serialization.registerClass(l)}}]);
//# sourceMappingURL=stylist-vendors-1e27c8c6.34194a3ed0561e413dfc.js.map
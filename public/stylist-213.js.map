{"version":3,"file":"stylist-213.js","mappings":"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","sources":["webpack://StylistWidget/./src/store/tryOnStore.ts","webpack://StylistWidget/./src/utils/localStorage.ts","webpack://StylistWidget/./src/store/feedbackStore.ts","webpack://StylistWidget/./src/types/chat.ts","webpack://StylistWidget/./src/store/chatStore.ts","webpack://StylistWidget/./src/types/tryOn.ts","webpack://StylistWidget/./src/store/userStore.ts","webpack://StylistWidget/./src/store/recommendationStore.ts","webpack://StylistWidget/./src/services/image-processing/imagePositioning.ts"],"sourcesContent":["// Store for managing virtual try-on state\nimport { create } from 'zustand';\nimport { devtools, persist } from 'zustand/middleware';\nimport { BackgroundRemovalMethod, GarmentType } from '../types/tryOn';\nimport { getDefaultBodyPosition } from '../services/image-processing/imagePositioning';\n// Default settings\nconst DEFAULT_SETTINGS = {\n    preferredBackgroundRemovalMethod: BackgroundRemovalMethod.TENSORFLOW,\n    removeBackgroundAutomatically: true,\n    showGuidelines: true,\n    highQualityRendering: true,\n    defaultGarmentScale: {\n        [GarmentType.TOP]: 0.8,\n        [GarmentType.BOTTOM]: 0.7,\n        [GarmentType.DRESS]: 0.9,\n        [GarmentType.OUTERWEAR]: 0.85,\n        [GarmentType.SHOES]: 0.5,\n        [GarmentType.ACCESSORY]: 0.4\n    },\n    defaultGarmentOffset: {\n        [GarmentType.TOP]: { x: 0, y: -50 },\n        [GarmentType.BOTTOM]: { x: 0, y: 100 },\n        [GarmentType.DRESS]: { x: 0, y: 0 },\n        [GarmentType.OUTERWEAR]: { x: 0, y: -30 },\n        [GarmentType.SHOES]: { x: 0, y: 200 },\n        [GarmentType.ACCESSORY]: { x: 0, y: -150 }\n    }\n};\nexport const useTryOnStore = create()(devtools(persist((set, get) => ({\n    // Current try-on state\n    currentOutfit: null,\n    userImage: null,\n    isLoading: false,\n    error: null,\n    // Settings\n    settings: DEFAULT_SETTINGS,\n    // Saved results\n    savedResults: [],\n    // Canvas state\n    canvasWidth: 600,\n    canvasHeight: 800,\n    // Modal state\n    isTryOnModalOpen: false,\n    isUploadModalOpen: false,\n    // Actions\n    setCurrentOutfit: (outfit) => {\n        set({ currentOutfit: outfit });\n    },\n    addGarmentToOutfit: (garment) => {\n        const { currentOutfit } = get();\n        if (!currentOutfit) {\n            // Create a new outfit if none exists\n            const newOutfit = {\n                id: `outfit_${Date.now()}`,\n                garments: [garment],\n                createdAt: new Date()\n            };\n            set({ currentOutfit: newOutfit });\n        }\n        else {\n            // Remove any existing garment of the same type if it has the same body position\n            const filteredGarments = currentOutfit.garments.filter((g) => !(g.type === garment.type && g.bodyPosition === garment.bodyPosition));\n            // Add the new garment\n            set({\n                currentOutfit: Object.assign(Object.assign({}, currentOutfit), { garments: [...filteredGarments, garment] })\n            });\n        }\n    },\n    removeGarmentFromOutfit: (garmentId) => {\n        const { currentOutfit } = get();\n        if (currentOutfit) {\n            const updatedGarments = currentOutfit.garments.filter((g) => g.id !== garmentId);\n            set({\n                currentOutfit: Object.assign(Object.assign({}, currentOutfit), { garments: updatedGarments })\n            });\n        }\n    },\n    updateGarment: (garmentId, updates) => {\n        const { currentOutfit } = get();\n        if (currentOutfit) {\n            const updatedGarments = currentOutfit.garments.map((g) => g.id === garmentId ? Object.assign(Object.assign({}, g), updates) : g);\n            set({\n                currentOutfit: Object.assign(Object.assign({}, currentOutfit), { garments: updatedGarments })\n            });\n        }\n    },\n    setUserImage: (image) => {\n        set({ userImage: image });\n        // Also update the current outfit if it exists\n        const { currentOutfit } = get();\n        if (currentOutfit) {\n            // Cast image to UserImageInfo | undefined to match the expected type\n            const userImageForOutfit = image;\n            set({\n                currentOutfit: Object.assign(Object.assign({}, currentOutfit), { userImage: userImageForOutfit })\n            });\n        }\n    },\n    updateUserImage: (updates) => {\n        const { userImage } = get();\n        if (userImage) {\n            const updatedImage = Object.assign(Object.assign({}, userImage), updates);\n            set({ userImage: updatedImage });\n            // Also update the current outfit if it exists\n            const { currentOutfit } = get();\n            if (currentOutfit) {\n                set({\n                    currentOutfit: Object.assign(Object.assign({}, currentOutfit), { userImage: updatedImage })\n                });\n            }\n        }\n    },\n    clearUserImage: () => {\n        set({ userImage: null });\n        // Also update the current outfit if it exists\n        const { currentOutfit } = get();\n        if (currentOutfit) {\n            // Set to undefined to match expected type\n            const updatedOutfit = Object.assign(Object.assign({}, currentOutfit), { userImage: undefined });\n            set({ currentOutfit: updatedOutfit });\n        }\n    },\n    updateOutfit: (updates) => {\n        const { currentOutfit } = get();\n        if (currentOutfit) {\n            set({\n                currentOutfit: Object.assign(Object.assign({}, currentOutfit), updates)\n            });\n        }\n    },\n    setSettings: (settings) => {\n        set({\n            settings: Object.assign(Object.assign({}, get().settings), settings)\n        });\n    },\n    setLoading: (isLoading) => {\n        set({ isLoading });\n    },\n    setError: (error) => {\n        set({ error });\n    },\n    saveResult: (result) => {\n        const results = [...get().savedResults];\n        // Check if this result already exists\n        const existingIndex = results.findIndex((r) => r.id === result.id);\n        if (existingIndex >= 0) {\n            // Update existing result\n            results[existingIndex] = result;\n        }\n        else {\n            // Add new result\n            results.push(result);\n        }\n        set({ savedResults: results });\n    },\n    deleteSavedResult: (resultId) => {\n        const filteredResults = get().savedResults.filter((r) => r.id !== resultId);\n        set({ savedResults: filteredResults });\n    },\n    setCanvasDimensions: (width, height) => {\n        set({ canvasWidth: width, canvasHeight: height });\n    },\n    openTryOnModal: () => {\n        set({ isTryOnModalOpen: true });\n    },\n    closeTryOnModal: () => {\n        set({ isTryOnModalOpen: false });\n    },\n    openUploadModal: () => {\n        set({ isUploadModalOpen: true });\n    },\n    closeUploadModal: () => {\n        set({ isUploadModalOpen: false });\n    },\n    reset: () => {\n        set({\n            currentOutfit: null,\n            userImage: null,\n            isLoading: false,\n            error: null\n        });\n    },\n    // Integration methods\n    startNewTryOn: (productImage, productType) => {\n        const { settings } = get();\n        const state = get();\n        // Create a new outfit if none exists\n        const outfit = state.currentOutfit || {\n            id: crypto.randomUUID(),\n            garments: [],\n            createdAt: new Date()\n        };\n        // Create a garment info object\n        const newGarment = {\n            id: crypto.randomUUID(),\n            type: productType,\n            url: typeof productImage === 'string' ? productImage : URL.createObjectURL(productImage),\n            bodyPosition: getDefaultBodyPosition(productType),\n            zIndex: outfit.garments.length + 1,\n            layerIndex: outfit.garments.length,\n            scale: settings.defaultGarmentScale[productType] || 1,\n            offset: settings.defaultGarmentOffset[productType] || { x: 0, y: 0 },\n            rotation: 0,\n            withoutBackground: true\n        };\n        // Add the garment to the outfit\n        const updatedGarments = [...(outfit.garments || []), newGarment];\n        set({\n            currentOutfit: Object.assign(Object.assign({}, outfit), { garments: updatedGarments })\n        });\n    },\n    tryOnOutfit: (outfit) => {\n        set({ currentOutfit: outfit });\n    }\n}), {\n    name: 'stylist-try-on-storage',\n    // Only persist settings and saved results\n    partialize: (state) => ({\n        settings: state.settings,\n        savedResults: state.savedResults\n    })\n}), { name: 'try-on-store' }));\n","// Utility functions for working with localStorage\n// Check if localStorage is available\nexport const isLocalStorageAvailable = () => {\n    const test = 'test';\n    try {\n        localStorage.setItem(test, test);\n        localStorage.removeItem(test);\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n};\n// Get item from localStorage with expiry check\nexport const getWithExpiry = (key) => {\n    if (!isLocalStorageAvailable())\n        return null;\n    const itemStr = localStorage.getItem(key);\n    if (!itemStr)\n        return null;\n    try {\n        const item = JSON.parse(itemStr);\n        // Check if item has expiry\n        if (item.expiry && new Date().getTime() > item.expiry) {\n            localStorage.removeItem(key);\n            return null;\n        }\n        return item.value;\n    }\n    catch (_a) {\n        return null;\n    }\n};\n// Set item in localStorage with expiry\nexport const setWithExpiry = (key, value, expiryInSeconds) => {\n    if (!isLocalStorageAvailable())\n        return;\n    const item = {\n        value,\n        expiry: new Date().getTime() + expiryInSeconds * 1000\n    };\n    localStorage.setItem(key, JSON.stringify(item));\n};\n// Remove item from localStorage\nexport const removeItem = (key) => {\n    if (!isLocalStorageAvailable())\n        return;\n    localStorage.removeItem(key);\n};\n// Get user ID from localStorage or create a new one\nexport const getUserId = () => {\n    if (!isLocalStorageAvailable()) {\n        return `anonymous_${Date.now()}`;\n    }\n    let userId = localStorage.getItem('stylist_user_id');\n    if (!userId) {\n        userId = `user_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n        localStorage.setItem('stylist_user_id', userId);\n    }\n    return userId;\n};\n// Set user ID in localStorage\nexport const setUserId = (userId) => {\n    if (!isLocalStorageAvailable())\n        return;\n    localStorage.setItem('stylist_user_id', userId);\n};\n// Clear all Stylist-related localStorage items\nexport const clearStylistStorage = () => {\n    if (!isLocalStorageAvailable())\n        return;\n    const stylistKeys = [];\n    for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.startsWith('stylist_')) {\n            stylistKeys.push(key);\n        }\n    }\n    stylistKeys.forEach((key) => localStorage.removeItem(key));\n};\n","// Feedback state management\nimport { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nimport { getUserId } from '@/utils/localStorage';\n// Helper to convert sets to arrays for persistence\nconst setToArray = (set) => Array.from(set);\nconst arrayToSet = (array) => new Set(array);\nexport const useFeedbackStore = create()(persist((set, get) => ({\n    likedItems: new Set(),\n    dislikedItems: new Set(),\n    likedOutfits: new Set(),\n    dislikedOutfits: new Set(),\n    thumbsUpMessages: new Set(),\n    feedbackHistory: [],\n    pendingSync: [],\n    isSyncing: false,\n    lastSyncedAt: null,\n    addItemFeedback: (itemId, type) => {\n        const userId = getUserId();\n        const timestamp = new Date();\n        const feedbackItem = {\n            id: `item_${type}_${itemId}_${timestamp.getTime()}`,\n            type,\n            timestamp,\n            entityType: 'item',\n            metadata: { itemId, userId }\n        };\n        if (type === 'like') {\n            set((state) => ({\n                likedItems: new Set(state.likedItems).add(itemId),\n                dislikedItems: new Set(state.dislikedItems).delete(itemId) ?\n                    new Set(state.dislikedItems) : state.dislikedItems,\n                feedbackHistory: [...state.feedbackHistory, feedbackItem],\n                pendingSync: [...state.pendingSync, feedbackItem]\n            }));\n        }\n        else {\n            set((state) => ({\n                dislikedItems: new Set(state.dislikedItems).add(itemId),\n                likedItems: new Set(state.likedItems).delete(itemId) ?\n                    new Set(state.likedItems) : state.likedItems,\n                feedbackHistory: [...state.feedbackHistory, feedbackItem],\n                pendingSync: [...state.pendingSync, feedbackItem]\n            }));\n        }\n    },\n    addOutfitFeedback: (outfitId, type) => {\n        const userId = getUserId();\n        const timestamp = new Date();\n        const feedbackItem = {\n            id: `outfit_${type}_${outfitId}_${timestamp.getTime()}`,\n            type,\n            timestamp,\n            entityType: 'outfit',\n            metadata: { outfitId, userId }\n        };\n        if (type === 'like') {\n            set((state) => ({\n                likedOutfits: new Set(state.likedOutfits).add(outfitId),\n                dislikedOutfits: new Set(state.dislikedOutfits).delete(outfitId) ?\n                    new Set(state.dislikedOutfits) : state.dislikedOutfits,\n                feedbackHistory: [...state.feedbackHistory, feedbackItem],\n                pendingSync: [...state.pendingSync, feedbackItem]\n            }));\n        }\n        else {\n            set((state) => ({\n                dislikedOutfits: new Set(state.dislikedOutfits).add(outfitId),\n                likedOutfits: new Set(state.likedOutfits).delete(outfitId) ?\n                    new Set(state.likedOutfits) : state.likedOutfits,\n                feedbackHistory: [...state.feedbackHistory, feedbackItem],\n                pendingSync: [...state.pendingSync, feedbackItem]\n            }));\n        }\n    },\n    addMessageThumbsUp: (messageId) => {\n        const userId = getUserId();\n        const timestamp = new Date();\n        const feedbackItem = {\n            id: `message_thumbsUp_${messageId}_${timestamp.getTime()}`,\n            type: 'thumbsUp',\n            timestamp,\n            entityType: 'recommendation',\n            metadata: { messageId, userId }\n        };\n        set((state) => ({\n            thumbsUpMessages: new Set(state.thumbsUpMessages).add(messageId),\n            feedbackHistory: [...state.feedbackHistory, feedbackItem],\n            pendingSync: [...state.pendingSync, feedbackItem]\n        }));\n    },\n    removeItemFeedback: (itemId) => {\n        set((state) => ({\n            likedItems: new Set(state.likedItems).delete(itemId) ?\n                new Set(state.likedItems) : state.likedItems,\n            dislikedItems: new Set(state.dislikedItems).delete(itemId) ?\n                new Set(state.dislikedItems) : state.dislikedItems\n        }));\n    },\n    removeOutfitFeedback: (outfitId) => {\n        set((state) => ({\n            likedOutfits: new Set(state.likedOutfits).delete(outfitId) ?\n                new Set(state.likedOutfits) : state.likedOutfits,\n            dislikedOutfits: new Set(state.dislikedOutfits).delete(outfitId) ?\n                new Set(state.dislikedOutfits) : state.dislikedOutfits\n        }));\n    },\n    removeMessageThumbsUp: (messageId) => {\n        set((state) => ({\n            thumbsUpMessages: new Set(state.thumbsUpMessages).delete(messageId) ?\n                new Set(state.thumbsUpMessages) : state.thumbsUpMessages\n        }));\n    },\n    markAsSynced: (feedbackIds) => {\n        set((state) => ({\n            pendingSync: state.pendingSync.filter(item => !feedbackIds.includes(item.id)),\n            lastSyncedAt: new Date()\n        }));\n    },\n    setIsSyncing: (isSyncing) => {\n        set({ isSyncing });\n    },\n    getItemFeedbackStatus: (itemId) => {\n        const state = get();\n        return {\n            liked: state.likedItems.has(itemId),\n            disliked: state.dislikedItems.has(itemId)\n        };\n    },\n    getOutfitFeedbackStatus: (outfitId) => {\n        const state = get();\n        return {\n            liked: state.likedOutfits.has(outfitId),\n            disliked: state.dislikedOutfits.has(outfitId)\n        };\n    },\n    isMessageThumbedUp: (messageId) => {\n        return get().thumbsUpMessages.has(messageId);\n    },\n    getPendingSyncItems: () => {\n        return get().pendingSync;\n    },\n    clearSyncedItems: () => {\n        set({\n            pendingSync: [],\n            lastSyncedAt: new Date()\n        });\n    }\n}), {\n    name: 'stylist-feedback-storage',\n    // Custom serialization for Set objects (which aren't serializable by default)\n    partialize: (state) => ({\n        likedItems: setToArray(state.likedItems),\n        dislikedItems: setToArray(state.dislikedItems),\n        likedOutfits: setToArray(state.likedOutfits),\n        dislikedOutfits: setToArray(state.dislikedOutfits),\n        thumbsUpMessages: setToArray(state.thumbsUpMessages),\n        feedbackHistory: state.feedbackHistory,\n        pendingSync: state.pendingSync,\n        lastSyncedAt: state.lastSyncedAt\n    }),\n    // Custom deserialization to convert arrays back to Set objects\n    onRehydrateStorage: () => (state) => {\n        if (state) {\n            state.likedItems = arrayToSet(state.likedItems);\n            state.dislikedItems = arrayToSet(state.dislikedItems);\n            state.likedOutfits = arrayToSet(state.likedOutfits);\n            state.dislikedOutfits = arrayToSet(state.dislikedOutfits);\n            state.thumbsUpMessages = arrayToSet(state.thumbsUpMessages);\n        }\n    }\n}));\nexport default useFeedbackStore;\n","// Chat-related types for the widget\nexport var MessageType;\n(function (MessageType) {\n    MessageType[\"TEXT\"] = \"text\";\n    MessageType[\"RECOMMENDATION\"] = \"recommendation\";\n    MessageType[\"OUTFIT\"] = \"outfit\";\n    MessageType[\"QUIZ\"] = \"quiz\";\n    MessageType[\"LOADING\"] = \"loading\";\n    MessageType[\"ERROR\"] = \"error\";\n})(MessageType || (MessageType = {}));\nexport var MessageSender;\n(function (MessageSender) {\n    MessageSender[\"USER\"] = \"user\";\n    MessageSender[\"ASSISTANT\"] = \"assistant\";\n    MessageSender[\"SYSTEM\"] = \"system\";\n})(MessageSender || (MessageSender = {}));\n","// Chat state management\nimport { create } from 'zustand';\nimport { v4 as uuidv4 } from 'uuid';\nimport { MessageType } from '../types/index';\nexport const useChatStore = create((set, get) => ({\n    messages: [],\n    isOpen: true,\n    isMinimized: false,\n    isLoading: false,\n    error: null,\n    currentView: 'chat',\n    addMessage: (message) => {\n        const id = uuidv4();\n        const timestamp = new Date();\n        const newMessage = Object.assign(Object.assign({}, message), { id, timestamp });\n        // Using type assertion to work around type compatibility issues\n        set((state) => ({\n            messages: [...state.messages, newMessage]\n        }));\n        return id;\n    },\n    addTextMessage: (text, sender) => {\n        const senderValue = typeof sender === 'string' ? sender : sender;\n        const message = {\n            type: MessageType.TEXT,\n            sender: senderValue,\n            text\n        };\n        return get().addMessage(message);\n    },\n    updateMessage: (id, updates) => {\n        // Using type assertion to work around type compatibility issues\n        set((state) => ({\n            messages: state.messages.map((msg) => msg.id === id ? Object.assign(Object.assign({}, msg), updates) : msg)\n        }));\n    },\n    removeMessage: (id) => {\n        set((state) => ({\n            messages: state.messages.filter((msg) => msg.id !== id)\n        }));\n    },\n    clearMessages: () => {\n        set({ messages: [] });\n    },\n    toggleOpen: () => {\n        const isCurrentlyOpen = get().isOpen;\n        set({\n            isOpen: !isCurrentlyOpen,\n            isMinimized: false\n        });\n    },\n    toggleMinimize: () => {\n        const isCurrentlyMinimized = get().isMinimized;\n        set({ isMinimized: !isCurrentlyMinimized });\n    },\n    setLoading: (isLoading) => {\n        set({ isLoading });\n    },\n    setError: (error) => {\n        set({ error });\n    },\n    setCurrentView: (view) => {\n        set({ currentView: view });\n    },\n    setIsOpen: (isOpen) => {\n        set({ isOpen });\n    }\n}));\n","// Types for the virtual try-on feature\nexport var GarmentType;\n(function (GarmentType) {\n    GarmentType[\"TOP\"] = \"top\";\n    GarmentType[\"BOTTOM\"] = \"bottom\";\n    GarmentType[\"DRESS\"] = \"dress\";\n    GarmentType[\"OUTERWEAR\"] = \"outerwear\";\n    GarmentType[\"SHOES\"] = \"shoes\";\n    GarmentType[\"ACCESSORY\"] = \"accessory\";\n})(GarmentType || (GarmentType = {}));\nexport var BodyPosition;\n(function (BodyPosition) {\n    BodyPosition[\"UPPER_BODY\"] = \"upper_body\";\n    BodyPosition[\"LOWER_BODY\"] = \"lower_body\";\n    BodyPosition[\"FULL_BODY\"] = \"full_body\";\n    BodyPosition[\"HEAD\"] = \"head\";\n    BodyPosition[\"FEET\"] = \"feet\";\n    BodyPosition[\"HANDS\"] = \"hands\";\n    BodyPosition[\"NECK\"] = \"neck\";\n    BodyPosition[\"WAIST\"] = \"waist\";\n})(BodyPosition || (BodyPosition = {}));\nexport var ProcessingStatus;\n(function (ProcessingStatus) {\n    ProcessingStatus[\"IDLE\"] = \"idle\";\n    ProcessingStatus[\"UPLOADING\"] = \"uploading\";\n    ProcessingStatus[\"PROCESSING\"] = \"processing\";\n    ProcessingStatus[\"REMOVING_BACKGROUND\"] = \"removing_background\";\n    ProcessingStatus[\"COMPLETED\"] = \"completed\";\n    ProcessingStatus[\"FAILED\"] = \"failed\";\n})(ProcessingStatus || (ProcessingStatus = {}));\nexport var BackgroundRemovalMethod;\n(function (BackgroundRemovalMethod) {\n    BackgroundRemovalMethod[\"REMOVE_BG_API\"] = \"remove_bg_api\";\n    BackgroundRemovalMethod[\"TENSORFLOW\"] = \"tensorflow\";\n    BackgroundRemovalMethod[\"MANUAL\"] = \"manual\";\n})(BackgroundRemovalMethod || (BackgroundRemovalMethod = {}));\n","// User state management\nimport { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nexport const useUserStore = create()(persist((set, get) => ({\n    user: null,\n    styleQuizResult: null,\n    isLoading: false,\n    error: null,\n    setUser: (user) => {\n        set({ user });\n    },\n    updateUser: (updates) => {\n        const currentUser = get().user;\n        if (!currentUser)\n            return;\n        set({\n            user: Object.assign(Object.assign({}, currentUser), updates)\n        });\n    },\n    setStyleQuizResult: (result) => {\n        set({ styleQuizResult: result });\n    },\n    addToCloset: (item) => {\n        const currentUser = get().user;\n        if (!currentUser)\n            return;\n        set({\n            user: Object.assign(Object.assign({}, currentUser), { closet: [...currentUser.closet, item] })\n        });\n    },\n    removeFromCloset: (itemId) => {\n        const currentUser = get().user;\n        if (!currentUser)\n            return;\n        set({\n            user: Object.assign(Object.assign({}, currentUser), { closet: currentUser.closet.filter((item) => item.id !== itemId) })\n        });\n    },\n    toggleItemFavorite: (itemId, favorite) => {\n        const currentUser = get().user;\n        if (!currentUser)\n            return;\n        set({\n            user: Object.assign(Object.assign({}, currentUser), { closet: currentUser.closet.map((item) => item.id === itemId ? Object.assign(Object.assign({}, item), { favorite }) : item) })\n        });\n    },\n    addLikedItem: (itemId) => {\n        const currentUser = get().user;\n        if (!currentUser)\n            return;\n        // Add to liked items if not already there\n        if (!currentUser.feedback.likedItems.includes(itemId)) {\n            set({\n                user: Object.assign(Object.assign({}, currentUser), { feedback: Object.assign(Object.assign({}, currentUser.feedback), { likedItems: [...currentUser.feedback.likedItems, itemId], \n                        // If it was previously disliked, remove from disliked\n                        dislikedItems: currentUser.feedback.dislikedItems.filter((id) => id !== itemId), lastInteraction: new Date() }) })\n            });\n        }\n    },\n    addDislikedItem: (itemId) => {\n        const currentUser = get().user;\n        if (!currentUser)\n            return;\n        // Add to disliked items if not already there\n        if (!currentUser.feedback.dislikedItems.includes(itemId)) {\n            set({\n                user: Object.assign(Object.assign({}, currentUser), { feedback: Object.assign(Object.assign({}, currentUser.feedback), { dislikedItems: [...currentUser.feedback.dislikedItems, itemId], \n                        // If it was previously liked, remove from liked\n                        likedItems: currentUser.feedback.likedItems.filter((id) => id !== itemId), lastInteraction: new Date() }) })\n            });\n        }\n    },\n    removeLikedItem: (itemId) => {\n        const currentUser = get().user;\n        if (!currentUser)\n            return;\n        set({\n            user: Object.assign(Object.assign({}, currentUser), { feedback: Object.assign(Object.assign({}, currentUser.feedback), { likedItems: currentUser.feedback.likedItems.filter((id) => id !== itemId), lastInteraction: new Date() }) })\n        });\n    },\n    removeDislikedItem: (itemId) => {\n        const currentUser = get().user;\n        if (!currentUser)\n            return;\n        set({\n            user: Object.assign(Object.assign({}, currentUser), { feedback: Object.assign(Object.assign({}, currentUser.feedback), { dislikedItems: currentUser.feedback.dislikedItems.filter((id) => id !== itemId), lastInteraction: new Date() }) })\n        });\n    },\n    addViewedItem: (itemId) => {\n        const currentUser = get().user;\n        if (!currentUser)\n            return;\n        // Add to viewed items if not already there\n        if (!currentUser.feedback.viewedItems.includes(itemId)) {\n            set({\n                user: Object.assign(Object.assign({}, currentUser), { feedback: Object.assign(Object.assign({}, currentUser.feedback), { viewedItems: [...currentUser.feedback.viewedItems, itemId], lastInteraction: new Date() }) })\n            });\n        }\n    },\n    setLoading: (isLoading) => {\n        set({ isLoading });\n    },\n    setError: (error) => {\n        set({ error });\n    },\n    logout: () => {\n        set({\n            user: null,\n            styleQuizResult: null\n        });\n    }\n}), {\n    name: 'stylist-user-storage',\n    partialize: (state) => ({\n        user: state.user,\n        styleQuizResult: state.styleQuizResult\n    })\n}));\n","// Recommendation state management\nimport { create } from 'zustand';\nexport const useRecommendationStore = create((set, get) => ({\n    recommendedItems: [],\n    recommendedOutfits: [],\n    savedOutfits: [],\n    wishlistItems: [],\n    cartItems: [],\n    viewedItems: [],\n    context: null,\n    loading: false,\n    error: null,\n    setRecommendedItems: (items) => {\n        set({ recommendedItems: items });\n    },\n    setRecommendedOutfits: (outfits) => {\n        set({ recommendedOutfits: outfits });\n    },\n    setSavedOutfits: (outfits) => {\n        set({ savedOutfits: outfits });\n    },\n    addRecommendedItem: (item) => {\n        set((state) => ({\n            recommendedItems: [...state.recommendedItems, item]\n        }));\n    },\n    addRecommendedOutfit: (outfit) => {\n        set((state) => ({\n            recommendedOutfits: [...state.recommendedOutfits, outfit]\n        }));\n    },\n    addToWishlist: (item) => {\n        // Check if item is already in wishlist\n        const exists = get().wishlistItems.some((wishlistItem) => wishlistItem.itemId === item.itemId);\n        if (!exists) {\n            set((state) => ({\n                wishlistItems: [...state.wishlistItems, item]\n            }));\n        }\n    },\n    removeFromWishlist: (itemId) => {\n        set((state) => ({\n            wishlistItems: state.wishlistItems.filter((item) => item.itemId !== itemId)\n        }));\n    },\n    addToCart: (item) => {\n        // Check if item is already in cart\n        const existingItemIndex = get().cartItems.findIndex((cartItem) => cartItem.itemId === item.itemId);\n        if (existingItemIndex >= 0) {\n            // Update quantity if already in cart\n            set((state) => {\n                const updatedCartItems = [...state.cartItems];\n                updatedCartItems[existingItemIndex].quantity += item.quantity;\n                return { cartItems: updatedCartItems };\n            });\n        }\n        else {\n            // Add new item to cart\n            set((state) => ({\n                cartItems: [...state.cartItems, item]\n            }));\n        }\n    },\n    removeFromCart: (itemId) => {\n        set((state) => ({\n            cartItems: state.cartItems.filter((item) => item.itemId !== itemId)\n        }));\n    },\n    updateCartItemQuantity: (itemId, quantity) => {\n        set((state) => ({\n            cartItems: state.cartItems.map((item) => item.itemId === itemId ? Object.assign(Object.assign({}, item), { quantity }) : item)\n        }));\n    },\n    addViewedItem: (itemId) => {\n        if (!get().viewedItems.includes(itemId)) {\n            set((state) => ({\n                viewedItems: [...state.viewedItems, itemId]\n            }));\n        }\n    },\n    saveOutfit: (outfit) => {\n        // Check if outfit is already saved\n        const exists = get().savedOutfits.some((savedOutfit) => savedOutfit.outfitId === outfit.outfitId);\n        if (!exists) {\n            set((state) => ({\n                savedOutfits: [...state.savedOutfits, outfit]\n            }));\n        }\n    },\n    removeSavedOutfit: (outfitId) => {\n        set((state) => ({\n            savedOutfits: state.savedOutfits.filter((outfit) => outfit.outfitId !== outfitId)\n        }));\n    },\n    setContext: (context) => {\n        set({ context });\n    },\n    clearRecommendations: () => {\n        set({\n            recommendedItems: [],\n            recommendedOutfits: [],\n            context: null\n        });\n    },\n    setLoading: (loading) => {\n        set({ loading });\n    },\n    setError: (error) => {\n        set({ error });\n    },\n    getItemsByCategory: (category) => {\n        return get().recommendedItems.filter(item => item.category === category);\n    },\n    getItemsSortedByMatchScore: () => {\n        return [...get().recommendedItems].sort((a, b) => b.matchScore - a.matchScore);\n    },\n    getOutfitById: (id) => {\n        return get().recommendedOutfits.find(outfit => outfit.id === id);\n    },\n    getItemById: (id) => {\n        return get().recommendedItems.find(item => item.id === id);\n    },\n    updateItem: (id, updates) => {\n        set((state) => ({\n            recommendedItems: state.recommendedItems.map(item => item.id === id ? Object.assign(Object.assign({}, item), updates) : item)\n        }));\n    }\n}));\nexport default useRecommendationStore;\n","// Utilities for positioning images on canvas\nimport { GarmentType, BodyPosition } from '@/types/tryOn';\n/**\n * Calculate the center point of a rectangle\n */\nexport const calculateCenter = (rect) => {\n    return {\n        x: rect.x + rect.width / 2,\n        y: rect.y + rect.height / 2\n    };\n};\n/**\n * Calculate the positioning rectangle for a garment based on body position\n */\nexport const calculateGarmentPosition = (containerDimensions, garmentDimensions, bodyPosition, offset = { x: 0, y: 0 }) => {\n    // Default positioning is centered\n    let x = (containerDimensions.width - garmentDimensions.width) / 2;\n    let y = (containerDimensions.height - garmentDimensions.height) / 2;\n    // Adjust based on body position\n    switch (bodyPosition) {\n        case BodyPosition.UPPER_BODY:\n            y = containerDimensions.height * 0.25 - garmentDimensions.height / 2;\n            break;\n        case BodyPosition.LOWER_BODY:\n            y = containerDimensions.height * 0.65 - garmentDimensions.height / 2;\n            break;\n        case BodyPosition.FEET:\n            y = containerDimensions.height - garmentDimensions.height;\n            break;\n        case BodyPosition.HEAD:\n            y = 0;\n            break;\n        case BodyPosition.NECK:\n            y = containerDimensions.height * 0.15 - garmentDimensions.height / 2;\n            break;\n        case BodyPosition.WAIST:\n            y = containerDimensions.height * 0.5 - garmentDimensions.height / 2;\n            break;\n        case BodyPosition.HANDS:\n            // This depends on whether it's left or right hand\n            // We'll use offset for this\n            break;\n        case BodyPosition.FULL_BODY:\n            // Already centered\n            break;\n    }\n    // Apply offset\n    x += offset.x;\n    y += offset.y;\n    return {\n        x,\n        y,\n        width: garmentDimensions.width,\n        height: garmentDimensions.height\n    };\n};\n/**\n * Get default body position for a garment type\n */\nexport const getDefaultBodyPosition = (garmentType) => {\n    switch (garmentType) {\n        case GarmentType.TOP:\n            return BodyPosition.UPPER_BODY;\n        case GarmentType.BOTTOM:\n            return BodyPosition.LOWER_BODY;\n        case GarmentType.DRESS:\n            return BodyPosition.FULL_BODY;\n        case GarmentType.OUTERWEAR:\n            return BodyPosition.UPPER_BODY;\n        case GarmentType.SHOES:\n            return BodyPosition.FEET;\n        case GarmentType.ACCESSORY:\n            return BodyPosition.HEAD; // Default, should be specified\n        default:\n            return BodyPosition.FULL_BODY;\n    }\n};\n/**\n * Get default z-index for garment type (for layering)\n */\nexport const getDefaultZIndex = (garmentType) => {\n    switch (garmentType) {\n        case GarmentType.TOP:\n            return 10;\n        case GarmentType.BOTTOM:\n            return 5;\n        case GarmentType.DRESS:\n            return 10;\n        case GarmentType.OUTERWEAR:\n            return 15;\n        case GarmentType.SHOES:\n            return 5;\n        case GarmentType.ACCESSORY:\n            return 20;\n        default:\n            return 10;\n    }\n};\n/**\n * Get recommended scale for garment type\n */\nexport const getRecommendedScale = (garmentType, containerDimensions) => {\n    // These are approximate values and should be adjusted based on actual garment images\n    switch (garmentType) {\n        case GarmentType.TOP:\n            return containerDimensions.width * 0.7 / 600; // Assuming 600px is the \"standard\" width\n        case GarmentType.BOTTOM:\n            return containerDimensions.width * 0.6 / 500;\n        case GarmentType.DRESS:\n            return containerDimensions.width * 0.8 / 500;\n        case GarmentType.OUTERWEAR:\n            return containerDimensions.width * 0.75 / 600;\n        case GarmentType.SHOES:\n            return containerDimensions.width * 0.4 / 400;\n        case GarmentType.ACCESSORY:\n            return containerDimensions.width * 0.3 / 300;\n        default:\n            return 1.0;\n    }\n};\n"],"names":["DEFAULT_SETTINGS","preferredBackgroundRemovalMethod","TENSORFLOW","removeBackgroundAutomatically","showGuidelines","highQualityRendering","defaultGarmentScale","TOP","BOTTOM","DRESS","OUTERWEAR","SHOES","ACCESSORY","defaultGarmentOffset","x","y","useTryOnStore","set","get","currentOutfit","userImage","isLoading","error","settings","savedResults","canvasWidth","canvasHeight","isTryOnModalOpen","isUploadModalOpen","setCurrentOutfit","outfit","addGarmentToOutfit","garment","filteredGarments","garments","filter","g","type","bodyPosition","Object","assign","newOutfit","id","Date","now","createdAt","removeGarmentFromOutfit","garmentId","updatedGarments","updateGarment","updates","map","setUserImage","image","userImageForOutfit","updateUserImage","updatedImage","clearUserImage","updatedOutfit","undefined","updateOutfit","setSettings","setLoading","setError","saveResult","result","results","existingIndex","findIndex","r","push","deleteSavedResult","resultId","filteredResults","setCanvasDimensions","width","height","openTryOnModal","closeTryOnModal","openUploadModal","closeUploadModal","reset","startNewTryOn","productImage","productType","crypto","randomUUID","newGarment","url","URL","createObjectURL","zIndex","length","layerIndex","scale","offset","rotation","withoutBackground","tryOnOutfit","name","partialize","state","getUserId","test","localStorage","setItem","removeItem","_a","isLocalStorageAvailable","userId","getItem","Math","random","toString","substring","setToArray","Array","from","arrayToSet","array","Set","useFeedbackStore","likedItems","dislikedItems","likedOutfits","dislikedOutfits","thumbsUpMessages","feedbackHistory","pendingSync","isSyncing","lastSyncedAt","addItemFeedback","itemId","timestamp","feedbackItem","getTime","entityType","metadata","add","delete","addOutfitFeedback","outfitId","addMessageThumbsUp","messageId","removeItemFeedback","removeOutfitFeedback","removeMessageThumbsUp","markAsSynced","feedbackIds","item","includes","setIsSyncing","getItemFeedbackStatus","liked","has","disliked","getOutfitFeedbackStatus","isMessageThumbedUp","getPendingSyncItems","clearSyncedItems","onRehydrateStorage","MessageType","MessageSender","useChatStore","messages","isOpen","isMinimized","currentView","addMessage","message","newMessage","addTextMessage","text","sender","senderValue","TEXT","updateMessage","msg","removeMessage","clearMessages","toggleOpen","isCurrentlyOpen","toggleMinimize","isCurrentlyMinimized","setCurrentView","view","setIsOpen","GarmentType","BodyPosition","ProcessingStatus","BackgroundRemovalMethod","useUserStore","user","styleQuizResult","setUser","updateUser","currentUser","setStyleQuizResult","addToCloset","closet","removeFromCloset","toggleItemFavorite","favorite","addLikedItem","feedback","lastInteraction","addDislikedItem","removeLikedItem","removeDislikedItem","addViewedItem","viewedItems","logout","useRecommendationStore","recommendedItems","recommendedOutfits","savedOutfits","wishlistItems","cartItems","context","loading","setRecommendedItems","items","setRecommendedOutfits","outfits","setSavedOutfits","addRecommendedItem","addRecommendedOutfit","addToWishlist","some","wishlistItem","removeFromWishlist","addToCart","existingItemIndex","cartItem","updatedCartItems","quantity","removeFromCart","updateCartItemQuantity","saveOutfit","savedOutfit","removeSavedOutfit","setContext","clearRecommendations","getItemsByCategory","category","getItemsSortedByMatchScore","sort","a","b","matchScore","getOutfitById","find","getItemById","updateItem","getDefaultBodyPosition","garmentType","UPPER_BODY","LOWER_BODY","FULL_BODY","FEET","HEAD","getDefaultZIndex"],"sourceRoot":""}
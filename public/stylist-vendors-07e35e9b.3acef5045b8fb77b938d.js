"use strict";(self.webpackChunkStylistWidget=self.webpackChunkStylistWidget||[]).push([[8133],{59351:function(e,s,t){t.d(s,{Fe:function(){return z},H4:function(){return d},sN:function(){return c},zo:function(){return T}});var n=t(9495),a=t(47661),i=t(39459),r=t(15841),o=t(14742),l=t(44813),u=t(73072);class d extends n.serialization.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class m extends d{apply(e,s){return(0,n.zeros)(e,s)}}m.className="Zeros",n.serialization.registerClass(m);class c extends d{apply(e,s){return(0,n.ones)(e,s)}}c.className="Ones",n.serialization.registerClass(c);class h extends d{constructor(e){if(super(),"object"!==typeof e)throw new r.Qp(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new r.Qp(`config must have value set but got ${e}`);this.value=e.value}apply(e,s){return(0,n.tidy)((()=>(0,n.mul)((0,n.scalar)(this.value),(0,n.ones)(e,s))))}getConfig(){return{value:this.value}}}h.className="Constant",n.serialization.registerClass(h);class f extends d{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,s){return(0,n.randomUniform)(e,this.minval,this.maxval,s,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}f.className="RandomUniform",n.serialization.registerClass(f);class g extends d{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,s){if("float32"!==(s=s||"float32")&&"int32"!==s)throw new r.EH(`randomNormal does not support dType ${s}.`);return a.FE(e,this.mean,this.stddev,s,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}g.className="RandomNormal",n.serialization.registerClass(g);class N extends d{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,s){if("float32"!==(s=s||"float32")&&"int32"!==s)throw new r.EH(`truncatedNormal does not support dType ${s}.`);return(0,n.truncatedNormal)(e,this.mean,this.stddev,s,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}N.className="TruncatedNormal",n.serialization.registerClass(N);class p extends d{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,s){return(0,n.tidy)((()=>{if(2!==e.length||e[0]!==e[1])throw new r.Qp("Identity matrix initializer can only be used for 2D square matrices.");return(0,n.mul)(this.gain,(0,n.eye)(e[0]))}))}getConfig(){return{gain:this.gain}}}p.className="Identity",n.serialization.registerClass(p);class C extends d{constructor(e){if(super(),e.scale<0)throw new r.Qp(`scale must be a positive float. Got: ${e.scale}`);var s;this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,s=this.mode,(0,l.E6)(o.A,"FanMode",s),this.distribution=null==e.distribution?"normal":e.distribution,function(e){(0,l.E6)(o.Nt,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,s){const t=function(e,s="channelsLast"){let t,n;if((0,i.uM)(s),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===s){const s=(0,u.no)(e,2);t=e[1]*s,n=e[0]*s}else if("channelsLast"===s){const s=(0,u.no)(e,0,e.length-2);t=e[e.length-2]*s,n=e[e.length-1]*s}}else{const s=(0,u.no)(e);t=Math.sqrt(s),n=Math.sqrt(s)}return[t,n]}(e),a=t[0],o=t[1];let l=this.scale;if("fanIn"===this.mode?l/=Math.max(1,a):"fanOut"===this.mode?l/=Math.max(1,o):l/=Math.max(1,(a+o)/2),"normal"===this.distribution){const t=Math.sqrt(l);if("float32"!==(s=s||"float32")&&"int32"!==s)throw new r.EH(`${this.getClassName()} does not support dType ${s}.`);return(0,n.truncatedNormal)(e,0,t,s,this.seed)}{const t=Math.sqrt(3*l);return(0,n.randomUniform)(e,-t,t,s,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}C.className="VarianceScaling",n.serialization.registerClass(C);class E extends C{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return C.className}}E.className="GlorotUniform",n.serialization.registerClass(E);class v extends C{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return C.className}}v.className="GlorotNormal",n.serialization.registerClass(v);class U extends C{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return C.className}}U.className="HeNormal",n.serialization.registerClass(U);class A extends C{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return C.className}}A.className="HeUniform",n.serialization.registerClass(A);class L extends C{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return C.className}}L.className="LeCunNormal",n.serialization.registerClass(L);class x extends C{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return C.className}}x.className="LeCunUniform",n.serialization.registerClass(x);class y extends d{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,s){return(0,n.tidy)((()=>{if(e.length<2)throw new r.EH("Shape must be at least 2D.");if("int32"!==s&&"float32"!==s&&void 0!==s)throw new TypeError(`Unsupported data type ${s}.`);const t=n.util.sizeFromShape(e.slice(0,-1)),i=e[e.length-1];this.ELEMENTS_WARN_SLOW;const o=[Math.max(i,t),Math.min(i,t)],l=a.FE(o,0,1,s,this.seed),u=n.linalg.qr(l,!1);let d=u[0];const m=u[1].flatten().stridedSlice([0],[Math.min(i,t)*Math.min(i,t)],[Math.min(i,t)+1]);return d=(0,n.mul)(d,m.sign()),t<i&&(d=d.transpose()),(0,n.mul)((0,n.scalar)(this.gain),d.reshape(e))}))}getConfig(){return{gain:this.gain,seed:this.seed}}}y.className="Orthogonal",n.serialization.registerClass(y);const M={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function w(e,s={}){return(0,l.Xv)(e,n.serialization.SerializationMap.getMap().classNameMap,s,"initializer")}function T(e){return(0,l.k4)(e)}function z(e){if("string"===typeof e){const s=e in M?M[e]:e;if("GlorotNormal"===s)return new v;if("GlorotUniform"===s)return new E;if("HeNormal"===s)return new U;if("HeUniform"===s)return new A;if("LeCunNormal"===s)return new L;if("LeCunUniform"===s)return new x;{const e={};return e.className=s,e.config={},w(e)}}return e instanceof d?e:w(e)}}}]);
//# sourceMappingURL=stylist-vendors-07e35e9b.3acef5045b8fb77b938d.js.map
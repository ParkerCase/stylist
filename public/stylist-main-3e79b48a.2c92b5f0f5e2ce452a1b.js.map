{"version":3,"file":"stylist-main-3e79b48a.2c92b5f0f5e2ce452a1b.js","mappings":"0PA2CA,IC1CA,EDSsB,EAAGA,UAASC,eAAcC,iBAC5C,MAAM,GAAEC,EAAE,OAAEC,EAAM,KAAEC,EAAI,UAAEC,GAAcN,GACjCO,EAAeC,IAAoB,IAAAC,WAAS,GAC7CC,EAASN,IAAW,KAAcO,KAClCC,EAAcR,IAAW,KAAcS,UACvCC,EAAWV,IAAW,KAAcW,OAEpCC,EAAqBJ,GACvBP,EAAKY,OAAS,KACbZ,EAAKa,SAAS,mBACfhB,EACEiB,EAAgB,IAAW,yBAA0B,CACvD,+BAAgCT,EAChC,oCAAqCE,EACrC,iCAAkCE,EAClC,wCAAyCE,IAEvCI,EAAeV,GAAUT,EACzB,CAAEoB,gBAAiBpB,QACnBqB,EAYN,OAAQ,UAAM,MAAOC,OAAOC,OAAO,CAAEC,UAAWN,GAAiB,CAAEO,SAAU,EAAEhB,IAAW,SAAK,MAAOa,OAAOC,OAAO,CAAEC,UAAW,kCAAoC,CAAEC,SAAUd,GAAe,SAAK,MAAOW,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,UAAU,SAAK,MAAOH,OAAOC,OAAO,CAAEG,MAAO,6BAA8BC,QAAS,YAAaC,MAAO,KAAMC,OAAQ,KAAMC,KAAM,gBAAkB,CAAEL,UAAU,SAAK,OAAQ,CAAEM,EAAG,8hBAAoiB,SAAK,MAAOT,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,SAAU,WAAe,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,kCAAmCQ,MAAOb,GAAgB,CAAEM,SAAU,CAACrB,EAAK6B,MAAM,MAAMC,KAAI,CAACC,EAAMC,KAAO,UAAM,WAAgB,CAAEX,SAAU,CAACU,EAAMC,EAAIhC,EAAK6B,MAAM,MAAMjB,OAAS,IAAK,SAAK,KAAM,CAAC,KAAOoB,KAAMrB,IAAuB,SAAK,MAAOO,OAAOC,OAAO,CAAEC,UAAW,oCAAsC,CAAEC,UAAU,SAAK,KAAgB,CAAEY,UAAWnC,EAAIoC,WAXz8C,KACnB/B,GAAiB,GACbN,IACAA,EAAWC,GAAI,IAEf,OAAW,IAAmBqC,mBAAmB,UAAa,CAC1DF,UAAWnC,EACXsC,eAAgBpC,EAAKqC,UAAU,EAAG,OAE1C,EAEw/CzC,aAAcA,YAA2B,SAAK,MAAOsB,OAAOC,OAAO,CAAEC,UAAW,gCAAkC,CAAEC,UAAU,QAAWpB,EAAW,gBAAmB,C,6FElBvqD,ICtBA,EDGsB,EAAGqC,SAAQzC,aAAY0C,eAAcC,cAAa5C,mBACpE,MAAM,GAAEE,EAAE,MAAE2C,EAAK,SAAEC,EAAQ,WAAEC,EAAU,aAAEC,GAAiBN,EACpDO,EAAkBC,IAChBjD,GACAA,EAAWC,EAAIgD,EACnB,EAYJ,OAAQ,UAAM,MAAO5B,OAAOC,OAAO,CAAEC,UAAW,0BAA4B,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,kCAAoC,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU,CAAC,uBAAwBqB,OAAe,UAAM,MAAOxB,OAAOC,OAAO,CAAEC,UAAW,gCAAiCQ,MAAO,CAAEmB,MAAOnD,IAAkB,CAAEyB,SAAU,CAAC2B,KAAKC,MAAmB,IAAbN,GAAmB,mBAAqB,SAAK,MAAOzB,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAUoB,EAAMX,KAAKoB,IAAU,UAAM,MAAOhC,OAAOC,OAAO,CAAEC,UAAW,+BAAgC+B,QAAS,KAAMC,OALroBC,EAKqpBH,EAAKpD,QAJ3qB0C,GACAA,EAAYa,IAFI,IAACA,CAK8pB,GAAG,CAAEhC,SAAU,CAAC6B,EAAKI,UAAY,SAAK,MAAO,CAAEC,IAAKL,EAAKI,SAAUE,IAAKN,EAAKO,KAAMrC,UAAW,wCAA4C,SAAK,MAAOF,OAAOC,OAAO,CAAEC,UAAW,4CAA8C,CAAEC,SAAU6B,EAAKQ,aAAe,UAAM,MAAOxC,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAU,EAAC,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,sCAAwC,CAAEC,SAAU6B,EAAKS,UAAW,SAAK,MAAOzC,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAU6B,EAAKO,eAAmBP,EAAKpD,SAAW8C,EAAahC,OAAS,IAAM,UAAM,MAAOM,OAAOC,OAAO,CAAEC,UAAW,mCAAqC,CAAEC,SAAU,EAAC,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,yCAA2C,CAAEC,SAAU,6BAA8B,SAAK,KAAMH,OAAOC,OAAO,CAAEC,UAAW,wCAA0C,CAAEC,SAAUuB,EAAad,KAAI,CAAC8B,EAAQC,KAAW,SAAK,KAAM3C,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,SAAUuC,IAAWC,aAAoB,UAAM,MAAO3C,OAAOC,OAAO,CAAEC,UAAW,mCAAqC,CAAEC,SAAU,EAAC,SAAKyC,EAAA,GAAkB,CAAEC,OAAQ,IAAMlB,GAAe,GAAOmB,UAAW,IAAMnB,GAAe,GAAQjD,aAAcA,KAAiB,SAAKqE,EAAA,EAAgB,CAAEd,QAVx8D,KACjBZ,GACAA,EAAazC,EACjB,EAOw/DF,aAAcA,EAAcsE,MAAO,uBAA2B,C,uEEO9jE,IC3BA,EDCsB,EAAGC,YAAWC,cAAaxE,eAAe,UAAWyE,kBAAkB,CAAC,MAE1F,MAAM,KAAEC,GAAO,EAAI,SAAEC,GAAW,EAAI,SAAEC,GAAW,EAAI,MAAEC,GAAQ,EAAI,OAAEC,GAAS,EAAI,SAAEC,GAAW,GAASN,EAWlGO,EATU,CACZ,CAAE9E,GAAI,OAAQoE,MAAO,QACrB,CAAEpE,GAAI,WAAYoE,MAAO,YACzB,CAAEpE,GAAI,WAAYoE,MAAO,aACzB,CAAEpE,GAAI,QAASoE,MAAO,UACtB,CAAEpE,GAAI,SAAUoE,MAAO,aACvB,CAAEpE,GAAI,WAAYoE,MAAO,aAGRW,QAAOC,IACxB,OAAQA,EAAIhF,IACR,IAAK,OAAQ,OAAOwE,EACpB,IAAK,WAAY,OAAOC,EACxB,IAAK,WAAY,OAAOC,EACxB,IAAK,QAAS,OAAOC,EACrB,IAAK,SAAU,OAAOC,EACtB,IAAK,WAAY,OAAOC,EACxB,QAAS,OAAO,EACpB,IAEJ,OAAQ,SAAK,MAAOzD,OAAOC,OAAO,CAAEC,UAAW,yBAA0BQ,MAAO,CAAE,sBAAuBhC,IAAkB,CAAEyB,SAAUuD,EAAK9C,KAAIgD,IAAQ,UAAM,SAAU5D,OAAOC,OAAO,CAAEC,UAAW,gBAAe+C,IAAcW,EAAIhF,GAAK,sBAAwB,IAAMqD,QAAS,IAAMiB,EAAYU,EAAIhF,IAAKiF,MAAOD,EAAIZ,OAAS,CAAE7C,SAAU,CAACyD,EAAIE,OAAQ,SAAK,OAAQ9D,OAAOC,OAAO,CAAEC,UAAW,qBAAuB,CAAEC,SAAUyD,EAAIE,SAAU,SAAK,OAAQ9D,OAAOC,OAAO,CAAEC,UAAW,sBAAwB,CAAEC,SAAUyD,EAAIZ,YAAeY,EAAIhF,QAAU,C,yGEXliB,MAd6B,EAAGmF,WAAUC,gBAAeC,WAAUvF,eAAcwF,eAAc,MAC3F,IAAIC,EAQJ,OAAQ,SAAK,MAAOnE,OAAOC,OAAO,CAAEC,UAAW,+BAAiC,CAAEC,SAAsC,QAA3BgE,EAAKJ,EAASK,eAA4B,IAAPD,OAAgB,EAASA,EAAGvD,KAAIyD,IAAW,SAAK,SAAUrE,OAAOC,OAAO,CAAEC,UAAW,gCAAiD,OAAlB8D,QAA4C,IAAlBA,OAA2B,EAASA,EAAcM,YAAcD,EAAOzF,GAAK,uCAAyC,IAAMqD,QAAS,KAAMsC,OAPlYC,EAO+YH,EAAOzF,QANxaqF,EAASF,EAASnF,GAAI,CAClB6F,WAAYV,EAASnF,GACrB0F,SAAUE,EACVE,SAAU,IAAIC,OAJD,IAACH,CAOyZ,EAAE9D,OAA0B,OAAlBsD,QAA4C,IAAlBA,OAA2B,EAASA,EAAcM,YAAcD,EAAOzF,GAAK,CACnhBgG,YAAalG,EACboB,gBAAiB,GAAGpB,YACpBqB,EAAW,iBAAoC,OAAlBiE,QAA4C,IAAlBA,OAA2B,EAASA,EAAcM,YAAcD,EAAOzF,IAAM,CAAEuB,SAAUkE,EAAOvF,OAASuF,EAAOzF,QAAU,ECYjM,MAxB+B,EAAGmF,WAAUC,gBAAeC,WAAUvF,mBACjE,IAAIyF,EAcJ,OAAQ,SAAK,MAAOnE,OAAOC,OAAO,CAAEC,UAAW,+BAAiC,CAAEC,SAAsC,QAA3BgE,EAAKJ,EAASK,eAA4B,IAAPD,OAAgB,EAASA,EAAGvD,KAAIyD,IACxJ,IAAIF,EACJ,MAAMU,EAA8G,QAAhGV,EAAuB,OAAlBH,QAA4C,IAAlBA,OAA2B,EAASA,EAAcc,iBAA8B,IAAPX,OAAgB,EAASA,EAAGxE,SAAS0E,EAAOzF,IACxK,OAAQ,UAAM,SAAUoB,OAAOC,OAAO,CAAEC,UAAW,+BAA8B2E,EAAa,uCAAyC,IAAM5C,QAAS,IAhBzI,CAACuC,IAClB,MAAMO,GAAgC,OAAlBf,QAA4C,IAAlBA,OAA2B,EAASA,EAAcc,YAAc,GAGxGE,EAFaD,EAAWpF,SAAS6E,GAGjCO,EAAWpB,QAAO/E,GAAMA,IAAO4F,IAC/B,IAAIO,EAAYP,GACtBP,EAASF,EAASnF,GAAI,CAClB6F,WAAYV,EAASnF,GACrBkG,UAAWE,EACXN,SAAU,IAAIC,MAChB,EAK8JJ,CAAaF,EAAOzF,IAAK8B,MAAOmE,EAAa,CACjMD,YAAalG,EACboB,gBAAiB,GAAGpB,YACpBqB,EAAW,gBAAiB8E,GAAc,CAAE1E,SAAU,EAAC,SAAK,OAAQH,OAAOC,OAAO,CAAEC,UAAW,mCAAqC,CAAEC,SAAUkE,EAAOvF,QAAU+F,IAAe,SAAK,OAAQ7E,OAAOC,OAAO,CAAEC,UAAW,oCAAsC,CAAEC,UAAU,SAAK,MAAOH,OAAOC,OAAO,CAAEK,MAAO,KAAMC,OAAQ,KAAMF,QAAS,YAAaG,KAAM,OAAQJ,MAAO,8BAAgC,CAAED,UAAU,SAAK,OAAQ,CAAEM,EAAG,mEAAoED,KAAM,0BAAgC6D,EAAOzF,GAAI,MACpiB,ECRf,MAd4B,EAAGmF,WAAUC,gBAAeC,WAAUvF,eAAcwF,eAAc,MAC1F,IAAIC,EAQJ,OAAQ,SAAK,MAAOnE,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAsC,QAA3BgE,EAAKJ,EAASK,eAA4B,IAAPD,OAAgB,EAASA,EAAGvD,KAAIyD,IAAW,UAAM,SAAUrE,OAAOC,OAAO,CAAEC,UAAW,sCAAuD,OAAlB8D,QAA4C,IAAlBA,OAA2B,EAASA,EAAcM,YAAcD,EAAOzF,GAAK,6CAA+C,IAAMqD,QAAS,KAAMsC,OAPrZC,EAOkaH,EAAOzF,QAN3bqF,EAASF,EAASnF,GAAI,CAClB6F,WAAYV,EAASnF,GACrB0F,SAAUE,EACVE,SAAU,IAAIC,OAJD,IAACH,CAO4a,EAAE,iBAAoC,OAAlBR,QAA4C,IAAlBA,OAA2B,EAASA,EAAcM,YAAcD,EAAOzF,IAAM,CAAEuB,SAAU,EAAC,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,sCAAuCQ,MAAO,CAC3oBuE,gBAAiBZ,EAAOjC,SAAW,OAAOiC,EAAOjC,iBAAcrC,EAC/D6E,aAAgC,OAAlBZ,QAA4C,IAAlBA,OAA2B,EAASA,EAAcM,YAAcD,EAAOzF,GAAKF,OAAeqB,IAClI,CAAEI,UAAWkE,EAAOjC,WAAY,SAAK,MAAO,CAAElC,UAAW,8CAAgD,SAAK,MAAOF,OAAOC,OAAO,CAAEC,UAAW,kCAAmCQ,OAA0B,OAAlBsD,QAA4C,IAAlBA,OAA2B,EAASA,EAAcM,YAAcD,EAAOzF,GAAK,CAAEiD,MAAOnD,QAAiBqB,GAAa,CAAEI,SAAUkE,EAAOvF,WAAcuF,EAAOzF,QAAU,ECmCnZ,MA7CuB,EAAGmF,WAAUC,gBAAeC,WAAUvF,mBACzD,IAAIyF,EAAIe,EAAIC,EAAIC,EAEhB,MAAMC,EAAkH,QAAlGlB,EAAuB,OAAlBH,QAA4C,IAAlBA,OAA2B,EAASA,EAAcsB,mBAAgC,IAAPnB,EAAgBA,EAAKrC,KAAKyD,OAAoC,QAA5BL,EAAKnB,EAASyB,gBAA6B,IAAPN,EAAgBA,EAAK,KAAoC,QAA5BC,EAAKpB,EAAS0B,gBAA6B,IAAPN,EAAgBA,EAAK,MAAqC,QAA5BC,EAAKrB,EAASyB,gBAA6B,IAAPJ,EAAgBA,EAAK,IAAM,IAC7VM,EAAOC,IAAY,IAAAzG,UAASmG,IAEnC,IAAAO,YAAU,UAC4F7F,KAA3E,OAAlBiE,QAA4C,IAAlBA,OAA2B,EAASA,EAAcsB,cAC7EK,EAAS3B,EAAcsB,YAC3B,GACD,CAACtB,IACJ,MAwBM6B,EAVkB,MACpB,OAAQ9B,EAASnF,IACb,IAAK,MACD,MAAO,CAAEkH,KAAM,UAAWC,MAAO,SACrC,IAAK,MACD,MAAO,CAAED,KAAM,KAAMC,MAAO,SAChC,QACI,MAAO,CAAED,KAAM,MAAOC,MAAO,QACrC,EAEWC,GAQf,OAAQ,UAAM,MAAOhG,OAAOC,OAAO,CAAEC,UAAW,8BAAgC,CAAEC,SAAU,EAAC,SAAK,QAAS,CAAE8F,KAAM,QAASC,IAAKnC,EAASyB,UAAY,EAAGW,IAAKpC,EAAS0B,UAAY,IAAKW,KAAMrC,EAASqC,MAAQ,EAAGV,MAAOA,EAAOW,SAhC1MC,IAClB,MAAMC,EAAWC,SAASF,EAAEG,OAAOf,OACnCC,EAASY,GAETG,aAAaC,OAAOC,eACpBD,OAAOC,cAAgBC,YAAW,KAC9B5C,EAASF,EAASnF,GAAI,CAClB6F,WAAYV,EAASnF,GACrB0G,YAAaiB,EACb7B,SAAU,IAAIC,MAChB,GACH,IAAI,EAqB6OjE,MAAO,CAAEoG,YAAapI,MAAmB,SAAK,MAAOsB,OAAOC,OAAO,CAAEC,UAAW,mCAAoCQ,MAAO,CAAEmB,MAAOnD,IAAkB,CAAEyB,SALxX,QAAhB4D,EAASnF,GACF,IAAI8G,IAERA,MAEsa,UAAM,MAAO1F,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAU,EAAC,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,yCAA2C,CAAEC,SAAU0F,EAAOC,SAAU,SAAK,MAAO9F,OAAOC,OAAO,CAAEC,UAAW,0CAA4C,CAAEC,SAAU0F,EAAOE,gBAAoB,ECxC1vB,MAAMgB,EAAe,CACjBC,OAAQ,6BACRC,YAAa,iCACbC,UAAW,iCACXC,OAAQ,mCACRC,YAAa,+BAGJC,EAAiB,CAG1B,CACIzI,GAAI,KACJ0I,aAAc,iDACdrB,KAAM,SACN7B,QAAS,CACL,CAAExF,GAAI,SAAUE,KAAM,UAAY4G,MAAO,UACzC,CAAE9G,GAAI,OAAQE,KAAM,QAAU4G,MAAO,QACrC,CAAE9G,GAAI,SAAUE,KAAM,wBAAyB4G,MAAO,UACtD,CAAE9G,GAAI,QAASE,KAAM,8BAA+B4G,MAAO,UAE/DlD,SAAU,SACV+E,QAAS,UAGb,CACI3I,GAAI,KACJ0I,aAAc,qDACdrB,KAAM,QACN7B,QAAS,CACL,CAAExF,GAAI,UAAWE,KAAM,qBAAsB4G,MAAO,UAAWtD,SAAU,qFACzE,CAAExD,GAAI,aAAcE,KAAM,qBAAsB4G,MAAO,aAActD,SAAU,qFAC/E,CAAExD,GAAI,SAAUE,KAAM,2BAA4B4G,MAAO,SAAUtD,SAAU,qFAC7E,CAAExD,GAAI,OAAQE,KAAM,qBAAsB4G,MAAO,OAAQtD,SAAU,qFACnE,CAAExD,GAAI,SAAUE,KAAM,kBAAmB4G,MAAO,SAAUtD,SAAU,qFACpE,CAAExD,GAAI,WAAYE,KAAM,2BAA4B4G,MAAO,WAAYtD,SAAU,sFAErFI,SAAU,QACV+E,QAAS,UAGb,CACI3I,GAAI,KACJ0I,aAAc,4CACdrB,KAAM,SACN7B,QAAS,CACL,CAAExF,GAAI,KAAME,KAAM,KAAM4G,MAAO,MAC/B,CAAE9G,GAAI,IAAKE,KAAM,IAAK4G,MAAO,KAC7B,CAAE9G,GAAI,IAAKE,KAAM,IAAK4G,MAAO,KAC7B,CAAE9G,GAAI,IAAKE,KAAM,IAAK4G,MAAO,KAC7B,CAAE9G,GAAI,KAAME,KAAM,KAAM4G,MAAO,MAC/B,CAAE9G,GAAI,MAAOE,KAAM,OAAQ4G,MAAO,QAEtClD,SAAU,OACV+E,QAAS,UAGb,CACI3I,GAAI,KACJ0I,aAAc,qDACdrB,KAAM,SACN7B,QAAS,CACL,CAAExF,GAAI,MAAOE,KAAM,MAAO4G,MAAO,OACjC,CAAE9G,GAAI,MAAOE,KAAM,MAAO4G,MAAO,OACjC,CAAE9G,GAAI,OAAQE,KAAM,OAAQ4G,MAAO,QACnC,CAAE9G,GAAI,QAASE,KAAM,QAAS4G,MAAO,SACrC,CAAE9G,GAAI,QAASE,KAAM,QAAS4G,MAAO,SACrC,CAAE9G,GAAI,MAAOE,KAAM,MAAO4G,MAAO,QAErClD,SAAU,OACV+E,QAAS,UAGb,CACI3I,GAAI,KACJ0I,aAAc,wCACdrB,KAAM,SACN7B,QAAS,CACL,CAAExF,GAAI,MAAOE,KAAM,kBAAmB4G,MAAO,OAC7C,CAAE9G,GAAI,MAAOE,KAAM,kBAAmB4G,MAAO,OAC7C,CAAE9G,GAAI,MAAOE,KAAM,kBAAmB4G,MAAO,OAC7C,CAAE9G,GAAI,MAAOE,KAAM,kBAAmB4G,MAAO,OAC7C,CAAE9G,GAAI,MAAOE,KAAM,kBAAmB4G,MAAO,OAC7C,CAAE9G,GAAI,OAAQE,KAAM,mBAAoB4G,MAAO,QAC/C,CAAE9G,GAAI,OAAQE,KAAM,mBAAoB4G,MAAO,QAC/C,CAAE9G,GAAI,OAAQE,KAAM,kBAAmB4G,MAAO,SAElDlD,SAAU,OACV+E,QAAS,UAIb,CACI3I,GAAI,KACJ0I,aAAc,uDACdrB,KAAM,QACN7B,QAAS,CACL,CAAExF,GAAI,WAAYE,KAAM,uCAAwC4G,MAAO,WAAYtD,SAAU,qFAC7F,CAAExD,GAAI,SAAUE,KAAM,oCAAqC4G,MAAO,SAAUtD,SAAU,qFACtF,CAAExD,GAAI,UAAWE,KAAM,4CAA6C4G,MAAO,UAAWtD,SAAU,qFAChG,CAAExD,GAAI,OAAQE,KAAM,oDAAqD4G,MAAO,OAAQtD,SAAU,qFAClG,CAAExD,GAAI,aAAcE,KAAM,0BAA2B4G,MAAO,aAActD,SAAU,mFAExFI,SAAU,QACV+E,QAAS,eAGb,CACI3I,GAAI,KACJ0I,aAAc,wCACdrB,KAAM,WACN7B,QAAS,CACL,CAAExF,GAAI,QAASE,KAAM,4BAA6B4G,MAAO,SACzD,CAAE9G,GAAI,UAAWE,KAAM,UAAW4G,MAAO,WACzC,CAAE9G,GAAI,SAAUE,KAAM,SAAU4G,MAAO,UACvC,CAAE9G,GAAI,YAAaE,KAAM,YAAa4G,MAAO,aAC7C,CAAE9G,GAAI,SAAUE,KAAM,eAAgB4G,MAAO,UAC7C,CAAE9G,GAAI,QAASE,KAAM,cAAe4G,MAAO,UAE/ClD,SAAU,UACV+E,QAAS,eAGb,CACI3I,GAAI,KACJ0I,aAAc,sCACdrB,KAAM,QACN7B,QAAS,CACL,CAAExF,GAAI,YAAaE,KAAM,sBAAuB4G,MAAO,YAAatD,SAAU,kFAC9E,CAAExD,GAAI,SAAUE,KAAM,gBAAiB4G,MAAO,SAAUtD,SAAU,qFAClE,CAAExD,GAAI,UAAWE,KAAM,UAAW4G,MAAO,UAAWtD,SAAU,qFAC9D,CAAExD,GAAI,aAAcE,KAAM,oBAAqB4G,MAAO,aAActD,SAAU,sFAElFI,SAAU,MACV+E,QAAS,eAGb,CACI3I,GAAI,KACJ0I,aAAc,yCACdrB,KAAM,QACN7B,QAAS,CACL,CAAExF,GAAI,SAAUE,KAAM,cAAe4G,MAAO,SAAUtD,SAAU,qFAChE,CAAExD,GAAI,UAAWE,KAAM,kBAAmB4G,MAAO,UAAWtD,SAAU,qFACtE,CAAExD,GAAI,OAAQE,KAAM,WAAY4G,MAAO,OAAQtD,SAAU,qFACzD,CAAExD,GAAI,WAAYE,KAAM,eAAgB4G,MAAO,WAAYtD,SAAU,sFAEzEI,SAAU,MACV+E,QAAS,eAGb,CACI3I,GAAI,MACJ0I,aAAc,oCACdrB,KAAM,WACN7B,QAAS,CACL,CAAExF,GAAI,SAAUE,KAAM,SAAU4G,MAAO,UACvC,CAAE9G,GAAI,QAASE,KAAM,QAAS4G,MAAO,SACrC,CAAE9G,GAAI,OAAQE,KAAM,OAAQ4G,MAAO,QACnC,CAAE9G,GAAI,OAAQE,KAAM,OAAQ4G,MAAO,QACnC,CAAE9G,GAAI,YAAaE,KAAM,8BAA+B4G,MAAO,aAC/D,CAAE9G,GAAI,UAAWE,KAAM,UAAW4G,MAAO,WACzC,CAAE9G,GAAI,QAASE,KAAM,QAAS4G,MAAO,SACrC,CAAE9G,GAAI,OAAQE,KAAM,QAAS4G,MAAO,SAExClD,SAAU,UACV+E,QAAS,eAIb,CACI3I,GAAI,MACJ0I,aAAc,iEACdrB,KAAM,WACN7B,QAAS,CACL,CAAExF,GAAI,SAAUE,KAAM,kBAAmB4G,MAAO,UAChD,CAAE9G,GAAI,OAAQE,KAAM,6BAA8B4G,MAAO,QACzD,CAAE9G,GAAI,SAAUE,KAAM,4BAA6B4G,MAAO,UAC1D,CAAE9G,GAAI,OAAQE,KAAM,yBAA0B4G,MAAO,QACrD,CAAE9G,GAAI,SAAUE,KAAM,0BAA2B4G,MAAO,WAE5DlD,SAAU,WACV+E,QAAS,aAGb,CACI3I,GAAI,MACJ0I,aAAc,wDACdrB,KAAM,SACN7B,QAAS,CACL,CAAExF,GAAI,SAAUE,KAAM,+BAAgC4G,MAAO,UAC7D,CAAE9G,GAAI,WAAYE,KAAM,kBAAmB4G,MAAO,YAClD,CAAE9G,GAAI,SAAUE,KAAM,SAAU4G,MAAO,UACvC,CAAE9G,GAAI,WAAYE,KAAM,yBAA0B4G,MAAO,YACzD,CAAE9G,GAAI,UAAWE,KAAM,mBAAoB4G,MAAO,WAClD,CAAE9G,GAAI,KAAME,KAAM,iBAAkB4G,MAAO,OAE/ClD,SAAU,YACV+E,QAAS,aAGb,CACI3I,GAAI,MACJ0I,aAAc,gCACdrB,KAAM,SACN7B,QAAS,CACL,CAAExF,GAAI,OAAQE,KAAM,qDAAsD4G,MAAO,QACjF,CAAE9G,GAAI,aAAcE,KAAM,0CAA2C4G,MAAO,cAC5E,CAAE9G,GAAI,WAAYE,KAAM,mCAAoC4G,MAAO,YACnE,CAAE9G,GAAI,MAAOE,KAAM,kBAAmB4G,MAAO,QAEjDlD,SAAU,YACV+E,QAAS,aAGb,CACI3I,GAAI,MACJ0I,aAAc,+CACdrB,KAAM,QACN7B,QAAS,CACL,CAAExF,GAAI,SAAUE,KAAM,SAAU4G,MAAO,SAAUtD,SAAU,qFAC3D,CAAExD,GAAI,SAAUE,KAAM,SAAU4G,MAAO,SAAUtD,SAAU,qFAC3D,CAAExD,GAAI,OAAQE,KAAM,cAAe4G,MAAO,OAAQtD,SAAU,kFAC5D,CAAExD,GAAI,SAAUE,KAAM,SAAU4G,MAAO,SAAUtD,SAAU,sFAE/DI,SAAU,WACV+E,QAAS,aAGb,CACI3I,GAAI,MACJ0I,aAAc,0CACdrB,KAAM,SACN7B,QAAS,CACL,CAAExF,GAAI,OAAQE,KAAM,uCAAwC4G,MAAO,QACnE,CAAE9G,GAAI,YAAaE,KAAM,2CAA4C4G,MAAO,aAC5E,CAAE9G,GAAI,UAAWE,KAAM,wBAAyB4G,MAAO,WACvD,CAAE9G,GAAI,QAASE,KAAM,+BAAgC4G,MAAO,UAEhElD,SAAU,UACV+E,QAAS,aAIb,CACI3I,GAAI,MACJ0I,aAAc,yDACdrB,KAAM,SACNT,SAAU,EACVC,SAAU,IACVW,KAAM,GACN5D,SAAU,SACV+E,QAAS,UAGb,CACI3I,GAAI,MACJ0I,aAAc,qCACdrB,KAAM,SACN7B,QAAS,CACL,CAAExF,GAAI,SAAUE,KAAM,SAAU4G,MAAO,UACvC,CAAE9G,GAAI,UAAWE,KAAM,UAAW4G,MAAO,WACzC,CAAE9G,GAAI,aAAcE,KAAM,aAAc4G,MAAO,cAC/C,CAAE9G,GAAI,SAAUE,KAAM,mBAAoB4G,MAAO,WAErDlD,SAAU,WACV+E,QAAS,UAGb,CACI3I,GAAI,MACJ0I,aAAc,kDACdrB,KAAM,WACN7B,QAAS,CACL,CAAExF,GAAI,OAAQE,KAAM,OAAQ4G,MAAO,QACnC,CAAE9G,GAAI,KAAME,KAAM,MAAO4G,MAAO,MAChC,CAAE9G,GAAI,SAAUE,KAAM,SAAU4G,MAAO,UACvC,CAAE9G,GAAI,MAAOE,KAAM,MAAO4G,MAAO,OACjC,CAAE9G,GAAI,QAASE,KAAM,SAAU4G,MAAO,SACtC,CAAE9G,GAAI,WAAYE,KAAM,WAAY4G,MAAO,YAC3C,CAAE9G,GAAI,WAAYE,KAAM,WAAY4G,MAAO,YAC3C,CAAE9G,GAAI,UAAWE,KAAM,UAAW4G,MAAO,WACzC,CAAE9G,GAAI,QAASE,KAAM,QAAS4G,MAAO,SACrC,CAAE9G,GAAI,QAASE,KAAM,mBAAoB4G,MAAO,SAChD,CAAE9G,GAAI,cAAeE,KAAM,sBAAuB4G,MAAO,eACzD,CAAE9G,GAAI,KAAME,KAAM,iBAAkB4G,MAAO,MAC3C,CAAE9G,GAAI,eAAgBE,KAAM,QAAS4G,MAAO,iBAEhDlD,SAAU,QACV+E,QAAS,UAGb,CACI3I,GAAI,MACJ0I,aAAc,kDACdrB,KAAM,WACN7B,QAAS,CACL,CAAExF,GAAI,OAAQE,KAAM,OAAQ4G,MAAO,QACnC,CAAE9G,GAAI,SAAUE,KAAM,SAAU4G,MAAO,UACvC,CAAE9G,GAAI,YAAaE,KAAM,YAAa4G,MAAO,aAC7C,CAAE9G,GAAI,UAAWE,KAAM,UAAW4G,MAAO,WACzC,CAAE9G,GAAI,eAAgBE,KAAM,eAAgB4G,MAAO,gBACnD,CAAE9G,GAAI,OAAQE,KAAM,OAAQ4G,MAAO,QACnC,CAAE9G,GAAI,MAAOE,KAAM,WAAY4G,MAAO,OACtC,CAAE9G,GAAI,cAAeE,KAAM,cAAe4G,MAAO,eACjD,CAAE9G,GAAI,WAAYE,KAAM,WAAY4G,MAAO,YAC3C,CAAE9G,GAAI,YAAaE,KAAM,YAAa4G,MAAO,aAC7C,CAAE9G,GAAI,iBAAkBE,KAAM,QAAS4G,MAAO,mBAElDlD,SAAU,QACV+E,QAAS,UAGb,CACI3I,GAAI,MACJ0I,aAAc,6CACdrB,KAAM,WACN7B,QAAS,CACL,CAAExF,GAAI,OAAQE,KAAM,qBAAsB4G,MAAO,QACjD,CAAE9G,GAAI,QAASE,KAAM,QAAS4G,MAAO,SACrC,CAAE9G,GAAI,KAAME,KAAM,eAAgB4G,MAAO,MACzC,CAAE9G,GAAI,aAAcE,KAAM,aAAc4G,MAAO,cAC/C,CAAE9G,GAAI,SAAUE,KAAM,SAAU4G,MAAO,UACvC,CAAE9G,GAAI,YAAaE,KAAM,YAAa4G,MAAO,aAC7C,CAAE9G,GAAI,QAASE,KAAM,QAAS4G,MAAO,SACrC,CAAE9G,GAAI,QAASE,KAAM,gBAAiB4G,MAAO,SAC7C,CAAE9G,GAAI,SAAUE,KAAM,SAAU4G,MAAO,UACvC,CAAE9G,GAAI,QAASE,KAAM,QAAS4G,MAAO,SACrC,CAAE9G,GAAI,WAAYE,KAAM,WAAY4G,MAAO,YAC3C,CAAE9G,GAAI,eAAgBE,KAAM,QAAS4G,MAAO,iBAEhDlD,SAAU,QACV+E,QAAS,UAIb,CACI3I,GAAI,MACJ0I,aAAc,6DACdrB,KAAM,QACN7B,QAAS,CACL,CAAExF,GAAI,UAAWE,KAAM,4BAA6B4G,MAAO,UAAWtD,SAAU,sCAChF,CAAExD,GAAI,QAASE,KAAM,iCAAkC4G,MAAO,QAAStD,SAAU,sCACjF,CAAExD,GAAI,UAAWE,KAAM,wBAAyB4G,MAAO,UAAWtD,SAAU,sCAC5E,CAAExD,GAAI,WAAYE,KAAM,wCAAsC4G,MAAO,WAAYtD,SAAU,sCAC3F,CAAExD,GAAI,SAAUE,KAAM,4BAA6B4G,MAAO,SAAUtD,SAAU,sCAC9E,CAAExD,GAAI,OAAQE,KAAM,0BAA2B4G,MAAO,OAAQtD,SAAU,uCAE5EI,SAAU,cACV+E,QAAS,eAGb,CACI3I,GAAI,MACJ0I,aAAc,8DACdrB,KAAM,QACN7B,QAAS,CACL,CAAExF,GAAI,SAAUE,KAAM,4BAA6B4G,MAAO,SAAUtD,SAAU,sCAC9E,CAAExD,GAAI,MAAOE,KAAM,6BAA8B4G,MAAO,MAAOtD,SAAU,sCACzE,CAAExD,GAAI,UAAWE,KAAM,gCAA8B4G,MAAO,UAAWtD,SAAU,sCACjF,CAAExD,GAAI,WAAYE,KAAM,iCAAkC4G,MAAO,WAAYtD,SAAU,sCACvF,CAAExD,GAAI,QAASE,KAAM,8BAA+B4G,MAAO,QAAStD,SAAU,sCAC9E,CAAExD,GAAI,UAAWE,KAAM,2BAA4B4G,MAAO,UAAWtD,SAAU,uCAEnFI,SAAU,cACV+E,QAAS,eAGb,CACI3I,GAAI,MACJ0I,aAAc,sCACdrB,KAAM,SACN7B,QAAS,CACL,CAAExF,GAAI,QAASE,KAAM,2CAA4C4G,MAAO,SACxE,CAAE9G,GAAI,YAAaE,KAAM,+CAAgD4G,MAAO,aAChF,CAAE9G,GAAI,OAAQE,KAAM,wDAA0D4G,MAAO,QACrF,CAAE9G,GAAI,QAASE,KAAM,wCAAyC4G,MAAO,UAEzElD,SAAU,UACV+E,QAAS,eAGb,CACI3I,GAAI,MACJ0I,aAAc,qDACdrB,KAAM,SACNT,SAAU,EACVC,SAAU,IACVW,KAAM,EACN5D,SAAU,aACV+E,QAAS,eAGb,CACI3I,GAAI,MACJ0I,aAAc,yCACdrB,KAAM,SACN7B,QAAS,CACL,CAAExF,GAAI,UAAWE,KAAM,+BAAgC4G,MAAO,WAC9D,CAAE9G,GAAI,UAAWE,KAAM,qCAAsC4G,MAAO,WACpE,CAAE9G,GAAI,aAAcE,KAAM,4BAA6B4G,MAAO,cAC9D,CAAE9G,GAAI,WAAYE,KAAM,2BAA4B4G,MAAO,YAC3D,CAAE9G,GAAI,aAAcE,KAAM,6BAA8B4G,MAAO,cAC/D,CAAE9G,GAAI,aAAcE,KAAM,yCAA0C4G,MAAO,eAE/ElD,SAAU,QACV+E,QAAS,gBAGXC,EAAc,wBAgTpB,MA/SkB,EAAGC,SAAQ5D,QAAO6D,cAAaC,WAAUjJ,mBAEvD,MAAOkJ,IAAa,IAAA1I,UAASmI,IAyBvB,qBAAEQ,EAAoB,aAAEC,EAAcC,cAAeC,GAvBjC,MACtB,IACI,MAAMC,EAAgBC,aAAaC,QAAQ,GAAGX,KAAeC,KAC7D,GAAIQ,EAAe,CACf,MAAMG,EAAWC,KAAKC,MAAML,GAC5B,GAAIG,EAASG,SAAWC,MAAMC,QAAQL,EAASG,SAC3C,MAAO,CACHV,qBAAsBO,EAASM,iBAAmB,EAClDZ,aAAcM,EAASG,QACvBR,cAAeK,EAASL,eAAiB,SAGrD,CACJ,CACA,MAAOzB,GAEP,CACA,MAAO,CACHuB,qBAAsB,EACtBC,aAAc,GACdC,cAAe,SAClB,EAEuEY,IACrED,EAAiBE,IAAsB,IAAA1J,UAAS2I,IAChDU,EAASM,IAAc,IAAA3J,UAAS4I,IAChCC,EAAee,IAAoB,IAAA5J,UAAS8I,IAC5Ce,EAAYC,IAAiB,IAAA9J,WAAS,IACtC+J,EAASC,IAAc,IAAAhK,WAAS,IAChCiK,EAAiBC,IAAsB,IAAAlK,WAAS,IAEvD,IAAA0G,YAAU,KACN,IACI,MAAMwC,EAAW,CACbM,kBACAH,UACAR,iBAEJG,aAAamB,QAAQ,GAAG7B,KAAeC,IAAUY,KAAKiB,UAAUlB,GACpE,CACA,MAAO9B,GAEP,IACD,CAACoC,EAAiBH,EAASR,EAAeN,KAG7C,IAAA7B,YAAU,KAEiB,IAAnB2C,EAAQ7I,SAGRqJ,GAIJpB,EAASY,GAAQ,GAClB,CAACA,EAASQ,EAAYpB,IAEzB,MAAM4B,GAAqB,IAAAC,UAAQ,IACxB5B,EAAU6B,QAAO,CAACC,EAAK3F,KACrB2F,EAAI3F,EAASwD,WACdmC,EAAI3F,EAASwD,SAAW,IAE5BmC,EAAI3F,EAASwD,SAASoC,KAAK5F,GACpB2F,IACR,CAAC,IACL,CAAC9B,IAEEgC,GAA0B,IAAAJ,UAAQ,IAC7BD,EAAmBxB,IAAkB,IAC7C,CAACwB,EAAoBxB,IAElB8B,EAAgBD,EAAwBE,WAAUC,IAAO,IAAI5F,EAAI,OAAO4F,EAAEnL,MAA8C,QAArCuF,EAAKyD,EAAUc,UAAqC,IAAPvE,OAAgB,EAASA,EAAGvF,GAAG,IAC/JmF,EAAW6F,EAAwBC,GAAiB,EAAIA,EAAgB,IAAMjC,EAAUc,GAExFsB,EAA0BH,IAAkBD,EAAwBlK,OAAS,EAE7EuK,EAAiBvB,IAAoBd,EAAUlI,OAAS,EAYxDwK,EAAqB,CAACzF,EAAY0F,KACpC,MAAMC,EAAa,IAAI7B,GACjB8B,EAAgB9B,EAAQuB,WAAUQ,GAAKA,EAAE7F,aAAeA,IAC1D4F,GAAiB,EACjBD,EAAWC,GAAiBF,EAG5BC,EAAWT,KAAKQ,GAEpBtB,EAAWuB,IAEY,WAAlBrG,EAASkC,MAAuC,UAAlBlC,EAASkC,OACxCkE,EAAO7F,UACPoE,EAAkBd,EAAUlI,OAAS,GACrCmH,YAAW,KACP0D,GAAoB,GACrB,IACP,EAGEA,EAAqB,KACvB,IAAIpG,EAAIe,EACR,GAAIwD,EAAkBd,EAAUlI,OAAS,EAErC,GAAIsK,EAAyB,CAEzB,MAAMQ,EAAcxK,OAAOyK,KAAK1D,GAC1B2D,EAAsBF,EAAYG,QAAQ5C,GAChD,GAAI2C,EAAsBF,EAAY9K,OAAS,EAAG,CAC9C,MAAMkL,EAAcJ,EAAYE,EAAsB,GAEoB,QAAzEvG,EAAK0G,SAASC,cAAc,+CAA4D,IAAP3G,GAAyBA,EAAG4G,UAAUC,IAAI,YAC5HnE,YAAW,KACP,IAAI1C,EAAIe,EACR4D,EAAiB8B,GAEjB,MAAMK,EAAuB1B,EAAmBqB,IAAgB,GAC1DM,EAAoBtD,EAAUkC,WAAUC,IAAO,IAAI5F,EAAI,OAAO4F,EAAEnL,MAA2C,QAAlCuF,EAAK8G,EAAqB,UAAuB,IAAP9G,OAAgB,EAASA,EAAGvF,GAAG,IACxJgK,EAAmBsC,GAAqB,EAAIA,EAAoBxC,EAAkB,GACR,QAAzEvE,EAAK0G,SAASC,cAAc,+CAA4D,IAAP3G,GAAyBA,EAAG4G,UAAUI,OAAO,YACrD,QAAzEjG,EAAK2F,SAASC,cAAc,+CAA4D,IAAP5F,GAAyBA,EAAG6F,UAAUC,IAAI,WAC5HnE,YAAW,KACP,IAAI1C,EACsE,QAAzEA,EAAK0G,SAASC,cAAc,+CAA4D,IAAP3G,GAAyBA,EAAG4G,UAAUI,OAAO,UAAU,GAC1I,IAAI,GACR,IACP,CACJ,MAGuE,QAAlEjG,EAAK2F,SAASC,cAAc,wCAAqD,IAAP5F,GAAyBA,EAAG6F,UAAUC,IAAI,YACrHnE,YAAW,KACP,IAAI1C,EAAIe,EACR0D,EAAmBF,EAAkB,GAC8B,QAAlEvE,EAAK0G,SAASC,cAAc,wCAAqD,IAAP3G,GAAyBA,EAAG4G,UAAUI,OAAO,YACrD,QAAlEjG,EAAK2F,SAASC,cAAc,wCAAqD,IAAP5F,GAAyBA,EAAG6F,UAAUC,IAAI,WACrHnE,YAAW,KACP,IAAI1C,EAC+D,QAAlEA,EAAK0G,SAASC,cAAc,wCAAqD,IAAP3G,GAAyBA,EAAG4G,UAAUI,OAAO,UAAU,GACnI,IAAI,GACR,IAEX,EA4EEC,EAAuB,KACzBhC,GAAmB,GACnBiC,GAAc,EAGZC,EAAsB,KACxBlC,GAAmB,EAAM,EAGvBmC,EAA4B,MACrBhD,EAAQiD,MAAKlB,GAAKA,EAAE7F,aAAeV,EAASnF,KAEnDyM,EAAe,KACbtC,IAEJC,GAAc,GACdrB,EAASY,GAAQ,EAGrB,GAAIU,EACA,OAAQ,SAAK,MAAOjJ,OAAOC,OAAO,CAAEC,UAAW,kDAAoD,CAAEC,UAAU,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,8BAAgC,CAAEC,SAAU,wBAEtM,GAAyB,IAArByH,EAAUlI,OACV,OAAQ,SAAK,MAAOM,OAAOC,OAAO,CAAEC,UAAW,gDAAkD,CAAEC,UAAU,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,6BAA+B,CAAEC,SAAU,wEAGnM,MAAMsL,EAAuB3J,KAAKC,MAAOwG,EAAQ7I,OAASkI,EAAUlI,OAAU,KAyC9E,OAAQ,UAAM,MAAOM,OAAOC,OAAO,CAAEC,UAAW,sBAAwB,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,8BAAgC,CAAEC,SAAU,EAAC,SAAK,KAAMH,OAAOC,OAAO,CAAEC,UAAW,6BAA+B,CAAEC,SAAU0D,KAAW6D,IAAgB,SAAK,IAAK1H,OAAOC,OAAO,CAAEC,UAAW,mCAAqC,CAAEC,SAAUuH,UAAuB,UAAM,MAAO1H,OAAOC,OAAO,CAAEC,UAAW,gCAAkC,CAAEC,SAAU,EAAC,SAAK,MAAO,CAAED,UAAW,mCAAoCQ,MAAO,CACtgBJ,MAAO,GAAGmL,KACV3L,gBAAiBpB,MACf,UAAM,MAAOsB,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAU,CAACsL,EAAsB,sBAfhI,SAAK,MAAOzL,OAAOC,OAAO,CAAEC,UAAW,oCAAsC,CAAEC,SAAUH,OAAO0L,QAAQ3E,GAAcnG,KAAI,EAAE+K,EAAYC,MACxI,MAAMC,EA5MS,CAACtE,IACxB,MAAMuE,EAAmBvC,EAAmBhC,IAAY,GAClDwE,EAAoBxD,EAAQ5E,QAAO2G,GAAKwB,EAAiBE,MAAKjC,GAAKA,EAAEnL,KAAO0L,EAAE7F,eAAa/E,OACjG,MAAO,CACHuM,MAAOH,EAAiBpM,OACxBgF,SAAUqH,EACVG,WAAYpK,KAAKC,MAAOgK,EAAoBjK,KAAKqE,IAAI2F,EAAiBpM,OAAQ,GAAM,KACvF,EAqM+ByM,CAAmBR,GACrCS,EAAWrE,IAAkB4D,EACnC,OAAQ,UAAM,SAAU3L,OAAOC,OAAO,CAAEC,UAAW,oCAAmCkM,EAAW,0CAA4C,IAAMnK,QAAS,IAtFlJ,CAACsF,IACnB,IAAIpD,EAEJ,MAAMkI,EAAyB9C,EAAmBhC,IAAY,GAC9D,GAAsC,IAAlC8E,EAAuB3M,OACvB,OACJ,MAAM4M,EAAsB1E,EAAUkC,WAAUC,GAAKA,EAAEnL,KAAOyN,EAAuB,GAAGzN,MAC3D,IAAzB0N,IAGsE,QAAzEnI,EAAK0G,SAASC,cAAc,+CAA4D,IAAP3G,GAAyBA,EAAG4G,UAAUC,IAAI,YAC5HnE,YAAW,KACP,IAAI1C,EAAIe,EACR4D,EAAiBvB,GACjBqB,EAAmB0D,GACuD,QAAzEnI,EAAK0G,SAASC,cAAc,+CAA4D,IAAP3G,GAAyBA,EAAG4G,UAAUI,OAAO,YACrD,QAAzEjG,EAAK2F,SAASC,cAAc,+CAA4D,IAAP5F,GAAyBA,EAAG6F,UAAUC,IAAI,WAC5HnE,YAAW,KACP,IAAI1C,EACsE,QAAzEA,EAAK0G,SAASC,cAAc,+CAA4D,IAAP3G,GAAyBA,EAAG4G,UAAUI,OAAO,UAAU,GAC1I,IAAI,GACR,KAAI,EAiEmKoB,CAAcZ,GAAaa,SAA6B,IAAnBjE,EAAQ7I,QAA+B,WAAfiM,EAAyBjL,MAAO0L,EAAW,CAAExH,YAAalG,EAAcmD,MAAOnD,QAAiBqB,GAAa,CAAEI,SAAU,EAAC,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,yCAA2C,CAAEC,SAAUyL,MAAkB,SAAK,MAAO,CAAE1L,UAAW,2CAA4CQ,MAAO,CAAEJ,MAAO,GAAGuL,EAAgBK,cAAepM,gBAAiBpB,QAAuBiN,EAAY,QAYvc,UAAM,MAAO3L,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,sCAAwC,CAAEC,SAAU,EAAC,SAAK,KAAMH,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAU4G,EAAagB,OAAoB,SAAK,MAAO/H,OAAOC,OAAO,CAAEC,UAAW,wCAA0C,CAAEC,UAAU,UAAM,OAAQ,CAAEA,SAAU,CAAC,YAAa0J,EAAgB,EAAG,OAAQD,EAAwBlK,kBAAqB,UAAM,MAAOM,OAAOC,OAAO,CAAEC,UAAW,gCAAkC,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,SAAU,CAAC,YAAauI,EAAkB,EAAG,OAAQd,EAAUlI,YAAa,SAAK,KAAMM,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAU4D,EAASuD,oBA1C5/B,MACnB,IAAKvD,EACD,OAAO,KAEX,MAAMC,EAAgBuE,EAAQiD,MAAKlB,GAAKA,EAAE7F,aAAeV,EAASnF,KAE5D6N,EAAc,CAChB1I,WACAC,gBACAC,SAAUiG,EACVxL,gBAEJ,OAAQqF,EAASkC,MACb,IAAK,SACD,OAAO,SAAK,EAAsBjG,OAAOC,OAAO,CAAC,EAAGwM,IACxD,IAAK,QACD,OAAO,SAAK,EAAqBzM,OAAOC,OAAO,CAAC,EAAGwM,IACvD,IAAK,WACD,OAAO,SAAK,EAAwBzM,OAAOC,OAAO,CAAC,EAAGwM,IAC1D,IAAK,SACD,OAAO,SAAK,EAAgBzM,OAAOC,OAAO,CAAC,EAAGwM,IAClD,QACI,OAAO,KACf,EAmBsiCC,IAAkB,UAAM,MAAO1M,OAAOC,OAAO,CAAEC,UAAW,+BAAiC,CAAEC,SAAU,CAACuI,EAAkB,IAAM,SAAK,SAAU1I,OAAOC,OAAO,CAAEC,UAAW,mEAAoE+B,QA/IzvC,KAC3B,IAAIkC,EAAIe,EACR,GAAIwD,EAAkB,EAElB,GAAsB,IAAlBmB,EAAqB,CAErB,MAAMW,EAAcxK,OAAOyK,KAAK1D,GAC1B2D,EAAsBF,EAAYG,QAAQ5C,GAChD,GAAI2C,EAAsB,EAAG,CACzB,MAAMiC,EAAcnC,EAAYE,EAAsB,GAEoB,QAAzEvG,EAAK0G,SAASC,cAAc,+CAA4D,IAAP3G,GAAyBA,EAAG4G,UAAUC,IAAI,YAC5HnE,YAAW,KACP,IAAI1C,EAAIe,EACR4D,EAAiB6D,GAEjB,MAAMC,EAAuBrD,EAAmBoD,IAAgB,GAC1DE,EAAoBjF,EAAUkC,WAAUC,IAAO,IAAI5F,EAAI,OAAO4F,EAAEnL,MAAyE,QAAhEuF,EAAKyI,EAAqBA,EAAqBlN,OAAS,UAAuB,IAAPyE,OAAgB,EAASA,EAAGvF,GAAG,IACtLgK,EAAmBiE,GAAqB,EAAIA,EAAoBnE,EAAkB,GACR,QAAzEvE,EAAK0G,SAASC,cAAc,+CAA4D,IAAP3G,GAAyBA,EAAG4G,UAAUI,OAAO,YACrD,QAAzEjG,EAAK2F,SAASC,cAAc,+CAA4D,IAAP5F,GAAyBA,EAAG6F,UAAUC,IAAI,WAC5HnE,YAAW,KACP,IAAI1C,EACsE,QAAzEA,EAAK0G,SAASC,cAAc,+CAA4D,IAAP3G,GAAyBA,EAAG4G,UAAUI,OAAO,UAAU,GAC1I,IAAI,GACR,IACP,CACJ,MAGuE,QAAlEjG,EAAK2F,SAASC,cAAc,wCAAqD,IAAP5F,GAAyBA,EAAG6F,UAAUC,IAAI,YACrHnE,YAAW,KACP,IAAI1C,EAAIe,EACR0D,EAAmBF,EAAkB,GAC8B,QAAlEvE,EAAK0G,SAASC,cAAc,wCAAqD,IAAP3G,GAAyBA,EAAG4G,UAAUI,OAAO,YACrD,QAAlEjG,EAAK2F,SAASC,cAAc,wCAAqD,IAAP5F,GAAyBA,EAAG6F,UAAUC,IAAI,WACrHnE,YAAW,KACP,IAAI1C,EAC+D,QAAlEA,EAAK0G,SAASC,cAAc,wCAAqD,IAAP3G,GAAyBA,EAAG4G,UAAUI,OAAO,UAAU,GACnI,IAAI,GACR,IAEX,GAqGuzC,CAAEhL,SAAU,cAAiBoI,EAAQ7I,QAAU,IAAMuK,IAAmB,SAAK,SAAUjK,OAAOC,OAAO,CAAEC,UAAW,8DAA+D+B,QA1Eh9C,KACxBmH,GAAmB,EAAK,GAyEg/C,CAAEjJ,SAAU,qBAAwB8J,GAAkB,SAAK,SAAUjK,OAAOC,OAAO,CAAEC,UAAW,iEAAkE+B,QAASoJ,EAAc3K,MAAO,CAAEZ,gBAAiBpB,GAAgB8N,UAAWjB,KAA+BxC,GAAc,CAAE5I,SAAU4I,EAAa,gBAAkB,oBAAwB,SAAK,SAAU/I,OAAOC,OAAO,CAAEC,UAAW,iEAAkE+B,QAASsI,EAAoB7J,MAAO,CAAEZ,gBAAiBpB,GAAgB8N,UAAWjB,KAA+B,CAAEpL,SAAU,mBAAuB,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAU,EAAC,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,0CAA4C,CAAEC,UAAU,UAAM,MAAOH,OAAOC,OAAO,CAAEK,MAAO,KAAMC,OAAQ,KAAMF,QAAS,YAAaG,KAAM,OAAQJ,MAAO,8BAAgC,CAAED,SAAU,EAAC,SAAK,OAAQ,CAAEM,EAAG,kKAAmKD,KAAM,kBAAmB,SAAK,OAAQ,CAAEC,EAAG,iBAAkBD,KAAM,kBAAmB,SAAK,OAAQ,CAAEC,EAAG,gBAAiBD,KAAM,yBAA4B,SAAK,MAAOR,OAAOC,OAAO,CAAEC,UAAW,0CAA4C,CAAEC,SAAU,0FAP31FgJ,GAEG,UAAM,MAAOnJ,OAAOC,OAAO,CAAEC,UAAW,oCAAsC,CAAEC,SAAU,EAAC,SAAK,MAAO,CAAED,UAAW,4CAA6C+B,QAASqJ,KAAwB,UAAM,MAAOtL,OAAOC,OAAO,CAAEC,UAAW,2CAA6C,CAAEC,SAAU,EAAC,SAAK,KAAM,CAAEA,SAAU,sBAAuB,UAAM,IAAK,CAAEA,SAAU,CAAC,mBAAoBoI,EAAQ7I,OAAQ,OAAQkI,EAAUlI,OAAQ,eAAgB+L,EAAsB,mBAAoB,SAAK,IAAK,CAAEtL,SAAU,4GAA6G,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,4CAA8C,CAAEC,SAAU,EAAC,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,mEAAoE+B,QAASqJ,GAAuB,CAAEnL,SAAU,oBAAqB,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,iEAAkE+B,QAASmJ,EAAsB1K,MAAO,CAAEZ,gBAAiBpB,IAAkB,CAAEyB,SAAU,iCADvjC,QAMg9F,C,8CC5sBn+F,UAAe,EAAS,C,yECkBpB2M,E,6EAnBAC,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAU7H,GAAS,IAAMU,EAAK+G,EAAUK,KAAK9H,GAAS,CAAE,MAAOY,GAAKgH,EAAOhH,EAAI,CAAE,CAC1F,SAASmH,EAAS/H,GAAS,IAAMU,EAAK+G,EAAiB,MAAEzH,GAAS,CAAE,MAAOY,GAAKgH,EAAOhH,EAAI,CAAE,CAC7F,SAASF,EAAKsH,GAJlB,IAAehI,EAIagI,EAAOC,KAAON,EAAQK,EAAOhI,QAJ1CA,EAIyDgI,EAAOhI,MAJhDA,aAAiBwH,EAAIxH,EAAQ,IAAIwH,GAAE,SAAUG,GAAWA,EAAQ3H,EAAQ,KAIjBkI,KAAKL,EAAWE,EAAW,CAC7GrH,GAAM+G,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKO,OAClE,GACJ,GAYA,SAAWV,GACPA,EAAYA,EAAyB,YAAI,GAAK,cAC9CA,EAAYA,EAA0B,aAAI,GAAK,eAC/CA,EAAYA,EAA4B,eAAI,GAAK,iBACjDA,EAAYA,EAA0B,aAAI,GAAK,eAC/CA,EAAYA,EAA6B,gBAAI,GAAK,iBACrD,CAND,CAMGA,IAAgBA,EAAc,CAAC,IAmYlC,MA9XiB,EAAGgB,eAAcC,gBAAeC,iBAAgB,MAC7D,IAAI7J,EACJ,MAAM,KAAE8J,IAAS,UACX,YAAEC,EAAW,iBAAEC,EAAgB,mBAAEC,IAAuB,EAAAC,EAAA,KACxDC,GAAc,IAAAC,QAAO,MACrBC,GAAkB,IAAAD,QAAO,OAExBE,EAAYC,IAAiB,IAAAxP,UAAS,WACtCyP,EAAaC,IAAkB,IAAA1P,WAAS,IACxC2P,EAAkBC,IAAuB,IAAA5P,UAAS,QAClD6P,EAAYC,IAAiB,IAAA9P,UAAS,KACtC+P,EAAcC,IAAmB,IAAAhQ,WAAS,IAE1CiQ,EAAaC,IAAkB,IAAAlQ,UAAS4N,EAAYuC,cACpDC,EAASC,IAAc,IAAArQ,UAAS,CACnCsD,SAAU,GACVgN,YAAa,GACb3N,MAAO,GACP4N,QAAS,GACThN,MAAO,GACPiN,KAAM,GACNC,KAAM,MAGHC,EAAYC,IAAiB,IAAA3Q,UAAS,KACtC4Q,EAAaC,IAAkB,IAAA7Q,UAAS,KACxC8Q,EAAaC,IAAkB,IAAA/Q,UAAS,KAExCgR,EAAaC,IAAkB,IAAAjR,UAAS,MAEzCkR,GAAgB,IAAAC,cAAY,KAC9B,KAAe,OAATpC,QAA0B,IAATA,OAAkB,EAASA,EAAKqC,QACnD,MAAO,GACX,IAAI/O,EAAQ,IAAI0M,EAAKqC,QAyBrB,MAvByB,QAArBzB,IAIAtN,EAD0B,cAArBsN,EACGtN,EAAMoC,QAAO3B,GAAQA,EAAKuO,WAG1BhP,EAAMoC,QAAO3B,GAAQA,EAAKQ,WAAaqM,KAG/Ce,IACArO,EAAQA,EAAMoC,QAAO3B,IACjB,IAAImC,EACJ,OAAoC,QAA3BA,EAAKnC,EAAKwN,mBAAgC,IAAPrL,OAAgB,EAASA,EAAGqM,cAAc7Q,SAASiQ,EAAWY,iBACtGxO,EAAKQ,SAASgO,cAAc7Q,SAASiQ,EAAWY,cAAc,KAGtEV,IACAvO,EAAQA,EAAMoC,QAAO3B,GAAQA,EAAKH,MAAM2O,cAAc7Q,SAASmQ,EAAYU,kBAE3ER,IACAzO,EAAQA,EAAMoC,QAAO3B,IAAU,IAAImC,EAAI,OAA6B,QAArBA,EAAKnC,EAAKS,aAA0B,IAAP0B,OAAgB,EAASA,EAAGqM,cAAc7Q,SAASqQ,EAAYQ,cAAc,KAEtJjP,CAAK,GACb,CAAU,OAAT0M,QAA0B,IAATA,OAAkB,EAASA,EAAKqC,OAAQzB,EAAkBe,EAAYE,EAAaE,IAElGS,GAAgB,IAAAJ,cAAY,KAC9B,IAAIlM,EACJ,OAA2E,QAApEA,EAAc,OAAT8J,QAA0B,IAATA,OAAkB,EAASA,EAAKyC,gBAA6B,IAAPvM,OAAgB,EAASA,EAAGwM,YAIxG1C,EAAKyC,SAASC,WAAW/P,KAAIhC,IAEzB,CACHA,KACA2D,KAAM,gBACNH,SAAU,GACVmO,UAAU,MATP,EAWT,GACH,CAAsE,QAApEpM,EAAc,OAAT8J,QAA0B,IAATA,OAAkB,EAASA,EAAKyC,gBAA6B,IAAPvM,OAAgB,EAASA,EAAGwM,cAE7G,IAAA/K,YAAU,KACN,GAAa,OAATqI,QAA0B,IAATA,OAAkB,EAASA,EAAKqC,OAAQ,CACzD,MAAMM,EAAmB,IAAIC,IAAI5C,EAAKqC,OAAO1P,KAAIoB,GAAQA,EAAKQ,YACxDsO,EAAe,CACjB,CAAElS,GAAI,MAAO2D,KAAM,aACnB,CAAE3D,GAAI,YAAa2D,KAAM,gBACtBiG,MAAMuI,KAAKH,GAAkBhQ,KAAI4B,IAAY,CAC5C5D,GAAI4D,EACJD,KAAMC,EAASwO,OAAO,GAAGC,cAAgBzO,EAAS0O,MAAM,QAGhElC,EAAc8B,EAClB,IACD,CAAU,OAAT7C,QAA0B,IAATA,OAAkB,EAASA,EAAKqC,SAErD,MAAMa,EAAmBxO,IACrB2L,EAAY8C,QAAUzO,CAAK,EAGzB0O,EAAkB1O,IACpB6L,EAAgB4C,QAAUzO,CAAK,EAG7B2O,EAAa,KACf,GAA4B,OAAxBhD,EAAY8C,SAAgD,OAA5B5C,EAAgB4C,QAChD,OACJ,MAAMG,EAAS,IAAInB,KACboB,EAAWD,EAAOjD,EAAY8C,SAEpCG,EAAOE,OAAOnD,EAAY8C,QAAS,GAEnCG,EAAOE,OAAOjD,EAAgB4C,QAAS,EAAGI,GAK1ClD,EAAY8C,QAAU,KACtB5C,EAAgB4C,QAAU,IAAI,EAG5BM,GAAmB,IAAArB,cAAasB,GAAS5E,OAAU,OAAQ,OAAQ,GAAQ,YAC7E6B,GAAe,GACf,IAEI,MAAMxM,EAAWwP,IAAIC,gBAAgBF,GAErCpC,GAAWuC,GAAS9R,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG6R,GAAO,CAAE1P,eAE7DgN,EAAetC,EAAYiF,uBAGrBC,EAAyBL,EACnC,CACA,MAAOM,GAEP,CACA,QACIrD,GAAe,EACnB,CACJ,KAAI,IAEEoD,EAA4BL,GAAS5E,OAAU,OAAQ,OAAQ,GAAQ,kBAGnE,IAAIK,SAAQC,GAAWxG,WAAWwG,EAAS,OAEjD,MAAM6E,EAAmB,CAAC,OAAQ,UAAW,QAAS,eAAepQ,KAAKyD,MAAsB,EAAhBzD,KAAKqQ,WACrF,IAAIC,EAAsB,GACD,SAArBF,EACAE,EAAsB,CAAC,UAAW,SAAU,UAAW,UAAUtQ,KAAKyD,MAAsB,EAAhBzD,KAAKqQ,WAEvD,YAArBD,EACLE,EAAsB,CAAC,QAAS,QAAS,SAAU,UAAUtQ,KAAKyD,MAAsB,EAAhBzD,KAAKqQ,WAEnD,UAArBD,IACLE,EAAsB,CAAC,WAAY,QAAS,QAAS,WAAWtQ,KAAKyD,MAAsB,EAAhBzD,KAAKqQ,YAEpF,MAAME,EAAS,CAAC,QAAS,QAAS,OAAQ,MAAO,QAAS,SAAU,SAAU,OAAQ,OAAQ,SACxFC,EAAgBD,EAAOvQ,KAAKyD,MAAMzD,KAAKqQ,SAAWE,EAAO3S,SAE/D6P,GAAWuC,GAAS9R,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG6R,GAAO,CAAEtP,SAAU0P,EAAkB1C,YAAa4C,EAAqBvQ,MAAOyQ,KACtI,IAEMC,GAAoB,IAAAlC,cAAa/J,IACnC,MAAM,KAAE/D,EAAI,MAAEmD,GAAUY,EAAEG,OAC1B8I,GAAWuC,GAAS9R,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG6R,GAAO,CAAE,CAACvP,GAAOmD,KAAU,GAChF,IAEG8M,GAAiB,IAAAnC,cAAa/J,IAChC,IAAInC,EACJ,GAAc,UAAVmC,EAAEmM,KAA6B,MAAVnM,EAAEmM,IAAa,CACpCnM,EAAEoM,iBACF,MAAMC,EAAQrM,EAAEG,OACVmM,EAAMD,EAAMjN,MAAMmN,OACpBD,KAAiC,QAAvBzO,EAAKmL,EAAQK,YAAyB,IAAPxL,OAAgB,EAASA,EAAGxE,SAASiT,MAC9ErD,GAAWuC,GAAS9R,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG6R,GAAO,CAAEnC,KAAM,IAAKmC,EAAKnC,MAAQ,GAAKiD,OAC1FD,EAAMjN,MAAQ,GAEtB,IACD,CAAC4J,EAAQK,OAENmD,GAAY,IAAAzC,cAAa0C,IAC3BxD,GAAWuC,IACP,IAAI3N,EACJ,OAAQnE,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG6R,GAAO,CAAEnC,MAA4B,QAApBxL,EAAK2N,EAAKnC,YAAyB,IAAPxL,OAAgB,EAASA,EAAGR,QAAOiP,GAAOA,IAAQG,MAAiB,IAAM,GAChK,GACH,IAEGC,GAAmB,IAAA3C,cAAapK,IAClCsJ,GAAWuC,GAAS9R,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG6R,GAAO,CAAEtP,SAAUyD,MACvEmJ,EAAetC,EAAYmG,aAAa,GACzC,IAEGC,GAAoB,IAAA7C,cAAaxO,IACnC0N,GAAWuC,GAAS9R,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG6R,GAAO,CAAEjQ,YAC7DuN,EAAetC,EAAYqG,eAAe,GAC3C,IAEGC,GAAsB,IAAA/C,cAAaZ,IACrCF,GAAWuC,GAAS9R,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG6R,GAAO,CAAErC,cAC7DL,EAAetC,EAAYuG,aAAa,GACzC,IAEGC,IAAiB,IAAAjD,cAAalO,IAChC,MAAMoR,EAAsB,OAATtF,QAA0B,IAATA,OAAkB,EAASA,EAAKqC,OAAO9E,MAAKxJ,GAAQA,EAAKpD,KAAOuD,IAChGoR,IACApD,EAAehO,GACfoN,EAAW,CACP/M,SAAU+Q,EAAW/Q,SACrBgN,YAAa+D,EAAW/D,aAAe,GACvC3N,MAAO0R,EAAW1R,MAClB4N,QAAS8D,EAAW9D,SAAW,GAC/BhN,MAAO8Q,EAAW9Q,OAAS,GAC3BiN,KAAM6D,EAAW7D,MAAQ,GACzBtN,SAAUmR,EAAWnR,SACrBuN,KAAM4D,EAAW5D,MAAQ,KAE7BT,GAAgB,GAChBE,EAAetC,EAAYiF,iBAC/B,GACD,CAAU,OAAT9D,QAA0B,IAATA,OAAkB,EAASA,EAAKqC,SAE/CkD,IAAmB,IAAAnD,cAAY,KACjC,KAAe,OAATpC,QAA0B,IAATA,OAAkB,EAASA,EAAKqC,QACnD,OACJ,MAAMmD,EAAUpL,KAAKiB,UAAU2E,EAAKqC,QAC9BoD,EAAU,uCAAyCC,mBAAmBF,GAEtEG,EAAc/I,SAASgJ,cAAc,KAC3CD,EAAYE,aAAa,OAAQJ,GACjCE,EAAYE,aAAa,WAHK,uBAI9BF,EAAYG,OAAO,GACpB,CAAU,OAAT9F,QAA0B,IAATA,OAAkB,EAASA,EAAKqC,SAE/C0D,IAAmB,IAAA3D,cAAa4D,IAClC,MAAMC,EAAa,IAAIC,WACnBF,EAAMxN,OAAO2N,OAASH,EAAMxN,OAAO2N,MAAM1U,OAAS,IAClDwU,EAAWG,WAAWJ,EAAMxN,OAAO2N,MAAM,GAAI,SAC7CF,EAAWI,OAAShO,IAChB,IAAInC,EACJ,IACI,MAAMoQ,EAA8B,QAAnBpQ,EAAKmC,EAAEG,cAA2B,IAAPtC,OAAgB,EAASA,EAAGuJ,OACxE,GAAuB,kBAAZ6G,EAAsB,CACTlM,KAAKC,MAAMiM,EAGnC,CACJ,CACA,MAAOtC,GAEP,GAER,GACD,IAEGuC,IAAc,IAAAnE,cAAY,KAC5B,GAAIf,EAAQ9M,UAAY8M,EAAQzN,OAASyN,EAAQlN,SAAU,CACvD,MAAMqS,EAAc,CAChBjS,SAAU8M,EAAQ9M,SAClBgN,YAAaF,EAAQE,kBAAezP,EACpC8B,MAAOyN,EAAQzN,MACf4N,QAASH,EAAQG,cAAW1P,EAC5B0C,MAAO6M,EAAQ7M,YAAS1C,EACxB2P,KAAMJ,EAAQI,WAAQ3P,EACtBqC,SAAUkN,EAAQlN,SAClBuN,KAAML,EAAQK,MAAQ,IAE1B,GAAIO,EAAa,CAEOlQ,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAY,OAATgO,QAA0B,IAATA,OAAkB,EAASA,EAAKqC,OAAO9E,MAAKxJ,GAAQA,EAAKpD,KAAOsR,KAAeuE,GAIpJtE,EAAe,KACnB,KACK,CAED,MAAMnO,EAAOhC,OAAOC,OAAOD,OAAOC,OAAO,CAAErB,GAAI,UAAU+F,KAAK+P,SAAWD,GAAc,CAAEE,UAAW,IAAIhQ,KAAQ4L,UAAU,IAC1HrC,EAAYlM,EAChB,CAEAuN,EAAW,CACP/M,SAAU,GACVgN,YAAa,GACb3N,MAAO,GACP4N,QAAS,GACThN,MAAO,GACPiN,KAAM,GACNC,KAAM,KAEVT,GAAgB,GAChBE,EAAetC,EAAYuC,YAC/B,IACD,CAACC,EAASpB,EAAagC,EAAsB,OAATjC,QAA0B,IAATA,OAAkB,EAASA,EAAKqC,SAElFsE,IAAuB,IAAAvE,cAAY,CAAClO,EAAQ0S,KAC9CzG,EAAmBjM,EAAQ0S,EAAW,GACvC,CAACzG,IAEE0G,IAAmB,IAAAzE,cAAalO,IAC9BwE,OAAOoO,QAAQ,gEACf5G,EAAiBhM,EACrB,GACD,CAACgM,IAEE6G,IAAoB,IAAA3E,cAAarO,IAC/B+L,GACAA,EAAc/L,EAClB,GACD,CAAC+L,IAsDJ,OAAQ,UAAM,MAAO/N,OAAOC,OAAO,CAAEC,UAAW,qBAAuB,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,6BAA+B,CAAEC,SAAU,EAAC,SAAK,KAAM,CAAEA,SAAU,iBAAkB,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,8BAAgC,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,oCAAsC,CAAEC,SAAU,EAAC,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,gCAAiC+B,QAASuR,GAAkB3P,MAAO,sBAAwB,CAAE1D,SAAU,aAAc,UAAM,QAASH,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU,CAAC,UAAU,SAAK,QAAS,CAAE8F,KAAM,OAAQgP,OAAQ,QAAS5O,SAAU2N,GAAkBtT,MAAO,CAAEwU,QAAS,mBAAuB,SAAK,SAAUlV,OAAOC,OAAO,CAAEC,UAAW,6BAA8BtB,GAAI,mBAAoBqD,QAAS,KACj0BiN,GAAgB,GAChBE,EAAetC,EAAYuC,aAC3Bc,EAAe,KAAK,GACnB,CAAEhQ,SAAU,uBAA0B,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,oCAAsC,CAAEC,SAAU,EAAC,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,gCAA8C,aAAfuO,EAA4B,SAAW,IAAMxM,QAAS,IAAMyM,EAAc,aAAe,CAAEvO,SAAU,kBAAmB,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,gCAA8C,WAAfuO,EAA0B,SAAW,IAAMxM,QAAS,IAAMyM,EAAc,WAAa,CAAEvO,SAAU,mBAAqC,WAAfsO,IAA4B,UAAM,MAAOzO,OAAOC,OAAO,CAAEC,UAAW,8BAAgC,CAAEC,SAAU,EAAC,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU4O,EAAWnO,KAAI4B,IAAa,SAAK,SAAUxC,OAAOC,OAAO,CAAEC,UAAW,oCAAmC2O,IAAqBrM,EAAS5D,GAAK,SAAW,IAAMqD,QAAS,IAAM6M,EAAoBtM,EAAS5D,KAAO,CAAEuB,SAAUqC,EAASD,OAASC,EAAS5D,UAAW,UAAM,MAAOoB,OAAOC,OAAO,CAAEC,UAAW,sCAAwC,CAAEC,SAAU,EAAC,SAAK,QAAS,CAAE8F,KAAM,OAAQkP,YAAa,oBAAqBzP,MAAOkK,EAAYvJ,SAAWC,GAAMuJ,EAAcvJ,EAAEG,OAAOf,OAAQxF,UAAW,qCAAsC,SAAK,QAAS,CAAE+F,KAAM,OAAQkP,YAAa,qBAAsBzP,MAAOoK,EAAazJ,SAAWC,GAAMyJ,EAAezJ,EAAEG,OAAOf,OAAQxF,UAAW,qCAAsC,SAAK,QAAS,CAAE+F,KAAM,OAAQkP,YAAa,qBAAsBzP,MAAOsK,EAAa3J,SAAWC,GAAM2J,EAAe3J,EAAEG,OAAOf,OAAQxF,UAAW,4CAAiD+O,GAAgB,UAAM,MAAOjP,OAAOC,OAAO,CAAEC,UAAW,+BAAiC,CAAEC,SAAU,EAAC,SAAK,KAAM,CAAEA,SAAU+P,EAAc,YAAc,iBAxDrvD,MACtB,IAAI/L,EACJ,OAAQgL,GACJ,KAAKrC,EAAYuC,YACb,OAAQ,UAAM,MAAOrP,OAAOC,OAAO,CAAEC,UAAW,yCAA2C,CAAEC,SAAU,EAAC,SAAK,KAAM,CAAEA,SAAU,sBAAuB,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,gCAAkC,CAAEC,SAAU,CAAC,OAAQ,UAAW,UAAW,YAAa,QAAS,eAAeS,KAAIqF,IAAS,UAAM,SAAUjG,OAAOC,OAAO,CAAEC,UAAW,8BAA+B+B,QAAS,IAAM+Q,EAAiB/M,IAAS,CAAE9F,SAAU,EAAC,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,gCAAkC,CAAEC,SAAU8F,EAAK+K,OAAO,GAAGC,kBAAmB,SAAK,OAAQ,CAAE9Q,SAAU8F,EAAK+K,OAAO,GAAGC,cAAgBhL,EAAKiL,MAAM,QAAWjL,SAAa,SAAK,SAAUjG,OAAOC,OAAO,CAAEC,UAAW,gCAAiC+B,QAAS,KACltBiN,GAAgB,GAChBE,EAAetC,EAAYuC,YAAY,GACtC,CAAElP,SAAU,gBACjC,KAAK2M,EAAYmG,aACb,OAAQ,UAAM,MAAOjT,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAU,EAAC,SAAK,KAAM,CAAEA,SAAU,kBAAmB,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,oCAAsC,CAAEC,SAAU,CAAC,QAAS,QAAS,MAAO,OAAQ,QAAS,SAAU,SAAU,OAAQ,SAAU,QAAS,QAAQS,KAAIiB,IAAU,SAAK,SAAU,CAAE3B,UAAW,+BAAgCQ,MAAO,CAAEZ,gBAAiB+B,GAASI,QAAS,IAAMiR,EAAkBrR,GAAQ,aAAcA,GAASA,SAAc,UAAM,MAAO7B,OAAOC,OAAO,CAAEC,UAAW,+BAAiC,CAAEC,SAAU,EAAC,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,8BAA+B+B,QAAS,IAAMmN,EAAetC,EAAYuC,cAAgB,CAAElP,SAAU,WAAY,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,gCAAiC+B,QAAS,KACjzBiN,GAAgB,GAChBE,EAAetC,EAAYuC,YAAY,GACtC,CAAElP,SAAU,oBACzC,KAAK2M,EAAYqG,eACb,OAAQ,UAAM,MAAOnT,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,SAAU,EAAC,SAAK,KAAM,CAAEA,SAAU,oBAAqB,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,mCAAqC,CAAEC,SAAU,CAAC,QAAS,UAAW,QAAS,SAAU,YAAa,QAAS,YAAa,gBAAgBS,KAAI6O,IAAY,SAAK,SAAUzP,OAAOC,OAAO,CAAEC,UAAW,iCAAkC+B,QAAS,IAAMmR,EAAoB3D,IAAY,CAAEtP,UAAU,SAAK,OAAQ,CAAEA,SAAUsP,EAAQuB,OAAO,GAAGC,cAAgBxB,EAAQyB,MAAM,OAAUzB,SAAgB,UAAM,MAAOzP,OAAOC,OAAO,CAAEC,UAAW,+BAAiC,CAAEC,SAAU,EAAC,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,8BAA+B+B,QAAS,IAAMmN,EAAetC,EAAYmG,eAAiB,CAAE9S,SAAU,WAAY,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,gCAAiC+B,QAAS,KAC72BiN,GAAgB,GAChBE,EAAetC,EAAYuC,YAAY,GACtC,CAAElP,SAAU,oBACzC,KAAK2M,EAAYuG,aACb,OAAQ,UAAM,MAAOrT,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAU,EAAC,SAAK,KAAM,CAAEA,SAAU,kBAAmB,SAAKiV,EAAA,EAAe,CAAEC,SAAU3D,EAAkB7N,MAAO,uBAAwB6D,YAAa,2DAA4D,UAAM,MAAO1H,OAAOC,OAAO,CAAEC,UAAW,+BAAiC,CAAEC,SAAU,EAAC,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,8BAA+B+B,QAAS,IAAMmN,EAAetC,EAAYqG,iBAAmB,CAAEhT,SAAU,WAAY,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,gCAAiC+B,QAAS,KACxlBiN,GAAgB,GAChBE,EAAetC,EAAYuC,YAAY,GACtC,CAAElP,SAAU,oBACzC,KAAK2M,EAAYiF,gBACb,OAAQ,UAAM,MAAO/R,OAAOC,OAAO,CAAEC,UAAW,oCAAsC,CAAEC,SAAU,EAAC,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,8BAAgC,CAAEC,UAAU,SAAKmV,EAAAC,EAAe,CAAElT,IAAKiN,EAAQlN,UAAY,GAAIE,IAAK,mBAAoBkT,gBAAiB,OAAQC,QAAS,eAAiB,UAAM,MAAOzV,OAAOC,OAAO,CAAEC,UAAW,kCAAoC,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU,EAAC,SAAK,QAASH,OAAOC,OAAO,CAAEyV,QAAS,YAAc,CAAEvV,SAAU,iBAAkB,UAAM,SAAUH,OAAOC,OAAO,CAAErB,GAAI,WAAY2D,KAAM,WAAYmD,MAAO4J,EAAQ9M,SAAU6D,SAAUkM,EAAmBoD,UAAU,GAAQ,CAAExV,SAAU,EAAC,SAAK,SAAUH,OAAOC,OAAO,CAAEyF,MAAO,IAAM,CAAEvF,SAAU,sBAAuB,SAAK,SAAUH,OAAOC,OAAO,CAAEyF,MAAO,QAAU,CAAEvF,SAAU,WAAY,SAAK,SAAUH,OAAOC,OAAO,CAAEyF,MAAO,WAAa,CAAEvF,SAAU,cAAe,SAAK,SAAUH,OAAOC,OAAO,CAAEyF,MAAO,WAAa,CAAEvF,SAAU,cAAe,SAAK,SAAUH,OAAOC,OAAO,CAAEyF,MAAO,aAAe,CAAEvF,SAAU,gBAAiB,SAAK,SAAUH,OAAOC,OAAO,CAAEyF,MAAO,SAAW,CAAEvF,SAAU,YAAa,SAAK,SAAUH,OAAOC,OAAO,CAAEyF,MAAO,eAAiB,CAAEvF,SAAU,0BAA6B,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU,EAAC,SAAK,QAASH,OAAOC,OAAO,CAAEyV,QAAS,eAAiB,CAAEvV,SAAU,kBAAmB,SAAK,QAAS,CAAE8F,KAAM,OAAQrH,GAAI,cAAe2D,KAAM,cAAemD,MAAO4J,EAAQE,aAAe,GAAInJ,SAAUkM,EAAmB4C,YAAa,mCAAqC,UAAM,MAAOnV,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU,EAAC,SAAK,QAASH,OAAOC,OAAO,CAAEyV,QAAS,SAAW,CAAEvV,SAAU,cAAe,SAAK,QAAS,CAAE8F,KAAM,OAAQrH,GAAI,QAAS2D,KAAM,QAASmD,MAAO4J,EAAQzN,MAAOwE,SAAUkM,EAAmBoD,UAAU,EAAMR,YAAa,gCAAkC,UAAM,MAAOnV,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU,EAAC,SAAK,QAASH,OAAOC,OAAO,CAAEyV,QAAS,WAAa,CAAEvV,SAAU,cAAe,SAAK,QAAS,CAAE8F,KAAM,OAAQrH,GAAI,UAAW2D,KAAM,UAAWmD,MAAO4J,EAAQG,SAAW,GAAIpJ,SAAUkM,EAAmB4C,YAAa,mCAAqC,UAAM,MAAOnV,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU,EAAC,SAAK,QAASH,OAAOC,OAAO,CAAEyV,QAAS,SAAW,CAAEvV,SAAU,YAAa,SAAK,QAAS,CAAE8F,KAAM,OAAQrH,GAAI,QAAS2D,KAAM,QAASmD,MAAO4J,EAAQ7M,OAAS,GAAI4D,SAAUkM,EAAmB4C,YAAa,+BAAiC,UAAM,MAAOnV,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU,EAAC,SAAK,QAASH,OAAOC,OAAO,CAAEyV,QAAS,QAAU,CAAEvV,SAAU,WAAY,SAAK,QAAS,CAAE8F,KAAM,OAAQrH,GAAI,OAAQ2D,KAAM,OAAQmD,MAAO4J,EAAQI,MAAQ,GAAIrJ,SAAUkM,EAAmB4C,YAAa,gCAAkC,UAAM,MAAOnV,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU,EAAC,SAAK,QAASH,OAAOC,OAAO,CAAEyV,QAAS,QAAU,CAAEvV,SAAU,WAAY,SAAK,QAAS,CAAE8F,KAAM,OAAQrH,GAAI,OAAQgX,UAAWpD,EAAgB2C,YAAa,4CAA6C,SAAK,MAAOnV,OAAOC,OAAO,CAAEC,UAAW,2BAA6B,CAAEC,SAAkC,QAAvBgE,EAAKmL,EAAQK,YAAyB,IAAPxL,OAAgB,EAASA,EAAGvD,KAAIgS,IAAQ,UAAM,OAAQ5S,OAAOC,OAAO,CAAEC,UAAW,0BAA4B,CAAEC,SAAU,CAACyS,GAAK,SAAK,SAAU5S,OAAOC,OAAO,CAAEgG,KAAM,SAAUhE,QAAS,IAAM6Q,EAAUF,GAAM1S,UAAW,iCAAmC,CAAEC,SAAU,aAAkByS,aAAiB,UAAM,MAAO5S,OAAOC,OAAO,CAAEC,UAAW,mCAAqC,CAAEC,SAAU,CAACgP,EAAcrC,EAAYuC,cAAgB,SAAK,SAAUrP,OAAOC,OAAO,CAAEgG,KAAM,SAAU/F,UAAW,8BAA+B+B,QAAS,KAE5wH,MAAM4T,EAAW1G,EAAc,EAlV/E,IAAuBzJ,IAoV2CmQ,EAnVvD7V,OAAO8V,OAAOhJ,GAAanN,SAAS+F,GAoVK0J,EAAeyG,GAIfzG,EAAetC,EAAYuC,YAC/B,GACC,CAAElP,SAAU,WAAa,SAAK,SAAUH,OAAOC,OAAO,CAAEgG,KAAM,SAAU/F,UAAW,gCAAiC+B,QAAS,KAC9HsN,EAAW,CACP/M,SAAU,GACVgN,YAAa,GACb3N,MAAO,GACP4N,QAAS,GACThN,MAAO,GACPiN,KAAM,GACNC,KAAM,KAEVT,GAAgB,GAChBE,EAAetC,EAAYuC,YAAY,GACtC,CAAElP,SAAU,aAAc,SAAK,SAAUH,OAAOC,OAAO,CAAEgG,KAAM,SAAU/F,UAAW,8BAA+B+B,QAASuS,GAAahI,UAAW8C,EAAQ9M,WAAa8M,EAAQzN,OAAS,CAAE1B,SAAU+P,EAAc,cAAgB,2BACzQ,QACI,OAAO,KACf,EAM8xD6F,QAA6B,SAAK,WAAW,CAAE5V,SAAyB,aAAfsO,GAA6B,SAAK,MAAOzO,OAAOC,OAAO,CAAEC,UAAW,oCAAsC,CAAEC,SAAUsQ,IAAgB/Q,OAAS,EAAK+Q,IAAgB7P,KAAI,CAACoB,EAAMW,KAAW,SAAK,MAAO3C,OAAOC,OAAO,CAAEC,UAAW,0BAA2B8V,WAAW,EAAMC,YAAa,IAAM9E,EAAgBxO,GAAQuT,WAAY,IAAM7E,EAAe1O,GAAQwT,OAAQ7E,GAAc,CAAEnR,UAAU,SAAKiW,EAAA,EAAU,CAAEpU,KAAM,CACztEpD,GAAIoD,EAAKpD,GACT2D,KAAMP,EAAKO,MAAQ,gBACnBE,MAAO,GACP4T,MAAO,EACPC,MAAOtU,EAAKI,UAAY,IACzBmU,cAAc,EAAM1B,YAAY,EAAM2B,SAAU,IAAM1B,GAAiB9S,EAAKpD,QAAWoD,EAAKpD,OAAU,UAAM,MAAOoB,OAAOC,OAAO,CAAEC,UAAW,4BAA8B,CAAEC,SAAU,EAAC,SAAK,IAAK,CAAEA,SAAU,oCAAqC,SAAK,IAAK,CAAEA,SAAU,6CAAoD,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,2BAA6B,CAAEC,SAAUiQ,IAAgB1Q,OAAS,EAAK0Q,IAAgBxP,KAAI,CAACoB,EAAMW,KAAW,UAAM,MAAO3C,OAAOC,OAAO,CAAEC,UAAW,0BAA2B8V,WAAW,EAAMC,YAAa,IAAM9E,EAAgBxO,GAAQuT,WAAY,IAAM7E,EAAe1O,GAAQwT,OAAQ7E,GAAc,CAAEnR,SAAU,EAAC,SAAKiW,EAAA,EAAU,CAAEpU,KAAM,CAC/qBpD,GAAIoD,EAAKpD,GACT2D,KAAMP,EAAKwN,aAAexN,EAAKQ,SAC/BC,MAAOT,EAAKS,OAAS,GACrB4T,MAAO,EACPC,MAAOtU,EAAKI,UAAY,IACzBmU,cAAc,EAAME,WAAa5B,GAAeD,GAAqB5S,EAAKpD,GAAIiW,GAAaA,WAAY7S,EAAKuO,SAAUiG,SAAU,IAAM1B,GAAiB9S,EAAKpD,IAAKqD,QAAS,IAAM6L,GAAgBA,EAAa9L,MAAU,UAAM,MAAOhC,OAAOC,OAAO,CAAEC,UAAW,mCAAqC,CAAEC,SAAU,EAAC,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,8BAA+B+B,QAAS,IAAMqR,GAAetR,EAAKpD,KAAO,CAAEuB,SAAU,UAAY6N,IAAkB,SAAK,SAAUhO,OAAOC,OAAO,CAAEC,UAAW,uCAAwC+B,QAAS,IAAM+S,GAAkBhT,IAAS,CAAE7B,SAAU,wBAA2B,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,mCAAqC,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,oCAAsC,CAAEC,SAAU,CAAC6B,EAAKQ,SAAUR,EAAKwN,aAAe,WAAMxN,EAAKwN,kBAAoBxN,EAAKH,QAAU,UAAM,MAAO7B,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU,EAAC,SAAK,OAAQ,CAAED,UAAW,kCAAmCQ,MAAO,CAAEZ,gBAAiBkC,EAAKH,SAAYG,EAAKH,MAAOG,EAAKyN,SAAW,KAAKzN,EAAKyN,eAAkBzN,EAAKS,QAAU,SAAK,MAAOzC,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU6B,EAAKS,SAAYT,EAAK0N,OAAS,UAAM,MAAO1P,OAAOC,OAAO,CAAEC,UAAW,gCAAkC,CAAEC,SAAU,CAAC,SAAU6B,EAAK0N,gBAAqB1N,EAAKpD,OAAU,UAAM,MAAOoB,OAAOC,OAAO,CAAEC,UAAW,4BAA8B,CAAEC,SAAU,EAAC,SAAK,IAAK,CAAEA,SAAU,kCAAmC,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,mCAAoC+B,QAAS,KAC/lDiN,GAAgB,GAChBE,EAAetC,EAAYuC,YAAY,GACtC,CAAElP,SAAU,qCAA8C,C,yDClY/F,SAASuW,EAAaC,GAoBlB,MAnBiB,CACb,MAAS,UACT,MAAS,UACT,IAAO,UACP,KAAQ,UACR,MAAS,UACT,OAAU,UACV,OAAU,UACV,KAAQ,UACR,KAAQ,UACR,MAAS,UACT,KAAQ,UACR,SAAY,UACZ,MAAS,UACT,MAAS,UACT,OAAU,UACV,KAAQ,UACR,YAAa,WAEDA,EAAUnG,gBAAkB,SAChD,CACA,UA5C4B,EAAGjP,QAAOqV,iBAAgBC,kBAAiBC,cAAapY,eAAcqY,cAAa,EAAOC,qBAElH,MAAMC,EAAeF,EAAaxV,EAAQA,EAAM2P,MAAM,EAAG,GACzD,OAAQ,UAAM,MAAOlR,OAAOC,OAAO,CAAEC,UAAW,yBAA2B,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU,EAAC,UAAM,KAAMH,OAAOC,OAAO,CAAEC,UAAW,gCAAkC,CAAEC,SAAU,EAAC,SAAK,OAAQH,OAAOC,OAAO,CAAEC,UAAW,+BAAiC,CAAEC,SAAU,YAAc,6BAA8B,SAAK,IAAKH,OAAOC,OAAO,CAAEC,UAAW,mCAAqC,CAAEC,SAAU,0DAA4D,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,kCAAoC,CAAEC,SAAU8W,EAAarW,KAAKsW,IAAqB,UAAM,MAAOlX,OAAOC,OAAO,CAAEC,UAAW,+BAAiC,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,yCAA2C,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,2CAA6C,CAAEC,SAAU,EAAC,SAAK,KAAMH,OAAOC,OAAO,CAAEC,UAAW,yCAA2C,CAAEC,SAAU+W,EAAgBC,cAAe,SAAK,OAAQnX,OAAOC,OAAO,CAAEC,UAAW,gCAAkC,CAAEC,SAAU+W,EAAgBjD,cAAgB,SAAK,MAAOjU,OAAOC,OAAO,CAAEC,UAAW,6CAA+C,CAAEC,SAAU+W,EAAgBE,WAAWxW,KAAI,CAACgS,EAAKjQ,KAAW,SAAK,OAAQ3C,OAAOC,OAAO,CAAEC,UAAW,oCAAqCQ,MAAO,CAAEkE,YAAalG,IAAkB,CAAEyB,SAAUyS,IAAQjQ,SAAeuU,EAAgB7E,QAAU6E,EAAgBG,YAAc,UAAM,MAAOrX,OAAOC,OAAO,CAAEC,UAAW,wCAA0C,CAAEC,SAAU,CAAC+W,EAAgB7E,SAAW,SAAK,MAAOrS,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU+W,EAAgB7E,OAAOzR,KAAI,CAACiB,EAAOyV,KAAS,SAAK,OAAQtX,OAAOC,OAAO,CAAEC,UAAW,qCAAsCQ,MAAO,CAAEZ,gBAAiB4W,EAAa7U,KAAY,CAAE1B,SAAU0B,IAAUyV,QAAaJ,EAAgBG,WAAa,SAAK,MAAOrX,OAAOC,OAAO,CAAEC,UAAW,mCAAqC,CAAEC,SAAU+W,EAAgBG,SAASzW,KAAI,CAAC6O,EAAS6H,KAAS,SAAK,OAAQtX,OAAOC,OAAO,CAAEC,UAAW,uCAAwCQ,MAAO,CAAEmB,MAAOnD,IAAkB,CAAEyB,SAAUsP,IAAY6H,iBAAwB,SAAK,MAAOtX,OAAOC,OAAO,CAAEC,UAAW,mCAAqC,CAAEC,SAAU+W,EAAgBK,gBAAgB3W,KAAK4W,IAAa,SAAK,UAAU,CAAExV,KAAM,CAC32EpD,GAAI4Y,EAAQ5Y,GACZ2D,KAAMiV,EAAQjV,KACdE,MAAO+U,EAAQ/U,MACf4T,MAAOmB,EAAQnB,MACfoB,UAAW,CAACD,EAAQpV,UACpBI,SAAUgV,EAAQhV,SAClBf,WAAY+V,EAAQ/V,YAAc,EAClCC,aAAc8V,EAAQ9V,cAAgB,GACtCgW,IAAK,IACLC,WAAY,gBACZtF,OAAQ,GACRuF,MAAO,GACPC,SAAS,EACTnQ,YAAa8P,EAAQ9P,aAAe,GACpCoQ,eAAW/X,GACZpB,WAAYiY,EAAgBC,gBAAkB1U,GAAW0U,GAAmBA,EAAgBW,GAAUV,YAAc3U,GAAW2U,GAAeA,EAAYU,GAAUO,aAAa,EAAMrZ,aAAcA,GAAgB8Y,EAAQ5Y,SAAsD,IAA3CsY,EAAgBK,gBAAgB7X,SAAiB,SAAK,MAAOM,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,UAAU,SAAK,IAAK,CAAEA,SAAU,mDAAwD+W,EAAgBtY,SAAW2C,EAAM7B,OAAS,IAAM,SAAK,SAAUM,OAAOC,OAAO,CAAEC,UAAW,gCAAiC+B,QAAS+U,EAAgBtW,MAAO,CAAEkE,YAAalG,EAAcmD,MAAOnD,IAAkB,CAAEyB,SAAU4W,EAAa,YAAc,YAAYxV,EAAM7B,4BAAgD,IAAjB6B,EAAM7B,SAAiB,SAAK,MAAOM,OAAOC,OAAO,CAAEC,UAAW,gCAAkC,CAAEC,UAAU,SAAK,IAAK,CAAEA,SAAU,iDAAsD,C,0GCgYr8B,MAlZO,MACH,WAAA6X,CAAYzP,EAASX,GACjBqQ,KAAK1P,QAAUA,EACf0P,KAAKrQ,UAAYA,CACrB,CAIA,oBAAAsQ,CAAqBzT,GACjB,OAAOwT,KAAK1P,QAAQiD,MAAKlB,GAAKA,EAAE7F,aAAeA,GACnD,CAIA,WAAA0T,CAAY1T,GACR,OAAOwT,KAAKrQ,UAAU4D,MAAKzB,GAAKA,EAAEnL,KAAO6F,GAC7C,CAIA,aAAA2T,CAAc3T,EAAYD,GACtB,MAAMT,EAAWkU,KAAKE,YAAY1T,GAClC,IAAKV,IAAaA,EAASK,QACvB,MAAO,GACX,MAAMC,EAASN,EAASK,QAAQoH,MAAK6M,GAAKA,EAAEzZ,KAAO4F,IACnD,OAAmB,OAAXH,QAA8B,IAAXA,OAAoB,EAASA,EAAOvF,OAAS,EAC5E,CAIA,cAAAwZ,CAAe7T,EAAYD,GACvB,MAAMT,EAAWkU,KAAKE,YAAY1T,GAClC,IAAKV,IAAaA,EAASK,QACvB,MAAO,GACX,MAAMC,EAASN,EAASK,QAAQoH,MAAK6M,GAAKA,EAAEzZ,KAAO4F,IACnD,OAAmB,OAAXH,QAA8B,IAAXA,OAAoB,EAASA,EAAOqB,QAAU,EAC7E,CAIA,mBAAA6S,GACI,MAAMC,EAAcP,KAAKC,qBAAqB,MAC9C,IAAKM,IAAgBA,EAAYlU,SAC7B,MAAO,GAQX,MAAO,CANc,CACjB5D,MAAO+X,OAAOR,KAAKK,eAAe,KAAME,EAAYlU,WACpDoU,OAAQ,GAKhB,CAIA,mBAAAC,GACI,MAAMC,EAAcX,KAAKC,qBAAqB,MAC9C,IAAKU,IAAgBA,EAAYtU,SAC7B,MAAO,GAMX,MAAO,CAJc,CACjBzC,MAAO4W,OAAOR,KAAKK,eAAe,KAAMM,EAAYtU,WACpDoU,OAAQ,GAGhB,CAIA,kBAAAG,GACI,MAAM5R,EAAc,GAEd6R,EAAgBb,KAAKC,qBAAqB,MAC5CY,GAAiBA,EAAcxU,UAC/B2C,EAAY0C,KAAK,CACbnH,SAAU,OACVkN,KAAM+I,OAAOR,KAAKK,eAAe,KAAMQ,EAAcxU,aAI7D,MAAMyU,EAAmBd,KAAKC,qBAAqB,MAC/Ca,GAAoBA,EAAiBzU,UACrC2C,EAAY0C,KAAK,CACbnH,SAAU,UACVkN,KAAM+I,OAAOR,KAAKK,eAAe,KAAMS,EAAiBzU,aAIhE,MAAM0U,EAAiBf,KAAKC,qBAAqB,MAOjD,OANIc,GAAkBA,EAAe1U,UACjC2C,EAAY0C,KAAK,CACbnH,SAAU,QACVkN,KAAM+I,OAAOR,KAAKK,eAAe,KAAMU,EAAe1U,aAGvD2C,CACX,CAIA,sBAAAgS,GACI,MAAMC,EAAiBjB,KAAKC,qBAAqB,OACjD,OAAKgB,GAAmBA,EAAepU,UAGhCoU,EAAepU,UAAUlE,KAAIhC,GAAM6Z,OAAOR,KAAKK,eAAe,MAAO1Z,MAFjE,EAGf,CAIA,iBAAAua,GACI,MAAMhS,EAAS,GAETiS,EAAqBnB,KAAKC,qBAAqB,OACjDkB,GAAsBA,EAAmBtU,WACzCsU,EAAmBtU,UAAUuU,SAAQza,IACtB,iBAAPA,GACAuI,EAAOwC,KAAK8O,OAAOR,KAAKK,eAAe,MAAO1Z,IAClD,IAIR,MAAM0a,EAAuBrB,KAAKC,qBAAqB,OACnDoB,GAAwBA,EAAqBxU,WAC7CwU,EAAqBxU,UAAUuU,SAAQza,IACxB,mBAAPA,GACAuI,EAAOwC,KAAK8O,OAAOR,KAAKK,eAAe,MAAO1Z,IAClD,IAIR,MAAM2a,EAAqBtB,KAAKC,qBAAqB,OASrD,OARIqB,GAAsBA,EAAmBzU,WACzCyU,EAAmBzU,UAAUuU,SAAQza,IACtB,SAAPA,GAAwB,iBAAPA,GACjBuI,EAAOwC,KAAK8O,OAAOR,KAAKK,eAAe,MAAO1Z,IAClD,IAID,IAAI,IAAIiS,IAAI1J,GACvB,CAIA,aAAAqS,GACI,MAAMC,EAAexB,KAAKC,qBAAqB,OAC/C,IAAKuB,QAA6C1Z,IAA7B0Z,EAAanU,YAC9B,MAAO,CAAC,EAEZ,MAAMmB,EAASgT,EAAanU,YAE5B,MAAO,CACHY,IAAKpE,KAAKqE,IAAI,EAAGrE,KAAKyD,MAAe,IAATkB,IAC5BN,IAAKrE,KAAK4X,KAAc,KAATjT,GACfA,SAER,CAIA,qBAAAkT,GACI,MAAMC,EAAgB3B,KAAKC,qBAAqB,MAChD,OAAK0B,GAAkBA,EAAc9U,UAE9B8U,EAAc9U,UAAUlE,KAAIhC,GAAM6Z,OAAOR,KAAKK,eAAe,KAAM1Z,MAD/D,EAEf,CAIA,oBAAAib,GACI,MAAMC,EAAe7B,KAAKC,qBAAqB,OAC/C,OAAK4B,GAAiBA,EAAahV,UAE5BgV,EAAahV,UAAUlE,KAAIhC,GAAM6Z,OAAOR,KAAKK,eAAe,MAAO1Z,MAD/D,EAEf,CAIA,iBAAAmb,GACI,MAAMC,EAAiB,CAAC,EAElBC,EAAehC,KAAKC,qBAAqB,MAC3C+B,GAAgBA,EAAa3V,WAC7B0V,EAAeE,OAASzB,OAAOR,KAAKK,eAAe,KAAM2B,EAAa3V,YAG1E,MAAM6V,EAAkBlC,KAAKC,qBAAqB,MAIlD,OAHIiC,GAAmBA,EAAgB7V,WACnC0V,EAAeI,UAAY3B,OAAOR,KAAKK,eAAe,KAAM6B,EAAgB7V,YAEzE0V,CACX,CAIA,uBAAAK,GACI,MAAMjT,EAAc,GAEdkT,EAAwBrC,KAAKC,qBAAqB,OACpDoC,GAAyBA,EAAsBhW,UAC/C8C,EAAYuC,KAAK8O,OAAOR,KAAKK,eAAe,MAAOgC,EAAsBhW,YAG7E,MAAMiW,EAAyBtC,KAAKC,qBAAqB,OAIzD,OAHIqC,GAA0BA,EAAuBjW,UACjD8C,EAAYuC,KAAK8O,OAAOR,KAAKK,eAAe,MAAOiC,EAAuBjW,YAEvE8C,CACX,CAIA,gBAAAoT,GACI,MAAMC,EAAcxC,KAAKC,qBAAqB,OAC9C,OAAKuC,GAAgBA,EAAYnW,SAE1BmU,OAAOR,KAAKK,eAAe,MAAOmC,EAAYnW,WAD1C,IAEf,CAIA,sBAAAoW,GACI,MAAMC,EAAqB1C,KAAKC,qBAAqB,OACrD,OAAKyC,QAAyD5a,IAAnC4a,EAAmBrV,YAGvCqV,EAAmBrV,YAFf,IAGf,CAIA,YAAAsV,GACI,MAAMC,EAAa5C,KAAKC,qBAAqB,OAC7C,OAAK2C,GAAeA,EAAWvW,SAExBmU,OAAOR,KAAKK,eAAe,MAAOuC,EAAWvW,WADzC,IAEf,CAIA,sBAAAwW,GACI,MAAM5T,EAAY,CAAC,EAEb6T,EAAa9C,KAAKC,qBAAqB,OACzC6C,GAAcA,EAAWzW,WACzB4C,EAAU8T,KAAOvC,OAAOR,KAAKK,eAAe,MAAOyC,EAAWzW,YAGlE,MAAM2W,EAAiBhD,KAAKC,qBAAqB,OAC7C+C,GAAkBA,EAAe3W,WACjC4C,EAAUgU,SAAWzC,OAAOR,KAAKK,eAAe,MAAO2C,EAAe3W,YAG1E,MAAM6W,EAAelD,KAAKC,qBAAqB,OAC3CiD,GAAgBA,EAAa7W,WAC7B4C,EAAUkU,gBAAkB3C,OAAOR,KAAKK,eAAe,MAAO6C,EAAa7W,YAG/E,MAAM+W,EAAiBpD,KAAKC,qBAAqB,OAIjD,OAHImD,GAAkBA,EAAe/W,WACjC4C,EAAUoU,SAAW7C,OAAOR,KAAKK,eAAe,MAAO+C,EAAe/W,YAEnE4C,CACX,CAIA,iBAAAqU,GACI,MAAMC,EAAW,CAAC,EAEZC,EAAkBxD,KAAKC,qBAAqB,OAIlD,OAHIuD,GAAmBA,EAAgBnX,WACnCkX,EAASE,UAAYjD,OAAOR,KAAKK,eAAe,MAAOmD,EAAgBnX,YAEpEkX,CACX,CAIA,iBAAAG,GACI,MAAMC,EAAe3D,KAAKC,qBAAqB,MAC/C,OAAK0D,GAAiBA,EAAatX,SAE5BmU,OAAOR,KAAKK,eAAe,KAAMsD,EAAatX,WAD1C,IAEf,CAIA,uBAAAuX,GACI,MAAO,CACHC,iBAAkB7D,KAAKM,sBACvBwD,iBAAkB9D,KAAKU,sBACvBqD,gBAAiB/D,KAAKY,qBACtBoD,WAAYhE,KAAKuB,gBACjB0C,kBAAmBjE,KAAKkB,oBACxBgD,oBAAqBlE,KAAKgB,yBAG1BmD,SAAU,CACNC,eAAgBpE,KAAK0D,oBACrBW,mBAAoBrE,KAAK0B,wBACzB4C,kBAAmBtE,KAAK4B,uBACxBG,eAAgB/B,KAAK8B,oBACrByC,qBAAsBvE,KAAKoC,0BAC3BoC,cAAexE,KAAKuC,mBACpBkC,oBAAqBzE,KAAKyC,yBAC1BiC,UAAW1E,KAAK2C,eAChB1T,UAAW+Q,KAAK6C,yBAChBU,SAAUvD,KAAKsD,qBAG3B,CAIA,sBAAAqB,GACI,MAAMC,EAAS5E,KAAK0D,oBACdmB,EAAS7E,KAAKM,sBAAsB3X,KAAImc,GAAKA,EAAErc,QAAOsc,KAAK,MAC3D3K,EAAS4F,KAAKU,sBAAsB/X,KAAIqc,GAAKA,EAAEpb,QAAOmb,KAAK,MAC3DE,EAAOjF,KAAK8B,oBACZoD,EAASlF,KAAKuB,gBAAgB/S,OAC9B2W,EAAYnF,KAAKgB,yBAAyB+D,KAAK,MAC/C3F,EAAWY,KAAK0B,wBAAwBqD,KAAK,MAC7CK,EAAUpF,KAAK4B,uBAAuBmD,KAAK,MAC3C5V,EAAc6Q,KAAKoC,0BAA0B2C,KAAK,MAClDM,EAAOrF,KAAK2C,eAClB,MAAO,yBAAyBkC,2BAAgCzK,WAAgBgF,EAAW,QAAQA,aAAsB,wCAErGwF,wBAA6BK,EAAKhD,QAAU,sBAAsBgD,EAAK9C,WAAa,wDAE/E+C,GAAU,kEAAkEC,GAAa,4CAEnGC,GAAW,wBAAwBjW,EAAc,wBAAwBA,IAAgB,wCAEhFkW,GAAQ,0BACpC,CAIA,gCAAAC,GACI,MAAMxO,EAAa,GACb8N,EAAS5E,KAAK0D,oBACd6B,EAAavF,KAAKM,sBAClB6E,EAAYnF,KAAKgB,yBAgDvB,MA9Ce,WAAX4D,GAAkC,UAAXA,GACvB9N,EAAWpF,KAAK,oBAEL,SAAXkT,GAAgC,UAAXA,GACrB9N,EAAWpF,KAAK,kBAEL,WAAXkT,GAAkC,UAAXA,GACvB9N,EAAWpF,KAAK,mBAGhB6T,EAAWxR,MAAK+Q,GAAiB,YAAZA,EAAErc,SACvBqO,EAAWpF,KAAK,sBAEhB6T,EAAWxR,MAAK+Q,GAAiB,eAAZA,EAAErc,SACvBqO,EAAWpF,KAAK,sBAEhB6T,EAAWxR,MAAK+Q,GAAiB,WAAZA,EAAErc,SACvBqO,EAAWpF,KAAK,gBAEhB6T,EAAWxR,MAAK+Q,GAAiB,SAAZA,EAAErc,SACvBqO,EAAWpF,KAAK,oBAEhB6T,EAAWxR,MAAK+Q,GAAiB,WAAZA,EAAErc,SACvBqO,EAAWpF,KAAK,cAEhB6T,EAAWxR,MAAK+Q,GAAiB,aAAZA,EAAErc,SACvBqO,EAAWpF,KAAK,aAGhByT,EAAUzd,SAAS,WACnBoP,EAAWpF,KAAK,mBAEhByT,EAAUzd,SAAS,SACnBoP,EAAWpF,KAAK,YAEhByT,EAAUzd,SAAS,WACnBoP,EAAWpF,KAAK,iBAEhByT,EAAUzd,SAAS,SACnBoP,EAAWpF,KAAK,cAGhBoF,EAAWrP,OAAS,IACpBqP,EAAWpF,KAAK,uBAChBoF,EAAWpF,KAAK,wBAEboF,CACX,CAIA,uBAAA0O,GACI,OAAO3b,KAAKC,MAAOkW,KAAK1P,QAAQ7I,OAASuY,KAAKrQ,UAAUlI,OAAU,IACtE,GCvWJ,MAxCyB,EAAG6I,UAASX,YAAWlJ,eAAcgf,eAAcC,4BACxE,MAAOC,EAAWC,IAAgB,IAAA3e,WAAS,IACpC4e,EAAgBC,IAAqB,IAAA7e,UAAS,KAC9CuM,EAAsBuS,IAA2B,IAAA9e,UAAS,IAC1D+e,EAA0BC,IAA+B,IAAAhf,UAAS,KAClEif,EAAiBC,IAAsB,IAAAlf,UAAS,OACvD,IAAA0G,YAAU,KAENiY,GAAa,GAEb,MAAMQ,EAAY,IAAI,EAA0B9V,EAASX,GAEzDf,YAAW,KACP,IACI,MAAMI,EAAcoX,EAAUxC,0BACxByC,EAAUD,EAAUzB,yBACpB7N,EAAasP,EAAUd,mCACvBgB,EAAaF,EAAUZ,0BAC7BW,EAAmBnX,GACnB8W,EAAkBO,GAClBJ,EAA4BnP,GAC5BiP,EAAwBO,GACxBV,GAAa,EACjB,CACA,MAAO5L,GAEH4L,GAAa,EACjB,IACD,KAAK,GACT,CAACtV,EAASX,IAMb,OAAIgW,GACQ,SAAK,MAAO5d,OAAOC,OAAO,CAAEC,UAAW,kEAAoE,CAAEC,UAAU,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,SAAU,EAAC,SAAK,MAAO,CAAED,UAAW,iDAAkD,SAAK,MAAOF,OAAOC,OAAO,CAAEC,UAAW,4CAA8C,CAAEC,SAAU,yDAErY,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,8BAAgC,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,sCAAwC,CAAEC,SAAU,EAAC,SAAK,KAAMH,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAU,yBAA0B,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,0CAA4C,CAAEC,SAAU,EAAC,UAAM,OAAQ,CAAEA,SAAU,CAAC,uBAAwBsL,EAAsB,QAAS,SAAK,MAAOzL,OAAOC,OAAO,CAAEC,UAAW,8CAAgD,CAAEC,UAAU,SAAK,MAAO,CAAED,UAAW,kDAAmDQ,MAAO,CAAEJ,MAAO,GAAGmL,KAAyB3L,gBAAiBpB,iBAAiC,UAAM,MAAOsB,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,SAAU,EAAC,SAAK,KAAM,CAAEA,SAAU,mBAAoB,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,+CAAiD,CAAEC,SAAU2d,EAAend,MAAM,MAAMC,KAAI,CAAC4d,EAAW7b,KAAW,SAAK,IAAK,CAAExC,SAAUqe,GAAa7b,aAAmB,UAAM,MAAO3C,OAAOC,OAAO,CAAEC,UAAW,+CAAiD,CAAEC,SAAU,EAAC,SAAK,KAAM,CAAEA,SAAU,4BAA6B,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,0CAA4C,CAAEC,SAAU8d,EAAyBrd,KAAI,CAAC4B,EAAUG,KAAW,SAAK,MAAO3C,OAAOC,OAAO,CAAEC,UAAW,uCAAwCQ,MAAO,CAAEkE,YAAalG,IAAkB,CAAEyB,SAAUqC,IAAaG,iBAAwB,UAAM,MAAO3C,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,SAAU,EAAC,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,mFAAoF+B,QAASyb,GAAgB,CAAEvd,SAAU,kBAAmB,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,iFAAkF+B,QARt+D,KAC1Bkc,GACAR,EAAsBQ,EAC1B,EAKwiEzd,MAAO,CAAEZ,gBAAiBpB,IAAkB,CAAEyB,SAAU,+BAAiC,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,oCAAsC,CAAEC,UAAU,SAAK,IAAK,CAAEA,SAAU,mMAAuM,E,4CC6D/7E,MA9FuB,EAAGwH,WAAU8W,UAAS/f,mBAEzC,MAAOggB,EAAgBC,IAAqB,IAAAzf,UAAS,KAC9C0f,EAAaC,IAAkB,IAAA3f,WAAS,IACxC4f,EAAiBC,IAAsB,IAAA7f,WAAS,GAEjD8f,GAAY,SACZC,GAAc,EAAA5Q,EAAA,KA8Bd6Q,EAAc,KAEhB,GAAIR,EAAehf,OAAS,IAAMof,EAAiB,CAC/C,MAAMK,GAAS,WACf,OAAW,IAAmBC,mBAAoBD,EAAQ,CACtDE,cAAe,GACfC,cAAeZ,EAAehf,OAC9B6f,eAAgBzd,KAAKC,MAAO2c,EAAehf,OAAS,GAAM,MAElE,CACA+e,GAAS,EA6Cb,OAlBA,IAAA7Y,YAAU,KACN,MAAM4Z,EAAmBlZ,IACP,WAAVA,EAAEmM,KACFyM,GACJ,EAGJ,OADArU,SAAS4U,iBAAiB,UAAWD,GAC9B,KACH3U,SAAS6U,oBAAoB,UAAWF,EAAgB,CAC3D,GACF,CAACf,EAASC,EAAgBI,KAE7B,IAAAlZ,YAAU,KACNiF,SAAS8U,KAAKjf,MAAMkf,SAAW,SACxB,KACH/U,SAAS8U,KAAKjf,MAAMkf,SAAW,EAAE,IAEtC,KACK,UAAM,MAAO5f,OAAOC,OAAO,CAAEC,UAAW,4BAA8B,CAAEC,SAAU,EAAC,SAAK,MAAO,CAAED,UAAW,oCAAqC+B,QAASid,KAAgB,UAAM,MAAOlf,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,SAAU,EAAC,SAAK,SAAU,CAAED,UAAW,yCAA0C+B,QAASid,EAAa,aAAc,qBAAuBN,GAAe,SAAK,EAAkB,CAAErW,QAASmW,EAAgB9W,UAAW,IAAgBlJ,aAAcA,EAAcgf,aA1Chf,KACrBmB,GAAe,EAAM,EAyCghBlB,sBArCtgB1W,IAE3B+X,EAAU/Q,MAEV+Q,EAAUa,QAAQ7f,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG+e,EAAU/Q,MAAO,CAAEhH,YAAaA,KAGtFU,EAAS+W,GACTD,IAEA,MAAMU,GAAS,WAEf,OAAW,IAAmBW,YAAaX,EAAQ,CAC/CY,OAAQ,uBACRC,OAAQ,aACR/Y,YAAaoB,KAAKiB,UAAUrC,IAC9B,KAqB2lB,SAAKgZ,EAAA,EAAW,CAAExY,OAAQ,eAAgB5D,MAAO,qBAAsB6D,YAAa,yGAA0GC,SAnFzwBY,IAClBoW,EAAkBpW,GAGlB,GAD6BA,EAAQ7I,QAAU,EACrB,CACtBqf,GAAmB,GAEfC,EAAU/Q,MACVgR,EAAYiB,gBAAgB3X,GAGhCZ,EAASY,GAETsW,GAAe,GAEf,MAAMM,GAAS,WACf,OAAW,IAAmBgB,oBAAqBhB,EAAQ,CACvDE,cAAe,GACfC,cAAe/W,EAAQ7I,OACvB6f,eAAgBzd,KAAKC,MAAOwG,EAAQ7I,OAAS,GAAM,MAE3D,MAGIif,EAAkBpW,EACtB,EA0DmzB7J,aAAcA,WAA2B,C,mHCtGh2BqO,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAU7H,GAAS,IAAMU,EAAK+G,EAAUK,KAAK9H,GAAS,CAAE,MAAOY,GAAKgH,EAAOhH,EAAI,CAAE,CAC1F,SAASmH,EAAS/H,GAAS,IAAMU,EAAK+G,EAAiB,MAAEzH,GAAS,CAAE,MAAOY,GAAKgH,EAAOhH,EAAI,CAAE,CAC7F,SAASF,EAAKsH,GAJlB,IAAehI,EAIagI,EAAOC,KAAON,EAAQK,EAAOhI,QAJ1CA,EAIyDgI,EAAOhI,MAJhDA,aAAiBwH,EAAIxH,EAAQ,IAAIwH,GAAE,SAAUG,GAAWA,EAAQ3H,EAAQ,KAIjBkI,KAAKL,EAAWE,EAAW,CAC7GrH,GAAM+G,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKO,OAClE,GACJ,EAmGA,MA3FyB,EAAG4S,SAAQ3B,UAAS4B,aAAYC,SAAQ3I,aAAY4I,SAAQ3J,iBAAgBC,kBAAiBC,cAAapY,mBAC/H,MAAO8hB,EAAeC,IAAoB,IAAAvhB,UAAS,KAC5C0e,EAAWC,IAAgB,IAAA3e,WAAS,IACpC+S,EAAOyO,IAAY,IAAAxhB,UAAS,OAEnC,IAAA0G,YAAU,KACFwa,GACAO,GACJ,GACD,CAACP,EAAuB,OAAfC,QAAsC,IAAfA,OAAwB,EAASA,EAAWzhB,KAE/E,MAAM+hB,EAAqB,IAAM5T,OAAU,OAAQ,OAAQ,GAAQ,YAC/D8Q,GAAa,GACb6C,EAAS,MACT,KACgB,QAAiB,CAAEJ,SAAQ3I,aAAY4I,iBAI7C,IAAInT,SAAQC,GAAWxG,WAAWwG,EAAS,OAEjD,MAAMuT,EAAYpY,MAAMuI,KAAK,CAAErR,OAAQ,IAAK,CAACmhB,EAAG/f,KAAM,CAClDlC,GAAI,WAAWyhB,EAAWzhB,MAAMkC,IAChC6W,WAAYA,EACZpV,KAAM,gBAAgBzB,EAAI,IAC1B2B,MAAO,CAAC,gBAAiB,kBAAmB,aAAa3B,EAAI,GAC7D0B,SAAU,CAAC,OAAQ,UAAW,UAAW,QAAS,eAAe1B,EAAI,GACrEuV,MAAO,MAAa,GAAJvV,EAChBgX,UAAWhX,EAAI,IAAM,EAAI,MAAa,GAAJA,EAAU,QAAMf,EAClDsS,OAAQ,CAAC,QAAS,QAAS,QAC3BuF,MAAO,CAAC,IAAK,IAAK,IAAK,MACvBH,UAAW,CACP,yDAAyD3W,EAAI,KAEjE4W,IAAK,IACLjW,WAAY,GAAU,EAAJX,EAClBY,aAAc,CAAC,gBAAiB,wBAAyB,wBACzDmW,SAAS,MAEb4I,EAAiBG,EACrB,CACA,MAAO3O,GAEHyO,EAAS,mDACb,CACA,QACI7C,GAAa,EACjB,CACJ,IA+BA,OAvBA,IAAAjY,YAAU,KACN,MAAMkb,EAAgBxa,IACJ,WAAVA,EAAEmM,KAAoB2N,GACtB3B,GACJ,EAGJ,OADA5T,SAAS4U,iBAAiB,UAAWqB,GAC9B,KACHjW,SAAS6U,oBAAoB,UAAWoB,EAAa,CACxD,GACF,CAACV,EAAQ3B,KAEZ,IAAA7Y,YAAU,KAEFiF,SAAS8U,KAAKjf,MAAMkf,SADpBQ,EAC+B,SAGA,GAE5B,KACHvV,SAAS8U,KAAKjf,MAAMkf,SAAW,EAAE,IAEtC,CAACQ,IACCA,GAGG,SAAK,MAAOpgB,OAAOC,OAAO,CAAEC,UAAW,6BAA8B+B,QAhCxDqE,IACbA,EAAEG,SAAWH,EAAEya,eACftC,GACJ,GA6BiG,CAAEte,UAAU,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,SAAU,EAAC,SAAK,SAAUH,OAAOC,OAAO,CAAEC,UAAW,oCAAqC+B,QAASwc,EAAS,aAAc,SAAW,CAAEte,SAAU,WAAc,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,sCAAwC,CAAEC,UAAU,UAAM,KAAMH,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAU,CAAC,iBAAkBkgB,EAAWW,sBAAwB,UAAM,MAAOhhB,OAAOC,OAAO,CAAEC,UAAW,gDAAkD,CAAEC,SAAU,EAAC,SAAK,MAAO,CAAEkC,IAAKge,EAAWje,SAAUE,IAAK,GAAG+d,EAAWW,uBAAwB9gB,UAAW,iDAAkD,SAAK,IAAKF,OAAOC,OAAO,CAAEC,UAAW,2CAA6C,CAAEC,SAAUkgB,EAAW3Y,oBAAsB,UAAM,MAAO1H,OAAOC,OAAO,CAAEC,UAAW,qDAAuD,CAAEC,SAAU,EAAC,SAAK,KAAM,CAAEA,SAAU,uBAAyByd,GAAa,UAAM,MAAO5d,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,SAAU,EAAC,SAAK8gB,EAAA,EAAkB,CAAC,IAAI,SAAK,IAAK,CAAE9gB,SAAU,iCAAsC8R,GAAS,UAAM,MAAOjS,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAU,EAAC,SAAK,IAAK,CAAEA,SAAU8R,KAAU,SAAK,SAAUjS,OAAOC,OAAO,CAAEC,UAAW,wCAAyC+B,QAAS0e,EAAoBjgB,MAAO,CAAEZ,gBAAiBpB,IAAkB,CAAEyB,SAAU,gBAAqB,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,6CAA+C,CAAEC,SAAUqgB,EAAc5f,KAAKoB,IAAU,UAAM,MAAOhC,OAAOC,OAAO,CAAEC,UAAW,oCAAsC,CAAEC,SAAU,EAAC,SAAKiW,EAAA,QAAU,CAAEpU,KAAM,CAC9yDpD,GAAIoD,EAAKpD,GACT2D,KAAMP,EAAKO,KACXE,MAAOT,EAAKS,MACZ4T,MAAOrU,EAAKqU,MACZyB,UAAW9V,EAAK8V,UAChBxB,MAAOtU,EAAKyV,UAAU,IAAM,IAC7BhB,WAAa7U,GAAUgV,GAAkBA,EAAe5U,EAAKpD,GAAIgD,GAAQiV,gBAAiB,IAAMA,GAAmBA,EAAgB7U,GAAO8U,YAAa,IAAMA,GAAeA,EAAY9U,GAAOtD,aAAcA,KAAiB,UAAM,MAAOsB,OAAOC,OAAO,CAAEC,UAAW,2CAA6C,CAAEC,SAAU,CAAC6B,EAAKP,WAAY,iBAAoBO,EAAKpD,oBATtY,IAS+Z,C,iKCzG1amO,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAU7H,GAAS,IAAMU,EAAK+G,EAAUK,KAAK9H,GAAS,CAAE,MAAOY,GAAKgH,EAAOhH,EAAI,CAAE,CAC1F,SAASmH,EAAS/H,GAAS,IAAMU,EAAK+G,EAAiB,MAAEzH,GAAS,CAAE,MAAOY,GAAKgH,EAAOhH,EAAI,CAAE,CAC7F,SAASF,EAAKsH,GAJlB,IAAehI,EAIagI,EAAOC,KAAON,EAAQK,EAAOhI,QAJ1CA,EAIyDgI,EAAOhI,MAJhDA,aAAiBwH,EAAIxH,EAAQ,IAAIwH,GAAE,SAAUG,GAAWA,EAAQ3H,EAAQ,KAIjBkI,KAAKL,EAAWE,EAAW,CAC7GrH,GAAM+G,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKO,OAClE,GACJ,EAYA,MAAM4I,GAAW,IAAA8K,OAAK,IAAM,0CAEtBC,EAAiB,CACnBlV,MAAO,IACPmV,OAAQ,YACRC,QAAS,CACLC,IAAK,CAAC,QAAS,QAAS,QAAS,OACjCzE,OAAQ,CAAC,OAAQ,SAAU,cAC3Bnc,MAAO,oBAEX6gB,OAAQ,YACRC,uBAAwB,IACxBC,eAAgB,qBA2jBpB,MAzjBsB,EAAGnB,SAAQ3I,aAAY4I,SAAQ3J,iBAAgBC,kBAAiBC,cAAaxV,cAAaogB,cAAaC,oBAAmBC,UAASC,UAASnjB,eAAc0iB,SAASD,EAAeC,OAAQU,YAAWC,eAAcC,eAAcC,WAAWd,EAAelV,UAE7Q,MAAMiW,GAAc,IAAA3T,QAAO,MACrB4T,GAAc,IAAA5T,QAAO,MACrB6T,GAAY,IAAA7T,QAAO,MACnB8T,GAAa,IAAA9T,QAAO,MACpB+T,GAAe,IAAA/T,QAAO,OAErBgU,EAAeC,IAAoB,IAAAtjB,UAAS,KAC5CujB,EAAgBC,IAAqB,IAAAxjB,UAAS,KAC9C0e,EAAWC,IAAgB,IAAA3e,WAAS,IACpCyjB,EAAaC,IAAkB,IAAA1jB,WAAS,IACxC+S,EAAOyO,IAAY,IAAAxhB,UAAS,OAC5B2jB,EAAgBC,IAAqB,IAAA5jB,UAAS,QAC9C6jB,EAAUC,IAAe,IAAA9jB,UAAS4iB,GAAa,QAC/CjF,EAAQoG,IAAa,IAAA/jB,UAAS6iB,GAAgB,QAC9CmB,EAAQC,IAAa,IAAAjkB,UAAS8iB,GAAgB,QAC9CoB,EAAcC,IAAmB,IAAAnkB,UAAS,KAC1CokB,EAASC,KAAc,IAAArkB,WAAS,IAChCskB,GAAcC,KAAmB,IAAAvkB,WAAS,IAC1CwkB,GAAgBC,KAAqB,IAAAzkB,UAAS,IAAIyF,OAClDif,GAAkBC,KAAuB,IAAA3kB,WAAS,IAEnD,KAAE+O,KAAS,UAEjB,IAAArI,YAAU,KACN,GAAIqI,GAOA,OALAqU,EAAalR,SAAU,QAAiB,CAAEkP,SAAQ3I,aAAY4I,WAC9DuD,KAEAC,KAEO,KACHC,IAAwB,CAEhC,GACD,CAAU,OAAT/V,SAA0B,IAATA,QAAkB,EAASA,GAAKkR,OAAQ2C,EAAWC,EAAcC,IAEtF,MAAMiC,IAAmB,IAAA5T,cAAY,KACjC,MACM6T,GADM,IAAIvf,MACEwf,WAClB,OAAID,GAAS,GAAKA,GAAS,EAChB,SACPA,GAAS,GAAKA,GAAS,EAChB,SACPA,GAAS,GAAKA,GAAS,GAChB,OACJ,QAAQ,GAChB,IAEGE,IAAc,IAAA/T,cAAY,CAACgU,EAAOC,IAE7BxiB,KAAKC,MAAMD,KAAKyiB,KAAKF,EAAMG,UAAYF,EAAME,WADrC,SAEhB,IAEGC,IAAoB,IAAApU,cAAa9O,GAC9BA,EAAM7B,OAGJ6B,EAAMX,KAAIoB,IACb,IAAImC,EAAIe,EAAIC,EAAIC,EAEhB,IAAIsf,EAAgB1iB,EAAKP,YAAc,GAGvC,GAAIO,EAAK2iB,WAAa3iB,EAAK4iB,aAAc,CAErCF,GAHe,IAEG1iB,EAAK2iB,WAAa3iB,EAAK2iB,UAAY3iB,EAAK4iB,cAE9D,MACS5iB,EAAK2iB,YACVD,GANe,IAUnB,GAAa,OAATzW,SAA0B,IAATA,QAAkB,EAASA,GAAKhH,YAAa,CAG9D,MAAM4d,EAAY5W,GAAKhH,YACjB6d,EAAUD,EAAUvD,MAAyC,QAAhCnd,EAAK0gB,EAAU5d,mBAAgC,IAAP9C,OAAgB,EAASA,EAAGmd,MAAQ,GACzGyD,EAAaF,EAAUhI,SAA4C,QAAhC3X,EAAK2f,EAAU5d,mBAAgC,IAAP/B,OAAgB,EAASA,EAAG2X,SAAW,GACpH7a,EAAKgjB,qBAEDF,IAAmD,QAAtC3f,EAAKnD,EAAKgjB,mBAAmB1D,WAAwB,IAAPnc,OAAgB,EAASA,EAAGxF,SAASmlB,MAChGJ,GAAiBO,MAGjBF,IAAyD,QAAzC3f,EAAKpD,EAAKgjB,mBAAmBnI,cAA2B,IAAPzX,OAAgB,EAASA,EAAGzF,SAASolB,MACtGL,GAAiBO,MAG7B,CAGA,GAAIjjB,EAAKkjB,YAAa,CAGlBR,GAJkB,IAGA5iB,KAAKoE,IAAIpE,KAAKqjB,MAAMnjB,EAAKkjB,YAAc,GAAK,EAAG,EAErE,CAEA,MACME,EAAgBnB,KAClBjiB,EAAKqjB,cAAgBD,IACrBV,GAHmB,KAOvB,GAAI1iB,EAAKsjB,aACLZ,GAFqB,SAIpB,GAAI1iB,EAAKujB,YAEV,IACI,MAAMA,EAAcvjB,EAAKujB,uBAAuB5gB,KAC1C3C,EAAKujB,YACL,IAAI5gB,KAAiC,kBAArB3C,EAAKujB,YAA2BvjB,EAAKujB,YAAc5gB,KAAK+P,OACxE8Q,EAAmBpB,GAAYmB,EAAa,IAAI5gB,MACtD,GAAI6gB,GAAoB,GAAI,CAExBd,GAba,KAYG,EAAKc,EAAmB,GAE5C,CACJ,CACA,MAAOlf,GAEP,CAIJ,OADAoe,EAAgB5iB,KAAKoE,IAAIpE,KAAKqE,IAAIue,EAAe,GAAI,GAC9C1kB,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG+B,GAAO,CAAE0iB,iBAAgB,IAE/De,MAAK,CAACnb,EAAGob,KAAOA,EAAEhB,eAAiB,IAAMpa,EAAEoa,eAAiB,KAC5D9jB,KAAI,CAACoB,EAAMW,IAAW3C,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG+B,GAAO,CAAE2jB,aAAchjB,EAAQ,MAzE/E,IA0EZ,CAAU,OAATsL,SAA0B,IAATA,QAAkB,EAASA,GAAKhH,YAAagd,GAAkBG,KAE9EL,IAA4B,IAAA1T,cAAY,KAE1C,IAEI,MAAMuV,EAAYrF,EACZ,IAAI3O,IAAIuP,EAAeM,eAAgBlB,GAAQsF,WAC/C1E,EAAeM,eAErBW,EAAUhR,SAAU,IAAA0U,IAAGF,EAAW,CAC9BG,KAAM,aACNC,WAAY,CAAC,aACbC,cAAc,EACdC,qBAAsB,EACtBC,KAAM,CACFC,MAAO9F,EACP3I,gBAIRyK,EAAUhR,QAAQiV,GAAG,mBAAoBC,IAErCC,GAAqBD,GACrBzC,IAAoB,EAAK,IAG7BzB,EAAUhR,QAAQiV,GAAG,WAAW,KAC5B,IAAIliB,EAEJ0f,IAAoB,GAES,QAA5B1f,EAAKie,EAAUhR,eAA4B,IAAPjN,GAAyBA,EAAGqiB,KAAK,OAAQ,CAC1ErH,OAAiB,OAATlR,SAA0B,IAATA,QAAkB,EAASA,GAAKkR,OACzDxH,aACA0J,QAAS,CACLC,IAAkB,QAAbyB,EAAqBA,OAAWhjB,EACrC8c,OAAmB,QAAXA,EAAmBA,OAAS9c,EACpCmjB,OAAmB,QAAXA,EAAmBA,OAASnjB,EACpCyC,SAA6B,QAAnBqgB,EAA2BA,OAAiB9iB,IAE5D,IAENqiB,EAAUhR,QAAQiV,GAAG,iBAAkBI,IAEnC5C,IAAoB,GAEpB6C,IAAc,IAElBtE,EAAUhR,QAAQiV,GAAG,cAAc,KAE/BxC,IAAoB,GAEpB6C,IAAc,GAEtB,CACA,MAAOzU,GAGHyU,IACJ,IACD,CAAU,OAATzY,SAA0B,IAATA,QAAkB,EAASA,GAAKkR,OAAQxH,EAAY2I,EAAQC,EAAQwC,EAAUlG,EAAQqG,EAAQL,IAE7G6D,IAAe,IAAArW,cAAY,KAEzBgS,EAAWjR,SACXuV,cAActE,EAAWjR,SAI7BiR,EAAWjR,QAAUwV,aAAY,KAE7BC,IAAyB,GAC1B1F,EAAeK,uBAAuB,GAC1C,IAEGwC,IAAyB,IAAA3T,cAAY,KAEnC+R,EAAUhR,UACVgR,EAAUhR,QAAQ0V,aAClB1E,EAAUhR,QAAU,MAGpBiR,EAAWjR,UACXuV,cAActE,EAAWjR,SACzBiR,EAAWjR,QAAU,KACzB,GACD,IAEGyV,IAA0B,IAAAxW,cAAY,IAAMtD,OAAU,OAAQ,OAAQ,GAAQ,YAChF,GAAKuV,EAAalR,UAAsB,OAATnD,SAA0B,IAATA,QAAkB,EAASA,GAAKkR,QAEhF,IAEI,MAAM4H,QAAiBzE,EAAalR,QAAQ4V,eAAeC,0BAA0B,CACjF9H,OAAQlR,GAAKkR,OACb+H,MAAOxD,GAAeyD,cACtBC,QAAS,WACT/F,QAAS,CACL5d,UAAU,EACV6d,IAAkB,QAAbyB,EAAqBA,OAAWhjB,EACrC8c,OAAmB,QAAXA,EAAmBA,OAAS9c,EACpCmjB,OAAmB,QAAXA,EAAmBA,OAASnjB,EACpCyC,SAA6B,QAAnBqgB,EAA2BA,OAAiB9iB,KAI1DgnB,GAAYA,EAASM,aAErB5D,IAAgB,GAEZsD,EAASxlB,OAASwlB,EAASxlB,MAAM7B,OAAS,GAC1C6mB,GAAqB,CACjBhlB,MAAOwlB,EAASxlB,MAChBxC,UAAW,IAAI4F,KACf2iB,WAAY,YAI5B,CACA,MAAOrV,GAEP,CACJ,KAAI,CAAU,OAAThE,SAA0B,IAATA,QAAkB,EAASA,GAAKkR,OAAQuE,GAAgBX,EAAUlG,EAAQqG,EAAQL,IAElG0D,IAAuB,IAAAlW,cAAaiW,IAEtC3C,GAAkB,IAAIhf,KAAK2hB,EAAKvnB,WAAa4F,KAAK+P,QAC9C4R,EAAK/kB,OAAS+kB,EAAK/kB,MAAM7B,OAAS,GAClC8iB,GAAiB+E,IAEb,MAAMC,EAAmB,IAAIC,IAAIF,EAAU3mB,KAAIoB,GAAQ,CAACA,EAAKpD,GAAIoD,MAEjEskB,EAAK/kB,MAAM8X,SAASrX,IAEhB,GAAIwlB,EAAiBE,IAAI1lB,EAAKpD,IAAK,CAC/B,MAAM+oB,EAAeH,EAAiBI,IAAI5lB,EAAKpD,IAE/C4oB,EAAiBK,IAAI7lB,EAAKpD,GAAIoB,OAAOC,OAAOD,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG0nB,GAAe3lB,GAAO,CAAE0iB,cAAe1iB,EAAK0iB,gBAAmC,OAAjBiD,QAA0C,IAAjBA,OAA0B,EAASA,EAAajD,eAAgBC,UAAW3iB,EAAK2iB,YAA+B,OAAjBgD,QAA0C,IAAjBA,OAA0B,EAASA,EAAahD,WAAYC,aAAc5iB,EAAK4iB,eAAkC,OAAjB+C,QAA0C,IAAjBA,OAA0B,EAASA,EAAa/C,cAAeM,YAAaljB,EAAKkjB,cAAiC,OAAjByC,QAA0C,IAAjBA,OAA0B,EAASA,EAAazC,aAAc4C,kBAAkB,EAAMC,YAAa,IAAIpjB,OACxnB,MAGI6iB,EAAiBK,IAAI7lB,EAAKpD,GAAIoB,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG+B,GAAO,CAAEgmB,YAAY,EAAMD,YAAa,IAAIpjB,OAC9G,IAGJ,MAAMsjB,EAAezf,MAAMuI,KAAKyW,EAAiB1R,UAC3CoS,EAAczD,GAAkBwD,GAGtC,OADAxE,IAAgB,GACTyE,CAAW,GAE1B,GACD,CAACzD,KAGEX,GAAqB,IAAM/W,OAAU,OAAQ,OAAQ,GAAQ,YAC/D,IAAI5I,EAAIe,EAAIC,EAAIC,EAAI+iB,EAAIC,EACxB,GAAKna,GAAL,CAEA4P,GAAa,GACb6C,EAAS,MACT,IACI,MAAM2H,GAAM,QAAiB,CAAE/H,SAAQ3I,aAAY4I,WAE7CwG,QAAiBsB,EAAIrB,eAAesB,mBAAmB,CACzDnJ,OAAQlR,GAAKkR,OACboJ,MAAOtG,EACPb,OAAQA,EACRC,QAAS,CACL5d,UAAU,EACViM,KAAmJ,QAA5IvK,EAAgG,QAA1FD,EAAiC,QAA3Bf,EAAK8J,GAAKhH,mBAAgC,IAAP9C,OAAgB,EAASA,EAAG6X,uBAAoC,IAAP9W,OAAgB,EAASA,EAAG,UAAuB,IAAPC,OAAgB,EAASA,EAAGuK,KACvLhP,MAAqJ,QAA7I0nB,EAAiG,QAA3FD,EAAiC,QAA3B/iB,EAAK6I,GAAKhH,mBAAgC,IAAP7B,OAAgB,EAASA,EAAG0W,wBAAqC,IAAPqM,OAAgB,EAASA,EAAG,UAAuB,IAAPC,OAAgB,EAASA,EAAG1nB,MACzL4gB,IAAkB,QAAbyB,EAAqBA,OAAWhjB,EACrC8c,OAAmB,QAAXA,EAAmBA,OAAS9c,EACpCmjB,OAAmB,QAAXA,EAAmBA,OAASnjB,KAI5C,IAAKgnB,IAAaA,EAASxlB,OAAmC,IAA1BwlB,EAASxlB,MAAM7B,OAU/C,OATIqnB,EAAStoB,QAETiiB,EAASqG,EAAStoB,SAGlBiiB,EAAS,qDAEb8B,EAAiB,SACjBE,EAAkB,IAItB,MAAMnhB,EAAQwlB,EAASxlB,MAAMX,KAAIoB,IAAQ,CACrCpD,GAAIoD,EAAKpD,GACT+Y,WAAY3V,EAAK2V,YAAcA,EAC/BpV,KAAMP,EAAKO,MAAQ,eACnBE,MAAOT,EAAKS,OAAS,GACrBD,SAAUR,EAAKQ,UAAY,GAC3B6T,MAAOrU,EAAKqU,OAAS,EACrByB,UAAW9V,EAAK8V,UAChBzF,OAAQrQ,EAAKqQ,QAAU,GACvBuF,MAAO5V,EAAK4V,OAAS,GACrBH,UAAWjP,MAAMC,QAAQzG,EAAKyV,WAAazV,EAAKyV,UAC3CzV,EAAKI,SAAW,CAACJ,EAAKI,UAAY,GACvCsV,IAAK1V,EAAK0V,KAAO,IACjBjW,WAAYO,EAAKP,YAAc,EAC/BC,aAAcM,EAAKN,cAAgB,GACnC8mB,mBAAoBxmB,EAAKwmB,oBAAsB,GAC/C3Q,SAA0B,IAAjB7V,EAAK6V,QACdpU,UAAU,EACVihB,cAAe1iB,EAAK0iB,cACpBC,UAAW3iB,EAAK2iB,WAAa,EAC7BC,aAAc5iB,EAAK4iB,cAAgB,EACnCM,YAAaljB,EAAKkjB,aAAe,EACjCK,YAAavjB,EAAKujB,YAClBF,YAAarjB,EAAKqjB,YAClBL,mBAAoBhjB,EAAKgjB,mBACzBM,aAActjB,EAAKsjB,iBAGjB4C,EAAczD,GAAkBljB,GACtCihB,EAAiB0F,GAEjBxF,EAAkBwF,EAAYhX,MAAM,EAAGkS,IACvCG,GAAW2E,EAAYxoB,OAAS0jB,EAGpC,CACA,MAAOnR,GAEHyO,EAAS,0DACb,CACA,QACI7C,GAAa,EACjB,CA3EU,CA4Ed,IAEMzN,IAAgB,IAAA5G,UAAQ,KAE1B,IAAIif,EAAWlG,EAef,MAbuB,QAAnBM,IACA4F,EAAWA,EAAS9kB,QAAO3B,GAAQA,EAAKQ,WAAaqgB,KAGxC,QAAbE,GAAsBA,IACtB0F,EAAWA,EAAS9kB,QAAO3B,IAAU,IAAImC,EAAIe,EAAI,OAA6F,QAArFA,EAAwC,QAAlCf,EAAKnC,EAAKgjB,0BAAuC,IAAP7gB,OAAgB,EAASA,EAAGmd,WAAwB,IAAPpc,OAAgB,EAASA,EAAGvF,SAASojB,EAAS,KAEzL,QAAXlG,GAAoBA,IACpB4L,EAAWA,EAAS9kB,QAAO3B,IAAU,IAAImC,EAAIe,EAAI,OAAgG,QAAxFA,EAAwC,QAAlCf,EAAKnC,EAAKgjB,0BAAuC,IAAP7gB,OAAgB,EAASA,EAAG0Y,cAA2B,IAAP3X,OAAgB,EAASA,EAAGvF,SAASkd,EAAO,KAE1L,QAAXqG,GAAoBA,IACpBuF,EAAWA,EAAS9kB,QAAO3B,GAAQA,EAAKqjB,cAAgBnC,KAErDuF,CAAQ,GAChB,CAAClG,EAAeM,EAAgBE,EAAUlG,EAAQqG,IAE/CnU,IAAa,IAAAvF,UAAQ,KACvB,MAAMoH,EAAmB,IAAIC,IAAI0R,EAAc3hB,KAAIoB,GAAQA,EAAKQ,YAChE,MAAO,CAAC,SAAUgG,MAAMuI,KAAKH,IAAmBjN,OAAO+kB,QAAQ,GAChE,CAACnG,IAEEoG,IAAY,IAAAnf,UAAQ,IACf,CAAC,SAAU2X,EAAeE,QAAQC,MAC1C,IAEGsH,IAAU,IAAApf,UAAQ,IACb,CAAC,SAAU2X,EAAeE,QAAQxE,SAC1C,IAEGgM,IAAU,IAAArf,UAAQ,IACb,CAAC,MAAO,SAAU,SAAU,OAAQ,WAC5C,IAEGsf,IAAgB,IAAAzY,cAAY,MAEzBD,IAAiBA,GAAc1Q,QAAU0jB,GAAgBT,EAC1DY,IAAW,IAGfX,GAAe,GAEf/b,YAAW,KACP,IAEI,MAAMkiB,EAAmBjnB,KAAKoE,IAAIkd,EAAe,GAAIhT,GAAc1Q,QACnE2jB,EAAgB0F,GAChBrG,EAAkBtS,GAAcc,MAAM,EAAG6X,IACzCxF,GAAWwF,EAAmB3Y,GAAc1Q,OAChD,CACA,MAAOuS,GAEP,CACA,QACI2Q,GAAe,EACnB,IACD,KAAI,GACR,CAACxS,GAAegT,EAAcT,KAEjC,IAAA/c,YAAU,KAEFsc,EAAY9Q,SACZ8Q,EAAY9Q,QAAQ0V,aAGxB5E,EAAY9Q,QAAU,IAAI4X,sBAAsBtd,IAC5C,MAAOud,GAASvd,EACZud,EAAMC,gBAAkB5F,IAAYX,GACpCmG,IACJ,GACD,CAAEK,UAAW,KAGZhH,EAAY/Q,SACZ8Q,EAAY9Q,QAAQgY,QAAQjH,EAAY/Q,SAErC,KACC8Q,EAAY9Q,SACZ8Q,EAAY9Q,QAAQ0V,YACxB,IAEL,CAACxD,EAASX,EAAamG,MAE1B,IAAAljB,YAAU,KACNyd,EAAgB,IAChBX,EAAkBtS,GAAcc,MAAM,EAAG,KACzCqS,GAAWnT,GAAc1Q,OAAS,GAAG,GACtC,CAAC0Q,KAEJ,MAAMiZ,GAAqB,CAAClnB,EAAQP,KAC5BgV,IACAA,EAAezU,EAAQP,GAEvB4gB,GAAiB1Q,GACNA,EAAKlR,KAAIoB,GACRA,EAAKpD,KAAOuD,EAELnC,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAG+B,GAAO,CAAE2iB,UAAW/iB,GAASI,EAAK2iB,WAAa,GAAK,EAAI3iB,EAAK2iB,UAAWC,aAAehjB,EAAuCI,EAAK4iB,cAAnC5iB,EAAK4iB,cAAgB,GAAK,IAE9J5iB,MAGnB,EA+DEsnB,IAAe,IAAAjZ,cAAa/J,IAC9B,MAAMG,EAASH,EAAEG,QACZmX,IACA+E,GACDW,GACA7c,EAAO8iB,aAAe9iB,EAAO+iB,WAAmC,IAAtB/iB,EAAOgjB,cACjDX,IACJ,GACD,CAAClL,EAAW+E,EAAaW,EAASwF,KAE/BY,IAAuB,IAAArZ,cAAY,KACrCoT,IAAgB,GAChBK,IAAoB,GACrB,CAACA,KACJ,OAAQ,SAAK,MAAO9jB,OAAOC,OAAO,CAAEC,UAAW,0BAA4B,CAAEC,SAAUyd,GAAuC,IAA1B6E,EAAe/iB,QAAgB,UAAM,MAAOM,OAAOC,OAAO,CAAEC,UAAW,mCAAqC,CAAEC,SAAU,EAAC,SAAK8gB,EAAA,EAAkB,CAAC,IAAI,SAAK,IAAK,CAAE9gB,SAAU,kCAAuC8R,GAAS,UAAM,MAAOjS,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,SAAU,EAAC,SAAK,IAAK,CAAEA,SAAU8R,KAAU,SAAK,SAAUjS,OAAOC,OAAO,CAAEC,UAAW,oCAAqC+B,QAAS6hB,IAAsB,CAAE3jB,SAAU,eAA6C,IAAzBiQ,GAAc1Q,QAAgB,SAAK,MAAOM,OAAOC,OAAO,CAAEC,UAAW,iCAAmC,CAAEC,UAAU,SAAK,IAAK,CAAEA,SAAU,mDAAwD,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,qCAAuC,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,sCAAwC,CAAEC,SAAU,EAAC,UAAM,MAAOH,OAAOC,OAAO,CAAEC,UAAW,6CAA4C0jB,GAAmB,SAAW,KAAQ,CAAEzjB,SAAU,EAAC,SAAK,OAAQ,CAAED,UAAW,uCAAyC0jB,GAAmB,2BAA6B,qBAAuBJ,KAAiB,UAAM,SAAUxjB,OAAOC,OAAO,CAAEC,UAAW,yCAA0C+B,QAASynB,GAAsBhpB,MAAO,CAAEZ,gBAAiBpB,IAAkB,CAAEyB,SAAU,EAAC,SAAK,MAAOH,OAAOC,OAAO,CAAEG,MAAO,6BAA8BC,QAAS,YAAaC,MAAO,KAAMC,OAAQ,KAAMC,KAAM,gBAAkB,CAAEL,UAAU,SAAK,OAAQ,CAAEM,EAAG,kNAAqN,6CAA+C,UAAM,MAAOT,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,SAAU,CAAC,iBAAkBujB,GAAeiG,8BAAgC,UAAM,MAAO3pB,OAAOC,OAAO,CAAEC,UAAW,mCAAqC,CAAEC,SAAU,EAAC,SAAKypB,EAAA,EAAkB,CAAE7a,WAAYA,GAAWpL,QAAOkmB,GAAe,QAARA,IAAejpB,KAAIipB,IAAO,CAChnEjrB,GAAIirB,EACJtnB,KAAMsnB,EAAI7Y,OAAO,GAAGC,cAAgB4Y,EAAI3Y,MAAM,OAC7CrC,iBAAkBgU,EAAgBxc,SAAUyc,EAAmBgH,YAAY,EAAM9mB,MAAO,WAAYtE,aAAcA,KAAiB,SAAKkrB,EAAA,EAAkB,CAAE7a,WAAY4Z,GAAUhlB,QAAO2d,GAAe,QAARA,IAAe1gB,KAAI0gB,IAAO,CAC3N1iB,GAAI0iB,EACJ/e,KAAM+e,MACLzS,iBAAkBkU,EAAU1c,SAAU2c,EAAa8G,YAAY,EAAM9mB,MAAO,MAAOtE,aAAcA,KAAiB,SAAKkrB,EAAA,EAAkB,CAAE7a,WAAY6Z,GAAQjlB,QAAOomB,GAAe,QAARA,IAAenpB,KAAImpB,IAAO,CACxMnrB,GAAImrB,EACJxnB,KAAMwnB,MACLlb,iBAAkBgO,EAAQxW,SAAU4c,EAAW6G,YAAY,EAAM9mB,MAAO,SAAUtE,aAAcA,KAAiB,SAAKkrB,EAAA,EAAkB,CAAE7a,WAAY8Z,GAAQllB,QAAOoZ,GAAW,QAANA,IAAanc,KAAImc,IAAK,CACjMne,GAAIme,EACJxa,KAAMwa,EAAE/L,OAAO,GAAGC,cAAgB8L,EAAE7L,MAAM,OACzCrC,iBAAkBqU,EAAQ7c,SAAU8c,EAAW2G,YAAY,EAAM9mB,MAAO,SAAUtE,aAAcA,SAAsB,UAAM,MAAOsB,OAAOC,OAAO,CAAEC,UAAW,2CAA4C8pB,SAAUV,IAAgB,CAAEnpB,SAAU,EAAC,SAAK8pB,EAAA,EAAY,CAAEva,KAAM,OAAQ7L,MAAO,iBAAkB3D,UAAW,sCAAuCqB,MAAOkhB,EAAe7hB,KAAIoB,IAAS,UAAM,WAAgB,CAAE7B,SAAU,EAAC,SAAK,MAAOH,OAAOC,OAAO,CAAEC,UAAW,0CAA0C8B,EAAKgmB,WAAa,YAAc,MAAMhmB,EAAK8lB,iBAAmB,UAAY,KAAMpnB,MAAO,CAAEZ,gBAAiB,GAAGpB,QAAsB,CAAEyB,SAAU6B,EAAK2jB,cAAgB3jB,EAAK2jB,cAAgB,GAChqB,iBAAO3jB,EAAK2jB,wBACZ3jB,EAAKgmB,WACD,0BACA,4BAAmB,SAAK,EAAAkC,SAAUlqB,OAAOC,OAAO,CAAEkqB,UAAU,SAAK,MAAO,CAAEjqB,UAAW,8CAAiD,CAAEC,UAAU,SAAKiW,EAAU,CAAEpU,KAAMA,EAAMrD,WAAY0qB,GAAoBxS,gBAAiB,IA1FlP,CAAC7U,IACrB6U,GACAA,EAAgB7U,EACpB,EAuFgRooB,CAAoBpoB,GAAO8U,YAAa,IApFpS,CAAC9U,IACjB8U,GACAA,EAAY9U,EAChB,EAiF8TqoB,CAAgBroB,GAAOC,QAAS,IA9E1U,CAACD,IACjBV,IACAA,EAAYU,GAEZwgB,GAAiB1Q,GACNA,EAAKlR,KAAIE,GACRA,EAAElC,KAAOoD,EAAKpD,GACPoB,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAGa,GAAI,CAAEokB,aAAcpkB,EAAEokB,aAAe,GAAK,IAE9EpkB,MAGnB,EAkEoWoB,CAAgBF,GAAOtD,aAAcA,EAAcmjB,QAAS,IApChZ,CAAC7f,IACb6f,GACAA,EAAQ7f,EACZ,EAiCsasoB,CAAYtoB,GAAOuoB,oBAAqB,IAhDpb,EAACvoB,EAAMwoB,KAC7B7I,GACAA,EAAkB3f,EAAMwoB,EAC5B,EA6CodC,CAAsBzoB,GAAOwmB,mBAAoB,GAAIkC,oBAAqB,IA/D1gB,CAAC1oB,IACjB0f,IACAA,EAAY1f,GAEZwgB,GAAiB1Q,GACNA,EAAKlR,KAAIE,GACRA,EAAElC,KAAOoD,EAAKpD,GACPoB,OAAOC,OAAOD,OAAOC,OAAO,CAAC,EAAGa,GAAI,CAAEokB,aAAcpkB,EAAEokB,aAAe,GAAK,IAE9EpkB,MAGnB,EAmDoiB6pB,CAAgB3oB,GAAO+V,aAAa,EAAM7X,UAAW8B,EAAK8lB,iBAAmB,mBAAqB,UAAc9lB,EAAKpD,QAAUgf,GAAa6E,EAAe/iB,OAAS,IAAM,UAAM,MAAOM,OAAOC,OAAO,CAAEC,UAAW,wCAA0C,CAAEC,SAAU,EAAC,SAAK8gB,EAAA,EAAkB,CAAEvR,KAAM,WAAY,SAAK,IAAK,CAAEvP,SAAU,+BAAmCmjB,GAAWb,EAAe/iB,OAAS,IAAM,SAAK,MAAOM,OAAOC,OAAO,CAAEC,UAAW,uCAAyC,CAAEC,UAAU,SAAK,IAAK,CAAEA,SAAU,iDAAqDmjB,IAAY,SAAK,MAAO,CAAEsH,IAAKzI,EAAajiB,UAAW,wDAA+D,C","sources":["webpack://StylistWidget/./src/components/MessageBubble/MessageBubble.tsx","webpack://StylistWidget/./src/components/MessageBubble/index.ts","webpack://StylistWidget/./src/components/OutfitDisplay/OutfitDisplay.tsx","webpack://StylistWidget/./src/components/OutfitDisplay/index.ts","webpack://StylistWidget/./src/components/TabNavigation/TabNavigation.tsx","webpack://StylistWidget/./src/components/TabNavigation/index.ts","webpack://StylistWidget/./src/components/StyleQuiz/questions/SingleChoiceQuestion.tsx","webpack://StylistWidget/./src/components/StyleQuiz/questions/MultipleChoiceQuestion.tsx","webpack://StylistWidget/./src/components/StyleQuiz/questions/ImageChoiceQuestion.tsx","webpack://StylistWidget/./src/components/StyleQuiz/questions/SliderQuestion.tsx","webpack://StylistWidget/./src/components/StyleQuiz/StyleQuiz.tsx","webpack://StylistWidget/./src/components/StyleQuiz/index.ts","webpack://StylistWidget/./src/components/MyCloset/MyCloset.tsx","webpack://StylistWidget/./src/components/SocialProof/SocialProofRenderer.tsx","webpack://StylistWidget/./src/components/StyleQuiz/utils/StyleQuizResultsProcessor.ts","webpack://StylistWidget/./src/components/StyleQuiz/StyleQuizResults.tsx","webpack://StylistWidget/./src/components/StyleQuiz/StyleQuizModal.tsx","webpack://StylistWidget/./src/components/SocialProofModal/SocialProofModal.tsx","webpack://StylistWidget/./src/components/TrendingItems/TrendingItems.tsx"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// Message bubble component for text messages\nimport React, { useState } from 'react';\nimport classNames from 'classnames';\nimport './MessageBubble.scss';\nimport { MessageSender } from '../../types/index';\nimport { formatDate } from '../../utils/formatters';\nimport { ThumbsUpButton } from '@/components/FeedbackControls';\nimport { trackEvent, AnalyticsEventType } from '@/utils/analytics';\nimport { getUserId } from '@/utils/localStorage';\nconst MessageBubble = ({ message, primaryColor, onFeedback }) => {\n    const { id, sender, text, timestamp } = message;\n    const [feedbackGiven, setFeedbackGiven] = useState(false);\n    const isUser = sender === MessageSender.USER;\n    const isAssistant = sender === MessageSender.ASSISTANT;\n    const isSystem = sender === MessageSender.SYSTEM;\n    // Only show feedback for assistant messages that are long enough to be meaningful\n    const shouldShowFeedback = isAssistant &&\n        text.length > 20 &&\n        !text.includes('Would you like') &&\n        onFeedback;\n    const bubbleClasses = classNames('stylist-message-bubble', {\n        'stylist-message-bubble--user': isUser,\n        'stylist-message-bubble--assistant': isAssistant,\n        'stylist-message-bubble--system': isSystem,\n        'stylist-message-bubble--with-feedback': shouldShowFeedback\n    });\n    const contentStyle = isUser && primaryColor\n        ? { backgroundColor: primaryColor }\n        : undefined;\n    const handleThumbsUp = () => {\n        setFeedbackGiven(true);\n        if (onFeedback) {\n            onFeedback(id, true);\n            // Track the event\n            trackEvent(AnalyticsEventType.MESSAGE_THUMBS_UP, getUserId(), {\n                messageId: id,\n                messageContent: text.substring(0, 100) // First 100 chars for context\n            });\n        }\n    };\n    return (_jsxs(\"div\", Object.assign({ className: bubbleClasses }, { children: [!isUser && (_jsx(\"div\", Object.assign({ className: \"stylist-message-bubble__avatar\" }, { children: isAssistant ? (_jsx(\"div\", Object.assign({ className: \"stylist-message-bubble__avatar-icon\" }, { children: _jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"20\", height: \"20\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M12 1a9 9 0 019 9c0 4.56-3.37 8.33-7.76 8.95l-.19-.47a7.99 7.99 0 002.93-10.57A8.02 8.02 0 004.06 13.1 9 9 0 0112 1zm7.12 13.93l.37.37-.36.36.01-.73zm1.36-1.55a2.83 2.83 0 00-.5-.31l.36-.74c.28.12.54.29.78.48l-.64.57zm-14.81.19l.36.73c-.29.16-.57.35-.8.57l-.57-.64c.31-.3.65-.54 1.01-.66zM6.66 22l1.93-3.1c-.47-.55-.85-1.16-1.14-1.8L2.8 19.13V22h3.86zm10.46-2.91L19 21.99v-2.86l-1.14-.93c.12-.39.19-.8.19-1.22l.08-.04A8.96 8.96 0 0022 10 10 10 0 002 10a9 9 0 003.34 7.03L1.94 20.5A1 1 0 002.86 22h16.28a1 1 0 00.92-1.5l-2.94-3.41z\" }) })) }))) : (_jsx(\"div\", Object.assign({ className: \"stylist-message-bubble__avatar-info\" }, { children: \"i\" }))) }))), _jsxs(\"div\", Object.assign({ className: \"stylist-message-bubble__content\", style: contentStyle }, { children: [text.split('\\n').map((line, i) => (_jsxs(React.Fragment, { children: [line, i < text.split('\\n').length - 1 && _jsx(\"br\", {})] }, i))), shouldShowFeedback && (_jsx(\"div\", Object.assign({ className: \"stylist-message-bubble__feedback\" }, { children: _jsx(ThumbsUpButton, { messageId: id, onThumbsUp: handleThumbsUp, primaryColor: primaryColor }) })))] })), _jsx(\"div\", Object.assign({ className: \"stylist-message-bubble__time\" }, { children: formatDate(timestamp, 'h:mm a') }))] })));\n};\nexport default MessageBubble;\n","import MessageBubble from './MessageBubble';\nexport default MessageBubble;\n","import { jsxs as _jsxs, jsx as _jsx } from \"react/jsx-runtime\";\nimport './OutfitDisplay.scss';\nimport FeedbackControls from '../FeedbackControls';\nimport WishlistButton from '../WishlistButton';\nconst OutfitDisplay = ({ outfit, onFeedback, onSaveOutfit, onItemClick, primaryColor }) => {\n    const { id, items, occasion, matchScore, matchReasons } = outfit;\n    const handleFeedback = (liked) => {\n        if (onFeedback) {\n            onFeedback(id, liked);\n        }\n    };\n    const handleSaveOutfit = () => {\n        if (onSaveOutfit) {\n            onSaveOutfit(id);\n        }\n    };\n    const handleItemClick = (itemId) => {\n        if (onItemClick) {\n            onItemClick(itemId);\n        }\n    };\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-outfit-display\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-outfit-display__header\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-outfit-display__title\" }, { children: [\"Complete Outfit for \", occasion] })), _jsxs(\"div\", Object.assign({ className: \"stylist-outfit-display__score\", style: { color: primaryColor } }, { children: [Math.round(matchScore * 100), \"% Match\"] }))] })), _jsx(\"div\", Object.assign({ className: \"stylist-outfit-display__items\" }, { children: items.map((item) => (_jsxs(\"div\", Object.assign({ className: \"stylist-outfit-display__item\", onClick: () => handleItemClick(item.id) }, { children: [item.imageUrl ? (_jsx(\"img\", { src: item.imageUrl, alt: item.name, className: \"stylist-outfit-display__item-image\" })) : (_jsx(\"div\", Object.assign({ className: \"stylist-outfit-display__item-placeholder\" }, { children: item.category }))), _jsxs(\"div\", Object.assign({ className: \"stylist-outfit-display__item-info\" }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-outfit-display__item-brand\" }, { children: item.brand })), _jsx(\"div\", Object.assign({ className: \"stylist-outfit-display__item-name\" }, { children: item.name }))] }))] }), item.id))) })), matchReasons.length > 0 && (_jsxs(\"div\", Object.assign({ className: \"stylist-outfit-display__reasons\" }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-outfit-display__reasons-title\" }, { children: \"Why this outfit works:\" })), _jsx(\"ul\", Object.assign({ className: \"stylist-outfit-display__reasons-list\" }, { children: matchReasons.map((reason, index) => (_jsx(\"li\", Object.assign({ className: \"stylist-outfit-display__reason-item\" }, { children: reason }), index))) }))] }))), _jsxs(\"div\", Object.assign({ className: \"stylist-outfit-display__actions\" }, { children: [_jsx(FeedbackControls, { onLike: () => handleFeedback(true), onDislike: () => handleFeedback(false), primaryColor: primaryColor }), _jsx(WishlistButton, { onClick: handleSaveOutfit, primaryColor: primaryColor, label: \"Save Outfit\" })] }))] })));\n};\nexport default OutfitDisplay;\n","import OutfitDisplay from './OutfitDisplay';\nexport default OutfitDisplay;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport './TabNavigation.scss';\nconst TabNavigation = ({ activeTab, onTabChange, primaryColor = '#4361ee', enabledFeatures = {} }) => {\n    // Default all features to enabled unless explicitly disabled\n    const { chat = true, lookbook = true, myCloset = true, tryOn = true, social = true, trending = true } = enabledFeatures;\n    // Define all available tabs\n    const allTabs = [\n        { id: 'chat', label: 'Chat' },\n        { id: 'lookbook', label: 'Lookbook' },\n        { id: 'myCloset', label: 'My Closet' },\n        { id: 'tryOn', label: 'Try On' },\n        { id: 'social', label: 'Celebrity' },\n        { id: 'trending', label: 'Trending' }\n    ];\n    // Filter tabs based on enabled features\n    const tabs = allTabs.filter(tab => {\n        switch (tab.id) {\n            case 'chat': return chat;\n            case 'lookbook': return lookbook;\n            case 'myCloset': return myCloset;\n            case 'tryOn': return tryOn;\n            case 'social': return social;\n            case 'trending': return trending;\n            default: return true;\n        }\n    });\n    return (_jsx(\"div\", Object.assign({ className: \"stylist-tab-navigation\", style: { '--tab-primary-color': primaryColor } }, { children: tabs.map(tab => (_jsxs(\"button\", Object.assign({ className: `stylist-tab ${activeTab === tab.id ? 'stylist-tab--active' : ''}`, onClick: () => onTabChange(tab.id), title: tab.label }, { children: [tab.icon && _jsx(\"span\", Object.assign({ className: \"stylist-tab__icon\" }, { children: tab.icon })), _jsx(\"span\", Object.assign({ className: \"stylist-tab__label\" }, { children: tab.label }))] }), tab.id))) })));\n};\nexport default TabNavigation;\n","import TabNavigation from './TabNavigation';\nexport default TabNavigation;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nconst SingleChoiceQuestion = ({ question, currentAnswer, onAnswer, primaryColor, autoAdvance = true }) => {\n    var _a;\n    const handleSelect = (optionId) => {\n        onAnswer(question.id, {\n            questionId: question.id,\n            answerId: optionId,\n            answered: new Date()\n        });\n    };\n    return (_jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__options\" }, { children: (_a = question.options) === null || _a === void 0 ? void 0 : _a.map(option => (_jsx(\"button\", Object.assign({ className: `stylist-style-quiz__option ${(currentAnswer === null || currentAnswer === void 0 ? void 0 : currentAnswer.answerId) === option.id ? 'stylist-style-quiz__option--selected' : ''}`, onClick: () => handleSelect(option.id), style: (currentAnswer === null || currentAnswer === void 0 ? void 0 : currentAnswer.answerId) === option.id ? {\n                borderColor: primaryColor,\n                backgroundColor: `${primaryColor}20`\n            } : undefined, \"aria-selected\": (currentAnswer === null || currentAnswer === void 0 ? void 0 : currentAnswer.answerId) === option.id }, { children: option.text }), option.id))) })));\n};\nexport default SingleChoiceQuestion;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst MultipleChoiceQuestion = ({ question, currentAnswer, onAnswer, primaryColor }) => {\n    var _a;\n    const handleSelect = (optionId) => {\n        const currentIds = (currentAnswer === null || currentAnswer === void 0 ? void 0 : currentAnswer.answerIds) || [];\n        const isSelected = currentIds.includes(optionId);\n        // Toggle selection\n        const newIds = isSelected\n            ? currentIds.filter(id => id !== optionId)\n            : [...currentIds, optionId];\n        onAnswer(question.id, {\n            questionId: question.id,\n            answerIds: newIds,\n            answered: new Date()\n        });\n    };\n    return (_jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__options\" }, { children: (_a = question.options) === null || _a === void 0 ? void 0 : _a.map(option => {\n            var _a;\n            const isSelected = (_a = currentAnswer === null || currentAnswer === void 0 ? void 0 : currentAnswer.answerIds) === null || _a === void 0 ? void 0 : _a.includes(option.id);\n            return (_jsxs(\"button\", Object.assign({ className: `stylist-style-quiz__option ${isSelected ? 'stylist-style-quiz__option--selected' : ''}`, onClick: () => handleSelect(option.id), style: isSelected ? {\n                    borderColor: primaryColor,\n                    backgroundColor: `${primaryColor}20`\n                } : undefined, \"aria-selected\": isSelected }, { children: [_jsx(\"span\", Object.assign({ className: \"stylist-style-quiz__option-text\" }, { children: option.text })), isSelected && (_jsx(\"span\", Object.assign({ className: \"stylist-style-quiz__option-check\" }, { children: _jsx(\"svg\", Object.assign({ width: \"16\", height: \"16\", viewBox: \"0 0 16 16\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, { children: _jsx(\"path\", { d: \"M6.67 12.6L2.5 8.4L3.9 7L6.67 9.8L12.1 4.33L13.5 5.75L6.67 12.6Z\", fill: \"currentColor\" }) })) })))] }), option.id));\n        }) })));\n};\nexport default MultipleChoiceQuestion;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst ImageChoiceQuestion = ({ question, currentAnswer, onAnswer, primaryColor, autoAdvance = true }) => {\n    var _a;\n    const handleSelect = (optionId) => {\n        onAnswer(question.id, {\n            questionId: question.id,\n            answerId: optionId,\n            answered: new Date()\n        });\n    };\n    return (_jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__image-options\" }, { children: (_a = question.options) === null || _a === void 0 ? void 0 : _a.map(option => (_jsxs(\"button\", Object.assign({ className: `stylist-style-quiz__image-option ${(currentAnswer === null || currentAnswer === void 0 ? void 0 : currentAnswer.answerId) === option.id ? 'stylist-style-quiz__image-option--selected' : ''}`, onClick: () => handleSelect(option.id), \"aria-selected\": (currentAnswer === null || currentAnswer === void 0 ? void 0 : currentAnswer.answerId) === option.id }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__image-container\", style: {\n                        backgroundImage: option.imageUrl ? `url(${option.imageUrl})` : undefined,\n                        borderColor: (currentAnswer === null || currentAnswer === void 0 ? void 0 : currentAnswer.answerId) === option.id ? primaryColor : undefined\n                    } }, { children: !option.imageUrl && _jsx(\"div\", { className: \"stylist-style-quiz__image-placeholder\" }) })), _jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__image-label\", style: (currentAnswer === null || currentAnswer === void 0 ? void 0 : currentAnswer.answerId) === option.id ? { color: primaryColor } : undefined }, { children: option.text }))] }), option.id))) })));\n};\nexport default ImageChoiceQuestion;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// src/components/StyleQuiz/questions/SliderQuestion.tsx\nimport { useState, useEffect } from 'react';\nconst SliderQuestion = ({ question, currentAnswer, onAnswer, primaryColor }) => {\n    var _a, _b, _c, _d;\n    // Set initial value from current answer or default to middle of range\n    const defaultValue = (_a = currentAnswer === null || currentAnswer === void 0 ? void 0 : currentAnswer.answerValue) !== null && _a !== void 0 ? _a : Math.floor(((_b = question.minValue) !== null && _b !== void 0 ? _b : 0) + (((_c = question.maxValue) !== null && _c !== void 0 ? _c : 100) - ((_d = question.minValue) !== null && _d !== void 0 ? _d : 0)) / 2);\n    const [value, setValue] = useState(defaultValue);\n    // Update local state when the external answer changes\n    useEffect(() => {\n        if ((currentAnswer === null || currentAnswer === void 0 ? void 0 : currentAnswer.answerValue) !== undefined) {\n            setValue(currentAnswer.answerValue);\n        }\n    }, [currentAnswer]);\n    const handleChange = (e) => {\n        const newValue = parseInt(e.target.value);\n        setValue(newValue);\n        // Debounce to avoid too many updates\n        clearTimeout(window.sliderTimeout);\n        window.sliderTimeout = setTimeout(() => {\n            onAnswer(question.id, {\n                questionId: question.id,\n                answerValue: newValue,\n                answered: new Date()\n            });\n        }, 300);\n    };\n    // Get slider labels based on question\n    const getSliderLabels = () => {\n        switch (question.id) {\n            case 'q24': // Comfort vs Style priority\n                return { left: 'Comfort', right: 'Style' };\n            case 'q16': // Budget\n                return { left: '$0', right: '$500+' };\n            default:\n                return { left: 'Low', right: 'High' };\n        }\n    };\n    const labels = getSliderLabels();\n    // Format the displayed value\n    const getDisplayValue = () => {\n        if (question.id === 'q16') { // Budget question\n            return `$${value}`;\n        }\n        return value;\n    };\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__slider\" }, { children: [_jsx(\"input\", { type: \"range\", min: question.minValue || 0, max: question.maxValue || 100, step: question.step || 1, value: value, onChange: handleChange, style: { accentColor: primaryColor } }), _jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__slider-value\", style: { color: primaryColor } }, { children: getDisplayValue() })), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__slider-labels\" }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__slider-label-left\" }, { children: labels.left })), _jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__slider-label-right\" }, { children: labels.right }))] }))] })));\n};\nexport default SliderQuestion;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// Style quiz component for gathering user preferences\nimport { useState, useEffect, useMemo } from 'react';\nimport './StyleQuiz.scss';\nimport { SingleChoiceQuestion, MultipleChoiceQuestion, ImageChoiceQuestion, SliderQuestion } from './questions';\n// Quiz sections definition\nconst quizSections = {\n    basics: \"Style, size, gender (Q1-5)\",\n    preferences: \"Colors, patterns, fits (Q6-10)\",\n    lifestyle: \"Occasions, activities (Q11-15)\",\n    brands: \"Favorite brands, budget (Q16-20)\",\n    celebrities: \"Style icons, looks (Q21-25)\"\n};\n// Comprehensive 25-question style quiz organized into 5 sections with 5 questions each\nexport const DEMO_QUESTIONS = [\n    // SECTION 1: BASICS (Q1-5)\n    // Q1: Gender\n    {\n        id: 'q1',\n        questionText: 'Which clothing category do you primarily shop?',\n        type: 'single',\n        options: [\n            { id: 'womens', text: 'Women\\'s', value: 'womens' },\n            { id: 'mens', text: 'Men\\'s', value: 'mens' },\n            { id: 'unisex', text: 'Unisex/Gender-neutral', value: 'unisex' },\n            { id: 'mixed', text: 'Mix of different categories', value: 'mixed' }\n        ],\n        category: 'basics',\n        section: 'basics'\n    },\n    // Q2: Overall Style\n    {\n        id: 'q2',\n        questionText: 'How would you describe your overall fashion style?',\n        type: 'image',\n        options: [\n            { id: 'classic', text: 'Classic & Timeless', value: 'classic', imageUrl: 'https://images.unsplash.com/photo-1603189343302-e603f7add05a?w=400&h=300&fit=crop' },\n            { id: 'minimalist', text: 'Minimalist & Clean', value: 'minimalist', imageUrl: 'https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=400&h=300&fit=crop' },\n            { id: 'trendy', text: 'Trendy & Fashion-Forward', value: 'trendy', imageUrl: 'https://images.unsplash.com/photo-1523359346063-d879354c0ea5?w=400&h=300&fit=crop' },\n            { id: 'edgy', text: 'Edgy & Alternative', value: 'edgy', imageUrl: 'https://images.unsplash.com/photo-1536243298747-ea8874136d64?w=400&h=300&fit=crop' },\n            { id: 'sporty', text: 'Sporty & Casual', value: 'sporty', imageUrl: 'https://images.unsplash.com/photo-1517466787929-bc90951d0974?w=400&h=300&fit=crop' },\n            { id: 'bohemian', text: 'Bohemian & Free-Spirited', value: 'bohemian', imageUrl: 'https://images.unsplash.com/photo-1534777620591-29eb7d8d7563?w=400&h=300&fit=crop' }\n        ],\n        category: 'style',\n        section: 'basics'\n    },\n    // Q3: Tops Size\n    {\n        id: 'q3',\n        questionText: 'What size do you typically wear for tops?',\n        type: 'single',\n        options: [\n            { id: 'xs', text: 'XS', value: 'xs' },\n            { id: 's', text: 'S', value: 's' },\n            { id: 'm', text: 'M', value: 'm' },\n            { id: 'l', text: 'L', value: 'l' },\n            { id: 'xl', text: 'XL', value: 'xl' },\n            { id: 'xxl', text: 'XXL+', value: 'xxl' }\n        ],\n        category: 'size',\n        section: 'basics'\n    },\n    // Q4: Bottoms Size\n    {\n        id: 'q4',\n        questionText: 'What size do you typically wear for bottoms/pants?',\n        type: 'single',\n        options: [\n            { id: '0-2', text: '0-2', value: '0-2' },\n            { id: '4-6', text: '4-6', value: '4-6' },\n            { id: '8-10', text: '8-10', value: '8-10' },\n            { id: '12-14', text: '12-14', value: '12-14' },\n            { id: '16-18', text: '16-18', value: '16-18' },\n            { id: '20+', text: '20+', value: '20+' }\n        ],\n        category: 'size',\n        section: 'basics'\n    },\n    // Q5: Shoe Size\n    {\n        id: 'q5',\n        questionText: 'What shoe size do you typically wear?',\n        type: 'single',\n        options: [\n            { id: 'us5', text: 'US 5 / EU 35-36', value: 'us5' },\n            { id: 'us6', text: 'US 6 / EU 36-37', value: 'us6' },\n            { id: 'us7', text: 'US 7 / EU 37-38', value: 'us7' },\n            { id: 'us8', text: 'US 8 / EU 38-39', value: 'us8' },\n            { id: 'us9', text: 'US 9 / EU 39-40', value: 'us9' },\n            { id: 'us10', text: 'US 10 / EU 40-41', value: 'us10' },\n            { id: 'us11', text: 'US 11 / EU 41-42', value: 'us11' },\n            { id: 'us12', text: 'US 12+ / EU 42+', value: 'us12' }\n        ],\n        category: 'size',\n        section: 'basics'\n    },\n    // SECTION 2: PREFERENCES (Q6-10)\n    // Q6: Color Palette\n    {\n        id: 'q6',\n        questionText: 'Which color palette do you prefer for your wardrobe?',\n        type: 'image',\n        options: [\n            { id: 'neutrals', text: 'Neutrals (Black, White, Grey, Beige)', value: 'neutrals', imageUrl: 'https://images.unsplash.com/photo-1518895949257-7621c3c786d7?w=400&h=300&fit=crop' },\n            { id: 'earthy', text: 'Earthy Tones (Brown, Olive, Rust)', value: 'earthy', imageUrl: 'https://images.unsplash.com/photo-1514362453360-8f94243c9996?w=400&h=300&fit=crop' },\n            { id: 'pastels', text: 'Pastels (Light Pink, Baby Blue, Lavender)', value: 'pastels', imageUrl: 'https://images.unsplash.com/photo-1499781350541-7783f6c6a0c8?w=400&h=300&fit=crop' },\n            { id: 'bold', text: 'Bold & Bright Colors (Red, Yellow, Electric Blue)', value: 'bold', imageUrl: 'https://images.unsplash.com/photo-1535639818669-c059d2f038e6?w=400&h=300&fit=crop' },\n            { id: 'monochrome', text: 'Monochrome or All-Black', value: 'monochrome', imageUrl: 'https://images.unsplash.com/photo-1550330550-36e5c4d9b0c3?w=400&h=300&fit=crop' }\n        ],\n        category: 'color',\n        section: 'preferences'\n    },\n    // Q7: Pattern Preference\n    {\n        id: 'q7',\n        questionText: 'Which patterns do you typically wear?',\n        type: 'multiple',\n        options: [\n            { id: 'solid', text: 'Solid Colors (No Pattern)', value: 'solid' },\n            { id: 'stripes', text: 'Stripes', value: 'stripes' },\n            { id: 'floral', text: 'Floral', value: 'floral' },\n            { id: 'geometric', text: 'Geometric', value: 'geometric' },\n            { id: 'animal', text: 'Animal Print', value: 'animal' },\n            { id: 'plaid', text: 'Plaid/Check', value: 'plaid' }\n        ],\n        category: 'pattern',\n        section: 'preferences'\n    },\n    // Q8: Top Fit Preference\n    {\n        id: 'q8',\n        questionText: 'How do you prefer your tops to fit?',\n        type: 'image',\n        options: [\n            { id: 'oversized', text: 'Oversized & Relaxed', value: 'oversized', imageUrl: 'https://images.unsplash.com/photo-1542837209-3bd9538b3a96?w=400&h=300&fit=crop' },\n            { id: 'fitted', text: 'Slim & Fitted', value: 'fitted', imageUrl: 'https://images.unsplash.com/photo-1570727624862-3008fe67a6f9?w=400&h=300&fit=crop' },\n            { id: 'cropped', text: 'Cropped', value: 'cropped', imageUrl: 'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=400&h=300&fit=crop' },\n            { id: 'structured', text: 'Boxy & Structured', value: 'structured', imageUrl: 'https://images.unsplash.com/photo-1603252109303-2751441dd157?w=400&h=300&fit=crop' }\n        ],\n        category: 'fit',\n        section: 'preferences'\n    },\n    // Q9: Bottom Fit Preference\n    {\n        id: 'q9',\n        questionText: 'How do you prefer your bottoms to fit?',\n        type: 'image',\n        options: [\n            { id: 'skinny', text: 'Skinny/Slim', value: 'skinny', imageUrl: 'https://images.unsplash.com/photo-1598808503824-9725718f223d?w=400&h=300&fit=crop' },\n            { id: 'relaxed', text: 'Relaxed/Regular', value: 'relaxed', imageUrl: 'https://images.unsplash.com/photo-1581985673473-0784a7a44e39?w=400&h=300&fit=crop' },\n            { id: 'wide', text: 'Wide Leg', value: 'wide', imageUrl: 'https://images.unsplash.com/photo-1593030103066-0093718efeb9?w=400&h=300&fit=crop' },\n            { id: 'straight', text: 'Straight Cut', value: 'straight', imageUrl: 'https://images.unsplash.com/photo-1582418702059-97ebafb35d09?w=400&h=300&fit=crop' }\n        ],\n        category: 'fit',\n        section: 'preferences'\n    },\n    // Q10: Fabric Preferences\n    {\n        id: 'q10',\n        questionText: 'Which fabric types do you prefer?',\n        type: 'multiple',\n        options: [\n            { id: 'cotton', text: 'Cotton', value: 'cotton' },\n            { id: 'linen', text: 'Linen', value: 'linen' },\n            { id: 'silk', text: 'Silk', value: 'silk' },\n            { id: 'wool', text: 'Wool', value: 'wool' },\n            { id: 'synthetic', text: 'Synthetic/Technical Fabrics', value: 'synthetic' },\n            { id: 'leather', text: 'Leather', value: 'leather' },\n            { id: 'denim', text: 'Denim', value: 'denim' },\n            { id: 'knit', text: 'Knits', value: 'knit' }\n        ],\n        category: 'fabrics',\n        section: 'preferences'\n    },\n    // SECTION 3: LIFESTYLE (Q11-15)\n    // Q11: Occasion Types\n    {\n        id: 'q11',\n        questionText: 'What type of outfits do you need the most recommendations for?',\n        type: 'multiple',\n        options: [\n            { id: 'casual', text: 'Everyday Casual', value: 'casual' },\n            { id: 'work', text: 'Workwear & Business Casual', value: 'work' },\n            { id: 'street', text: 'Streetwear & Trendy Looks', value: 'street' },\n            { id: 'date', text: 'Date Night & Going Out', value: 'date' },\n            { id: 'formal', text: 'Formal & Special Events', value: 'formal' }\n        ],\n        category: 'occasion',\n        section: 'lifestyle'\n    },\n    // Q12: Work Environment\n    {\n        id: 'q12',\n        questionText: 'What best describes your work environment dress code?',\n        type: 'single',\n        options: [\n            { id: 'formal', text: 'Formal/Business Professional', value: 'formal' },\n            { id: 'business', text: 'Business Casual', value: 'business' },\n            { id: 'casual', text: 'Casual', value: 'casual' },\n            { id: 'creative', text: 'Creative/No Dress Code', value: 'creative' },\n            { id: 'uniform', text: 'Uniform Required', value: 'uniform' },\n            { id: 'na', text: 'Not Applicable', value: 'na' }\n        ],\n        category: 'lifestyle',\n        section: 'lifestyle'\n    },\n    // Q13: Active Lifestyle\n    {\n        id: 'q13',\n        questionText: 'How active is your lifestyle?',\n        type: 'single',\n        options: [\n            { id: 'very', text: 'Very active - I need clothes for frequent exercise', value: 'very' },\n            { id: 'moderately', text: 'Moderately active - occasional exercise', value: 'moderately' },\n            { id: 'somewhat', text: 'Somewhat active - light activity', value: 'somewhat' },\n            { id: 'not', text: 'Not very active', value: 'not' }\n        ],\n        category: 'lifestyle',\n        section: 'lifestyle'\n    },\n    // Q14: Seasonal Preference\n    {\n        id: 'q14',\n        questionText: 'Which season do you most enjoy dressing for?',\n        type: 'image',\n        options: [\n            { id: 'spring', text: 'Spring', value: 'spring', imageUrl: 'https://images.unsplash.com/photo-1497942304796-b8bc2cc898f3?w=400&h=300&fit=crop' },\n            { id: 'summer', text: 'Summer', value: 'summer', imageUrl: 'https://images.unsplash.com/photo-1517206577696-6ce38fb787a3?w=400&h=300&fit=crop' },\n            { id: 'fall', text: 'Fall/Autumn', value: 'fall', imageUrl: 'https://images.unsplash.com/photo-1551843073-4a9a5b6fcd5f?w=400&h=300&fit=crop' },\n            { id: 'winter', text: 'Winter', value: 'winter', imageUrl: 'https://images.unsplash.com/photo-1515311320503-6591cade8414?w=400&h=300&fit=crop' }\n        ],\n        category: 'seasonal',\n        section: 'lifestyle'\n    },\n    // Q15: Layering Preference\n    {\n        id: 'q15',\n        questionText: 'How do you feel about layering clothes?',\n        type: 'single',\n        options: [\n            { id: 'love', text: 'Love it - the more layers the better', value: 'love' },\n            { id: 'sometimes', text: 'Sometimes - when appropriate for weather', value: 'sometimes' },\n            { id: 'minimal', text: 'Prefer minimal layers', value: 'minimal' },\n            { id: 'avoid', text: 'Avoid layering when possible', value: 'avoid' }\n        ],\n        category: 'styling',\n        section: 'lifestyle'\n    },\n    // SECTION 4: BRANDS & BUDGET (Q16-20)\n    // Q16: Budget Range\n    {\n        id: 'q16',\n        questionText: \"What's your typical budget for a single clothing item?\",\n        type: 'slider',\n        minValue: 0,\n        maxValue: 500,\n        step: 10,\n        category: 'budget',\n        section: 'brands'\n    },\n    // Q17: Shopping Frequency\n    {\n        id: 'q17',\n        questionText: 'How often do you shop for clothes?',\n        type: 'single',\n        options: [\n            { id: 'weekly', text: 'Weekly', value: 'weekly' },\n            { id: 'monthly', text: 'Monthly', value: 'monthly' },\n            { id: 'seasonally', text: 'Seasonally', value: 'seasonally' },\n            { id: 'rarely', text: 'Rarely/As needed', value: 'rarely' }\n        ],\n        category: 'shopping',\n        section: 'brands'\n    },\n    // Q18: Casual Brands\n    {\n        id: 'q18',\n        questionText: 'Which casual wear brands do you typically shop?',\n        type: 'multiple',\n        options: [\n            { id: 'zara', text: 'Zara', value: 'zara' },\n            { id: 'hm', text: 'H&M', value: 'hm' },\n            { id: 'uniqlo', text: 'Uniqlo', value: 'uniqlo' },\n            { id: 'gap', text: 'Gap', value: 'gap' },\n            { id: 'jcrew', text: 'J.Crew', value: 'jcrew' },\n            { id: 'madewell', text: 'Madewell', value: 'madewell' },\n            { id: 'everlane', text: 'Everlane', value: 'everlane' },\n            { id: 'aritzia', text: 'Aritzia', value: 'aritzia' },\n            { id: 'mango', text: 'Mango', value: 'mango' },\n            { id: 'urban', text: 'Urban Outfitters', value: 'urban' },\n            { id: 'abercrombie', text: 'Abercrombie & Fitch', value: 'abercrombie' },\n            { id: 'ae', text: 'American Eagle', value: 'ae' },\n            { id: 'other_casual', text: 'Other', value: 'other_casual' }\n        ],\n        category: 'brand',\n        section: 'brands'\n    },\n    // Q19: Athletic Brands\n    {\n        id: 'q19',\n        questionText: 'Which athletic/athleisure brands do you prefer?',\n        type: 'multiple',\n        options: [\n            { id: 'nike', text: 'Nike', value: 'nike' },\n            { id: 'adidas', text: 'Adidas', value: 'adidas' },\n            { id: 'lululemon', text: 'Lululemon', value: 'lululemon' },\n            { id: 'athleta', text: 'Athleta', value: 'athleta' },\n            { id: 'under_armour', text: 'Under Armour', value: 'under_armour' },\n            { id: 'puma', text: 'Puma', value: 'puma' },\n            { id: 'alo', text: 'Alo Yoga', value: 'alo' },\n            { id: 'new_balance', text: 'New Balance', value: 'new_balance' },\n            { id: 'gymshark', text: 'Gymshark', value: 'gymshark' },\n            { id: 'fabletics', text: 'Fabletics', value: 'fabletics' },\n            { id: 'other_athletic', text: 'Other', value: 'other_athletic' }\n        ],\n        category: 'brand',\n        section: 'brands'\n    },\n    // Q20: Luxury Brands\n    {\n        id: 'q20',\n        questionText: 'Do you shop any luxury or designer brands?',\n        type: 'multiple',\n        options: [\n            { id: 'none', text: 'None/Not regularly', value: 'none' },\n            { id: 'coach', text: 'Coach', value: 'coach' },\n            { id: 'mk', text: 'Michael Kors', value: 'mk' },\n            { id: 'tory_burch', text: 'Tory Burch', value: 'tory_burch' },\n            { id: 'theory', text: 'Theory', value: 'theory' },\n            { id: 'allsaints', text: 'AllSaints', value: 'allsaints' },\n            { id: 'gucci', text: 'Gucci', value: 'gucci' },\n            { id: 'louis', text: 'Louis Vuitton', value: 'louis' },\n            { id: 'chanel', text: 'Chanel', value: 'chanel' },\n            { id: 'prada', text: 'Prada', value: 'prada' },\n            { id: 'burberry', text: 'Burberry', value: 'burberry' },\n            { id: 'other_luxury', text: 'Other', value: 'other_luxury' }\n        ],\n        category: 'brand',\n        section: 'brands'\n    },\n    // SECTION 5: CELEBRITY STYLE & INSPIRATION (Q21-25)\n    // Q21: Modern Celebrity Inspiration\n    {\n        id: 'q21',\n        questionText: \"Which celebrity's style do you most admire? (Modern Icons)\",\n        type: 'image',\n        options: [\n            { id: 'zendaya', text: 'Zendaya (Fashion-Forward)', value: 'zendaya', imageUrl: 'https://www.fillmurray.com/400/301' },\n            { id: 'harry', text: 'Harry Styles (Bold & Eclectic)', value: 'harry', imageUrl: 'https://www.fillmurray.com/401/300' },\n            { id: 'rihanna', text: 'Rihanna (Trendsetter)', value: 'rihanna', imageUrl: 'https://www.fillmurray.com/401/302' },\n            { id: 'timothee', text: 'Timothée Chalamet (Modern Minimal)', value: 'timothee', imageUrl: 'https://www.fillmurray.com/400/302' },\n            { id: 'hailey', text: 'Hailey Bieber (Cool Girl)', value: 'hailey', imageUrl: 'https://www.fillmurray.com/402/301' },\n            { id: 'asap', text: 'A$AP Rocky (Streetwear)', value: 'asap', imageUrl: 'https://www.fillmurray.com/403/300' }\n        ],\n        category: 'inspiration',\n        section: 'celebrities'\n    },\n    // Q22: Classic Celebrity Inspiration\n    {\n        id: 'q22',\n        questionText: \"Which celebrity's style do you most admire? (Classic Icons)\",\n        type: 'image',\n        options: [\n            { id: 'audrey', text: 'Audrey Hepburn (Timeless)', value: 'audrey', imageUrl: 'https://www.fillmurray.com/400/300' },\n            { id: 'jlo', text: 'Jennifer Lopez (Glamorous)', value: 'jlo', imageUrl: 'https://www.fillmurray.com/402/300' },\n            { id: 'beyonce', text: 'Beyoncé (Bold & Confident)', value: 'beyonce', imageUrl: 'https://www.fillmurray.com/404/300' },\n            { id: 'pharrell', text: 'Pharrell Williams (Streetwear)', value: 'pharrell', imageUrl: 'https://www.fillmurray.com/401/301' },\n            { id: 'blake', text: 'Blake Lively (Classic Chic)', value: 'blake', imageUrl: 'https://www.fillmurray.com/403/302' },\n            { id: 'beckham', text: 'David Beckham (Polished)', value: 'beckham', imageUrl: 'https://www.fillmurray.com/405/300' }\n        ],\n        category: 'inspiration',\n        section: 'celebrities'\n    },\n    // Q23: Trend Approach\n    {\n        id: 'q23',\n        questionText: 'How do you approach fashion trends?',\n        type: 'single',\n        options: [\n            { id: 'early', text: 'Early adopter - always trying new trends', value: 'early' },\n            { id: 'selective', text: 'Selective - adopt trends that match my style', value: 'selective' },\n            { id: 'wait', text: 'Wait and see - adopt trends after they\\'re established', value: 'wait' },\n            { id: 'avoid', text: 'Avoid trends - prefer timeless styles', value: 'avoid' }\n        ],\n        category: 'styling',\n        section: 'celebrities'\n    },\n    // Q24: Comfort vs Style Priority\n    {\n        id: 'q24',\n        questionText: 'When it comes to choosing clothes, you prioritize:',\n        type: 'slider',\n        minValue: 0,\n        maxValue: 100,\n        step: 1,\n        category: 'priorities',\n        section: 'celebrities'\n    },\n    // Q25: Style Goal\n    {\n        id: 'q25',\n        questionText: \"What's your main style goal right now?\",\n        type: 'single',\n        options: [\n            { id: 'refresh', text: 'Refresh my everyday wardrobe', value: 'refresh' },\n            { id: 'special', text: 'Find outfits for special occasions', value: 'special' },\n            { id: 'transition', text: 'Transition to a new style', value: 'transition' },\n            { id: 'minimize', text: 'Build a capsule wardrobe', value: 'minimize' },\n            { id: 'experiment', text: 'Experiment with new styles', value: 'experiment' },\n            { id: 'confidence', text: 'Gain confidence in my clothing choices', value: 'confidence' }\n        ],\n        category: 'goals',\n        section: 'celebrities'\n    }\n];\nconst STORAGE_KEY = 'stylist_quiz_progress';\nconst StyleQuiz = ({ quizId, title, description, onSubmit, primaryColor }) => {\n    // Using DEMO_QUESTIONS directly, no need to update these\n    const [questions] = useState(DEMO_QUESTIONS);\n    // Try to load saved progress from localStorage\n    const loadSavedProgress = () => {\n        try {\n            const savedProgress = localStorage.getItem(`${STORAGE_KEY}_${quizId}`);\n            if (savedProgress) {\n                const progress = JSON.parse(savedProgress);\n                if (progress.answers && Array.isArray(progress.answers)) {\n                    return {\n                        currentQuestionIndex: progress.currentQuestion || 0,\n                        savedAnswers: progress.answers,\n                        activeSection: progress.activeSection || 'basics'\n                    };\n                }\n            }\n        }\n        catch (e) {\n            console.error('Error loading saved quiz progress:', e);\n        }\n        return {\n            currentQuestionIndex: 0,\n            savedAnswers: [],\n            activeSection: 'basics'\n        };\n    };\n    const { currentQuestionIndex, savedAnswers, activeSection: savedSection } = loadSavedProgress();\n    const [currentQuestion, setCurrentQuestion] = useState(currentQuestionIndex);\n    const [answers, setAnswers] = useState(savedAnswers);\n    const [activeSection, setActiveSection] = useState(savedSection);\n    const [submitting, setSubmitting] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [showSkipConfirm, setShowSkipConfirm] = useState(false);\n    // Save progress to localStorage whenever answers or current question changes\n    useEffect(() => {\n        try {\n            const progress = {\n                currentQuestion,\n                answers,\n                activeSection\n            };\n            localStorage.setItem(`${STORAGE_KEY}_${quizId}`, JSON.stringify(progress));\n        }\n        catch (e) {\n            console.error('Error saving quiz progress:', e);\n        }\n    }, [currentQuestion, answers, activeSection, quizId]);\n    // Track the quiz progress for analytics but don't trigger the actual submission\n    // We're passing progress to the parent for tracking purposes only\n    useEffect(() => {\n        // Skip empty answers array (initial render)\n        if (answers.length === 0)\n            return;\n        // Skip if we're submitting the final result\n        if (submitting)\n            return;\n        // Inform the parent component about answer updates (useful for tracking abandonment)\n        // The parent will decide whether to treat this as a real submission or just tracking\n        onSubmit(answers);\n    }, [answers, submitting, onSubmit]);\n    // Group questions by section\n    const questionsBySection = useMemo(() => {\n        return questions.reduce((acc, question) => {\n            if (!acc[question.section]) {\n                acc[question.section] = [];\n            }\n            acc[question.section].push(question);\n            return acc;\n        }, {});\n    }, [questions]);\n    // Get questions for current section\n    const currentSectionQuestions = useMemo(() => {\n        return questionsBySection[activeSection] || [];\n    }, [questionsBySection, activeSection]);\n    // Get current question object\n    const questionIndex = currentSectionQuestions.findIndex(q => { var _a; return q.id === ((_a = questions[currentQuestion]) === null || _a === void 0 ? void 0 : _a.id); });\n    const question = currentSectionQuestions[questionIndex >= 0 ? questionIndex : 0] || questions[currentQuestion];\n    // Check if this is the last question in the current section\n    const isLastQuestionInSection = questionIndex === currentSectionQuestions.length - 1;\n    // Check if this is the last question overall\n    const isLastQuestion = currentQuestion === questions.length - 1;\n    // Calculate section progress\n    const getSectionProgress = (section) => {\n        const sectionQuestions = questionsBySection[section] || [];\n        const answeredQuestions = answers.filter(a => sectionQuestions.some(q => q.id === a.questionId)).length;\n        return {\n            total: sectionQuestions.length,\n            answered: answeredQuestions,\n            percentage: Math.round((answeredQuestions / Math.max(sectionQuestions.length, 1)) * 100)\n        };\n    };\n    // Main answer handler function\n    const handleAnswerUpdate = (questionId, answer) => {\n        const newAnswers = [...answers];\n        const existingIndex = answers.findIndex(a => a.questionId === questionId);\n        if (existingIndex >= 0) {\n            newAnswers[existingIndex] = answer;\n        }\n        else {\n            newAnswers.push(answer);\n        }\n        setAnswers(newAnswers);\n        // Auto-advance if it's a single or image type question\n        if ((question.type === 'single' || question.type === 'image') &&\n            answer.answerId &&\n            currentQuestion < questions.length - 1) {\n            setTimeout(() => {\n                handleNextQuestion();\n            }, 300);\n        }\n    };\n    // Function to handle going to the next question\n    const handleNextQuestion = () => {\n        var _a, _b;\n        if (currentQuestion < questions.length - 1) {\n            // Check if we need to move to the next section\n            if (isLastQuestionInSection) {\n                // Get the next section\n                const sectionKeys = Object.keys(quizSections);\n                const currentSectionIndex = sectionKeys.indexOf(activeSection);\n                if (currentSectionIndex < sectionKeys.length - 1) {\n                    const nextSection = sectionKeys[currentSectionIndex + 1];\n                    // Animate the transition\n                    (_a = document.querySelector('.stylist-style-quiz__section-content')) === null || _a === void 0 ? void 0 : _a.classList.add('fade-out');\n                    setTimeout(() => {\n                        var _a, _b;\n                        setActiveSection(nextSection);\n                        // Find the first question in the next section\n                        const nextSectionQuestions = questionsBySection[nextSection] || [];\n                        const nextQuestionIndex = questions.findIndex(q => { var _a; return q.id === ((_a = nextSectionQuestions[0]) === null || _a === void 0 ? void 0 : _a.id); });\n                        setCurrentQuestion(nextQuestionIndex >= 0 ? nextQuestionIndex : currentQuestion + 1);\n                        (_a = document.querySelector('.stylist-style-quiz__section-content')) === null || _a === void 0 ? void 0 : _a.classList.remove('fade-out');\n                        (_b = document.querySelector('.stylist-style-quiz__section-content')) === null || _b === void 0 ? void 0 : _b.classList.add('fade-in');\n                        setTimeout(() => {\n                            var _a;\n                            (_a = document.querySelector('.stylist-style-quiz__section-content')) === null || _a === void 0 ? void 0 : _a.classList.remove('fade-in');\n                        }, 300);\n                    }, 200);\n                }\n            }\n            else {\n                // Just move to next question within current section\n                (_b = document.querySelector('.stylist-style-quiz__question')) === null || _b === void 0 ? void 0 : _b.classList.add('fade-out');\n                setTimeout(() => {\n                    var _a, _b;\n                    setCurrentQuestion(currentQuestion + 1);\n                    (_a = document.querySelector('.stylist-style-quiz__question')) === null || _a === void 0 ? void 0 : _a.classList.remove('fade-out');\n                    (_b = document.querySelector('.stylist-style-quiz__question')) === null || _b === void 0 ? void 0 : _b.classList.add('fade-in');\n                    setTimeout(() => {\n                        var _a;\n                        (_a = document.querySelector('.stylist-style-quiz__question')) === null || _a === void 0 ? void 0 : _a.classList.remove('fade-in');\n                    }, 300);\n                }, 200);\n            }\n        }\n    };\n    // Function to handle going to the previous question\n    const handlePreviousQuestion = () => {\n        var _a, _b;\n        if (currentQuestion > 0) {\n            // Check if we need to move to the previous section\n            if (questionIndex === 0) {\n                // Get the previous section\n                const sectionKeys = Object.keys(quizSections);\n                const currentSectionIndex = sectionKeys.indexOf(activeSection);\n                if (currentSectionIndex > 0) {\n                    const prevSection = sectionKeys[currentSectionIndex - 1];\n                    // Animate the transition\n                    (_a = document.querySelector('.stylist-style-quiz__section-content')) === null || _a === void 0 ? void 0 : _a.classList.add('fade-out');\n                    setTimeout(() => {\n                        var _a, _b;\n                        setActiveSection(prevSection);\n                        // Find the last question in the previous section\n                        const prevSectionQuestions = questionsBySection[prevSection] || [];\n                        const prevQuestionIndex = questions.findIndex(q => { var _a; return q.id === ((_a = prevSectionQuestions[prevSectionQuestions.length - 1]) === null || _a === void 0 ? void 0 : _a.id); });\n                        setCurrentQuestion(prevQuestionIndex >= 0 ? prevQuestionIndex : currentQuestion - 1);\n                        (_a = document.querySelector('.stylist-style-quiz__section-content')) === null || _a === void 0 ? void 0 : _a.classList.remove('fade-out');\n                        (_b = document.querySelector('.stylist-style-quiz__section-content')) === null || _b === void 0 ? void 0 : _b.classList.add('fade-in');\n                        setTimeout(() => {\n                            var _a;\n                            (_a = document.querySelector('.stylist-style-quiz__section-content')) === null || _a === void 0 ? void 0 : _a.classList.remove('fade-in');\n                        }, 300);\n                    }, 200);\n                }\n            }\n            else {\n                // Just move to previous question within current section\n                (_b = document.querySelector('.stylist-style-quiz__question')) === null || _b === void 0 ? void 0 : _b.classList.add('fade-out');\n                setTimeout(() => {\n                    var _a, _b;\n                    setCurrentQuestion(currentQuestion - 1);\n                    (_a = document.querySelector('.stylist-style-quiz__question')) === null || _a === void 0 ? void 0 : _a.classList.remove('fade-out');\n                    (_b = document.querySelector('.stylist-style-quiz__question')) === null || _b === void 0 ? void 0 : _b.classList.add('fade-in');\n                    setTimeout(() => {\n                        var _a;\n                        (_a = document.querySelector('.stylist-style-quiz__question')) === null || _a === void 0 ? void 0 : _a.classList.remove('fade-in');\n                    }, 300);\n                }, 200);\n            }\n        }\n    };\n    // Function to jump to a specific section\n    const jumpToSection = (section) => {\n        var _a;\n        // Get first question in the target section\n        const targetSectionQuestions = questionsBySection[section] || [];\n        if (targetSectionQuestions.length === 0)\n            return;\n        const targetQuestionIndex = questions.findIndex(q => q.id === targetSectionQuestions[0].id);\n        if (targetQuestionIndex === -1)\n            return;\n        // Animate the transition\n        (_a = document.querySelector('.stylist-style-quiz__section-content')) === null || _a === void 0 ? void 0 : _a.classList.add('fade-out');\n        setTimeout(() => {\n            var _a, _b;\n            setActiveSection(section);\n            setCurrentQuestion(targetQuestionIndex);\n            (_a = document.querySelector('.stylist-style-quiz__section-content')) === null || _a === void 0 ? void 0 : _a.classList.remove('fade-out');\n            (_b = document.querySelector('.stylist-style-quiz__section-content')) === null || _b === void 0 ? void 0 : _b.classList.add('fade-in');\n            setTimeout(() => {\n                var _a;\n                (_a = document.querySelector('.stylist-style-quiz__section-content')) === null || _a === void 0 ? void 0 : _a.classList.remove('fade-in');\n            }, 300);\n        }, 200);\n    };\n    // Function to skip to results\n    const handleSkipToResults = () => {\n        setShowSkipConfirm(true);\n    };\n    // Function to confirm skip to results\n    const confirmSkipToResults = () => {\n        setShowSkipConfirm(false);\n        handleSubmit();\n    };\n    // Function to cancel skip to results\n    const cancelSkipToResults = () => {\n        setShowSkipConfirm(false);\n    };\n    // Function to check if the current question has been answered\n    const isCurrentQuestionAnswered = () => {\n        return !!answers.find(a => a.questionId === question.id);\n    };\n    const handleSubmit = () => {\n        if (submitting)\n            return; // Prevent double submission\n        setSubmitting(true);\n        onSubmit(answers);\n    };\n    // If loading show loading state\n    if (loading) {\n        return (_jsx(\"div\", Object.assign({ className: \"stylist-style-quiz stylist-style-quiz--loading\" }, { children: _jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__loader\" }, { children: \"Loading quiz...\" })) })));\n    }\n    if (questions.length === 0) {\n        return (_jsx(\"div\", Object.assign({ className: \"stylist-style-quiz stylist-style-quiz--error\" }, { children: _jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__error\" }, { children: \"Sorry, we couldn't load the style quiz. Please try again later.\" })) })));\n    }\n    // Calculate overall completion percentage\n    const completionPercentage = Math.round((answers.length / questions.length) * 100);\n    // Render the question based on its type\n    const renderQuestion = () => {\n        if (!question)\n            return null;\n        // Get current answer for this question\n        const currentAnswer = answers.find(a => a.questionId === question.id);\n        // Shared props for all question types\n        const commonProps = {\n            question,\n            currentAnswer,\n            onAnswer: handleAnswerUpdate,\n            primaryColor\n        };\n        switch (question.type) {\n            case 'single':\n                return _jsx(SingleChoiceQuestion, Object.assign({}, commonProps));\n            case 'image':\n                return _jsx(ImageChoiceQuestion, Object.assign({}, commonProps));\n            case 'multiple':\n                return _jsx(MultipleChoiceQuestion, Object.assign({}, commonProps));\n            case 'slider':\n                return _jsx(SliderQuestion, Object.assign({}, commonProps));\n            default:\n                return null;\n        }\n    };\n    // Render section navigation tabs\n    const renderSectionTabs = () => {\n        return (_jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__section-tabs\" }, { children: Object.entries(quizSections).map(([sectionKey, sectionLabel]) => {\n                const sectionProgress = getSectionProgress(sectionKey);\n                const isActive = activeSection === sectionKey;\n                return (_jsxs(\"button\", Object.assign({ className: `stylist-style-quiz__section-tab ${isActive ? 'stylist-style-quiz__section-tab--active' : ''}`, onClick: () => jumpToSection(sectionKey), disabled: answers.length === 0 && sectionKey !== 'basics', style: isActive ? { borderColor: primaryColor, color: primaryColor } : undefined }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__section-tab-label\" }, { children: sectionLabel })), _jsx(\"div\", { className: \"stylist-style-quiz__section-tab-progress\", style: { width: `${sectionProgress.percentage}%`, backgroundColor: primaryColor } })] }), sectionKey));\n            }) })));\n    };\n    // Render the skip confirmation dialog\n    const renderSkipConfirmation = () => {\n        if (!showSkipConfirm)\n            return null;\n        return (_jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__skip-confirm\" }, { children: [_jsx(\"div\", { className: \"stylist-style-quiz__skip-confirm-backdrop\", onClick: cancelSkipToResults }), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__skip-confirm-dialog\" }, { children: [_jsx(\"h4\", { children: \"Skip to Results?\" }), _jsxs(\"p\", { children: [\"You've answered \", answers.length, \" of \", questions.length, \" questions (\", completionPercentage, \"% complete).\"] }), _jsx(\"p\", { children: \"More answers will improve your personalized recommendations. Are you sure you want to skip to results?\" }), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__skip-confirm-actions\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-style-quiz__button stylist-style-quiz__button--secondary\", onClick: cancelSkipToResults }, { children: \"Continue Quiz\" })), _jsx(\"button\", Object.assign({ className: \"stylist-style-quiz__button stylist-style-quiz__button--primary\", onClick: confirmSkipToResults, style: { backgroundColor: primaryColor } }, { children: \"Skip to Results\" }))] }))] }))] })));\n    };\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__header\" }, { children: [_jsx(\"h3\", Object.assign({ className: \"stylist-style-quiz__title\" }, { children: title })), description && (_jsx(\"p\", Object.assign({ className: \"stylist-style-quiz__description\" }, { children: description })))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__progress\" }, { children: [_jsx(\"div\", { className: \"stylist-style-quiz__progress-bar\", style: {\n                            width: `${completionPercentage}%`,\n                            backgroundColor: primaryColor\n                        } }), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__progress-text\" }, { children: [completionPercentage, \"% Complete\"] }))] })), renderSectionTabs(), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__section-content\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__section-header\" }, { children: [_jsx(\"h3\", Object.assign({ className: \"stylist-style-quiz__section-title\" }, { children: quizSections[activeSection] })), _jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__section-progress\" }, { children: _jsxs(\"span\", { children: [\"Question \", questionIndex + 1, \" of \", currentSectionQuestions.length] }) }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__question\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__question-number\" }, { children: [\"Question \", currentQuestion + 1, \" of \", questions.length] })), _jsx(\"h4\", Object.assign({ className: \"stylist-style-quiz__question-text\" }, { children: question.questionText }))] })), renderQuestion(), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__actions\" }, { children: [currentQuestion > 0 && (_jsx(\"button\", Object.assign({ className: \"stylist-style-quiz__button stylist-style-quiz__button--secondary\", onClick: handlePreviousQuestion }, { children: \"Previous\" }))), answers.length >= 5 && !isLastQuestion && (_jsx(\"button\", Object.assign({ className: \"stylist-style-quiz__button stylist-style-quiz__button--skip\", onClick: handleSkipToResults }, { children: \"Skip to Results\" }))), isLastQuestion ? (_jsx(\"button\", Object.assign({ className: \"stylist-style-quiz__button stylist-style-quiz__button--primary\", onClick: handleSubmit, style: { backgroundColor: primaryColor }, disabled: !isCurrentQuestionAnswered() || submitting }, { children: submitting ? 'Submitting...' : 'Complete Quiz' }))) : (_jsx(\"button\", Object.assign({ className: \"stylist-style-quiz__button stylist-style-quiz__button--primary\", onClick: handleNextQuestion, style: { backgroundColor: primaryColor }, disabled: !isCurrentQuestionAnswered() }, { children: \"Next\" })))] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz__save-progress\" }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__save-progress-icon\" }, { children: _jsxs(\"svg\", Object.assign({ width: \"16\", height: \"16\", viewBox: \"0 0 16 16\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, { children: [_jsx(\"path\", { d: \"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 14C4.7 14 2 11.3 2 8C2 4.7 4.7 2 8 2C11.3 2 14 4.7 14 8C14 11.3 11.3 14 8 14Z\", fill: \"currentColor\" }), _jsx(\"path\", { d: \"M7 5H9V11H7V5Z\", fill: \"currentColor\" }), _jsx(\"path\", { d: \"M7 3H9V5H7V3Z\", fill: \"currentColor\" })] })) })), _jsx(\"div\", Object.assign({ className: \"stylist-style-quiz__save-progress-text\" }, { children: \"Your progress is automatically saved. You can return to complete the quiz later.\" }))] })), renderSkipConfirmation()] })));\n};\nexport default StyleQuiz;\n","import StyleQuiz from './StyleQuiz';\nexport default StyleQuiz;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\n// MyCloset component for displaying and managing user's clothing items\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { useUserStore } from '@/store/userStore';\nimport ImageUploader from '../ImageUploader/ImageUploader';\nimport ItemCard from '../ItemCard/ItemCard';\nimport useSyncedStore from '@/hooks/useSyncedStore';\nimport AdaptiveImage from '../common/AdaptiveImage';\nimport './MyCloset.scss';\n// Add Item Flow steps enum\nvar AddItemStep;\n(function (AddItemStep) {\n    AddItemStep[AddItemStep[\"SELECT_TYPE\"] = 1] = \"SELECT_TYPE\";\n    AddItemStep[AddItemStep[\"CHOOSE_COLOR\"] = 2] = \"CHOOSE_COLOR\";\n    AddItemStep[AddItemStep[\"SELECT_PATTERN\"] = 3] = \"SELECT_PATTERN\";\n    AddItemStep[AddItemStep[\"UPLOAD_IMAGE\"] = 4] = \"UPLOAD_IMAGE\";\n    AddItemStep[AddItemStep[\"CONFIRM_DETAILS\"] = 5] = \"CONFIRM_DETAILS\";\n})(AddItemStep || (AddItemStep = {}));\n// Type guard for AddItemStep\nfunction isAddItemStep(value) {\n    return Object.values(AddItemStep).includes(value);\n}\nconst MyCloset = ({ onSelectItem, onAddToOutfit, isBuilderMode = false }) => {\n    var _a;\n    const { user } = useUserStore();\n    const { addToCloset, removeFromCloset, toggleItemFavorite } = useSyncedStore();\n    const dragItemRef = useRef(null);\n    const dragOverItemRef = useRef(null);\n    // State for managing UI view\n    const [activeView, setActiveView] = useState('closet');\n    const [isUploading, setIsUploading] = useState(false);\n    const [selectedCategory, setSelectedCategory] = useState('all');\n    const [categories, setCategories] = useState([]);\n    const [showUploader, setShowUploader] = useState(false);\n    // Item addition flow states\n    const [currentStep, setCurrentStep] = useState(AddItemStep.SELECT_TYPE);\n    const [newItem, setNewItem] = useState({\n        category: '',\n        subcategory: '',\n        color: '',\n        pattern: '',\n        brand: '',\n        size: '',\n        tags: []\n    });\n    // State for filtering\n    const [filterType, setFilterType] = useState('');\n    const [filterColor, setFilterColor] = useState('');\n    const [filterBrand, setFilterBrand] = useState('');\n    // State for editing\n    const [editingItem, setEditingItem] = useState(null);\n    // Filter and sort closet items based on selected category and filters\n    const filteredItems = useCallback(() => {\n        if (!(user === null || user === void 0 ? void 0 : user.closet))\n            return [];\n        let items = [...user.closet]; // Make a copy to preserve original order\n        // First, apply category filter\n        if (selectedCategory === 'all') {\n            // Keep all items\n        }\n        else if (selectedCategory === 'favorites') {\n            items = items.filter(item => item.favorite);\n        }\n        else {\n            items = items.filter(item => item.category === selectedCategory);\n        }\n        // Then apply specific filters if they are set\n        if (filterType) {\n            items = items.filter(item => {\n                var _a;\n                return ((_a = item.subcategory) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes(filterType.toLowerCase())) ||\n                    item.category.toLowerCase().includes(filterType.toLowerCase());\n            });\n        }\n        if (filterColor) {\n            items = items.filter(item => item.color.toLowerCase().includes(filterColor.toLowerCase()));\n        }\n        if (filterBrand) {\n            items = items.filter(item => { var _a; return (_a = item.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes(filterBrand.toLowerCase()); });\n        }\n        return items;\n    }, [user === null || user === void 0 ? void 0 : user.closet, selectedCategory, filterType, filterColor, filterBrand]);\n    // Get wishlist items\n    const wishlistItems = useCallback(() => {\n        var _a;\n        if (!((_a = user === null || user === void 0 ? void 0 : user.feedback) === null || _a === void 0 ? void 0 : _a.likedItems))\n            return [];\n        // In a real implementation, fetch the actual wishlist items\n        // For now, just pretend that likedItems are the wishlist\n        return user.feedback.likedItems.map(id => {\n            // This would actually fetch the item data from a store\n            return {\n                id,\n                name: \"Wishlist Item\",\n                imageUrl: \"\",\n                favorite: true\n            };\n        });\n    }, [(_a = user === null || user === void 0 ? void 0 : user.feedback) === null || _a === void 0 ? void 0 : _a.likedItems]);\n    // Extract categories from user's closet\n    useEffect(() => {\n        if (user === null || user === void 0 ? void 0 : user.closet) {\n            const uniqueCategories = new Set(user.closet.map(item => item.category));\n            const categoryList = [\n                { id: 'all', name: 'All Items' },\n                { id: 'favorites', name: 'Favorites' },\n                ...Array.from(uniqueCategories).map(category => ({\n                    id: category,\n                    name: category.charAt(0).toUpperCase() + category.slice(1)\n                }))\n            ];\n            setCategories(categoryList);\n        }\n    }, [user === null || user === void 0 ? void 0 : user.closet]);\n    // Handle drag start\n    const handleDragStart = (index) => {\n        dragItemRef.current = index;\n    };\n    // Handle drag over\n    const handleDragOver = (index) => {\n        dragOverItemRef.current = index;\n    };\n    // Handle drop to reorder items\n    const handleDrop = () => {\n        if (dragItemRef.current === null || dragOverItemRef.current === null)\n            return;\n        const _items = [...filteredItems()];\n        const dragItem = _items[dragItemRef.current];\n        // Remove the dragged item\n        _items.splice(dragItemRef.current, 1);\n        // Insert at the destination\n        _items.splice(dragOverItemRef.current, 0, dragItem);\n        // In a real implementation, this would update the order in the store\n        // For now, just console log the reordering\n        console.log('Items reordered:', _items);\n        // Reset refs\n        dragItemRef.current = null;\n        dragOverItemRef.current = null;\n    };\n    // Handle file upload for new closet item\n    const handleFileUpload = useCallback((file) => __awaiter(void 0, void 0, void 0, function* () {\n        setIsUploading(true);\n        try {\n            // Create URL for the image file\n            const imageUrl = URL.createObjectURL(file);\n            // Set the image URL in the new item data\n            setNewItem(prev => (Object.assign(Object.assign({}, prev), { imageUrl })));\n            // Move to the final step\n            setCurrentStep(AddItemStep.CONFIRM_DETAILS);\n            // Automatically detect category, color, etc. here\n            // For now, we'll use a mock detection service\n            yield detectClothingAttributes(file);\n        }\n        catch (error) {\n            console.error('Error uploading file:', error);\n        }\n        finally {\n            setIsUploading(false);\n        }\n    }), []);\n    // Mock function to detect clothing attributes\n    const detectClothingAttributes = (file) => __awaiter(void 0, void 0, void 0, function* () {\n        // In a real implementation, this would call a machine learning model\n        // For now, we'll simulate a response after a short delay\n        yield new Promise(resolve => setTimeout(resolve, 1000));\n        // Mock detection results\n        const detectedCategory = ['tops', 'bottoms', 'shoes', 'accessories'][Math.floor(Math.random() * 4)];\n        let detectedSubcategory = '';\n        if (detectedCategory === 'tops') {\n            detectedSubcategory = ['t-shirt', 'blouse', 'sweater', 'jacket'][Math.floor(Math.random() * 4)];\n        }\n        else if (detectedCategory === 'bottoms') {\n            detectedSubcategory = ['jeans', 'skirt', 'shorts', 'slacks'][Math.floor(Math.random() * 4)];\n        }\n        else if (detectedCategory === 'shoes') {\n            detectedSubcategory = ['sneakers', 'heels', 'boots', 'sandals'][Math.floor(Math.random() * 4)];\n        }\n        const colors = ['black', 'white', 'blue', 'red', 'green', 'yellow', 'purple', 'pink', 'grey', 'brown'];\n        const detectedColor = colors[Math.floor(Math.random() * colors.length)];\n        // Update the new item with detected attributes\n        setNewItem(prev => (Object.assign(Object.assign({}, prev), { category: detectedCategory, subcategory: detectedSubcategory, color: detectedColor })));\n    });\n    // Handle changes in the new item form\n    const handleInputChange = useCallback((e) => {\n        const { name, value } = e.target;\n        setNewItem(prev => (Object.assign(Object.assign({}, prev), { [name]: value })));\n    }, []);\n    // Handle tag input\n    const handleTagInput = useCallback((e) => {\n        var _a;\n        if (e.key === 'Enter' || e.key === ',') {\n            e.preventDefault();\n            const input = e.target;\n            const tag = input.value.trim();\n            if (tag && !((_a = newItem.tags) === null || _a === void 0 ? void 0 : _a.includes(tag))) {\n                setNewItem(prev => (Object.assign(Object.assign({}, prev), { tags: [...(prev.tags || []), tag] })));\n                input.value = '';\n            }\n        }\n    }, [newItem.tags]);\n    // Remove a tag\n    const removeTag = useCallback((tagToRemove) => {\n        setNewItem(prev => {\n            var _a;\n            return (Object.assign(Object.assign({}, prev), { tags: ((_a = prev.tags) === null || _a === void 0 ? void 0 : _a.filter(tag => tag !== tagToRemove)) || [] }));\n        });\n    }, []);\n    // Handle selecting item type\n    const handleSelectType = useCallback((type) => {\n        setNewItem(prev => (Object.assign(Object.assign({}, prev), { category: type })));\n        setCurrentStep(AddItemStep.CHOOSE_COLOR);\n    }, []);\n    // Handle selecting color\n    const handleSelectColor = useCallback((color) => {\n        setNewItem(prev => (Object.assign(Object.assign({}, prev), { color })));\n        setCurrentStep(AddItemStep.SELECT_PATTERN);\n    }, []);\n    // Handle selecting pattern\n    const handleSelectPattern = useCallback((pattern) => {\n        setNewItem(prev => (Object.assign(Object.assign({}, prev), { pattern })));\n        setCurrentStep(AddItemStep.UPLOAD_IMAGE);\n    }, []);\n    // Handle item edit action\n    const handleEditItem = useCallback((itemId) => {\n        const itemToEdit = user === null || user === void 0 ? void 0 : user.closet.find(item => item.id === itemId);\n        if (itemToEdit) {\n            setEditingItem(itemId);\n            setNewItem({\n                category: itemToEdit.category,\n                subcategory: itemToEdit.subcategory || '',\n                color: itemToEdit.color,\n                pattern: itemToEdit.pattern || '',\n                brand: itemToEdit.brand || '',\n                size: itemToEdit.size || '',\n                imageUrl: itemToEdit.imageUrl,\n                tags: itemToEdit.tags || []\n            });\n            setShowUploader(true);\n            setCurrentStep(AddItemStep.CONFIRM_DETAILS);\n        }\n    }, [user === null || user === void 0 ? void 0 : user.closet]);\n    // Export closet data\n    const exportClosetData = useCallback(() => {\n        if (!(user === null || user === void 0 ? void 0 : user.closet))\n            return;\n        const dataStr = JSON.stringify(user.closet);\n        const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\n        const exportFileDefaultName = 'my-closet-data.json';\n        const linkElement = document.createElement('a');\n        linkElement.setAttribute('href', dataUri);\n        linkElement.setAttribute('download', exportFileDefaultName);\n        linkElement.click();\n    }, [user === null || user === void 0 ? void 0 : user.closet]);\n    // Import closet data\n    const importClosetData = useCallback((event) => {\n        const fileReader = new FileReader();\n        if (event.target.files && event.target.files.length > 0) {\n            fileReader.readAsText(event.target.files[0], \"UTF-8\");\n            fileReader.onload = e => {\n                var _a;\n                try {\n                    const content = (_a = e.target) === null || _a === void 0 ? void 0 : _a.result;\n                    if (typeof content === 'string') {\n                        const parsedItems = JSON.parse(content);\n                        // Here you would add these items to the user's closet\n                        console.log('Imported items:', parsedItems);\n                    }\n                }\n                catch (error) {\n                    console.error('Error parsing imported file:', error);\n                }\n            };\n        }\n    }, []);\n    // Save the new item to the user's closet\n    const saveNewItem = useCallback(() => {\n        if (newItem.category && newItem.color && newItem.imageUrl) {\n            const newItemData = {\n                category: newItem.category,\n                subcategory: newItem.subcategory || undefined,\n                color: newItem.color,\n                pattern: newItem.pattern || undefined,\n                brand: newItem.brand || undefined,\n                size: newItem.size || undefined,\n                imageUrl: newItem.imageUrl,\n                tags: newItem.tags || []\n            };\n            if (editingItem) {\n                // Update existing item\n                const updatedItem = Object.assign(Object.assign({}, user === null || user === void 0 ? void 0 : user.closet.find(item => item.id === editingItem)), newItemData);\n                // In a real implementation, this would update the item\n                console.log('Updating item:', updatedItem);\n                // Reset editing state\n                setEditingItem(null);\n            }\n            else {\n                // Create new item\n                const item = Object.assign(Object.assign({ id: `closet_${Date.now()}` }, newItemData), { dateAdded: new Date(), favorite: false });\n                addToCloset(item);\n            }\n            // Reset the form and close the uploader\n            setNewItem({\n                category: '',\n                subcategory: '',\n                color: '',\n                pattern: '',\n                brand: '',\n                size: '',\n                tags: []\n            });\n            setShowUploader(false);\n            setCurrentStep(AddItemStep.SELECT_TYPE);\n        }\n    }, [newItem, addToCloset, editingItem, user === null || user === void 0 ? void 0 : user.closet]);\n    // Toggle favorite status of a closet item\n    const handleToggleFavorite = useCallback((itemId, isFavorite) => {\n        toggleItemFavorite(itemId, isFavorite);\n    }, [toggleItemFavorite]);\n    // Remove item from closet\n    const handleRemoveItem = useCallback((itemId) => {\n        if (window.confirm('Are you sure you want to remove this item from your closet?')) {\n            removeFromCloset(itemId);\n        }\n    }, [removeFromCloset]);\n    // Handle adding item to outfit\n    const handleAddToOutfit = useCallback((item) => {\n        if (onAddToOutfit) {\n            onAddToOutfit(item);\n        }\n    }, [onAddToOutfit]);\n    // Render the current step of the add item flow\n    const renderAddItemStep = () => {\n        var _a;\n        switch (currentStep) {\n            case AddItemStep.SELECT_TYPE:\n                return (_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__item-type-selector\" }, { children: [_jsx(\"h3\", { children: \"Select Item Type\" }), _jsx(\"div\", Object.assign({ className: \"stylist-my-closet__type-grid\" }, { children: ['tops', 'bottoms', 'dresses', 'outerwear', 'shoes', 'accessories'].map(type => (_jsxs(\"button\", Object.assign({ className: \"stylist-my-closet__type-btn\", onClick: () => handleSelectType(type) }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-my-closet__type-icon\" }, { children: type.charAt(0).toUpperCase() })), _jsx(\"span\", { children: type.charAt(0).toUpperCase() + type.slice(1) })] }), type))) })), _jsx(\"button\", Object.assign({ className: \"stylist-my-closet__cancel-btn\", onClick: () => {\n                                setShowUploader(false);\n                                setCurrentStep(AddItemStep.SELECT_TYPE);\n                            } }, { children: \"Cancel\" }))] })));\n            case AddItemStep.CHOOSE_COLOR:\n                return (_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__color-selector\" }, { children: [_jsx(\"h3\", { children: \"Choose Color\" }), _jsx(\"div\", Object.assign({ className: \"stylist-my-closet__color-palette\" }, { children: ['black', 'white', 'red', 'blue', 'green', 'yellow', 'purple', 'pink', 'orange', 'brown', 'grey'].map(color => (_jsx(\"button\", { className: \"stylist-my-closet__color-btn\", style: { backgroundColor: color }, onClick: () => handleSelectColor(color), \"aria-label\": color }, color))) })), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__step-nav\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-my-closet__back-btn\", onClick: () => setCurrentStep(AddItemStep.SELECT_TYPE) }, { children: \"Back\" })), _jsx(\"button\", Object.assign({ className: \"stylist-my-closet__cancel-btn\", onClick: () => {\n                                        setShowUploader(false);\n                                        setCurrentStep(AddItemStep.SELECT_TYPE);\n                                    } }, { children: \"Cancel\" }))] }))] })));\n            case AddItemStep.SELECT_PATTERN:\n                return (_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__pattern-selector\" }, { children: [_jsx(\"h3\", { children: \"Select Pattern\" }), _jsx(\"div\", Object.assign({ className: \"stylist-my-closet__pattern-grid\" }, { children: ['solid', 'striped', 'plaid', 'floral', 'polka-dot', 'check', 'geometric', 'animal-print'].map(pattern => (_jsx(\"button\", Object.assign({ className: \"stylist-my-closet__pattern-btn\", onClick: () => handleSelectPattern(pattern) }, { children: _jsx(\"span\", { children: pattern.charAt(0).toUpperCase() + pattern.slice(1) }) }), pattern))) })), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__step-nav\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-my-closet__back-btn\", onClick: () => setCurrentStep(AddItemStep.CHOOSE_COLOR) }, { children: \"Back\" })), _jsx(\"button\", Object.assign({ className: \"stylist-my-closet__cancel-btn\", onClick: () => {\n                                        setShowUploader(false);\n                                        setCurrentStep(AddItemStep.SELECT_TYPE);\n                                    } }, { children: \"Cancel\" }))] }))] })));\n            case AddItemStep.UPLOAD_IMAGE:\n                return (_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__image-uploader\" }, { children: [_jsx(\"h3\", { children: \"Upload Image\" }), _jsx(ImageUploader, { onUpload: handleFileUpload, title: \"Upload Clothing Item\", description: \"Take a photo or upload an image of your clothing item\" }), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__step-nav\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-my-closet__back-btn\", onClick: () => setCurrentStep(AddItemStep.SELECT_PATTERN) }, { children: \"Back\" })), _jsx(\"button\", Object.assign({ className: \"stylist-my-closet__cancel-btn\", onClick: () => {\n                                        setShowUploader(false);\n                                        setCurrentStep(AddItemStep.SELECT_TYPE);\n                                    } }, { children: \"Cancel\" }))] }))] })));\n            case AddItemStep.CONFIRM_DETAILS:\n                return (_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__new-item-form\" }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-my-closet__preview\" }, { children: _jsx(AdaptiveImage, { src: newItem.imageUrl || '', alt: \"New item preview\", loadingPriority: \"high\", quality: \"medium\" }) })), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__form-fields\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__form-group\" }, { children: [_jsx(\"label\", Object.assign({ htmlFor: \"category\" }, { children: \"Category *\" })), _jsxs(\"select\", Object.assign({ id: \"category\", name: \"category\", value: newItem.category, onChange: handleInputChange, required: true }, { children: [_jsx(\"option\", Object.assign({ value: \"\" }, { children: \"Select category\" })), _jsx(\"option\", Object.assign({ value: \"tops\" }, { children: \"Tops\" })), _jsx(\"option\", Object.assign({ value: \"bottoms\" }, { children: \"Bottoms\" })), _jsx(\"option\", Object.assign({ value: \"dresses\" }, { children: \"Dresses\" })), _jsx(\"option\", Object.assign({ value: \"outerwear\" }, { children: \"Outerwear\" })), _jsx(\"option\", Object.assign({ value: \"shoes\" }, { children: \"Shoes\" })), _jsx(\"option\", Object.assign({ value: \"accessories\" }, { children: \"Accessories\" }))] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__form-group\" }, { children: [_jsx(\"label\", Object.assign({ htmlFor: \"subcategory\" }, { children: \"Subcategory\" })), _jsx(\"input\", { type: \"text\", id: \"subcategory\", name: \"subcategory\", value: newItem.subcategory || '', onChange: handleInputChange, placeholder: \"E.g. T-shirt, Jeans, etc.\" })] })), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__form-group\" }, { children: [_jsx(\"label\", Object.assign({ htmlFor: \"color\" }, { children: \"Color *\" })), _jsx(\"input\", { type: \"text\", id: \"color\", name: \"color\", value: newItem.color, onChange: handleInputChange, required: true, placeholder: \"E.g. Blue, Black, etc.\" })] })), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__form-group\" }, { children: [_jsx(\"label\", Object.assign({ htmlFor: \"pattern\" }, { children: \"Pattern\" })), _jsx(\"input\", { type: \"text\", id: \"pattern\", name: \"pattern\", value: newItem.pattern || '', onChange: handleInputChange, placeholder: \"E.g. Solid, Striped, etc.\" })] })), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__form-group\" }, { children: [_jsx(\"label\", Object.assign({ htmlFor: \"brand\" }, { children: \"Brand\" })), _jsx(\"input\", { type: \"text\", id: \"brand\", name: \"brand\", value: newItem.brand || '', onChange: handleInputChange, placeholder: \"E.g. Nike, Zara, etc.\" })] })), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__form-group\" }, { children: [_jsx(\"label\", Object.assign({ htmlFor: \"size\" }, { children: \"Size\" })), _jsx(\"input\", { type: \"text\", id: \"size\", name: \"size\", value: newItem.size || '', onChange: handleInputChange, placeholder: \"E.g. S, M, L, 10, etc.\" })] })), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__form-group\" }, { children: [_jsx(\"label\", Object.assign({ htmlFor: \"tags\" }, { children: \"Tags\" })), _jsx(\"input\", { type: \"text\", id: \"tags\", onKeyDown: handleTagInput, placeholder: \"Add tags (press Enter or comma to add)\" }), _jsx(\"div\", Object.assign({ className: \"stylist-my-closet__tags\" }, { children: (_a = newItem.tags) === null || _a === void 0 ? void 0 : _a.map(tag => (_jsxs(\"span\", Object.assign({ className: \"stylist-my-closet__tag\" }, { children: [tag, _jsx(\"button\", Object.assign({ type: \"button\", onClick: () => removeTag(tag), className: \"stylist-my-closet__tag-remove\" }, { children: \"\\u00D7\" }))] }), tag))) }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__form-actions\" }, { children: [currentStep > AddItemStep.SELECT_TYPE && (_jsx(\"button\", Object.assign({ type: \"button\", className: \"stylist-my-closet__back-btn\", onClick: () => {\n                                                // Calculate previous step safely\n                                                const prevStep = currentStep - 1;\n                                                // Ensure it's a valid enum value\n                                                if (isAddItemStep(prevStep)) {\n                                                    setCurrentStep(prevStep);\n                                                }\n                                                else {\n                                                    // Fallback to first step if not valid\n                                                    setCurrentStep(AddItemStep.SELECT_TYPE);\n                                                }\n                                            } }, { children: \"Back\" }))), _jsx(\"button\", Object.assign({ type: \"button\", className: \"stylist-my-closet__cancel-btn\", onClick: () => {\n                                                setNewItem({\n                                                    category: '',\n                                                    subcategory: '',\n                                                    color: '',\n                                                    pattern: '',\n                                                    brand: '',\n                                                    size: '',\n                                                    tags: []\n                                                });\n                                                setShowUploader(false);\n                                                setCurrentStep(AddItemStep.SELECT_TYPE);\n                                            } }, { children: \"Cancel\" })), _jsx(\"button\", Object.assign({ type: \"button\", className: \"stylist-my-closet__save-btn\", onClick: saveNewItem, disabled: !newItem.category || !newItem.color }, { children: editingItem ? 'Update Item' : 'Save Item' }))] }))] }))] })));\n            default:\n                return null;\n        }\n    };\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__header\" }, { children: [_jsx(\"h2\", { children: \"My Wardrobe\" }), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__actions\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__import-export\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-my-closet__export-btn\", onClick: exportClosetData, title: \"Export closet data\" }, { children: \"Export\" })), _jsxs(\"label\", Object.assign({ className: \"stylist-my-closet__import-btn\" }, { children: [\"Import\", _jsx(\"input\", { type: \"file\", accept: \".json\", onChange: importClosetData, style: { display: 'none' } })] }))] })), _jsx(\"button\", Object.assign({ className: \"stylist-my-closet__add-btn\", id: \"openClosetUpload\", onClick: () => {\n                                    setShowUploader(true);\n                                    setCurrentStep(AddItemStep.SELECT_TYPE);\n                                    setEditingItem(null);\n                                } }, { children: \"Add Item\" }))] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__view-selector\" }, { children: [_jsx(\"button\", Object.assign({ className: `stylist-my-closet__view-btn ${activeView === 'wishlist' ? 'active' : ''}`, onClick: () => setActiveView('wishlist') }, { children: \"My Wishlist\" })), _jsx(\"button\", Object.assign({ className: `stylist-my-closet__view-btn ${activeView === 'closet' ? 'active' : ''}`, onClick: () => setActiveView('closet') }, { children: \"My Closet\" }))] })), activeView === 'closet' && (_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__filters\" }, { children: [_jsx(\"div\", Object.assign({ className: \"stylist-my-closet__categories\" }, { children: categories.map(category => (_jsx(\"button\", Object.assign({ className: `stylist-my-closet__category-btn ${selectedCategory === category.id ? 'active' : ''}`, onClick: () => setSelectedCategory(category.id) }, { children: category.name }), category.id))) })), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__filter-controls\" }, { children: [_jsx(\"input\", { type: \"text\", placeholder: \"Filter by type...\", value: filterType, onChange: (e) => setFilterType(e.target.value), className: \"stylist-my-closet__filter-input\" }), _jsx(\"input\", { type: \"text\", placeholder: \"Filter by color...\", value: filterColor, onChange: (e) => setFilterColor(e.target.value), className: \"stylist-my-closet__filter-input\" }), _jsx(\"input\", { type: \"text\", placeholder: \"Filter by brand...\", value: filterBrand, onChange: (e) => setFilterBrand(e.target.value), className: \"stylist-my-closet__filter-input\" })] }))] }))), showUploader ? (_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__uploader\" }, { children: [_jsx(\"h3\", { children: editingItem ? 'Edit Item' : 'Add New Item' }), renderAddItemStep()] }))) : (_jsx(_Fragment, { children: activeView === 'wishlist' ? (_jsx(\"div\", Object.assign({ className: \"stylist-my-closet__wishlist-grid\" }, { children: wishlistItems().length > 0 ? (wishlistItems().map((item, index) => (_jsx(\"div\", Object.assign({ className: \"stylist-my-closet__item\", draggable: true, onDragStart: () => handleDragStart(index), onDragOver: () => handleDragOver(index), onDrop: handleDrop }, { children: _jsx(ItemCard, { item: {\n                                id: item.id,\n                                name: item.name || 'Wishlist Item',\n                                brand: '',\n                                price: 0,\n                                image: item.imageUrl || ''\n                            }, isClosetItem: true, isFavorite: true, onRemove: () => handleRemoveItem(item.id) }) }), item.id)))) : (_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__empty\" }, { children: [_jsx(\"p\", { children: \"No items in your wishlist yet.\" }), _jsx(\"p\", { children: \"Items you like will appear here.\" })] }))) }))) : (_jsx(\"div\", Object.assign({ className: \"stylist-my-closet__grid\" }, { children: filteredItems().length > 0 ? (filteredItems().map((item, index) => (_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__item\", draggable: true, onDragStart: () => handleDragStart(index), onDragOver: () => handleDragOver(index), onDrop: handleDrop }, { children: [_jsx(ItemCard, { item: {\n                                    id: item.id,\n                                    name: item.subcategory || item.category,\n                                    brand: item.brand || '',\n                                    price: 0,\n                                    image: item.imageUrl || ''\n                                }, isClosetItem: true, onFavorite: (isFavorite) => handleToggleFavorite(item.id, isFavorite), isFavorite: item.favorite, onRemove: () => handleRemoveItem(item.id), onClick: () => onSelectItem && onSelectItem(item) }), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__item-actions\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-my-closet__edit-btn\", onClick: () => handleEditItem(item.id) }, { children: \"Edit\" })), isBuilderMode && (_jsx(\"button\", Object.assign({ className: \"stylist-my-closet__add-to-outfit-btn\", onClick: () => handleAddToOutfit(item) }, { children: \"Add to Outfit\" })))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__item-details\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__item-category\" }, { children: [item.category, item.subcategory && ` • ${item.subcategory}`] })), item.color && (_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__item-color\" }, { children: [_jsx(\"span\", { className: \"stylist-my-closet__color-swatch\", style: { backgroundColor: item.color } }), item.color, item.pattern && ` (${item.pattern})`] }))), item.brand && (_jsx(\"div\", Object.assign({ className: \"stylist-my-closet__item-brand\" }, { children: item.brand }))), item.size && (_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__item-size\" }, { children: [\"Size: \", item.size] })))] }))] }), item.id)))) : (_jsxs(\"div\", Object.assign({ className: \"stylist-my-closet__empty\" }, { children: [_jsx(\"p\", { children: \"No items in your closet yet.\" }), _jsx(\"button\", Object.assign({ className: \"stylist-my-closet__add-first-btn\", onClick: () => {\n                                    setShowUploader(true);\n                                    setCurrentStep(AddItemStep.SELECT_TYPE);\n                                } }, { children: \"Add Your First Item\" }))] }))) }))) }))] })));\n};\nexport default MyCloset;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport ItemCard from '@/components/ItemCard';\nimport './SocialProofRenderer.scss';\nconst SocialProofRenderer = ({ items, onItemFeedback, onAddToWishlist, onAddToCart, primaryColor, isExpanded = false, onToggleExpand }) => {\n    // Limit display to top 3 items if not expanded\n    const displayItems = isExpanded ? items : items.slice(0, 3);\n    return (_jsxs(\"div\", Object.assign({ className: \"social-proof-renderer\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"social-proof-renderer__header\" }, { children: [_jsxs(\"h3\", Object.assign({ className: \"social-proof-renderer__title\" }, { children: [_jsx(\"span\", Object.assign({ className: \"social-proof-renderer__icon\" }, { children: \"\\u2728\" })), \"Celebrity Inspiration\"] })), _jsx(\"p\", Object.assign({ className: \"social-proof-renderer__subtitle\" }, { children: \"Get the looks worn by your favorite celebrities\" }))] })), _jsx(\"div\", Object.assign({ className: \"social-proof-renderer__content\" }, { children: displayItems.map((socialProofItem) => (_jsxs(\"div\", Object.assign({ className: \"social-proof-renderer__item\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"social-proof-renderer__celebrity-info\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"social-proof-renderer__celebrity-header\" }, { children: [_jsx(\"h4\", Object.assign({ className: \"social-proof-renderer__celebrity-name\" }, { children: socialProofItem.celebrity })), _jsx(\"span\", Object.assign({ className: \"social-proof-renderer__event\" }, { children: socialProofItem.event }))] })), _jsx(\"div\", Object.assign({ className: \"social-proof-renderer__outfit-description\" }, { children: socialProofItem.outfitTags.map((tag, index) => (_jsx(\"span\", Object.assign({ className: \"social-proof-renderer__outfit-tag\", style: { borderColor: primaryColor } }, { children: tag }), index))) })), (socialProofItem.colors || socialProofItem.patterns) && (_jsxs(\"div\", Object.assign({ className: \"social-proof-renderer__style-details\" }, { children: [socialProofItem.colors && (_jsx(\"div\", Object.assign({ className: \"social-proof-renderer__colors\" }, { children: socialProofItem.colors.map((color, idx) => (_jsx(\"span\", Object.assign({ className: \"social-proof-renderer__color-badge\", style: { backgroundColor: getColorCode(color) } }, { children: color }), idx))) }))), socialProofItem.patterns && (_jsx(\"div\", Object.assign({ className: \"social-proof-renderer__patterns\" }, { children: socialProofItem.patterns.map((pattern, idx) => (_jsx(\"span\", Object.assign({ className: \"social-proof-renderer__pattern-badge\", style: { color: primaryColor } }, { children: pattern }), idx))) })))] })))] })), _jsx(\"div\", Object.assign({ className: \"social-proof-renderer__products\" }, { children: socialProofItem.matchedProducts.map((product) => (_jsx(ItemCard, { item: {\n                                    id: product.id,\n                                    name: product.name,\n                                    brand: product.brand,\n                                    price: product.price,\n                                    imageUrls: [product.imageUrl],\n                                    category: product.category,\n                                    matchScore: product.matchScore || 0,\n                                    matchReasons: product.matchReasons || [],\n                                    url: '#',\n                                    retailerId: 'demo_retailer',\n                                    colors: [],\n                                    sizes: [],\n                                    inStock: true,\n                                    description: product.description || '',\n                                    salePrice: undefined, // Add missing property\n                                }, onFeedback: onItemFeedback, onAddToWishlist: (itemId) => onAddToWishlist && onAddToWishlist(product), onAddToCart: (itemId) => onAddToCart && onAddToCart(product), showDetails: true, primaryColor: primaryColor }, product.id))) })), socialProofItem.matchedProducts.length === 0 && (_jsx(\"div\", Object.assign({ className: \"social-proof-renderer__no-matches\" }, { children: _jsx(\"p\", { children: \"No matching products found for this look\" }) })))] }), socialProofItem.id))) })), items.length > 3 && (_jsx(\"button\", Object.assign({ className: \"social-proof-renderer__toggle\", onClick: onToggleExpand, style: { borderColor: primaryColor, color: primaryColor } }, { children: isExpanded ? 'Show Less' : `View All ${items.length} Celebrity Looks` }))), items.length === 0 && (_jsx(\"div\", Object.assign({ className: \"social-proof-renderer__empty\" }, { children: _jsx(\"p\", { children: \"Loading celebrity style inspiration...\" }) })))] })));\n};\n// Helper function to get color codes for color badges\nfunction getColorCode(colorName) {\n    const colorMap = {\n        'black': '#000000',\n        'white': '#FFFFFF',\n        'red': '#FF0000',\n        'blue': '#0000FF',\n        'green': '#008000',\n        'yellow': '#FFFF00',\n        'purple': '#800080',\n        'pink': '#FFC0CB',\n        'grey': '#808080',\n        'brown': '#A52A2A',\n        'navy': '#000080',\n        'burgundy': '#800020',\n        'beige': '#F5F5DC',\n        'cream': '#FFFDD0',\n        'silver': '#C0C0C0',\n        'gold': '#FFD700',\n        'off-white': '#F5F5F5'\n    };\n    return colorMap[colorName.toLowerCase()] || '#888888';\n}\nexport default SocialProofRenderer;\n","// src/components/StyleQuiz/utils/StyleQuizResultsProcessor.ts\n/**\n * Processes style quiz answers and generates a complete user style profile\n */\nexport class StyleQuizResultsProcessor {\n    constructor(answers, questions) {\n        this.answers = answers;\n        this.questions = questions;\n    }\n    /**\n     * Get answer for a specific question\n     */\n    getAnswerForQuestion(questionId) {\n        return this.answers.find(a => a.questionId === questionId);\n    }\n    /**\n     * Get question by ID\n     */\n    getQuestion(questionId) {\n        return this.questions.find(q => q.id === questionId);\n    }\n    /**\n     * Get option text for a given answer\n     */\n    getOptionText(questionId, optionId) {\n        const question = this.getQuestion(questionId);\n        if (!question || !question.options)\n            return '';\n        const option = question.options.find(o => o.id === optionId);\n        return (option === null || option === void 0 ? void 0 : option.text) || '';\n    }\n    /**\n     * Get option value for a given answer\n     */\n    getOptionValue(questionId, optionId) {\n        const question = this.getQuestion(questionId);\n        if (!question || !question.options)\n            return '';\n        const option = question.options.find(o => o.id === optionId);\n        return (option === null || option === void 0 ? void 0 : option.value) || '';\n    }\n    /**\n     * Process all style preferences (from question 2)\n     */\n    getStylePreferences() {\n        const styleAnswer = this.getAnswerForQuestion('q2');\n        if (!styleAnswer || !styleAnswer.answerId)\n            return [];\n        // Primary style (main selection)\n        const primaryStyle = {\n            style: String(this.getOptionValue('q2', styleAnswer.answerId)),\n            weight: 1.0\n        };\n        // For now, we only have the primary style\n        // Future enhancement: derive secondary styles based on other answers\n        return [primaryStyle];\n    }\n    /**\n     * Process all color preferences (from question 6)\n     */\n    getColorPreferences() {\n        const colorAnswer = this.getAnswerForQuestion('q6');\n        if (!colorAnswer || !colorAnswer.answerId)\n            return [];\n        // Primary color palette\n        const primaryColor = {\n            color: String(this.getOptionValue('q6', colorAnswer.answerId)),\n            weight: 1.0\n        };\n        return [primaryColor];\n    }\n    /**\n     * Process all size preferences from various size questions\n     */\n    getSizePreferences() {\n        const preferences = [];\n        // Top size (q3)\n        const topSizeAnswer = this.getAnswerForQuestion('q3');\n        if (topSizeAnswer && topSizeAnswer.answerId) {\n            preferences.push({\n                category: 'tops',\n                size: String(this.getOptionValue('q3', topSizeAnswer.answerId))\n            });\n        }\n        // Bottom size (q4)\n        const bottomSizeAnswer = this.getAnswerForQuestion('q4');\n        if (bottomSizeAnswer && bottomSizeAnswer.answerId) {\n            preferences.push({\n                category: 'bottoms',\n                size: String(this.getOptionValue('q4', bottomSizeAnswer.answerId))\n            });\n        }\n        // Shoe size (q5)\n        const shoeSizeAnswer = this.getAnswerForQuestion('q5');\n        if (shoeSizeAnswer && shoeSizeAnswer.answerId) {\n            preferences.push({\n                category: 'shoes',\n                size: String(this.getOptionValue('q5', shoeSizeAnswer.answerId))\n            });\n        }\n        return preferences;\n    }\n    /**\n     * Get occasions user is interested in (from question 11)\n     */\n    getOccasionPreferences() {\n        const occasionAnswer = this.getAnswerForQuestion('q11');\n        if (!occasionAnswer || !occasionAnswer.answerIds)\n            return [];\n        // Extract values for selected occasions\n        return occasionAnswer.answerIds.map(id => String(this.getOptionValue('q11', id)));\n    }\n    /**\n     * Get favorite brands from brand questions (18, 19, 20)\n     */\n    getFavoriteBrands() {\n        const brands = [];\n        // Casual brands (q18)\n        const casualBrandsAnswer = this.getAnswerForQuestion('q18');\n        if (casualBrandsAnswer && casualBrandsAnswer.answerIds) {\n            casualBrandsAnswer.answerIds.forEach(id => {\n                if (id !== 'other_casual') {\n                    brands.push(String(this.getOptionValue('q18', id)));\n                }\n            });\n        }\n        // Athletic brands (q19)\n        const athleticBrandsAnswer = this.getAnswerForQuestion('q19');\n        if (athleticBrandsAnswer && athleticBrandsAnswer.answerIds) {\n            athleticBrandsAnswer.answerIds.forEach(id => {\n                if (id !== 'other_athletic') {\n                    brands.push(String(this.getOptionValue('q19', id)));\n                }\n            });\n        }\n        // Luxury brands (q20)\n        const luxuryBrandsAnswer = this.getAnswerForQuestion('q20');\n        if (luxuryBrandsAnswer && luxuryBrandsAnswer.answerIds) {\n            luxuryBrandsAnswer.answerIds.forEach(id => {\n                if (id !== 'none' && id !== 'other_luxury') {\n                    brands.push(String(this.getOptionValue('q20', id)));\n                }\n            });\n        }\n        // Remove duplicates\n        return [...new Set(brands)];\n    }\n    /**\n     * Get price range from budget slider (q16)\n     */\n    getPriceRange() {\n        const budgetAnswer = this.getAnswerForQuestion('q16');\n        if (!budgetAnswer || budgetAnswer.answerValue === undefined) {\n            return {};\n        }\n        const target = budgetAnswer.answerValue;\n        // Create a range around the target value (±25%)\n        return {\n            min: Math.max(0, Math.floor(target * 0.75)),\n            max: Math.ceil(target * 1.25),\n            target\n        };\n    }\n    /**\n     * Get preferred patterns (q7)\n     */\n    getPatternPreferences() {\n        const patternAnswer = this.getAnswerForQuestion('q7');\n        if (!patternAnswer || !patternAnswer.answerIds)\n            return [];\n        return patternAnswer.answerIds.map(id => String(this.getOptionValue('q7', id)));\n    }\n    /**\n     * Get preferred fabrics (q10)\n     */\n    getFabricPreferences() {\n        const fabricAnswer = this.getAnswerForQuestion('q10');\n        if (!fabricAnswer || !fabricAnswer.answerIds)\n            return [];\n        return fabricAnswer.answerIds.map(id => String(this.getOptionValue('q10', id)));\n    }\n    /**\n     * Get fit preferences (q8 and q9)\n     */\n    getFitPreferences() {\n        const fitPreferences = {};\n        // Top fit (q8)\n        const topFitAnswer = this.getAnswerForQuestion('q8');\n        if (topFitAnswer && topFitAnswer.answerId) {\n            fitPreferences.topFit = String(this.getOptionValue('q8', topFitAnswer.answerId));\n        }\n        // Bottom fit (q9)\n        const bottomFitAnswer = this.getAnswerForQuestion('q9');\n        if (bottomFitAnswer && bottomFitAnswer.answerId) {\n            fitPreferences.bottomFit = String(this.getOptionValue('q9', bottomFitAnswer.answerId));\n        }\n        return fitPreferences;\n    }\n    /**\n     * Get preferred celebrities (q21 and q22)\n     */\n    getCelebrityPreferences() {\n        const celebrities = [];\n        // Modern celebrities (q21)\n        const modernCelebrityAnswer = this.getAnswerForQuestion('q21');\n        if (modernCelebrityAnswer && modernCelebrityAnswer.answerId) {\n            celebrities.push(String(this.getOptionValue('q21', modernCelebrityAnswer.answerId)));\n        }\n        // Classic celebrities (q22)\n        const classicCelebrityAnswer = this.getAnswerForQuestion('q22');\n        if (classicCelebrityAnswer && classicCelebrityAnswer.answerId) {\n            celebrities.push(String(this.getOptionValue('q22', classicCelebrityAnswer.answerId)));\n        }\n        return celebrities;\n    }\n    /**\n     * Get trend approach (q23)\n     */\n    getTrendApproach() {\n        const trendAnswer = this.getAnswerForQuestion('q23');\n        if (!trendAnswer || !trendAnswer.answerId)\n            return null;\n        return String(this.getOptionValue('q23', trendAnswer.answerId));\n    }\n    /**\n     * Get comfort vs style preference (q24)\n     */\n    getComfortStyleBalance() {\n        const comfortStyleAnswer = this.getAnswerForQuestion('q24');\n        if (!comfortStyleAnswer || comfortStyleAnswer.answerValue === undefined)\n            return null;\n        // Returns 0-100 where 0 is maximum comfort and 100 is maximum style\n        return comfortStyleAnswer.answerValue;\n    }\n    /**\n     * Get main style goal (q25)\n     */\n    getStyleGoal() {\n        const goalAnswer = this.getAnswerForQuestion('q25');\n        if (!goalAnswer || !goalAnswer.answerId)\n            return null;\n        return String(this.getOptionValue('q25', goalAnswer.answerId));\n    }\n    /**\n     * Get lifestyle attributes (q12 and q13)\n     */\n    getLifestyleAttributes() {\n        const lifestyle = {};\n        // Work environment (q12)\n        const workAnswer = this.getAnswerForQuestion('q12');\n        if (workAnswer && workAnswer.answerId) {\n            lifestyle.work = String(this.getOptionValue('q12', workAnswer.answerId));\n        }\n        // Activity level (q13)\n        const activityAnswer = this.getAnswerForQuestion('q13');\n        if (activityAnswer && activityAnswer.answerId) {\n            lifestyle.activity = String(this.getOptionValue('q13', activityAnswer.answerId));\n        }\n        // Seasonal preference (q14)\n        const seasonAnswer = this.getAnswerForQuestion('q14');\n        if (seasonAnswer && seasonAnswer.answerId) {\n            lifestyle.preferredSeason = String(this.getOptionValue('q14', seasonAnswer.answerId));\n        }\n        // Layering preference (q15)\n        const layeringAnswer = this.getAnswerForQuestion('q15');\n        if (layeringAnswer && layeringAnswer.answerId) {\n            lifestyle.layering = String(this.getOptionValue('q15', layeringAnswer.answerId));\n        }\n        return lifestyle;\n    }\n    /**\n     * Get shopping habits (q17)\n     */\n    getShoppingHabits() {\n        const shopping = {};\n        // Shopping frequency (q17)\n        const frequencyAnswer = this.getAnswerForQuestion('q17');\n        if (frequencyAnswer && frequencyAnswer.answerId) {\n            shopping.frequency = String(this.getOptionValue('q17', frequencyAnswer.answerId));\n        }\n        return shopping;\n    }\n    /**\n     * Get gender/category preference (q1)\n     */\n    getGenderCategory() {\n        const genderAnswer = this.getAnswerForQuestion('q1');\n        if (!genderAnswer || !genderAnswer.answerId)\n            return null;\n        return String(this.getOptionValue('q1', genderAnswer.answerId));\n    }\n    /**\n     * Main function to generate complete user preferences\n     */\n    generateUserPreferences() {\n        return {\n            stylePreferences: this.getStylePreferences(),\n            colorPreferences: this.getColorPreferences(),\n            sizePreferences: this.getSizePreferences(),\n            priceRange: this.getPriceRange(),\n            favoriteRetailers: this.getFavoriteBrands(),\n            occasionPreferences: this.getOccasionPreferences(),\n            // Additional data not in the base UserPreferences type\n            // but useful for personalization\n            metadata: {\n                genderCategory: this.getGenderCategory(),\n                patternPreferences: this.getPatternPreferences(),\n                fabricPreferences: this.getFabricPreferences(),\n                fitPreferences: this.getFitPreferences(),\n                celebrityInspiration: this.getCelebrityPreferences(),\n                trendApproach: this.getTrendApproach(),\n                comfortStyleBalance: this.getComfortStyleBalance(),\n                styleGoal: this.getStyleGoal(),\n                lifestyle: this.getLifestyleAttributes(),\n                shopping: this.getShoppingHabits()\n            }\n        };\n    }\n    /**\n     * Generate a user-friendly profile summary\n     */\n    generateProfileSummary() {\n        const gender = this.getGenderCategory();\n        const styles = this.getStylePreferences().map(s => s.style).join(', ');\n        const colors = this.getColorPreferences().map(c => c.color).join(', ');\n        const fits = this.getFitPreferences();\n        const budget = this.getPriceRange().target;\n        const occasions = this.getOccasionPreferences().join(', ');\n        const patterns = this.getPatternPreferences().join(', ');\n        const fabrics = this.getFabricPreferences().join(', ');\n        const celebrities = this.getCelebrityPreferences().join(', ');\n        const goal = this.getStyleGoal();\n        return `Your style profile is ${styles} with a preference for ${colors} colors${patterns ? ` and ${patterns} patterns` : ''}.\n    \nYou typically shop in the ${gender} section and prefer ${fits.topFit || 'various'} tops and ${fits.bottomFit || 'various'} bottoms.\n\nYour typical budget is around $${budget || '50-100'} per item, and you're looking for clothes suitable for ${occasions || 'everyday wear'}.\n\nYou gravitate toward ${fabrics || 'comfortable'} fabrics${celebrities ? ` and are inspired by ${celebrities}` : ''}.\n\nYour current style goal is to ${goal || 'refresh your wardrobe'}.`;\n    }\n    /**\n     * Generate initial recommendation categories based on style profile\n     */\n    generateRecommendationCategories() {\n        const categories = [];\n        const gender = this.getGenderCategory();\n        const stylePrefs = this.getStylePreferences();\n        const occasions = this.getOccasionPreferences();\n        // Basic categories based on gender/category\n        if (gender === 'womens' || gender === 'mixed') {\n            categories.push('Women\\'s Clothing');\n        }\n        if (gender === 'mens' || gender === 'mixed') {\n            categories.push('Men\\'s Clothing');\n        }\n        if (gender === 'unisex' || gender === 'mixed') {\n            categories.push('Unisex Clothing');\n        }\n        // Add categories based on style preferences\n        if (stylePrefs.some(s => s.style === 'classic')) {\n            categories.push('Classic Essentials');\n        }\n        if (stylePrefs.some(s => s.style === 'minimalist')) {\n            categories.push('Minimalist Staples');\n        }\n        if (stylePrefs.some(s => s.style === 'trendy')) {\n            categories.push('Trending Now');\n        }\n        if (stylePrefs.some(s => s.style === 'edgy')) {\n            categories.push('Statement Pieces');\n        }\n        if (stylePrefs.some(s => s.style === 'sporty')) {\n            categories.push('Activewear');\n        }\n        if (stylePrefs.some(s => s.style === 'bohemian')) {\n            categories.push('Boho Chic');\n        }\n        // Add occasion-based categories\n        if (occasions.includes('casual')) {\n            categories.push('Everyday Casual');\n        }\n        if (occasions.includes('work')) {\n            categories.push('Workwear');\n        }\n        if (occasions.includes('formal')) {\n            categories.push('Formal Attire');\n        }\n        if (occasions.includes('date')) {\n            categories.push('Date Night');\n        }\n        // Ensure we have at least some categories\n        if (categories.length < 3) {\n            categories.push('Recommended For You');\n            categories.push('Seasonal Essentials');\n        }\n        return categories;\n    }\n    /**\n     * Calculate percentage completion\n     */\n    getCompletionPercentage() {\n        return Math.round((this.answers.length / this.questions.length) * 100);\n    }\n}\nexport default StyleQuizResultsProcessor;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// src/components/StyleQuiz/StyleQuizResults.tsx\nimport { useEffect, useState } from 'react';\nimport StyleQuizResultsProcessor from './utils/StyleQuizResultsProcessor';\nimport './StyleQuizResults.scss';\nconst StyleQuizResults = ({ answers, questions, primaryColor, onRetakeQuiz, onViewRecommendations }) => {\n    const [isLoading, setIsLoading] = useState(true);\n    const [profileSummary, setProfileSummary] = useState('');\n    const [completionPercentage, setCompletionPercentage] = useState(0);\n    const [recommendationCategories, setRecommendationCategories] = useState([]);\n    const [userPreferences, setUserPreferences] = useState(null);\n    useEffect(() => {\n        // Simulate processing time\n        setIsLoading(true);\n        // Process the results\n        const processor = new StyleQuizResultsProcessor(answers, questions);\n        // Give a slight delay to show the loading state\n        setTimeout(() => {\n            try {\n                const preferences = processor.generateUserPreferences();\n                const summary = processor.generateProfileSummary();\n                const categories = processor.generateRecommendationCategories();\n                const completion = processor.getCompletionPercentage();\n                setUserPreferences(preferences);\n                setProfileSummary(summary);\n                setRecommendationCategories(categories);\n                setCompletionPercentage(completion);\n                setIsLoading(false);\n            }\n            catch (error) {\n                console.error('Error generating quiz results:', error);\n                setIsLoading(false);\n            }\n        }, 1200);\n    }, [answers, questions]);\n    const handleViewRecommendations = () => {\n        if (userPreferences) {\n            onViewRecommendations(userPreferences);\n        }\n    };\n    if (isLoading) {\n        return (_jsx(\"div\", Object.assign({ className: \"stylist-style-quiz-results stylist-style-quiz-results--loading\" }, { children: _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz-results__loading\" }, { children: [_jsx(\"div\", { className: \"stylist-style-quiz-results__loading-spinner\" }), _jsx(\"div\", Object.assign({ className: \"stylist-style-quiz-results__loading-text\" }, { children: \"Creating your personalized style profile...\" }))] })) })));\n    }\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz-results\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz-results__header\" }, { children: [_jsx(\"h2\", Object.assign({ className: \"stylist-style-quiz-results__title\" }, { children: \"Your Style Profile\" })), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz-results__completion\" }, { children: [_jsxs(\"span\", { children: [\"Profile Completion: \", completionPercentage, \"%\"] }), _jsx(\"div\", Object.assign({ className: \"stylist-style-quiz-results__completion-bar\" }, { children: _jsx(\"div\", { className: \"stylist-style-quiz-results__completion-bar-fill\", style: { width: `${completionPercentage}%`, backgroundColor: primaryColor } }) }))] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz-results__content\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz-results__profile\" }, { children: [_jsx(\"h3\", { children: \"Style Summary\" }), _jsx(\"div\", Object.assign({ className: \"stylist-style-quiz-results__profile-summary\" }, { children: profileSummary.split('\\n').map((paragraph, index) => (_jsx(\"p\", { children: paragraph }, index))) }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz-results__recommendations\" }, { children: [_jsx(\"h3\", { children: \"Recommended Categories\" }), _jsx(\"div\", Object.assign({ className: \"stylist-style-quiz-results__categories\" }, { children: recommendationCategories.map((category, index) => (_jsx(\"div\", Object.assign({ className: \"stylist-style-quiz-results__category\", style: { borderColor: primaryColor } }, { children: category }), index))) }))] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz-results__actions\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-style-quiz-results__button stylist-style-quiz-results__button--secondary\", onClick: onRetakeQuiz }, { children: \"Retake Quiz\" })), _jsx(\"button\", Object.assign({ className: \"stylist-style-quiz-results__button stylist-style-quiz-results__button--primary\", onClick: handleViewRecommendations, style: { backgroundColor: primaryColor } }, { children: \"View Recommendations\" }))] })), _jsx(\"div\", Object.assign({ className: \"stylist-style-quiz-results__note\" }, { children: _jsx(\"p\", { children: \"Your style profile will be used to personalize recommendations throughout your shopping experience. You can retake the quiz or update your preferences anytime in your account settings.\" }) }))] })));\n};\nexport default StyleQuizResults;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// src/components/StyleQuiz/StyleQuizModal.tsx\nimport { useState, useEffect } from 'react';\nimport './StyleQuizModal.scss';\nimport StyleQuiz, { DEMO_QUESTIONS } from './StyleQuiz';\nimport StyleQuizResults from './StyleQuizResults';\nimport { trackEvent, AnalyticsEventType } from '@/utils/analytics';\nimport { getUserId } from '@/utils/localStorage';\nimport useSyncedStore from '@/hooks/useSyncedStore';\nimport { useUserStore } from '@/store/userStore';\nconst StyleQuizModal = ({ onSubmit, onClose, primaryColor }) => {\n    // Store current answers to track abandonment\n    const [currentAnswers, setCurrentAnswers] = useState([]);\n    const [showResults, setShowResults] = useState(false);\n    const [finalSubmission, setFinalSubmission] = useState(false);\n    // Get user and sync service\n    const userStore = useUserStore();\n    const syncedStore = useSyncedStore();\n    // Wrapped onSubmit to track answers before submitting\n    const handleSubmit = (answers) => {\n        setCurrentAnswers(answers);\n        // Check if this is a final submission\n        const isCompleteSubmission = answers.length >= 5; // Require at least 5 answers\n        if (isCompleteSubmission) {\n            setFinalSubmission(true);\n            // Submit through the synced store to ensure data is queued for sync\n            if (userStore.user) {\n                syncedStore.submitStyleQuiz(answers);\n            }\n            // Also pass to parent component for immediate UI updates\n            onSubmit(answers);\n            // Show results view\n            setShowResults(true);\n            // Track completion\n            const userId = getUserId();\n            trackEvent(AnalyticsEventType.STYLE_QUIZ_COMPLETE, userId, {\n                questionCount: 25,\n                answeredCount: answers.length,\n                completionRate: Math.round((answers.length / 25) * 100)\n            });\n        }\n        else {\n            // Keep track of progress for abandonment tracking\n            setCurrentAnswers(answers);\n        }\n    };\n    // Wrapped onClose to track abandonment\n    const handleClose = () => {\n        // If we have some answers but not a final submission, track as abandoned\n        if (currentAnswers.length > 0 && !finalSubmission) {\n            const userId = getUserId();\n            trackEvent(AnalyticsEventType.STYLE_QUIZ_ABANDON, userId, {\n                questionCount: 25,\n                answeredCount: currentAnswers.length,\n                completionRate: Math.round((currentAnswers.length / 25) * 100)\n            });\n        }\n        onClose();\n    };\n    // Handle retaking the quiz\n    const handleRetakeQuiz = () => {\n        setShowResults(false);\n        // Keep the existing answers but allow the user to change them\n    };\n    // Handle viewing recommendations\n    const handleViewRecommendations = (preferences) => {\n        // Update user preferences in the store\n        if (userStore.user) {\n            // Use setUser to update preferences as updateUserPreferences might not exist\n            userStore.setUser(Object.assign(Object.assign({}, userStore.user), { preferences: preferences }));\n        }\n        // Close the modal and pass preferences to parent\n        onSubmit(currentAnswers);\n        onClose();\n        // Track the view recommendations action\n        const userId = getUserId();\n        // Use a safer analytics event type that exists\n        trackEvent(AnalyticsEventType.WIDGET_OPEN, userId, {\n            action: 'view_recommendations',\n            source: 'style_quiz',\n            preferences: JSON.stringify(preferences)\n        });\n    };\n    // Handle escape key\n    useEffect(() => {\n        const handleEscapeKey = (e) => {\n            if (e.key === 'Escape') {\n                handleClose();\n            }\n        };\n        document.addEventListener('keydown', handleEscapeKey);\n        return () => {\n            document.removeEventListener('keydown', handleEscapeKey);\n        };\n    }, [onClose, currentAnswers, finalSubmission]);\n    // Prevent body scrolling when modal is open\n    useEffect(() => {\n        document.body.style.overflow = 'hidden';\n        return () => {\n            document.body.style.overflow = '';\n        };\n    }, []);\n    return (_jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz-modal\" }, { children: [_jsx(\"div\", { className: \"stylist-style-quiz-modal__overlay\", onClick: handleClose }), _jsxs(\"div\", Object.assign({ className: \"stylist-style-quiz-modal__container\" }, { children: [_jsx(\"button\", { className: \"stylist-style-quiz-modal__close-button\", onClick: handleClose, \"aria-label\": \"Close style quiz\" }), showResults ? (_jsx(StyleQuizResults, { answers: currentAnswers, questions: DEMO_QUESTIONS, primaryColor: primaryColor, onRetakeQuiz: handleRetakeQuiz, onViewRecommendations: handleViewRecommendations })) : (_jsx(StyleQuiz, { quizId: \"style-quiz-1\", title: \"Your Style Profile\", description: \"Help us understand your fashion preferences to create personalized style recommendations just for you.\", onSubmit: handleSubmit, primaryColor: primaryColor }))] }))] })));\n};\nexport default StyleQuizModal;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// SocialProofModal component for displaying celebrity outfit inspiration\nimport { useState, useEffect } from 'react';\nimport './SocialProofModal.scss';\nimport { createStylistApi } from '@/api/index';\nimport ItemCard from '@/components/ItemCard';\nimport LoadingIndicator from '@/components/common/LoadingIndicator';\nconst SocialProofModal = ({ isOpen, onClose, outfitData, apiKey, retailerId, apiUrl, onItemFeedback, onAddToWishlist, onAddToCart, primaryColor }) => {\n    const [matchingItems, setMatchingItems] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState(null);\n    // Fetch matching items when the modal opens\n    useEffect(() => {\n        if (isOpen) {\n            fetchMatchingItems();\n        }\n    }, [isOpen, outfitData === null || outfitData === void 0 ? void 0 : outfitData.id]);\n    // Fetch items that match the celebrity outfit\n    const fetchMatchingItems = () => __awaiter(void 0, void 0, void 0, function* () {\n        setIsLoading(true);\n        setError(null);\n        try {\n            const api = createStylistApi({ apiKey, retailerId, apiUrl });\n            // Fetch matching items\n            // Note: In a real app, this would be an API call to get similar items\n            // For this demo, we'll simulate with a timeout\n            yield new Promise(resolve => setTimeout(resolve, 1000));\n            // Simulate API response with matching items\n            const mockItems = Array.from({ length: 6 }, (_, i) => ({\n                id: `similar-${outfitData.id}-${i}`,\n                retailerId: retailerId,\n                name: `Similar Item ${i + 1}`,\n                brand: ['Fashion Brand', 'Luxury Designer', 'Style Co.'][i % 3],\n                category: ['tops', 'bottoms', 'dresses', 'shoes', 'accessories'][i % 5],\n                price: 59.99 + (i * 20),\n                salePrice: i % 3 === 0 ? 59.99 + (i * 20) * 0.8 : undefined,\n                colors: ['black', 'white', 'blue'],\n                sizes: ['S', 'M', 'L', 'XL'],\n                imageUrls: [\n                    `https://via.placeholder.com/300x400?text=Similar+Item+${i + 1}`\n                ],\n                url: '#',\n                matchScore: 90 - (i * 5),\n                matchReasons: ['Similar style', 'Matches color palette', 'As seen on celebrity'],\n                inStock: true\n            }));\n            setMatchingItems(mockItems);\n        }\n        catch (error) {\n            console.error('Error fetching matching items:', error);\n            setError('Failed to load matching items. Please try again.');\n        }\n        finally {\n            setIsLoading(false);\n        }\n    });\n    // Handle closing the modal\n    const handleClose = (e) => {\n        if (e.target === e.currentTarget) {\n            onClose();\n        }\n    };\n    // Handle ESC key to close modal\n    useEffect(() => {\n        const handleEscKey = (e) => {\n            if (e.key === 'Escape' && isOpen) {\n                onClose();\n            }\n        };\n        document.addEventListener('keydown', handleEscKey);\n        return () => {\n            document.removeEventListener('keydown', handleEscKey);\n        };\n    }, [isOpen, onClose]);\n    // Prevent scrolling of the body when modal is open\n    useEffect(() => {\n        if (isOpen) {\n            document.body.style.overflow = 'hidden';\n        }\n        else {\n            document.body.style.overflow = '';\n        }\n        return () => {\n            document.body.style.overflow = '';\n        };\n    }, [isOpen]);\n    if (!isOpen) {\n        return null;\n    }\n    return (_jsx(\"div\", Object.assign({ className: \"stylist-social-proof-modal\", onClick: handleClose }, { children: _jsxs(\"div\", Object.assign({ className: \"stylist-social-proof-modal__content\" }, { children: [_jsx(\"button\", Object.assign({ className: \"stylist-social-proof-modal__close\", onClick: onClose, \"aria-label\": \"Close\" }, { children: \"\\u00D7\" })), _jsx(\"div\", Object.assign({ className: \"stylist-social-proof-modal__header\" }, { children: _jsxs(\"h2\", Object.assign({ className: \"stylist-social-proof-modal__title\" }, { children: [\"Get the Look: \", outfitData.celebrityName] })) })), _jsxs(\"div\", Object.assign({ className: \"stylist-social-proof-modal__celebrity-outfit\" }, { children: [_jsx(\"img\", { src: outfitData.imageUrl, alt: `${outfitData.celebrityName} outfit`, className: \"stylist-social-proof-modal__celebrity-image\" }), _jsx(\"p\", Object.assign({ className: \"stylist-social-proof-modal__description\" }, { children: outfitData.description }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-social-proof-modal__similar-items-section\" }, { children: [_jsx(\"h3\", { children: \"Shop Similar Items\" }), isLoading ? (_jsxs(\"div\", Object.assign({ className: \"stylist-social-proof-modal__loading\" }, { children: [_jsx(LoadingIndicator, {}), _jsx(\"p\", { children: \"Finding similar items...\" })] }))) : error ? (_jsxs(\"div\", Object.assign({ className: \"stylist-social-proof-modal__error\" }, { children: [_jsx(\"p\", { children: error }), _jsx(\"button\", Object.assign({ className: \"stylist-social-proof-modal__retry-btn\", onClick: fetchMatchingItems, style: { backgroundColor: primaryColor } }, { children: \"Retry\" }))] }))) : (_jsx(\"div\", Object.assign({ className: \"stylist-social-proof-modal__similar-items\" }, { children: matchingItems.map((item) => (_jsxs(\"div\", Object.assign({ className: \"stylist-social-proof-modal__item\" }, { children: [_jsx(ItemCard, { item: {\n                                            id: item.id,\n                                            name: item.name,\n                                            brand: item.brand,\n                                            price: item.price,\n                                            salePrice: item.salePrice,\n                                            image: item.imageUrls[0] || ''\n                                        }, onFavorite: (liked) => onItemFeedback && onItemFeedback(item.id, liked), onAddToWishlist: () => onAddToWishlist && onAddToWishlist(item), onAddToCart: () => onAddToCart && onAddToCart(item), primaryColor: primaryColor }), _jsxs(\"div\", Object.assign({ className: \"stylist-social-proof-modal__match-score\" }, { children: [item.matchScore, \"% match\"] }))] }), item.id))) })))] }))] })) })));\n};\nexport default SocialProofModal;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// TrendingItems component displays popular items based on user activity\nimport React, { useState, useEffect, useCallback, useMemo, useRef, Suspense, lazy } from 'react';\nimport { io } from 'socket.io-client';\nimport { createStylistApi } from '@/api/index';\nimport { useUserStore } from '@/store/userStore';\nimport LoadingIndicator from '@/components/common/LoadingIndicator';\nimport GridLayout from '@/components/GridLayout';\nimport CategorySelector from '@/components/CategorySelector';\nimport './TrendingItems.scss';\n// Lazy load ItemCard component for better performance\nconst ItemCard = lazy(() => import('@/components/ItemCard'));\n// TrendingLogic encapsulates the trending algorithm configuration\nconst TRENDING_LOGIC = {\n    total: 100,\n    layout: \"2x50 grid\",\n    filters: {\n        age: [\"18-25\", \"26-35\", \"36-45\", \"46+\"],\n        gender: [\"Male\", \"Female\", \"Non-binary\"],\n        style: \"User preferences\"\n    },\n    update: \"Real-time\",\n    realTimeUpdateInterval: 30 * 1000,\n    socketEndpoint: '/trending-updates' // WebSocket endpoint for real-time updates\n};\nconst TrendingItems = ({ apiKey, retailerId, apiUrl, onItemFeedback, onAddToWishlist, onAddToCart, onItemClick, onQuickView, onAddToCollection, onShare, onTryOn, primaryColor, layout = TRENDING_LOGIC.layout, ageFilter, genderFilter, seasonFilter, maxItems = TRENDING_LOGIC.total }) => {\n    // Refs for infinite scrolling and intersection observer\n    const observerRef = useRef(null);\n    const loadMoreRef = useRef(null);\n    const socketRef = useRef(null);\n    const pollingRef = useRef(null);\n    const apiClientRef = useRef(null);\n    // State for trending items and UI\n    const [trendingItems, setTrendingItems] = useState([]);\n    const [displayedItems, setDisplayedItems] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [loadingMore, setLoadingMore] = useState(false);\n    const [error, setError] = useState(null);\n    const [filterCategory, setFilterCategory] = useState('all');\n    const [ageRange, setAgeRange] = useState(ageFilter || 'all');\n    const [gender, setGender] = useState(genderFilter || 'all');\n    const [season, setSeason] = useState(seasonFilter || 'all');\n    const [visibleCount, setVisibleCount] = useState(20); // Initial visible items count\n    const [hasMore, setHasMore] = useState(true); // For infinite scroll\n    const [hasNewTrends, setHasNewTrends] = useState(false); // Flag for new trend notification\n    const [lastUpdateTime, setLastUpdateTime] = useState(new Date());\n    const [isRealTimeActive, setIsRealTimeActive] = useState(false);\n    // User store for preferences\n    const { user } = useUserStore();\n    // Get trending items on component mount\n    useEffect(() => {\n        if (user) {\n            // Initialize API client for reuse\n            apiClientRef.current = createStylistApi({ apiKey, retailerId, apiUrl });\n            fetchTrendingItems();\n            // Set up real-time updates\n            initializeRealTimeUpdates();\n            // Clean up real-time connections on unmount\n            return () => {\n                cleanupRealTimeUpdates();\n            };\n        }\n    }, [user === null || user === void 0 ? void 0 : user.userId, ageFilter, genderFilter, seasonFilter]);\n    // Helper function to get current season\n    const getCurrentSeason = useCallback(() => {\n        const now = new Date();\n        const month = now.getMonth();\n        if (month >= 2 && month <= 4)\n            return 'spring';\n        if (month >= 5 && month <= 7)\n            return 'summer';\n        if (month >= 8 && month <= 10)\n            return 'fall';\n        return 'winter';\n    }, []);\n    // Helper function to calculate days between two dates\n    const daysBetween = useCallback((date1, date2) => {\n        const oneDay = 24 * 60 * 60 * 1000; // milliseconds in a day\n        return Math.round(Math.abs((date1.getTime() - date2.getTime()) / oneDay));\n    }, []);\n    // Rank trending items based on various factors\n    const rankTrendingItems = useCallback((items) => {\n        if (!items.length)\n            return [];\n        // Apply the ranking algorithm weights\n        return items.map(item => {\n            var _a, _b, _c, _d;\n            // Base trending score starts with the match score\n            let trendingScore = item.matchScore || 0.5;\n            // 1. Global likes/dislikes\n            const likeWeight = 0.3;\n            if (item.likeCount && item.dislikeCount) {\n                const likeRatio = item.likeCount / (item.likeCount + item.dislikeCount);\n                trendingScore += likeRatio * likeWeight;\n            }\n            else if (item.likeCount) {\n                trendingScore += likeWeight;\n            }\n            // 2. User demographic matching (age and gender)\n            const demographicWeight = 0.15;\n            if (user === null || user === void 0 ? void 0 : user.preferences) {\n                // Try to extract age and gender from preferences structure\n                // In a real app, we'd know the exact structure\n                const userPrefs = user.preferences;\n                const userAge = userPrefs.age || ((_a = userPrefs.preferences) === null || _a === void 0 ? void 0 : _a.age) || '';\n                const userGender = userPrefs.gender || ((_b = userPrefs.preferences) === null || _b === void 0 ? void 0 : _b.gender) || '';\n                if (item.targetDemographics) {\n                    // Age match\n                    if (userAge && ((_c = item.targetDemographics.age) === null || _c === void 0 ? void 0 : _c.includes(userAge))) {\n                        trendingScore += demographicWeight * 0.5;\n                    }\n                    // Gender match\n                    if (userGender && ((_d = item.targetDemographics.gender) === null || _d === void 0 ? void 0 : _d.includes(userGender))) {\n                        trendingScore += demographicWeight * 0.5;\n                    }\n                }\n            }\n            // 3. Recent activity weight\n            const recencyWeight = 0.25;\n            if (item.recentViews) {\n                // Logarithmic scale to prevent extremely popular items from dominating\n                const viewScore = Math.min(Math.log10(item.recentViews + 1) / 3, 1);\n                trendingScore += viewScore * recencyWeight;\n            }\n            // 4. Seasonal adjustments\n            const seasonalWeight = 0.15;\n            const currentSeason = getCurrentSeason();\n            if (item.seasonality === currentSeason) {\n                trendingScore += seasonalWeight;\n            }\n            // 5. New arrival boost\n            const newArrivalWeight = 0.15;\n            if (item.isNewArrival) {\n                trendingScore += newArrivalWeight;\n            }\n            else if (item.releaseDate) {\n                // Gradually reduce boost based on days since release (up to 30 days)\n                try {\n                    const releaseDate = item.releaseDate instanceof Date\n                        ? item.releaseDate\n                        : new Date(typeof item.releaseDate === 'string' ? item.releaseDate : Date.now());\n                    const daysSinceRelease = daysBetween(releaseDate, new Date());\n                    if (daysSinceRelease <= 30) {\n                        const newness = 1 - (daysSinceRelease / 30);\n                        trendingScore += newness * newArrivalWeight;\n                    }\n                }\n                catch (e) {\n                    console.warn('Error processing release date:', e);\n                }\n            }\n            // Normalize score to 0-1 range\n            trendingScore = Math.min(Math.max(trendingScore, 0), 1);\n            return Object.assign(Object.assign({}, item), { trendingScore });\n        })\n            .sort((a, b) => (b.trendingScore || 0) - (a.trendingScore || 0))\n            .map((item, index) => (Object.assign(Object.assign({}, item), { trendingRank: index + 1 })));\n    }, [user === null || user === void 0 ? void 0 : user.preferences, getCurrentSeason, daysBetween]);\n    // Initialize real-time updates via WebSocket or polling\n    const initializeRealTimeUpdates = useCallback(() => {\n        // First try WebSockets\n        try {\n            // Use the API URL base if available, otherwise default to current origin\n            const socketUrl = apiUrl\n                ? new URL(TRENDING_LOGIC.socketEndpoint, apiUrl).toString()\n                : TRENDING_LOGIC.socketEndpoint;\n            // Initialize socket connection\n            socketRef.current = io(socketUrl, {\n                path: '/socket.io',\n                transports: ['websocket'],\n                reconnection: true,\n                reconnectionAttempts: 5,\n                auth: {\n                    token: apiKey,\n                    retailerId\n                }\n            });\n            // Listen for new trending items\n            socketRef.current.on('trending:update', (data) => {\n                console.log('Received real-time trending update', data);\n                handleRealTimeUpdate(data);\n                setIsRealTimeActive(true);\n            });\n            // Listen for connection events\n            socketRef.current.on('connect', () => {\n                var _a;\n                console.log('WebSocket connected for trending updates');\n                setIsRealTimeActive(true);\n                // Join user-specific and filter-specific rooms\n                (_a = socketRef.current) === null || _a === void 0 ? void 0 : _a.emit('join', {\n                    userId: user === null || user === void 0 ? void 0 : user.userId,\n                    retailerId,\n                    filters: {\n                        age: ageRange !== 'all' ? ageRange : undefined,\n                        gender: gender !== 'all' ? gender : undefined,\n                        season: season !== 'all' ? season : undefined,\n                        category: filterCategory !== 'all' ? filterCategory : undefined\n                    }\n                });\n            });\n            socketRef.current.on('connect_error', (err) => {\n                console.warn('WebSocket connection error:', err);\n                setIsRealTimeActive(false);\n                // Fall back to polling if WebSocket fails\n                startPolling();\n            });\n            socketRef.current.on('disconnect', () => {\n                console.log('WebSocket disconnected');\n                setIsRealTimeActive(false);\n                // Start polling as fallback\n                startPolling();\n            });\n        }\n        catch (error) {\n            console.error('Failed to initialize WebSocket:', error);\n            // Fall back to polling\n            startPolling();\n        }\n    }, [user === null || user === void 0 ? void 0 : user.userId, retailerId, apiKey, apiUrl, ageRange, gender, season, filterCategory]);\n    // Start polling for updates as fallback to WebSockets\n    const startPolling = useCallback(() => {\n        // Clear any existing polling\n        if (pollingRef.current) {\n            clearInterval(pollingRef.current);\n        }\n        console.log('Starting polling for trending updates');\n        // Set up polling interval\n        pollingRef.current = setInterval(() => {\n            console.log('Polling for trending updates...');\n            checkForTrendingUpdates();\n        }, TRENDING_LOGIC.realTimeUpdateInterval);\n    }, []);\n    // Clean up real-time update connections\n    const cleanupRealTimeUpdates = useCallback(() => {\n        // Close WebSocket connection\n        if (socketRef.current) {\n            socketRef.current.disconnect();\n            socketRef.current = null;\n        }\n        // Clear polling interval\n        if (pollingRef.current) {\n            clearInterval(pollingRef.current);\n            pollingRef.current = null;\n        }\n    }, []);\n    // Check for trending updates via API when using polling\n    const checkForTrendingUpdates = useCallback(() => __awaiter(void 0, void 0, void 0, function* () {\n        if (!apiClientRef.current || !(user === null || user === void 0 ? void 0 : user.userId))\n            return;\n        try {\n            // Check for updates since last fetch\n            const response = yield apiClientRef.current.recommendation.getUpdatedRecommendations({\n                userId: user.userId,\n                since: lastUpdateTime.toISOString(),\n                context: 'trending',\n                filters: {\n                    trending: true,\n                    age: ageRange !== 'all' ? ageRange : undefined,\n                    gender: gender !== 'all' ? gender : undefined,\n                    season: season !== 'all' ? season : undefined,\n                    category: filterCategory !== 'all' ? filterCategory : undefined\n                }\n            });\n            // If we have updates, handle them\n            if (response && response.hasUpdates) {\n                console.log('Found trending updates via polling');\n                setHasNewTrends(true);\n                // If autoUpdate is enabled, update the items immediately\n                if (response.items && response.items.length > 0) {\n                    handleRealTimeUpdate({\n                        items: response.items,\n                        timestamp: new Date(),\n                        updateType: 'polling'\n                    });\n                }\n            }\n        }\n        catch (error) {\n            console.error('Error checking for trending updates:', error);\n        }\n    }), [user === null || user === void 0 ? void 0 : user.userId, lastUpdateTime, ageRange, gender, season, filterCategory]);\n    // Handle real-time updates from WebSocket or polling\n    const handleRealTimeUpdate = useCallback((data) => {\n        // Update timestamp\n        setLastUpdateTime(new Date(data.timestamp || Date.now()));\n        if (data.items && data.items.length > 0) {\n            setTrendingItems(prevItems => {\n                // Create a map of existing items for quick lookup\n                const existingItemsMap = new Map(prevItems.map(item => [item.id, item]));\n                // Process new items\n                data.items.forEach((item) => {\n                    // If item already exists, update it with new data\n                    if (existingItemsMap.has(item.id)) {\n                        const existingItem = existingItemsMap.get(item.id);\n                        // Update trending data\n                        existingItemsMap.set(item.id, Object.assign(Object.assign(Object.assign({}, existingItem), item), { trendingScore: item.trendingScore || (existingItem === null || existingItem === void 0 ? void 0 : existingItem.trendingScore), likeCount: item.likeCount || (existingItem === null || existingItem === void 0 ? void 0 : existingItem.likeCount), dislikeCount: item.dislikeCount || (existingItem === null || existingItem === void 0 ? void 0 : existingItem.dislikeCount), recentViews: item.recentViews || (existingItem === null || existingItem === void 0 ? void 0 : existingItem.recentViews), isRealTimeUpdate: true, lastUpdated: new Date() }));\n                    }\n                    else {\n                        // Add new item\n                        existingItemsMap.set(item.id, Object.assign(Object.assign({}, item), { isNewTrend: true, lastUpdated: new Date() }));\n                    }\n                });\n                // Convert back to array and re-rank\n                const updatedItems = Array.from(existingItemsMap.values());\n                const rankedItems = rankTrendingItems(updatedItems);\n                // Reset the notification after applying the updates\n                setHasNewTrends(false);\n                return rankedItems;\n            });\n        }\n    }, [rankTrendingItems]);\n    // These functions are now defined earlier in the component\n    // Fetch trending items from API\n    const fetchTrendingItems = () => __awaiter(void 0, void 0, void 0, function* () {\n        var _a, _b, _c, _d, _e, _f;\n        if (!user)\n            return;\n        setIsLoading(true);\n        setError(null);\n        try {\n            const api = createStylistApi({ apiKey, retailerId, apiUrl });\n            // Fetch trending items with user's size and style profile\n            const response = yield api.recommendation.getRecommendations({\n                userId: user.userId,\n                limit: maxItems,\n                layout: layout,\n                filters: {\n                    trending: true,\n                    size: (_c = (_b = (_a = user.preferences) === null || _a === void 0 ? void 0 : _a.sizePreferences) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.size,\n                    style: (_f = (_e = (_d = user.preferences) === null || _d === void 0 ? void 0 : _d.stylePreferences) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.style,\n                    age: ageRange !== 'all' ? ageRange : undefined,\n                    gender: gender !== 'all' ? gender : undefined,\n                    season: season !== 'all' ? season : undefined\n                }\n            });\n            // Ensure we have items\n            if (!response || !response.items || response.items.length === 0) {\n                if (response.message) {\n                    // API returned an explanation message\n                    setError(response.message);\n                }\n                else {\n                    setError('No trending items found. Please check back later.');\n                }\n                setTrendingItems([]);\n                setDisplayedItems([]);\n                return;\n            }\n            // Transform the response for consistent property naming and apply initial ranking\n            const items = response.items.map(item => ({\n                id: item.id,\n                retailerId: item.retailerId || retailerId,\n                name: item.name || 'Unnamed Item',\n                brand: item.brand || '',\n                category: item.category || '',\n                price: item.price || 0,\n                salePrice: item.salePrice,\n                colors: item.colors || [],\n                sizes: item.sizes || [],\n                imageUrls: Array.isArray(item.imageUrls) ? item.imageUrls :\n                    (item.imageUrl ? [item.imageUrl] : []),\n                url: item.url || '#',\n                matchScore: item.matchScore || 0,\n                matchReasons: item.matchReasons || [],\n                complementaryItems: item.complementaryItems || [],\n                inStock: item.inStock !== false,\n                trending: true,\n                trendingScore: item.trendingScore,\n                likeCount: item.likeCount || 0,\n                dislikeCount: item.dislikeCount || 0,\n                recentViews: item.recentViews || 0,\n                releaseDate: item.releaseDate,\n                seasonality: item.seasonality,\n                targetDemographics: item.targetDemographics,\n                isNewArrival: item.isNewArrival\n            }));\n            // Apply ranking algorithm\n            const rankedItems = rankTrendingItems(items);\n            setTrendingItems(rankedItems);\n            // Set initial displayed items\n            setDisplayedItems(rankedItems.slice(0, visibleCount));\n            setHasMore(rankedItems.length > visibleCount);\n            // Log success for debugging\n            console.log(`Loaded ${rankedItems.length} trending items from API`);\n        }\n        catch (error) {\n            console.error('Error fetching trending items:', error);\n            setError('Failed to fetch trending items. Please try again later.');\n        }\n        finally {\n            setIsLoading(false);\n        }\n    });\n    // Filter items by category and other criteria\n    const filteredItems = useMemo(() => {\n        // Start with all trending items\n        let filtered = trendingItems;\n        // Filter by category first\n        if (filterCategory !== 'all') {\n            filtered = filtered.filter(item => item.category === filterCategory);\n        }\n        // Apply additional filters if active (these are applied at the API level but this ensures consistency)\n        if (ageRange !== 'all' && ageRange) {\n            filtered = filtered.filter(item => { var _a, _b; return (_b = (_a = item.targetDemographics) === null || _a === void 0 ? void 0 : _a.age) === null || _b === void 0 ? void 0 : _b.includes(ageRange); });\n        }\n        if (gender !== 'all' && gender) {\n            filtered = filtered.filter(item => { var _a, _b; return (_b = (_a = item.targetDemographics) === null || _a === void 0 ? void 0 : _a.gender) === null || _b === void 0 ? void 0 : _b.includes(gender); });\n        }\n        if (season !== 'all' && season) {\n            filtered = filtered.filter(item => item.seasonality === season);\n        }\n        return filtered;\n    }, [trendingItems, filterCategory, ageRange, gender, season]);\n    // Get unique categories from the trending items\n    const categories = useMemo(() => {\n        const uniqueCategories = new Set(trendingItems.map(item => item.category));\n        return ['all', ...Array.from(uniqueCategories)].filter(Boolean);\n    }, [trendingItems]);\n    // Get unique age ranges from the trending logic\n    const ageRanges = useMemo(() => {\n        return ['all', ...TRENDING_LOGIC.filters.age];\n    }, []);\n    // Get unique genders from the trending logic\n    const genders = useMemo(() => {\n        return ['all', ...TRENDING_LOGIC.filters.gender];\n    }, []);\n    // Get seasons for filtering\n    const seasons = useMemo(() => {\n        return ['all', 'spring', 'summer', 'fall', 'winter'];\n    }, []);\n    // Load more items for infinite scroll with debounce to prevent multiple calls\n    const loadMoreItems = useCallback(() => {\n        // Safety checks\n        if (!filteredItems || filteredItems.length <= visibleCount || loadingMore) {\n            setHasMore(false);\n            return;\n        }\n        setLoadingMore(true);\n        // Simulate network delay for smoother UX\n        setTimeout(() => {\n            try {\n                // Increase the number of displayed items\n                const nextVisibleCount = Math.min(visibleCount + 20, filteredItems.length);\n                setVisibleCount(nextVisibleCount);\n                setDisplayedItems(filteredItems.slice(0, nextVisibleCount));\n                setHasMore(nextVisibleCount < filteredItems.length);\n            }\n            catch (error) {\n                console.error('Error loading more items:', error);\n            }\n            finally {\n                setLoadingMore(false);\n            }\n        }, 300); // Small delay for smoother loading UX\n    }, [filteredItems, visibleCount, loadingMore]);\n    // Setup Intersection Observer for infinite scroll\n    useEffect(() => {\n        // Disconnect previous observer if exists\n        if (observerRef.current) {\n            observerRef.current.disconnect();\n        }\n        // Create new observer\n        observerRef.current = new IntersectionObserver((entries) => {\n            const [entry] = entries;\n            if (entry.isIntersecting && hasMore && !loadingMore) {\n                loadMoreItems();\n            }\n        }, { threshold: 0.1 } // Trigger when 10% of the element is visible\n        );\n        // Observe the load more element when it exists\n        if (loadMoreRef.current) {\n            observerRef.current.observe(loadMoreRef.current);\n        }\n        return () => {\n            if (observerRef.current) {\n                observerRef.current.disconnect();\n            }\n        };\n    }, [hasMore, loadingMore, loadMoreItems]);\n    // Effect to update displayed items when filters change\n    useEffect(() => {\n        setVisibleCount(20); // Reset to initial count when filters change\n        setDisplayedItems(filteredItems.slice(0, 20));\n        setHasMore(filteredItems.length > 20);\n    }, [filteredItems]);\n    // Handle item feedback (like/dislike)\n    const handleItemFeedback = (itemId, liked) => {\n        if (onItemFeedback) {\n            onItemFeedback(itemId, liked);\n            // Update item in state to reflect the feedback immediately\n            setTrendingItems(prev => {\n                return prev.map(item => {\n                    if (item.id === itemId) {\n                        // Update like/dislike count for immediate visual feedback\n                        return Object.assign(Object.assign({}, item), { likeCount: liked ? (item.likeCount || 0) + 1 : item.likeCount, dislikeCount: !liked ? (item.dislikeCount || 0) + 1 : item.dislikeCount });\n                    }\n                    return item;\n                });\n            });\n        }\n    };\n    // Handle adding item to wishlist\n    const handleAddToWishlist = (item) => {\n        if (onAddToWishlist) {\n            onAddToWishlist(item);\n        }\n    };\n    // Handle adding item to cart\n    const handleAddToCart = (item) => {\n        if (onAddToCart) {\n            onAddToCart(item);\n        }\n    };\n    // Handle clicking an item\n    const handleItemClick = (item) => {\n        if (onItemClick) {\n            onItemClick(item);\n            // Update view count for trending score\n            setTrendingItems(prev => {\n                return prev.map(i => {\n                    if (i.id === item.id) {\n                        return Object.assign(Object.assign({}, i), { recentViews: (i.recentViews || 0) + 1 });\n                    }\n                    return i;\n                });\n            });\n        }\n    };\n    // Handle quick view\n    const handleQuickView = (item) => {\n        if (onQuickView) {\n            onQuickView(item);\n            // Also count as a view for trending\n            setTrendingItems(prev => {\n                return prev.map(i => {\n                    if (i.id === item.id) {\n                        return Object.assign(Object.assign({}, i), { recentViews: (i.recentViews || 0) + 1 });\n                    }\n                    return i;\n                });\n            });\n        }\n    };\n    // Handle adding to collection\n    const handleAddToCollection = (item, collectionId) => {\n        if (onAddToCollection) {\n            onAddToCollection(item, collectionId);\n        }\n    };\n    // Handle sharing\n    const handleShare = (item) => {\n        if (onShare) {\n            onShare(item);\n        }\n    };\n    // Handle try on\n    const handleTryOn = (item) => {\n        if (onTryOn) {\n            onTryOn(item);\n        }\n    };\n    // Fallback scroll handler for browsers without Intersection Observer support\n    const handleScroll = useCallback((e) => {\n        const target = e.target;\n        if (!isLoading &&\n            !loadingMore &&\n            hasMore &&\n            target.scrollHeight - target.scrollTop <= target.clientHeight * 1.5) {\n            loadMoreItems();\n        }\n    }, [isLoading, loadingMore, hasMore, loadMoreItems]);\n    // Function to refresh trending data\n    const refreshTrendingItems = useCallback(() => {\n        setHasNewTrends(false);\n        fetchTrendingItems();\n    }, [fetchTrendingItems]);\n    return (_jsx(\"div\", Object.assign({ className: \"stylist-trending-items\" }, { children: isLoading && displayedItems.length === 0 ? (_jsxs(\"div\", Object.assign({ className: \"stylist-trending-items__loading\" }, { children: [_jsx(LoadingIndicator, {}), _jsx(\"p\", { children: \"Loading trending items...\" })] }))) : error ? (_jsxs(\"div\", Object.assign({ className: \"stylist-trending-items__error\" }, { children: [_jsx(\"p\", { children: error }), _jsx(\"button\", Object.assign({ className: \"stylist-trending-items__retry-btn\", onClick: fetchTrendingItems }, { children: \"Retry\" }))] }))) : filteredItems.length === 0 ? (_jsx(\"div\", Object.assign({ className: \"stylist-trending-items__empty\" }, { children: _jsx(\"p\", { children: \"No trending items found. Check back later!\" }) }))) : (_jsxs(\"div\", Object.assign({ className: \"stylist-trending-items__container\" }, { children: [_jsxs(\"div\", Object.assign({ className: \"stylist-trending-items__status-bar\" }, { children: [_jsxs(\"div\", Object.assign({ className: `stylist-trending-items__status-indicator ${isRealTimeActive ? 'active' : ''}` }, { children: [_jsx(\"span\", { className: \"stylist-trending-items__status-dot\" }), isRealTimeActive ? 'Real-time updates active' : 'Updates paused'] })), hasNewTrends && (_jsxs(\"button\", Object.assign({ className: \"stylist-trending-items__refresh-button\", onClick: refreshTrendingItems, style: { backgroundColor: primaryColor } }, { children: [_jsx(\"svg\", Object.assign({ xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"16\", height: \"16\", fill: \"currentColor\" }, { children: _jsx(\"path\", { d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\" }) })), \"New trending items available! Refresh\"] }))), _jsxs(\"div\", Object.assign({ className: \"stylist-trending-items__update-time\" }, { children: [\"Last updated: \", lastUpdateTime.toLocaleTimeString()] }))] })), _jsxs(\"div\", Object.assign({ className: \"stylist-trending-items__filters\" }, { children: [_jsx(CategorySelector, { categories: categories.filter(cat => cat !== 'all').map(cat => ({\n                                id: cat,\n                                name: cat.charAt(0).toUpperCase() + cat.slice(1)\n                            })), selectedCategory: filterCategory, onChange: setFilterCategory, includeAll: true, label: \"Category\", primaryColor: primaryColor }), _jsx(CategorySelector, { categories: ageRanges.filter(age => age !== 'all').map(age => ({\n                                id: age,\n                                name: age\n                            })), selectedCategory: ageRange, onChange: setAgeRange, includeAll: true, label: \"Age\", primaryColor: primaryColor }), _jsx(CategorySelector, { categories: genders.filter(gen => gen !== 'all').map(gen => ({\n                                id: gen,\n                                name: gen\n                            })), selectedCategory: gender, onChange: setGender, includeAll: true, label: \"Gender\", primaryColor: primaryColor }), _jsx(CategorySelector, { categories: seasons.filter(s => s !== 'all').map(s => ({\n                                id: s,\n                                name: s.charAt(0).toUpperCase() + s.slice(1)\n                            })), selectedCategory: season, onChange: setSeason, includeAll: true, label: \"Season\", primaryColor: primaryColor })] })), _jsxs(\"div\", Object.assign({ className: \"stylist-trending-items__scroll-container\", onScroll: handleScroll }, { children: [_jsx(GridLayout, { size: \"2x50\", title: \"Trending Items\", className: \"stylist-trending-items__grid-layout\", items: displayedItems.map(item => (_jsxs(React.Fragment, { children: [_jsx(\"div\", Object.assign({ className: `stylist-trending-items__trending-badge ${item.isNewTrend ? 'new-trend' : ''} ${item.isRealTimeUpdate ? 'updated' : ''}`, style: { backgroundColor: `${primaryColor}cc` } }, { children: item.trendingRank && item.trendingRank <= 10\n                                            ? `🔥 #${item.trendingRank} Trending`\n                                            : item.isNewTrend\n                                                ? \"🆕 New Trend!\"\n                                                : \"🔥 Trending\" })), _jsx(Suspense, Object.assign({ fallback: _jsx(\"div\", { className: \"stylist-trending-items__item-placeholder\" }) }, { children: _jsx(ItemCard, { item: item, onFeedback: handleItemFeedback, onAddToWishlist: () => handleAddToWishlist(item), onAddToCart: () => handleAddToCart(item), onClick: () => handleItemClick(item), primaryColor: primaryColor, onTryOn: () => handleTryOn(item), onAddToDressingRoom: () => handleAddToCollection(item), complementaryItems: [], onOutfitSuggestions: () => handleQuickView(item), showDetails: true, className: item.isRealTimeUpdate ? 'highlight-update' : '' }) }))] }, item.id))) }), isLoading && displayedItems.length > 0 && (_jsxs(\"div\", Object.assign({ className: \"stylist-trending-items__loading-more\" }, { children: [_jsx(LoadingIndicator, { size: \"small\" }), _jsx(\"p\", { children: \"Loading more items...\" })] }))), !hasMore && displayedItems.length > 0 && (_jsx(\"div\", Object.assign({ className: \"stylist-trending-items__end-message\" }, { children: _jsx(\"p\", { children: \"You've reached the end of trending items!\" }) }))), hasMore && (_jsx(\"div\", { ref: loadMoreRef, className: \"stylist-trending-items__load-more-trigger\" }))] }))] }))) })));\n};\nexport default TrendingItems;\n"],"names":["message","primaryColor","onFeedback","id","sender","text","timestamp","feedbackGiven","setFeedbackGiven","useState","isUser","USER","isAssistant","ASSISTANT","isSystem","SYSTEM","shouldShowFeedback","length","includes","bubbleClasses","contentStyle","backgroundColor","undefined","Object","assign","className","children","xmlns","viewBox","width","height","fill","d","style","split","map","line","i","messageId","onThumbsUp","MESSAGE_THUMBS_UP","messageContent","substring","outfit","onSaveOutfit","onItemClick","items","occasion","matchScore","matchReasons","handleFeedback","liked","color","Math","round","item","onClick","handleItemClick","itemId","imageUrl","src","alt","name","category","brand","reason","index","FeedbackControls","onLike","onDislike","WishlistButton","label","activeTab","onTabChange","enabledFeatures","chat","lookbook","myCloset","tryOn","social","trending","tabs","filter","tab","title","icon","question","currentAnswer","onAnswer","autoAdvance","_a","options","option","answerId","handleSelect","optionId","questionId","answered","Date","borderColor","isSelected","answerIds","currentIds","newIds","backgroundImage","_b","_c","_d","defaultValue","answerValue","floor","minValue","maxValue","value","setValue","useEffect","labels","left","right","getSliderLabels","type","min","max","step","onChange","e","newValue","parseInt","target","clearTimeout","window","sliderTimeout","setTimeout","accentColor","quizSections","basics","preferences","lifestyle","brands","celebrities","DEMO_QUESTIONS","questionText","section","STORAGE_KEY","quizId","description","onSubmit","questions","currentQuestionIndex","savedAnswers","activeSection","savedSection","savedProgress","localStorage","getItem","progress","JSON","parse","answers","Array","isArray","currentQuestion","loadSavedProgress","setCurrentQuestion","setAnswers","setActiveSection","submitting","setSubmitting","loading","setLoading","showSkipConfirm","setShowSkipConfirm","setItem","stringify","questionsBySection","useMemo","reduce","acc","push","currentSectionQuestions","questionIndex","findIndex","q","isLastQuestionInSection","isLastQuestion","handleAnswerUpdate","answer","newAnswers","existingIndex","a","handleNextQuestion","sectionKeys","keys","currentSectionIndex","indexOf","nextSection","document","querySelector","classList","add","nextSectionQuestions","nextQuestionIndex","remove","confirmSkipToResults","handleSubmit","cancelSkipToResults","isCurrentQuestionAnswered","find","completionPercentage","entries","sectionKey","sectionLabel","sectionProgress","sectionQuestions","answeredQuestions","some","total","percentage","getSectionProgress","isActive","targetSectionQuestions","targetQuestionIndex","jumpToSection","disabled","commonProps","renderQuestion","prevSection","prevSectionQuestions","prevQuestionIndex","AddItemStep","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","next","rejected","result","done","then","apply","onSelectItem","onAddToOutfit","isBuilderMode","user","addToCloset","removeFromCloset","toggleItemFavorite","useSyncedStore","dragItemRef","useRef","dragOverItemRef","activeView","setActiveView","isUploading","setIsUploading","selectedCategory","setSelectedCategory","categories","setCategories","showUploader","setShowUploader","currentStep","setCurrentStep","SELECT_TYPE","newItem","setNewItem","subcategory","pattern","size","tags","filterType","setFilterType","filterColor","setFilterColor","filterBrand","setFilterBrand","editingItem","setEditingItem","filteredItems","useCallback","closet","favorite","toLowerCase","wishlistItems","feedback","likedItems","uniqueCategories","Set","categoryList","from","charAt","toUpperCase","slice","handleDragStart","current","handleDragOver","handleDrop","_items","dragItem","splice","handleFileUpload","file","URL","createObjectURL","prev","CONFIRM_DETAILS","detectClothingAttributes","error","detectedCategory","random","detectedSubcategory","colors","detectedColor","handleInputChange","handleTagInput","key","preventDefault","input","tag","trim","removeTag","tagToRemove","handleSelectType","CHOOSE_COLOR","handleSelectColor","SELECT_PATTERN","handleSelectPattern","UPLOAD_IMAGE","handleEditItem","itemToEdit","exportClosetData","dataStr","dataUri","encodeURIComponent","linkElement","createElement","setAttribute","click","importClosetData","event","fileReader","FileReader","files","readAsText","onload","content","saveNewItem","newItemData","now","dateAdded","handleToggleFavorite","isFavorite","handleRemoveItem","confirm","handleAddToOutfit","accept","display","placeholder","ImageUploader","onUpload","AdaptiveImage","A","loadingPriority","quality","htmlFor","required","onKeyDown","prevStep","values","renderAddItemStep","draggable","onDragStart","onDragOver","onDrop","ItemCard","price","image","isClosetItem","onRemove","onFavorite","getColorCode","colorName","onItemFeedback","onAddToWishlist","onAddToCart","isExpanded","onToggleExpand","displayItems","socialProofItem","celebrity","outfitTags","patterns","idx","matchedProducts","product","imageUrls","url","retailerId","sizes","inStock","salePrice","showDetails","constructor","this","getAnswerForQuestion","getQuestion","getOptionText","o","getOptionValue","getStylePreferences","styleAnswer","String","weight","getColorPreferences","colorAnswer","getSizePreferences","topSizeAnswer","bottomSizeAnswer","shoeSizeAnswer","getOccasionPreferences","occasionAnswer","getFavoriteBrands","casualBrandsAnswer","forEach","athleticBrandsAnswer","luxuryBrandsAnswer","getPriceRange","budgetAnswer","ceil","getPatternPreferences","patternAnswer","getFabricPreferences","fabricAnswer","getFitPreferences","fitPreferences","topFitAnswer","topFit","bottomFitAnswer","bottomFit","getCelebrityPreferences","modernCelebrityAnswer","classicCelebrityAnswer","getTrendApproach","trendAnswer","getComfortStyleBalance","comfortStyleAnswer","getStyleGoal","goalAnswer","getLifestyleAttributes","workAnswer","work","activityAnswer","activity","seasonAnswer","preferredSeason","layeringAnswer","layering","getShoppingHabits","shopping","frequencyAnswer","frequency","getGenderCategory","genderAnswer","generateUserPreferences","stylePreferences","colorPreferences","sizePreferences","priceRange","favoriteRetailers","occasionPreferences","metadata","genderCategory","patternPreferences","fabricPreferences","celebrityInspiration","trendApproach","comfortStyleBalance","styleGoal","generateProfileSummary","gender","styles","s","join","c","fits","budget","occasions","fabrics","goal","generateRecommendationCategories","stylePrefs","getCompletionPercentage","onRetakeQuiz","onViewRecommendations","isLoading","setIsLoading","profileSummary","setProfileSummary","setCompletionPercentage","recommendationCategories","setRecommendationCategories","userPreferences","setUserPreferences","processor","summary","completion","paragraph","onClose","currentAnswers","setCurrentAnswers","showResults","setShowResults","finalSubmission","setFinalSubmission","userStore","syncedStore","handleClose","userId","STYLE_QUIZ_ABANDON","questionCount","answeredCount","completionRate","handleEscapeKey","addEventListener","removeEventListener","body","overflow","setUser","WIDGET_OPEN","action","source","StyleQuiz","submitStyleQuiz","STYLE_QUIZ_COMPLETE","isOpen","outfitData","apiKey","apiUrl","matchingItems","setMatchingItems","setError","fetchMatchingItems","mockItems","_","handleEscKey","currentTarget","celebrityName","LoadingIndicator","lazy","TRENDING_LOGIC","layout","filters","age","update","realTimeUpdateInterval","socketEndpoint","onQuickView","onAddToCollection","onShare","onTryOn","ageFilter","genderFilter","seasonFilter","maxItems","observerRef","loadMoreRef","socketRef","pollingRef","apiClientRef","trendingItems","setTrendingItems","displayedItems","setDisplayedItems","loadingMore","setLoadingMore","filterCategory","setFilterCategory","ageRange","setAgeRange","setGender","season","setSeason","visibleCount","setVisibleCount","hasMore","setHasMore","hasNewTrends","setHasNewTrends","lastUpdateTime","setLastUpdateTime","isRealTimeActive","setIsRealTimeActive","fetchTrendingItems","initializeRealTimeUpdates","cleanupRealTimeUpdates","getCurrentSeason","month","getMonth","daysBetween","date1","date2","abs","getTime","rankTrendingItems","trendingScore","likeCount","dislikeCount","userPrefs","userAge","userGender","targetDemographics","demographicWeight","recentViews","log10","currentSeason","seasonality","isNewArrival","releaseDate","daysSinceRelease","sort","b","trendingRank","socketUrl","toString","io","path","transports","reconnection","reconnectionAttempts","auth","token","on","data","handleRealTimeUpdate","emit","err","startPolling","clearInterval","setInterval","checkForTrendingUpdates","disconnect","response","recommendation","getUpdatedRecommendations","since","toISOString","context","hasUpdates","updateType","prevItems","existingItemsMap","Map","has","existingItem","get","set","isRealTimeUpdate","lastUpdated","isNewTrend","updatedItems","rankedItems","_e","_f","api","getRecommendations","limit","complementaryItems","filtered","Boolean","ageRanges","genders","seasons","loadMoreItems","nextVisibleCount","IntersectionObserver","entry","isIntersecting","threshold","observe","handleItemFeedback","handleScroll","scrollHeight","scrollTop","clientHeight","refreshTrendingItems","toLocaleTimeString","CategorySelector","cat","includeAll","gen","onScroll","GridLayout","Suspense","fallback","handleAddToWishlist","handleAddToCart","handleTryOn","onAddToDressingRoom","collectionId","handleAddToCollection","onOutfitSuggestions","handleQuickView","ref"],"sourceRoot":""}
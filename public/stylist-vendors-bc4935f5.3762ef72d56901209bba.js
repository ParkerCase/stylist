"use strict";(self.webpackChunkStylistWidget=self.webpackChunkStylistWidget||[]).push([[9542],{2171:function(n,t,e){e.d(t,{V:function(){return o}});var s=e(75694),i=e(27575);class o{constructor(n,t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,e)=>t[0]+n[e]+t[1]));const o=n.length,u=(0,i.b)(o),a=t.map((n=>n[0])).join(","),c=t.map(((t,e)=>t[0]+n[e])).join(","),r=(0,s.Jp)("rc",o),l=(0,s.Jp)("source",o),d=`${r[o-1]} < ${this.outputShape[o-1]}`,$=1===o?"source":`vec2(${l.slice(-2).join()})`,h="reflect"===e?0:1;let p="";if(1===o){const n=`\n        ${u} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${h};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${h};\n        }\n        source -= start;\n      `;p=`\n        ${u} rc = outputLoc;\n        ${n}\n        result[0] = getChannel(getX(${l.join()}), ${$});\n        ${r[o-1]} += 1;\n        if(${d}) {\n          ${n}\n          result[1] = getChannel(getX(${l.join()}), ${$});\n        }\n      `}else{const n=`\n        ${u} source = rc;\n        ${u} lt = ${u}(lessThan(source, start));\n        ${u} gte = ${u}(greaterThanEqual(source, end));\n        ${u} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${h}) +\n                gte * ((end - 1) * 2 - source + ${h});\n        source -= start;\n      `;p=`\n        ${u} rc = outputLoc;\n        ${n}\n        result[0] = getChannel(getX(${l.join()}), ${$});\n        ${r[o-1]} += 1;\n        if(${d}) {\n          ${n}\n          result[1] = getChannel(getX(${l.join()}), ${$});\n        }\n        rc = outputLoc;\n        ${r[o-2]} += 1;\n        if(${r[o-2]} < ${this.outputShape[o-2]}) {\n          ${n}\n          result[2] = getChannel(getX(${l.join()}), ${$});\n          ${r[o-1]} += 1;\n          if(${d}) {\n            ${n}\n            result[3] = getChannel(getX(${l.join()}), ${$});\n          }\n        }\n      `}this.userCode=`\n      const ${u} start = ${u}(${a});\n      const ${u} end = ${u}(${c});\n\n      void main() {\n        ${u} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}},26608:function(n,t,e){e.d(t,{O:function(){return s}});class s{constructor(n,t,e){this.variableNames=["probs"],this.outputShape=[n,e],this.userCode=`\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}getCustomSetupFunc(n){return(t,e)=>{null==this.seedLoc&&(this.seedLoc=t.getUniformLocation(e,"seed")),t.gl.uniform1f(this.seedLoc,n)}}}},51554:function(n,t,e){e.d(t,{X:function(){return i}});var s=e(27575);class i{constructor(n,t,e){this.variableNames=["x"],this.outputShape=t.map(((t,e)=>t[0]+n[e]+t[1]));const i=n.length,o=(0,s.b)(i),u=t.map((n=>n[0])).join(","),a=t.map(((t,e)=>t[0]+n[e])).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),r="reflect"===e?0:1;this.userCode=1!==i?`\n      ${o} start = ${o}(${u});\n      ${o} end = ${o}(${a});\n\n      void main() {\n        ${o} outC = getOutputCoords();\n        for (int i = 0; i < ${i}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${r};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${r};\n          }\n        }\n        ${o} coords = outC - start;\n        setOutput(getX(${c}));\n      }\n    `:`\n        int start = ${u};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${r};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${r};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}},63288:function(n,t,e){e.d(t,{P:function(){return s}});class s{constructor(n,t,e,s=!1,i=!1,o=!1,u=null,a=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;const r=s?n[1]:n[2],l=Math.ceil(r/2),d=s?"i * 2, rc.y":"rc.y, i * 2",$=i?"rc.z, i * 2":"i * 2, rc.z",h=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let f="",v="";u&&(f=a?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${u}\n        }`:c?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${u}\n        }`:`vec4 activation(vec4 x) {\n          ${u}\n        }`,v="result = activation(result);");const g=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let b="rc.x",x="rc.x";n[0]<t[0]?b=`int(min(float(rc.x), ${n[0]-1}.))`:t[0]<n[0]&&(x=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`\n      ${f}\n\n      const float sharedDimension = ${l}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${l}; i++) {\n          int batchA = ${b};\n          int batchB = ${x};\n          vec4 a = getMatrixA(batchA, ${d});\n          vec4 b = getMatrixB(batchB, ${$});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${h[0]} * ${p[0]});\n          result += (${h[1]} * ${p[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${g}\n\n        ${v}\n\n        setOutput(result);\n      }\n    `}}},89486:function(n,t,e){e.d(t,{C:function(){return i}});var s=e(9495);class i{constructor(n,t){this.variableNames=["x"];const{windowSize:e,batchSize:i,inSize:o,outSize:u}=n;this.outputShape=[i,u];const a=4*Math.floor(e/4),c=e%4;let r="sumValue += dot(values, ones);";if(null!=t){const n=1/t;r=`sumValue += dot(values * ${s.util.isInt(n)?n.toPrecision(2):n}, ones);`}let l="";o%e>0&&(l=`\n        if (inIdx < 0 || inIdx >= ${o}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${l}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${e};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${r}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===c}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${r}\n        } else if (${2===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${r}\n        } else if (${3===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${r}\n        }\n        setOutput(sumValue);\n      }\n    `}}},94804:function(n,t,e){e.d(t,{M:function(){return s}});class s{constructor(n,t,e,s){this.variableNames=["indices"],this.outputShape=[n,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${s}), float(${e}),\n                      float(index == coords.y)));\n      }\n    `}}}}]);
//# sourceMappingURL=stylist-vendors-bc4935f5.3762ef72d56901209bba.js.map
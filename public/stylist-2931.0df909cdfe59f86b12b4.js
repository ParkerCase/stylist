"use strict";(self.webpackChunkStylistWidget=self.webpackChunkStylistWidget||[]).push([[2931],{62931:function(t,e,r){r.r(e),r.d(e,{purchaseTrackingService:function(){return o}});var a=function(t,e,r,a){return new(r||(r=Promise))((function(c,o){function n(t){try{i(a.next(t))}catch(e){o(e)}}function s(t){try{i(a.throw(t))}catch(e){o(e)}}function i(t){var e;t.done?c(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,s)}i((a=a.apply(t,e||[])).next())}))};const c="stylist_purchase_tracking",o={trackPurchase(t){return a(this,void 0,void 0,(function*(){try{const e=yield this.savePurchaseToAPI(t);return this.savePurchaseToLocalStorage(t),e}catch(e){return this.savePurchaseToLocalStorage(t),!1}}))},savePurchaseToAPI(t){return a(this,void 0,void 0,(function*(){try{const e=yield fetch("/api/trackPurchase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`API error: ${e.status}`);return!0}catch(e){return!1}}))},savePurchaseToLocalStorage(t){try{const e=this.getPurchasesFromLocalStorage();e.push(t),localStorage.setItem(c,JSON.stringify(e))}catch(e){}},getPurchasesFromLocalStorage(){try{const t=localStorage.getItem(c);return t?JSON.parse(t):[]}catch(t){return[]}},clearPurchasesFromLocalStorage(){try{localStorage.removeItem(c)}catch(t){}}};e.default=o}}]);
//# sourceMappingURL=stylist-2931.0df909cdfe59f86b12b4.js.map